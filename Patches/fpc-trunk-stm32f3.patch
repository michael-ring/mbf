diff -Naur fpc-save/compiler/arm/cpuinfo.pas fpc/compiler/arm/cpuinfo.pas
--- fpc-save/compiler/arm/cpuinfo.pas	2018-03-02 16:49:39.000000000 +0100
+++ fpc/compiler/arm/cpuinfo.pas	2018-03-02 19:38:33.000000000 +0100
@@ -256,6 +256,84 @@
       ct_stm32f107rc,
       ct_stm32f107vb,
       ct_stm32f107vc,
+
+      { STMicroelectronics F3 }
+      ct_stm32f301c6,
+      ct_stm32f301c8,
+      ct_stm32f301k6,
+      ct_stm32f301k8,
+      ct_stm32f301r6,
+      ct_stm32f301r8,
+      ct_stm32f302c6,
+      ct_stm32f302c8,
+      ct_stm32f302cb,
+      ct_stm32f302cc,
+      ct_stm32f302k6,
+      ct_stm32f302k8,
+      ct_stm32f302r6,
+      ct_stm32f302r8,
+      ct_stm32f302rb,
+      ct_stm32f302rc,
+      ct_stm32f302rd,
+      ct_stm32f302re,
+      ct_stm32f302vb,
+      ct_stm32f302vc,
+      ct_stm32f302vd,
+      ct_stm32f302ve,
+      ct_stm32f302zd,
+      ct_stm32f302ze,
+      ct_stm32f303c6,
+      ct_stm32f303c8,
+      ct_stm32f303cb,
+      ct_stm32f303cc,
+      ct_stm32f303k6,
+      ct_stm32f303k8,
+      ct_stm32f303r6,
+      ct_stm32f303r8,
+      ct_stm32f303rb,
+      ct_stm32f303rc,
+      ct_stm32f303rd,
+      ct_stm32f303re,
+      ct_stm32f303vb,
+      ct_stm32f303vc,
+      ct_stm32f303vd,
+      ct_stm32f303ve,
+      ct_stm32f303zd,
+      ct_stm32f303ze,
+      ct_stm32f318c8,
+      ct_stm32f318k8,
+      ct_stm32f328c8,
+      ct_stm32f334c4,
+      ct_stm32f334c6,
+      ct_stm32f334c8,
+      ct_stm32f334k4,
+      ct_stm32f334k6,
+      ct_stm32f334k8,
+      ct_stm32f334r6,
+      ct_stm32f334r8,
+      ct_stm32f358cc,
+      ct_stm32f358rc,
+      ct_stm32f358vc,
+      ct_stm32f373c8,
+      ct_stm32f373cb,
+      ct_stm32f373cc,
+      ct_stm32f373r8,
+      ct_stm32f373rb,
+      ct_stm32f373rc,
+      ct_stm32f373v8,
+      ct_stm32f373vb,
+      ct_stm32f373vc,
+      ct_stm32f378cc,
+      ct_stm32f378rc,
+      ct_stm32f378vc,
+      ct_stm32f398ve,
+      ct_nucleof303k8,
+      ct_nucleof302r8,
+      ct_nucleof303re,
+      ct_nucleof334r8,
+      ct_nucleof303ze,
+      ct_stm32f3348discovery,
+      ct_stm32f3discovery,
       
       ct_stm32f401cb,
       ct_stm32f401rb,
@@ -772,6 +850,84 @@
       (controllertypestr:'STM32F107RC';     controllerunitstr:'STM32F10X_CL';     cputype:cpu_armv7m; fputype:fpu_soft; flashbase:$08000000; flashsize:$00040000; srambase:$20000000; sramsize:$00010000),
       (controllertypestr:'STM32F107VB';     controllerunitstr:'STM32F10X_CL';     cputype:cpu_armv7m; fputype:fpu_soft; flashbase:$08000000; flashsize:$00020000; srambase:$20000000; sramsize:$00010000),
       (controllertypestr:'STM32F107VC';     controllerunitstr:'STM32F10X_CL';     cputype:cpu_armv7m; fputype:fpu_soft; flashbase:$08000000; flashsize:$00040000; srambase:$20000000; sramsize:$00010000),
+
+      { STM32F3xx Family }
+      (controllertypestr:'STM32F301C6'         ;controllerunitstr:'STM32F301X8'  ; cputype:cpu_armv7em; fputype:fpu_soft; flashbase:$08000000; flashsize:$00010000; srambase:$20000000; sramsize:$00004000),
+      (controllertypestr:'STM32F301C8'         ;controllerunitstr:'STM32F301X8'  ; cputype:cpu_armv7em; fputype:fpu_soft; flashbase:$08000000; flashsize:$00010000; srambase:$20000000; sramsize:$00004000),
+      (controllertypestr:'STM32F301K6'         ;controllerunitstr:'STM32F301X8'  ; cputype:cpu_armv7em; fputype:fpu_soft; flashbase:$08000000; flashsize:$00010000; srambase:$20000000; sramsize:$00004000),
+      (controllertypestr:'STM32F301K8'         ;controllerunitstr:'STM32F301X8'  ; cputype:cpu_armv7em; fputype:fpu_soft; flashbase:$08000000; flashsize:$00010000; srambase:$20000000; sramsize:$00004000),
+      (controllertypestr:'STM32F301R6'         ;controllerunitstr:'STM32F301X8'  ; cputype:cpu_armv7em; fputype:fpu_soft; flashbase:$08000000; flashsize:$00010000; srambase:$20000000; sramsize:$00004000),
+      (controllertypestr:'STM32F301R8'         ;controllerunitstr:'STM32F301X8'  ; cputype:cpu_armv7em; fputype:fpu_soft; flashbase:$08000000; flashsize:$00010000; srambase:$20000000; sramsize:$00004000),
+      (controllertypestr:'STM32F302C6'         ;controllerunitstr:'STM32F302X8'  ; cputype:cpu_armv7em; fputype:fpu_soft; flashbase:$08000000; flashsize:$00010000; srambase:$20000000; sramsize:$00004000),
+      (controllertypestr:'STM32F302C8'         ;controllerunitstr:'STM32F302X8'  ; cputype:cpu_armv7em; fputype:fpu_soft; flashbase:$08000000; flashsize:$00010000; srambase:$20000000; sramsize:$00004000),
+      (controllertypestr:'STM32F302CB'         ;controllerunitstr:'STM32F302XC'  ; cputype:cpu_armv7em; fputype:fpu_soft; flashbase:$08000000; flashsize:$00040000; srambase:$20000000; sramsize:$0000A000),
+      (controllertypestr:'STM32F302CC'         ;controllerunitstr:'STM32F302XC'  ; cputype:cpu_armv7em; fputype:fpu_soft; flashbase:$08000000; flashsize:$00040000; srambase:$20000000; sramsize:$0000A000),
+      (controllertypestr:'STM32F302K6'         ;controllerunitstr:'STM32F302X8'  ; cputype:cpu_armv7em; fputype:fpu_soft; flashbase:$08000000; flashsize:$00010000; srambase:$20000000; sramsize:$00004000),
+      (controllertypestr:'STM32F302K8'         ;controllerunitstr:'STM32F302X8'  ; cputype:cpu_armv7em; fputype:fpu_soft; flashbase:$08000000; flashsize:$00010000; srambase:$20000000; sramsize:$00004000),
+      (controllertypestr:'STM32F302R6'         ;controllerunitstr:'STM32F302X8'  ; cputype:cpu_armv7em; fputype:fpu_soft; flashbase:$08000000; flashsize:$00010000; srambase:$20000000; sramsize:$00004000),
+      (controllertypestr:'STM32F302R8'         ;controllerunitstr:'STM32F302X8'  ; cputype:cpu_armv7em; fputype:fpu_soft; flashbase:$08000000; flashsize:$00010000; srambase:$20000000; sramsize:$00004000),
+      (controllertypestr:'STM32F302RB'         ;controllerunitstr:'STM32F302XC'  ; cputype:cpu_armv7em; fputype:fpu_soft; flashbase:$08000000; flashsize:$00040000; srambase:$20000000; sramsize:$0000A000),
+      (controllertypestr:'STM32F302RC'         ;controllerunitstr:'STM32F302XC'  ; cputype:cpu_armv7em; fputype:fpu_soft; flashbase:$08000000; flashsize:$00040000; srambase:$20000000; sramsize:$0000A000),
+      (controllertypestr:'STM32F302RD'         ;controllerunitstr:'STM32F302XE'  ; cputype:cpu_armv7em; fputype:fpu_soft; flashbase:$08000000; flashsize:$00080000; srambase:$20000000; sramsize:$00010000),
+      (controllertypestr:'STM32F302RE'         ;controllerunitstr:'STM32F302XE'  ; cputype:cpu_armv7em; fputype:fpu_soft; flashbase:$08000000; flashsize:$00080000; srambase:$20000000; sramsize:$00010000),
+      (controllertypestr:'STM32F302VB'         ;controllerunitstr:'STM32F302XC'  ; cputype:cpu_armv7em; fputype:fpu_soft; flashbase:$08000000; flashsize:$00040000; srambase:$20000000; sramsize:$0000A000),
+      (controllertypestr:'STM32F302VC'         ;controllerunitstr:'STM32F302XC'  ; cputype:cpu_armv7em; fputype:fpu_soft; flashbase:$08000000; flashsize:$00040000; srambase:$20000000; sramsize:$0000A000),
+      (controllertypestr:'STM32F302VD'         ;controllerunitstr:'STM32F302XE'  ; cputype:cpu_armv7em; fputype:fpu_soft; flashbase:$08000000; flashsize:$00080000; srambase:$20000000; sramsize:$00010000),
+      (controllertypestr:'STM32F302VE'         ;controllerunitstr:'STM32F302XE'  ; cputype:cpu_armv7em; fputype:fpu_soft; flashbase:$08000000; flashsize:$00080000; srambase:$20000000; sramsize:$00010000),
+      (controllertypestr:'STM32F302ZD'         ;controllerunitstr:'STM32F302XE'  ; cputype:cpu_armv7em; fputype:fpu_soft; flashbase:$08000000; flashsize:$00080000; srambase:$20000000; sramsize:$00010000),
+      (controllertypestr:'STM32F302ZE'         ;controllerunitstr:'STM32F302XE'  ; cputype:cpu_armv7em; fputype:fpu_soft; flashbase:$08000000; flashsize:$00080000; srambase:$20000000; sramsize:$00010000),
+      (controllertypestr:'STM32F303C6'         ;controllerunitstr:'STM32F303X8'  ; cputype:cpu_armv7em; fputype:fpu_soft; flashbase:$08000000; flashsize:$00010000; srambase:$20000000; sramsize:$00003000),
+      (controllertypestr:'STM32F303C8'         ;controllerunitstr:'STM32F303X8'  ; cputype:cpu_armv7em; fputype:fpu_soft; flashbase:$08000000; flashsize:$00010000; srambase:$20000000; sramsize:$00003000),
+      (controllertypestr:'STM32F303CB'         ;controllerunitstr:'STM32F303XC'  ; cputype:cpu_armv7em; fputype:fpu_soft; flashbase:$08000000; flashsize:$00040000; srambase:$20000000; sramsize:$0000A000),
+      (controllertypestr:'STM32F303CC'         ;controllerunitstr:'STM32F303XC'  ; cputype:cpu_armv7em; fputype:fpu_soft; flashbase:$08000000; flashsize:$00040000; srambase:$20000000; sramsize:$0000A000),
+      (controllertypestr:'STM32F303K6'         ;controllerunitstr:'STM32F303X8'  ; cputype:cpu_armv7em; fputype:fpu_soft; flashbase:$08000000; flashsize:$00010000; srambase:$20000000; sramsize:$00003000),
+      (controllertypestr:'STM32F303K8'         ;controllerunitstr:'STM32F303X8'  ; cputype:cpu_armv7em; fputype:fpu_soft; flashbase:$08000000; flashsize:$00010000; srambase:$20000000; sramsize:$00003000),
+      (controllertypestr:'STM32F303R6'         ;controllerunitstr:'STM32F303X8'  ; cputype:cpu_armv7em; fputype:fpu_soft; flashbase:$08000000; flashsize:$00010000; srambase:$20000000; sramsize:$00003000),
+      (controllertypestr:'STM32F303R8'         ;controllerunitstr:'STM32F303X8'  ; cputype:cpu_armv7em; fputype:fpu_soft; flashbase:$08000000; flashsize:$00010000; srambase:$20000000; sramsize:$00003000),
+      (controllertypestr:'STM32F303RB'         ;controllerunitstr:'STM32F303XC'  ; cputype:cpu_armv7em; fputype:fpu_soft; flashbase:$08000000; flashsize:$00040000; srambase:$20000000; sramsize:$0000A000),
+      (controllertypestr:'STM32F303RC'         ;controllerunitstr:'STM32F303XC'  ; cputype:cpu_armv7em; fputype:fpu_soft; flashbase:$08000000; flashsize:$00040000; srambase:$20000000; sramsize:$0000A000),
+      (controllertypestr:'STM32F303RD'         ;controllerunitstr:'STM32F303XE'  ; cputype:cpu_armv7em; fputype:fpu_soft; flashbase:$08000000; flashsize:$00080000; srambase:$20000000; sramsize:$00010000),
+      (controllertypestr:'STM32F303RE'         ;controllerunitstr:'STM32F303XE'  ; cputype:cpu_armv7em; fputype:fpu_soft; flashbase:$08000000; flashsize:$00080000; srambase:$20000000; sramsize:$00010000),
+      (controllertypestr:'STM32F303VB'         ;controllerunitstr:'STM32F303XC'  ; cputype:cpu_armv7em; fputype:fpu_soft; flashbase:$08000000; flashsize:$00040000; srambase:$20000000; sramsize:$0000A000),
+      (controllertypestr:'STM32F303VC'         ;controllerunitstr:'STM32F303XC'  ; cputype:cpu_armv7em; fputype:fpu_soft; flashbase:$08000000; flashsize:$00040000; srambase:$20000000; sramsize:$0000A000),
+      (controllertypestr:'STM32F303VD'         ;controllerunitstr:'STM32F303XE'  ; cputype:cpu_armv7em; fputype:fpu_soft; flashbase:$08000000; flashsize:$00080000; srambase:$20000000; sramsize:$00010000),
+      (controllertypestr:'STM32F303VE'         ;controllerunitstr:'STM32F303XE'  ; cputype:cpu_armv7em; fputype:fpu_soft; flashbase:$08000000; flashsize:$00080000; srambase:$20000000; sramsize:$00010000),
+      (controllertypestr:'STM32F303ZD'         ;controllerunitstr:'STM32F303XE'  ; cputype:cpu_armv7em; fputype:fpu_soft; flashbase:$08000000; flashsize:$00080000; srambase:$20000000; sramsize:$00010000),
+      (controllertypestr:'STM32F303ZE'         ;controllerunitstr:'STM32F303XE'  ; cputype:cpu_armv7em; fputype:fpu_soft; flashbase:$08000000; flashsize:$00080000; srambase:$20000000; sramsize:$00010000),
+      (controllertypestr:'STM32F318C8'         ;controllerunitstr:'STM32F318XX'  ; cputype:cpu_armv7em; fputype:fpu_soft; flashbase:$08000000; flashsize:$00010000; srambase:$20000000; sramsize:$00004000),
+      (controllertypestr:'STM32F318K8'         ;controllerunitstr:'STM32F318XX'  ; cputype:cpu_armv7em; fputype:fpu_soft; flashbase:$08000000; flashsize:$00010000; srambase:$20000000; sramsize:$00004000),
+      (controllertypestr:'STM32F328C8'         ;controllerunitstr:'STM32F328XX'  ; cputype:cpu_armv7em; fputype:fpu_soft; flashbase:$08000000; flashsize:$00010000; srambase:$20000000; sramsize:$00003000),
+      (controllertypestr:'STM32F334C4'         ;controllerunitstr:'STM32F334X8'  ; cputype:cpu_armv7em; fputype:fpu_soft; flashbase:$08000000; flashsize:$00010000; srambase:$20000000; sramsize:$00003000),
+      (controllertypestr:'STM32F334C6'         ;controllerunitstr:'STM32F334X8'  ; cputype:cpu_armv7em; fputype:fpu_soft; flashbase:$08000000; flashsize:$00010000; srambase:$20000000; sramsize:$00003000),
+      (controllertypestr:'STM32F334C8'         ;controllerunitstr:'STM32F334X8'  ; cputype:cpu_armv7em; fputype:fpu_soft; flashbase:$08000000; flashsize:$00010000; srambase:$20000000; sramsize:$00003000),
+      (controllertypestr:'STM32F334K4'         ;controllerunitstr:'STM32F334X8'  ; cputype:cpu_armv7em; fputype:fpu_soft; flashbase:$08000000; flashsize:$00010000; srambase:$20000000; sramsize:$00003000),
+      (controllertypestr:'STM32F334K6'         ;controllerunitstr:'STM32F334X8'  ; cputype:cpu_armv7em; fputype:fpu_soft; flashbase:$08000000; flashsize:$00010000; srambase:$20000000; sramsize:$00003000),
+      (controllertypestr:'STM32F334K8'         ;controllerunitstr:'STM32F334X8'  ; cputype:cpu_armv7em; fputype:fpu_soft; flashbase:$08000000; flashsize:$00010000; srambase:$20000000; sramsize:$00003000),
+      (controllertypestr:'STM32F334R6'         ;controllerunitstr:'STM32F334X8'  ; cputype:cpu_armv7em; fputype:fpu_soft; flashbase:$08000000; flashsize:$00010000; srambase:$20000000; sramsize:$00003000),
+      (controllertypestr:'STM32F334R8'         ;controllerunitstr:'STM32F334X8'  ; cputype:cpu_armv7em; fputype:fpu_soft; flashbase:$08000000; flashsize:$00010000; srambase:$20000000; sramsize:$00003000),
+      (controllertypestr:'STM32F358CC'         ;controllerunitstr:'STM32F358XX'  ; cputype:cpu_armv7em; fputype:fpu_soft; flashbase:$08000000; flashsize:$00040000; srambase:$20000000; sramsize:$0000A000),
+      (controllertypestr:'STM32F358RC'         ;controllerunitstr:'STM32F358XX'  ; cputype:cpu_armv7em; fputype:fpu_soft; flashbase:$08000000; flashsize:$00040000; srambase:$20000000; sramsize:$0000A000),
+      (controllertypestr:'STM32F358VC'         ;controllerunitstr:'STM32F358XX'  ; cputype:cpu_armv7em; fputype:fpu_soft; flashbase:$08000000; flashsize:$00040000; srambase:$20000000; sramsize:$0000A000),
+      (controllertypestr:'STM32F373C8'         ;controllerunitstr:'STM32F373XC'  ; cputype:cpu_armv7em; fputype:fpu_soft; flashbase:$08000000; flashsize:$00040000; srambase:$20000000; sramsize:$00008000),
+      (controllertypestr:'STM32F373CB'         ;controllerunitstr:'STM32F373XC'  ; cputype:cpu_armv7em; fputype:fpu_soft; flashbase:$08000000; flashsize:$00040000; srambase:$20000000; sramsize:$00008000),
+      (controllertypestr:'STM32F373CC'         ;controllerunitstr:'STM32F373XC'  ; cputype:cpu_armv7em; fputype:fpu_soft; flashbase:$08000000; flashsize:$00040000; srambase:$20000000; sramsize:$00008000),
+      (controllertypestr:'STM32F373R8'         ;controllerunitstr:'STM32F373XC'  ; cputype:cpu_armv7em; fputype:fpu_soft; flashbase:$08000000; flashsize:$00040000; srambase:$20000000; sramsize:$00008000),
+      (controllertypestr:'STM32F373RB'         ;controllerunitstr:'STM32F373XC'  ; cputype:cpu_armv7em; fputype:fpu_soft; flashbase:$08000000; flashsize:$00040000; srambase:$20000000; sramsize:$00008000),
+      (controllertypestr:'STM32F373RC'         ;controllerunitstr:'STM32F373XC'  ; cputype:cpu_armv7em; fputype:fpu_soft; flashbase:$08000000; flashsize:$00040000; srambase:$20000000; sramsize:$00008000),
+      (controllertypestr:'STM32F373V8'         ;controllerunitstr:'STM32F373XC'  ; cputype:cpu_armv7em; fputype:fpu_soft; flashbase:$08000000; flashsize:$00040000; srambase:$20000000; sramsize:$00008000),
+      (controllertypestr:'STM32F373VB'         ;controllerunitstr:'STM32F373XC'  ; cputype:cpu_armv7em; fputype:fpu_soft; flashbase:$08000000; flashsize:$00040000; srambase:$20000000; sramsize:$00008000),
+      (controllertypestr:'STM32F373VC'         ;controllerunitstr:'STM32F373XC'  ; cputype:cpu_armv7em; fputype:fpu_soft; flashbase:$08000000; flashsize:$00040000; srambase:$20000000; sramsize:$00008000),
+      (controllertypestr:'STM32F378CC'         ;controllerunitstr:'STM32F378XX'  ; cputype:cpu_armv7em; fputype:fpu_soft; flashbase:$08000000; flashsize:$00040000; srambase:$20000000; sramsize:$00008000),
+      (controllertypestr:'STM32F378RC'         ;controllerunitstr:'STM32F378XX'  ; cputype:cpu_armv7em; fputype:fpu_soft; flashbase:$08000000; flashsize:$00040000; srambase:$20000000; sramsize:$00008000),
+      (controllertypestr:'STM32F378VC'         ;controllerunitstr:'STM32F378XX'  ; cputype:cpu_armv7em; fputype:fpu_soft; flashbase:$08000000; flashsize:$00040000; srambase:$20000000; sramsize:$00008000),
+      (controllertypestr:'STM32F398VE'         ;controllerunitstr:'STM32F398XX'  ; cputype:cpu_armv7em; fputype:fpu_soft; flashbase:$08000000; flashsize:$00080000; srambase:$20000000; sramsize:$00010000),
+      (controllertypestr:'NUCLEOF303K8'         ;controllerunitstr:'STM32F303X8'  ; cputype:cpu_armv7em; fputype:fpu_soft; flashbase:$08000000; flashsize:$00010000; srambase:$20000000; sramsize:$00003000),
+      (controllertypestr:'NUCLEOF302R8'         ;controllerunitstr:'STM32F302X8'  ; cputype:cpu_armv7em; fputype:fpu_soft; flashbase:$08000000; flashsize:$00010000; srambase:$20000000; sramsize:$00004000),
+      (controllertypestr:'NUCLEOF303RE'         ;controllerunitstr:'STM32F303XE'  ; cputype:cpu_armv7em; fputype:fpu_soft; flashbase:$08000000; flashsize:$00080000; srambase:$20000000; sramsize:$00010000),
+      (controllertypestr:'NUCLEOF334R8'         ;controllerunitstr:'STM32F334X8'  ; cputype:cpu_armv7em; fputype:fpu_soft; flashbase:$08000000; flashsize:$00010000; srambase:$20000000; sramsize:$00003000),
+      (controllertypestr:'NUCLEOF303ZE'         ;controllerunitstr:'STM32F303XE'  ; cputype:cpu_armv7em; fputype:fpu_soft; flashbase:$08000000; flashsize:$00080000; srambase:$20000000; sramsize:$00010000),
+      (controllertypestr:'STM32F3348DISCOVERY'         ;controllerunitstr:'STM32F334X8'  ; cputype:cpu_armv7em; fputype:fpu_soft; flashbase:$08000000; flashsize:$00010000; srambase:$20000000; sramsize:$00003000),
+      (controllertypestr:'STM32F3DISCOVERY'         ;controllerunitstr:'STM32F303XC'  ; cputype:cpu_armv7em; fputype:fpu_soft; flashbase:$08000000; flashsize:$00040000; srambase:$20000000; sramsize:$0000A000),
     
       (controllertypestr:'STM32F401CB';     controllerunitstr:'STM32F401XX';      cputype:cpu_armv7em; fputype:fpu_soft; flashbase:$08000000; flashsize:$00020000; srambase:$20000000; sramsize:$00010000),
       (controllertypestr:'STM32F401RB';     controllerunitstr:'STM32F401XX';      cputype:cpu_armv7em; fputype:fpu_soft; flashbase:$08000000; flashsize:$00020000; srambase:$20000000; sramsize:$00010000),
diff -Naur fpc-save/compiler/systems/t_embed.pas fpc/compiler/systems/t_embed.pas
--- fpc-save/compiler/systems/t_embed.pas	2018-03-02 16:49:40.000000000 +0100
+++ fpc/compiler/systems/t_embed.pas	2018-03-02 17:13:19.000000000 +0100
@@ -401,6 +401,84 @@
       ct_stm32f107rc,
       ct_stm32f107vb,
       ct_stm32f107vc,
+
+      { STMicroelectronics F3 }
+      ct_stm32f301c6,
+      ct_stm32f301c8,
+      ct_stm32f301k6,
+      ct_stm32f301k8,
+      ct_stm32f301r6,
+      ct_stm32f301r8,
+      ct_stm32f302c6,
+      ct_stm32f302c8,
+      ct_stm32f302cb,
+      ct_stm32f302cc,
+      ct_stm32f302k6,
+      ct_stm32f302k8,
+      ct_stm32f302r6,
+      ct_stm32f302r8,
+      ct_stm32f302rb,
+      ct_stm32f302rc,
+      ct_stm32f302rd,
+      ct_stm32f302re,
+      ct_stm32f302vb,
+      ct_stm32f302vc,
+      ct_stm32f302vd,
+      ct_stm32f302ve,
+      ct_stm32f302zd,
+      ct_stm32f302ze,
+      ct_stm32f303c6,
+      ct_stm32f303c8,
+      ct_stm32f303cb,
+      ct_stm32f303cc,
+      ct_stm32f303k6,
+      ct_stm32f303k8,
+      ct_stm32f303r6,
+      ct_stm32f303r8,
+      ct_stm32f303rb,
+      ct_stm32f303rc,
+      ct_stm32f303rd,
+      ct_stm32f303re,
+      ct_stm32f303vb,
+      ct_stm32f303vc,
+      ct_stm32f303vd,
+      ct_stm32f303ve,
+      ct_stm32f303zd,
+      ct_stm32f303ze,
+      ct_stm32f318c8,
+      ct_stm32f318k8,
+      ct_stm32f328c8,
+      ct_stm32f334c4,
+      ct_stm32f334c6,
+      ct_stm32f334c8,
+      ct_stm32f334k4,
+      ct_stm32f334k6,
+      ct_stm32f334k8,
+      ct_stm32f334r6,
+      ct_stm32f334r8,
+      ct_stm32f358cc,
+      ct_stm32f358rc,
+      ct_stm32f358vc,
+      ct_stm32f373c8,
+      ct_stm32f373cb,
+      ct_stm32f373cc,
+      ct_stm32f373r8,
+      ct_stm32f373rb,
+      ct_stm32f373rc,
+      ct_stm32f373v8,
+      ct_stm32f373vb,
+      ct_stm32f373vc,
+      ct_stm32f378cc,
+      ct_stm32f378rc,
+      ct_stm32f378vc,
+      ct_stm32f398ve,
+      ct_nucleof303k8,
+      ct_nucleof302r8,
+      ct_nucleof303re,
+      ct_nucleof334r8,
+      ct_nucleof303ze,
+      ct_stm32f3348discovery,
+      ct_stm32f3discovery,
       
       ct_stm32f401cb,
       ct_stm32f401rb,
diff -Naur fpc-save/rtl/embedded/Makefile fpc/rtl/embedded/Makefile
--- fpc-save/rtl/embedded/Makefile	2018-03-02 16:58:52.000000000 +0100
+++ fpc/rtl/embedded/Makefile	2018-03-02 17:11:55.000000000 +0100
@@ -363,6 +363,7 @@
 endif
 ifeq ($(SUBARCH),armv7em)
 CPU_UNITS=lm4f120 xmc4500 mk20d5 mk20d7 mk22f51212 mk64f12 stm32f401xx stm32f407xx stm32f411xe stm32f429xx stm32f446xx stm32f745 stm32f746 stm32f756 nrf52 cortexm3 cortexm4 cortexm7 # thumb2_bare
+CPU_UNITS+=stm32f301x8 stm32f302x8 stm32f302xc stm32f302xe stm32f303x8 stm32f303xc stm32f303xe stm32f318xx stm32f328xx stm32f334x8 stm32f358xx stm32f373xc stm32f378xx stm32f398xx
 CPU_UNITS_DEFINED=1
 endif
 ifeq ($(SUBARCH),armv4t)
diff -Naur fpc-save/rtl/embedded/Makefile.fpc fpc/rtl/embedded/Makefile.fpc
--- fpc-save/rtl/embedded/Makefile.fpc	2018-03-02 16:58:56.000000000 +0100
+++ fpc/rtl/embedded/Makefile.fpc	2018-03-02 17:12:13.000000000 +0100
@@ -76,6 +76,7 @@
 endif
 ifeq ($(SUBARCH),armv7em)
 CPU_UNITS=lm4f120 xmc4500 mk20d5 mk20d7 mk22f51212 mk64f12 stm32f401xx stm32f407xx stm32f411xe stm32f429xx stm32f446xx stm32f745 stm32f746 stm32f756 nrf52 cortexm3 cortexm4 cortexm7 # thumb2_bare
+CPU_UNITS+=stm32f301x8 stm32f302x8 stm32f302xc stm32f302xe stm32f303x8 stm32f303xc stm32f303xe stm32f318xx stm32f328xx stm32f334x8 stm32f358xx stm32f373xc stm32f378xx stm32f398xx
 CPU_UNITS_DEFINED=1
 endif
 ifeq ($(SUBARCH),armv4t)
diff -Naur fpc-save/rtl/embedded/arm/stm32f301x8.pp fpc/rtl/embedded/arm/stm32f301x8.pp
--- fpc-save/rtl/embedded/arm/stm32f301x8.pp	1970-01-01 01:00:00.000000000 +0100
+++ fpc/rtl/embedded/arm/stm32f301x8.pp	2018-03-02 17:06:31.000000000 +0100
@@ -0,0 +1,814 @@
+unit stm32f301x8;
+interface
+{$PACKRECORDS C}
+{$GOTO ON}
+// *
+// ******************************************************************************
+// * @file    stm32f301x8.h
+// * @author  MCD Application Team
+//   CMSIS STM32F301x8 Devices Peripheral Access Layer Header File.
+// *
+// *          This file contains:
+// *           - Data structures and the address mapping for all peripherals
+// *           - Peripheral's registers declarations and bits definition
+// *           - Macros to access peripheral’s registers hardware
+// *
+// ******************************************************************************
+// * @attention
+// *
+// * <h2><center>&copy; COPYRIGHT(c) 2016 STMicroelectronics</center></h2>
+// *
+// * Redistribution and use in source and binary forms, with or without modification,
+// * are permitted provided that the following conditions are met:
+// *   1. Redistributions of source code must retain the above copyright notice,
+// *      this list of conditions and the following disclaimer.
+// *   2. Redistributions in binary form must reproduce the above copyright notice,
+// *      this list of conditions and the following disclaimer in the documentation
+// *      and/or other materials provided with the distribution.
+// *   3. Neither the name of STMicroelectronics nor the names of its contributors
+// *      may be used to endorse or promote products derived from this software
+// *      without specific prior written permission.
+// *
+// * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
+// * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
+// * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+// * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE
+// * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
+// * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
+// * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER
+// * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+// * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
+// * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
+// *
+// ******************************************************************************
+// Configuration of the Cortex-M4 Processor and Core Peripherals
+// STM32F301x8 devices Interrupt Number Definition, according to the selected device
+// *        in @ref Library_configuration_section
+
+type
+  TIRQn_Enum   = (
+    NonMaskableInt_IRQn = -14,        // 2 Non Maskable Interrupt
+    HardFault_IRQn = -13,             // 3 Cortex-M4 Hard Fault Interrupt
+    MemoryManagement_IRQn = -12,      // 4 Cortex-M4 Memory Management Interrupt
+    BusFault_IRQn = -11,              // 5 Cortex-M4 Bus Fault Interrupt
+    UsageFault_IRQn = -10,            // 6 Cortex-M4 Usage Fault Interrupt
+    SVCall_IRQn = -5,                 // 11 Cortex-M4 SV Call Interrupt
+    DebugMonitor_IRQn = -4,           // 12 Cortex-M4 Debug Monitor Interrupt
+    PendSV_IRQn = -2,                 // 14 Cortex-M4 Pend SV Interrupt
+    SysTick_IRQn = -1,                // 15 Cortex-M4 System Tick Interrupt
+    WWDG_IRQn  = 0,                   // Window WatchDog Interrupt
+    PVD_IRQn   = 1,                   // PVD through EXTI Line detection Interrupt
+    TAMP_STAMP_IRQn = 2,              // Tamper and TimeStamp interrupts through the EXTI line 19
+    RTC_WKUP_IRQn = 3,                // RTC Wakeup interrupt through the EXTI line 20
+    FLASH_IRQn = 4,                   // FLASH global Interrupt
+    RCC_IRQn   = 5,                   // RCC global Interrupt
+    EXTI0_IRQn = 6,                   // EXTI Line0 Interrupt
+    EXTI1_IRQn = 7,                   // EXTI Line1 Interrupt
+    EXTI2_TSC_IRQn = 8,               // EXTI Line2 Interrupt and Touch Sense Controller Interrupt
+    EXTI3_IRQn = 9,                   // EXTI Line3 Interrupt
+    EXTI4_IRQn = 10,                  // EXTI Line4 Interrupt
+    DMA1_Channel1_IRQn = 11,          // DMA1 Channel 1 Interrupt
+    DMA1_Channel2_IRQn = 12,          // DMA1 Channel 2 Interrupt
+    DMA1_Channel3_IRQn = 13,          // DMA1 Channel 3 Interrupt
+    DMA1_Channel4_IRQn = 14,          // DMA1 Channel 4 Interrupt
+    DMA1_Channel5_IRQn = 15,          // DMA1 Channel 5 Interrupt
+    DMA1_Channel6_IRQn = 16,          // DMA1 Channel 6 Interrupt
+    DMA1_Channel7_IRQn = 17,          // DMA1 Channel 7 Interrupt
+    ADC1_IRQn  = 18,                  // ADC1 Interrupts
+    EXTI9_5_IRQn = 23,                // External Line[9:5] Interrupts
+    TIM1_BRK_TIM15_IRQn = 24,         // TIM1 Break and TIM15 Interrupts
+    TIM1_UP_TIM16_IRQn = 25,          // TIM1 Update and TIM16 Interrupts
+    TIM1_TRG_COM_TIM17_IRQn = 26,     // TIM1 Trigger and Commutation and TIM17 Interrupt
+    TIM1_CC_IRQn = 27,                // TIM1 Capture Compare Interrupt
+    TIM2_IRQn  = 28,                  // TIM2 global Interrupt
+    I2C1_EV_IRQn = 31,                // I2C1 Event Interrupt & EXTI Line23 Interrupt (I2C1 wakeup)
+    I2C1_ER_IRQn = 32,                // I2C1 Error Interrupt
+    I2C2_EV_IRQn = 33,                // I2C2 Event Interrupt & EXTI Line24 Interrupt (I2C2 wakeup)
+    I2C2_ER_IRQn = 34,                // I2C2 Error Interrupt
+    SPI2_IRQn  = 36,                  // SPI2 global Interrupt
+    USART1_IRQn = 37,                 // USART1 global Interrupt & EXTI Line25 Interrupt (USART1 wakeup)
+    USART2_IRQn = 38,                 // USART2 global Interrupt & EXTI Line26 Interrupt (USART2 wakeup)
+    USART3_IRQn = 39,                 // USART3 global Interrupt & EXTI Line28 Interrupt (USART3 wakeup)
+    EXTI15_10_IRQn = 40,              // External Line[15:10] Interrupts
+    RTC_Alarm_IRQn = 41,              // RTC Alarm (A and B) through EXTI Line 17 Interrupt
+    SPI3_IRQn  = 51,                  // SPI3 global Interrupt
+    TIM6_DAC_IRQn = 54,               // TIM6 global and DAC underrun error Interrupt
+    COMP2_IRQn = 64,                  // COMP2 global Interrupt via EXTI Line22
+    COMP4_6_IRQn = 65,                // COMP4 and COMP6 global Interrupt via EXTI Line30 and 32
+    I2C3_EV_IRQn = 72,                // I2C3 Event Interrupt & EXTI Line27 Interrupt (I2C3 wakeup)
+    I2C3_ER_IRQn = 73,                // I2C3 Error Interrupt
+    FPU_IRQn   = 81                   // Floating point Interrupt
+  );
+
+  TADC_Registers = record
+    ISR        : longword;            // ADC Interrupt and Status Register
+    IER        : longword;            // ADC Interrupt Enable Register
+    CR         : longword;            // ADC control register
+    CFGR       : longword;            // ADC Configuration register
+    RESERVED0  : longword;            // Reserved, 0x010
+    SMPR1      : longword;            // ADC sample time register 1
+    SMPR2      : longword;            // ADC sample time register 2
+    RESERVED1  : longword;            // Reserved, 0x01C
+    TR1        : longword;            // ADC watchdog threshold register 1
+    TR2        : longword;            // ADC watchdog threshold register 2
+    TR3        : longword;            // ADC watchdog threshold register 3
+    RESERVED2  : longword;            // Reserved, 0x02C
+    SQR1       : longword;            // ADC regular sequence register 1
+    SQR2       : longword;            // ADC regular sequence register 2
+    SQR3       : longword;            // ADC regular sequence register 3
+    SQR4       : longword;            // ADC regular sequence register 4
+    DR         : longword;            // ADC regular data register
+    RESERVED3  : longword;            // Reserved, 0x044
+    RESERVED4  : longword;            // Reserved, 0x048
+    JSQR       : longword;            // ADC injected sequence register
+    RESERVED5  : array[0..3] of longword; // Reserved, 0x050 - 0x05C
+    OFR1       : longword;            // ADC offset register 1
+    OFR2       : longword;            // ADC offset register 2
+    OFR3       : longword;            // ADC offset register 3
+    OFR4       : longword;            // ADC offset register 4
+    RESERVED6  : array[0..3] of longword; // Reserved, 0x070 - 0x07C
+    JDR1       : longword;            // ADC injected data register 1
+    JDR2       : longword;            // ADC injected data register 2
+    JDR3       : longword;            // ADC injected data register 3
+    JDR4       : longword;            // ADC injected data register 4
+    RESERVED7  : array[0..3] of longword; // Reserved, 0x090 - 0x09C
+    AWD2CR     : longword;            // ADC  Analog Watchdog 2 Configuration Register
+    AWD3CR     : longword;            // ADC  Analog Watchdog 3 Configuration Register
+    RESERVED8  : longword;            // Reserved, 0x0A8
+    RESERVED9  : longword;            // Reserved, 0x0AC
+    DIFSEL     : longword;            // ADC  Differential Mode Selection Register
+    CALFACT    : longword;            // ADC  Calibration Factors
+  end;
+
+  TADC_COMMON_Registers = record
+    CSR        : longword;            // ADC Common status register
+    RESERVED   : longword;            // Reserved, ADC1/3 base address + 0x304
+    CCR        : longword;            // ADC common control register
+    CDR        : longword;            // ADC common regular data register for dual
+  end;
+
+  TCOMP_Registers = record
+    CSR        : longword;            // COMP control and status register
+  end;
+
+  TCOMP_COMMON_Registers = record
+    CSR        : longword;            // COMP control and status register, used for bits common to several COMP instances
+  end;
+
+  TCRC_Registers = record
+    DR         : longword;            // CRC Data register
+    IDR        : byte;                // CRC Independent data register
+    RESERVED0  : byte;                // Reserved,                                                    0x05
+    RESERVED1  : word;                // Reserved,                                                    0x06
+    CR         : longword;            // CRC Control register
+    RESERVED2  : longword;            // Reserved,                                                    0x0C
+    INIT       : longword;            // Initial CRC value register
+    POL        : longword;            // CRC polynomial register
+  end;
+
+  TDAC_Registers = record
+    CR         : longword;            // DAC control register
+    SWTRIGR    : longword;            // DAC software trigger register
+    DHR12R1    : longword;            // DAC channel1 12-bit right-aligned data holding register
+    DHR12L1    : longword;            // DAC channel1 12-bit left aligned data holding register
+    DHR8R1     : longword;            // DAC channel1 8-bit right aligned data holding register
+    RESERVED0  : longword;            // Reserved,                                                                0x14
+    RESERVED1  : longword;            // Reserved,                                                                0x18
+    RESERVED2  : longword;            // Reserved,                                                                0x1C
+    DHR12RD    : longword;            // Dual DAC 12-bit right-aligned data holding register
+    DHR12LD    : longword;            // DUAL DAC 12-bit left aligned data holding register
+    DHR8RD     : longword;            // DUAL DAC 8-bit right aligned data holding register
+    DOR1       : longword;            // DAC channel1 data output register
+    RESERVED3  : longword;            // Reserved,                                                                0x30
+    SR         : longword;            // DAC status register
+  end;
+
+  TDBGMCU_Registers = record
+    IDCODE     : longword;            // MCU device ID code
+    CR         : longword;            // Debug MCU configuration register
+    APB1FZ     : longword;            // Debug MCU APB1 freeze register
+    APB2FZ     : longword;            // Debug MCU APB2 freeze register
+  end;
+
+  TDMA_CHANNEL_Registers = record
+    CCR        : longword;            // DMA channel x configuration register
+    CNDTR      : longword;            // DMA channel x number of data register
+    CPAR       : longword;            // DMA channel x peripheral address register
+    CMAR       : longword;            // DMA channel x memory address register
+  end;
+
+  TDMA_Registers = record
+    ISR        : longword;            // DMA interrupt status register
+    IFCR       : longword;            // DMA interrupt flag clear register
+  end;
+
+  TEXTI_Registers = record
+    IMR        : longword;            // XTI Interrupt mask register
+    EMR        : longword;            // XTI Event mask register
+    RTSR       : longword;            // XTI Rising trigger selection register
+    FTSR       : longword;            // XTI Falling trigger selection register
+    SWIER      : longword;            // XTI Software interrupt event register
+    PR         : longword;            // XTI Pending register
+    RESERVED1  : longword;            // Reserved, 0x18
+    RESERVED2  : longword;            // Reserved, 0x1C
+    IMR2       : longword;            // EXTI Interrupt mask register
+    EMR2       : longword;            // EXTI Event mask register
+    RTSR2      : longword;            // EXTI Rising trigger selection register
+    FTSR2      : longword;            // EXTI Falling trigger selection register
+    SWIER2     : longword;            // EXTI Software interrupt event register
+    PR2        : longword;            // EXTI Pending register
+  end;
+
+  TFLASH_Registers = record
+    ACR        : longword;            // FLASH access control register
+    KEYR       : longword;            // FLASH key register
+    OPTKEYR    : longword;            // FLASH option key register
+    SR         : longword;            // FLASH status register
+    CR         : longword;            // FLASH control register
+    AR         : longword;            // FLASH address register
+    RESERVED   : longword;            // Reserved, 0x18
+    OBR        : longword;            // FLASH Option byte register
+    WRPR       : longword;            // FLASH Write register
+  end;
+
+  TOB_Registers = record
+    RDP        : word;                // LASH option byte Read protection
+    USER       : word;                // LASH option byte user options
+    RESERVED0  : word;                // Reserved,                                                     0x04
+    RESERVED1  : word;                // Reserved,                                                     0x06
+    WRP0       : word;                // LASH option byte write protection 0
+    WRP1       : word;                // LASH option byte write protection 1
+    WRP2       : word;                // LASH option byte write protection 2
+    WRP3       : word;                // LASH option byte write protection 3
+  end;
+
+  TGPIO_Registers = record
+    MODER      : longword;            // GPIO port mode register
+    OTYPER     : longword;            // GPIO port output type register
+    OSPEEDR    : longword;            // GPIO port output speed register
+    PUPDR      : longword;            // GPIO port pull-up/pull-down register
+    IDR        : longword;            // GPIO port input data register
+    ODR        : longword;            // GPIO port output data register
+    BSRR       : longword;            // GPIO port bit set/reset register
+    LCKR       : longword;            // GPIO port configuration lock register
+    AFR        : array[0..1] of longword; // GPIO alternate function registers
+    BRR        : longword;            // GPIO bit reset register
+  end;
+
+  TOPAMP_Registers = record
+    CSR        : longword;            // OPAMP control and status register
+  end;
+
+  TSYSCFG_Registers = record
+    CFGR1      : longword;            // SYSCFG configuration register 1
+    RESERVED   : longword;            // Reserved,                                                             0x04
+    EXTICR     : array[0..3] of longword; // SYSCFG external interrupt configuration registers
+    CFGR2      : longword;            // SYSCFG configuration register 2
+  end;
+
+  TI2C_Registers = record
+    CR1        : longword;            // I2C Control register 1
+    CR2        : longword;            // I2C Control register 2
+    OAR1       : longword;            // I2C Own address 1 register
+    OAR2       : longword;            // I2C Own address 2 register
+    TIMINGR    : longword;            // I2C Timing register
+    TIMEOUTR   : longword;            // I2C Timeout register
+    ISR        : longword;            // I2C Interrupt and status register
+    ICR        : longword;            // I2C Interrupt clear register
+    PECR       : longword;            // I2C PEC register
+    RXDR       : longword;            // I2C Receive data register
+    TXDR       : longword;            // I2C Transmit data register
+  end;
+
+  TIWDG_Registers = record
+    KR         : longword;            // IWDG Key register
+    PR         : longword;            // IWDG Prescaler register
+    RLR        : longword;            // IWDG Reload register
+    SR         : longword;            // IWDG Status register
+    WINR       : longword;            // IWDG Window register
+  end;
+
+  TPWR_Registers = record
+    CR         : longword;            // PWR power control register
+    CSR        : longword;            // PWR power control/status register
+  end;
+
+  TRCC_Registers = record
+    CR         : longword;            // RCC clock control register
+    CFGR       : longword;            // RCC clock configuration register
+    CIR        : longword;            // RCC clock interrupt register
+    APB2RSTR   : longword;            // RCC APB2 peripheral reset register
+    APB1RSTR   : longword;            // RCC APB1 peripheral reset register
+    AHBENR     : longword;            // RCC AHB peripheral clock register
+    APB2ENR    : longword;            // RCC APB2 peripheral clock enable register
+    APB1ENR    : longword;            // RCC APB1 peripheral clock enable register
+    BDCR       : longword;            // RCC Backup domain control register
+    CSR        : longword;            // RCC clock control & status register
+    AHBRSTR    : longword;            // RCC AHB peripheral reset register
+    CFGR2      : longword;            // RCC clock configuration register 2
+    CFGR3      : longword;            // RCC clock configuration register 3
+  end;
+
+  TRTC_Registers = record
+    TR         : longword;            // RTC time register
+    DR         : longword;            // RTC date register
+    CR         : longword;            // RTC control register
+    ISR        : longword;            // RTC initialization and status register
+    PRER       : longword;            // RTC prescaler register
+    WUTR       : longword;            // RTC wakeup timer register
+    RESERVED0  : longword;            // Reserved, 0x18
+    ALRMAR     : longword;            // RTC alarm A register
+    ALRMBR     : longword;            // RTC alarm B register
+    WPR        : longword;            // RTC write protection register
+    SSR        : longword;            // RTC sub second register
+    SHIFTR     : longword;            // RTC shift control register
+    TSTR       : longword;            // RTC time stamp time register
+    TSDR       : longword;            // RTC time stamp date register
+    TSSSR      : longword;            // RTC time-stamp sub second register
+    CALR       : longword;            // RTC calibration register
+    TAFCR      : longword;            // RTC tamper and alternate function configuration register
+    ALRMASSR   : longword;            // RTC alarm A sub second register
+    ALRMBSSR   : longword;            // RTC alarm B sub second register
+    RESERVED7  : longword;            // Reserved, 0x4C
+    BKP0R      : longword;            // RTC backup register 0
+    BKP1R      : longword;            // RTC backup register 1
+    BKP2R      : longword;            // RTC backup register 2
+    BKP3R      : longword;            // RTC backup register 3
+    BKP4R      : longword;            // RTC backup register 4
+    BKP5R      : longword;            // RTC backup register 5
+    BKP6R      : longword;            // RTC backup register 6
+    BKP7R      : longword;            // RTC backup register 7
+    BKP8R      : longword;            // RTC backup register 8
+    BKP9R      : longword;            // RTC backup register 9
+    BKP10R     : longword;            // RTC backup register 10
+    BKP11R     : longword;            // RTC backup register 11
+    BKP12R     : longword;            // RTC backup register 12
+    BKP13R     : longword;            // RTC backup register 13
+    BKP14R     : longword;            // RTC backup register 14
+    BKP15R     : longword;            // RTC backup register 15
+    BKP16R     : longword;            // RTC backup register 16
+    BKP17R     : longword;            // RTC backup register 17
+    BKP18R     : longword;            // RTC backup register 18
+    BKP19R     : longword;            // RTC backup register 19
+  end;
+
+  TSPI_Registers = record
+    CR1        : longword;            // SPI Control register 1
+    CR2        : longword;            // SPI Control register 2
+    SR         : longword;            // SPI Status register
+    DR         : longword;            // SPI data register
+    CRCPR      : longword;            // SPI CRC polynomial register
+    RXCRCR     : longword;            // SPI Rx CRC register
+    TXCRCR     : longword;            // SPI Tx CRC register
+    I2SCFGR    : longword;            // SPI_I2S configuration register
+    I2SPR      : longword;            // SPI_I2S prescaler register
+  end;
+
+  TTIM_Registers = record
+    CR1        : longword;            // TIM control register 1
+    CR2        : longword;            // TIM control register 2
+    SMCR       : longword;            // TIM slave mode control register
+    DIER       : longword;            // TIM DMA/interrupt enable register
+    SR         : longword;            // TIM status register
+    EGR        : longword;            // TIM event generation register
+    CCMR1      : longword;            // TIM capture/compare mode register 1
+    CCMR2      : longword;            // TIM capture/compare mode register 2
+    CCER       : longword;            // TIM capture/compare enable register
+    CNT        : longword;            // TIM counter register
+    PSC        : longword;            // TIM prescaler
+    ARR        : longword;            // TIM auto-reload register
+    RCR        : longword;            // TIM repetition counter register
+    CCR1       : longword;            // TIM capture/compare register 1
+    CCR2       : longword;            // TIM capture/compare register 2
+    CCR3       : longword;            // TIM capture/compare register 3
+    CCR4       : longword;            // TIM capture/compare register 4
+    BDTR       : longword;            // TIM break and dead-time register
+    DCR        : longword;            // TIM DMA control register
+    DMAR       : longword;            // TIM DMA address for full transfer
+    &OR        : longword;            // TIM option register
+    CCMR3      : longword;            // TIM capture/compare mode register 3
+    CCR5       : longword;            // TIM capture/compare register5
+    CCR6       : longword;            // TIM capture/compare register 4
+  end;
+
+  TTSC_Registers = record
+    CR         : longword;            // TSC control register
+    IER        : longword;            // TSC interrupt enable register
+    ICR        : longword;            // TSC interrupt clear register
+    ISR        : longword;            // TSC interrupt status register
+    IOHCR      : longword;            // TSC I/O hysteresis control register
+    RESERVED1  : longword;            // Reserved
+    IOASCR     : longword;            // TSC I/O analog switch control register
+    RESERVED2  : longword;            // Reserved
+    IOSCR      : longword;            // TSC I/O sampling control register
+    RESERVED3  : longword;            // Reserved
+    IOCCR      : longword;            // TSC I/O channel control register
+    RESERVED4  : longword;            // Reserved
+    IOGCSR     : longword;            // TSC I/O group control status register
+    IOGXCR     : array[0..7] of longword; // TSC I/O group x counter register
+  end;
+
+  TUSART_Registers = record
+    CR1        : longword;            // USART Control register 1
+    CR2        : longword;            // USART Control register 2
+    CR3        : longword;            // USART Control register 3
+    BRR        : longword;            // USART Baud rate register
+    GTPR       : longword;            // USART Guard time and prescaler register
+    RTOR       : longword;            // USART Receiver Time Out register
+    RQR        : longword;            // USART Request register
+    ISR        : longword;            // USART Interrupt and status register
+    ICR        : longword;            // USART Interrupt flag Clear register
+    RDR        : word;                // USART Receive Data register
+    RESERVED1  : word;                // Reserved, 0x26
+    TDR        : word;                // USART Transmit Data register
+    RESERVED2  : word;                // Reserved, 0x2A
+  end;
+
+  TWWDG_Registers = record
+    CR         : longword;            // WWDG Control register
+    CFR        : longword;            // WWDG Configuration register
+    SR         : longword;            // WWDG Status register
+  end;
+
+const
+  FLASH_BASE   = $08000000;           // FLASH base address in the alias region
+  SRAM_BASE    = $20000000;           // SRAM base address in the alias region
+  PERIPH_BASE  = $40000000;           // Peripheral base address in the alias region
+  SRAM_BB_BASE = $22000000;           // SRAM base address in the bit-band region
+  PERIPH_BB_BASE = $42000000;         // Peripheral base address in the bit-band region
+  APB1PERIPH_BASE = $40000000;
+  APB2PERIPH_BASE = PERIPH_BASE + $00010000;
+  AHB1PERIPH_BASE = PERIPH_BASE + $00020000;
+  AHB2PERIPH_BASE = PERIPH_BASE + $08000000;
+  AHB3PERIPH_BASE = PERIPH_BASE + $10000000;
+  TIM2_BASE    = APB1PERIPH_BASE + $00000000;
+  TIM6_BASE    = APB1PERIPH_BASE + $00001000;
+  RTC_BASE     = APB1PERIPH_BASE + $00002800;
+  WWDG_BASE    = APB1PERIPH_BASE + $00002C00;
+  IWDG_BASE    = APB1PERIPH_BASE + $00003000;
+  I2S2ext_BASE = APB1PERIPH_BASE + $00003400;
+  SPI2_BASE    = APB1PERIPH_BASE + $00003800;
+  SPI3_BASE    = APB1PERIPH_BASE + $00003C00;
+  I2S3ext_BASE = APB1PERIPH_BASE + $00004000;
+  USART2_BASE  = APB1PERIPH_BASE + $00004400;
+  USART3_BASE  = APB1PERIPH_BASE + $00004800;
+  I2C1_BASE    = APB1PERIPH_BASE + $00005400;
+  I2C2_BASE    = APB1PERIPH_BASE + $00005800;
+  PWR_BASE     = APB1PERIPH_BASE + $00007000;
+  DAC1_BASE    = APB1PERIPH_BASE + $00007400;
+  DAC_BASE     = APB1PERIPH_BASE + $00007400;
+  I2C3_BASE    = APB1PERIPH_BASE + $00007800;
+  SYSCFG_BASE  = APB2PERIPH_BASE + $00000000;
+  COMP2_BASE   = APB2PERIPH_BASE + $00000020;
+  COMP4_BASE   = APB2PERIPH_BASE + $00000028;
+  COMP6_BASE   = APB2PERIPH_BASE + $00000030;
+  COMP_BASE    = APB2PERIPH_BASE + $00000020;
+  OPAMP2_BASE  = APB2PERIPH_BASE + $0000003C;
+  OPAMP_BASE   = APB2PERIPH_BASE + $0000003C;
+  EXTI_BASE    = APB2PERIPH_BASE + $00000400;
+  TIM1_BASE    = APB2PERIPH_BASE + $00002C00;
+  USART1_BASE  = APB2PERIPH_BASE + $00003800;
+  TIM15_BASE   = APB2PERIPH_BASE + $00004000;
+  TIM16_BASE   = APB2PERIPH_BASE + $00004400;
+  TIM17_BASE   = APB2PERIPH_BASE + $00004800;
+  DMA1_BASE    = AHB1PERIPH_BASE + $00000000;
+  DMA1_Channel1_BASE = AHB1PERIPH_BASE + $00000008;
+  DMA1_Channel2_BASE = AHB1PERIPH_BASE + $0000001C;
+  DMA1_Channel3_BASE = AHB1PERIPH_BASE + $00000030;
+  DMA1_Channel4_BASE = AHB1PERIPH_BASE + $00000044;
+  DMA1_Channel5_BASE = AHB1PERIPH_BASE + $00000058;
+  DMA1_Channel6_BASE = AHB1PERIPH_BASE + $0000006C;
+  DMA1_Channel7_BASE = AHB1PERIPH_BASE + $00000080;
+  RCC_BASE     = AHB1PERIPH_BASE + $00001000;
+  FLASH_R_BASE = AHB1PERIPH_BASE + $00002000; // Flash registers base address
+  OB_BASE      = $1FFFF800;           // Flash Option Bytes base address
+  FLASHSIZE_BASE = $1FFFF7CC;         // FLASH Size register base address
+  UID_BASE     = $1FFFF7AC;           // Unique device ID register base address
+  CRC_BASE     = AHB1PERIPH_BASE + $00003000;
+  TSC_BASE     = AHB1PERIPH_BASE + $00004000;
+  GPIOA_BASE   = AHB2PERIPH_BASE + $00000000;
+  GPIOB_BASE   = AHB2PERIPH_BASE + $00000400;
+  GPIOC_BASE   = AHB2PERIPH_BASE + $00000800;
+  GPIOD_BASE   = AHB2PERIPH_BASE + $00000C00;
+  GPIOF_BASE   = AHB2PERIPH_BASE + $00001400;
+  ADC1_BASE    = AHB3PERIPH_BASE + $00000000;
+  ADC1_COMMON_BASE = AHB3PERIPH_BASE + $00000300;
+  DBGMCU_BASE  = $E0042000;           // Debug MCU registers base address
+
+var
+  TIM2         : TTIM_Registers absolute TIM2_BASE;
+  TIM6         : TTIM_Registers absolute TIM6_BASE;
+  RTC          : TRTC_Registers absolute RTC_BASE;
+  WWDG         : TWWDG_Registers absolute WWDG_BASE;
+  IWDG         : TIWDG_Registers absolute IWDG_BASE;
+  I2S2ext      : TSPI_Registers absolute I2S2ext_BASE;
+  SPI2         : TSPI_Registers absolute SPI2_BASE;
+  SPI3         : TSPI_Registers absolute SPI3_BASE;
+  I2S3ext      : TSPI_Registers absolute I2S3ext_BASE;
+  USART2       : TUSART_Registers absolute USART2_BASE;
+  USART3       : TUSART_Registers absolute USART3_BASE;
+  I2C1         : TI2C_Registers absolute I2C1_BASE;
+  I2C2         : TI2C_Registers absolute I2C2_BASE;
+  I2C3         : TI2C_Registers absolute I2C3_BASE;
+  PWR          : TPWR_Registers absolute PWR_BASE;
+  DAC          : TDAC_Registers absolute DAC_BASE;
+  DAC1         : TDAC_Registers absolute DAC1_BASE;
+  COMP2        : TCOMP_Registers absolute COMP2_BASE;
+  COMP4        : TCOMP_Registers absolute COMP4_BASE;
+  COMP6        : TCOMP_Registers absolute COMP6_BASE;
+  COMP         : TCOMP_Registers absolute COMP_BASE;
+  OPAMP        : TOPAMP_Registers absolute OPAMP_BASE;
+  OPAMP2       : TOPAMP_Registers absolute OPAMP2_BASE;
+  SYSCFG       : TSYSCFG_Registers absolute SYSCFG_BASE;
+  EXTI         : TEXTI_Registers absolute EXTI_BASE;
+  TIM1         : TTIM_Registers absolute TIM1_BASE;
+  USART1       : TUSART_Registers absolute USART1_BASE;
+  TIM15        : TTIM_Registers absolute TIM15_BASE;
+  TIM16        : TTIM_Registers absolute TIM16_BASE;
+  TIM17        : TTIM_Registers absolute TIM17_BASE;
+  DBGMCU       : TDBGMCU_Registers absolute DBGMCU_BASE;
+  DMA1         : TDMA_Registers absolute DMA1_BASE;
+  DMA1_Channel1 : TDMA_Channel_Registers absolute DMA1_Channel1_BASE;
+  DMA1_Channel2 : TDMA_Channel_Registers absolute DMA1_Channel2_BASE;
+  DMA1_Channel3 : TDMA_Channel_Registers absolute DMA1_Channel3_BASE;
+  DMA1_Channel4 : TDMA_Channel_Registers absolute DMA1_Channel4_BASE;
+  DMA1_Channel5 : TDMA_Channel_Registers absolute DMA1_Channel5_BASE;
+  DMA1_Channel6 : TDMA_Channel_Registers absolute DMA1_Channel6_BASE;
+  DMA1_Channel7 : TDMA_Channel_Registers absolute DMA1_Channel7_BASE;
+  RCC          : TRCC_Registers absolute RCC_BASE;
+  FLASH        : TFLASH_Registers absolute FLASH_R_BASE;
+  OB           : TOB_Registers absolute OB_BASE;
+  CRC          : TCRC_Registers absolute CRC_BASE;
+  TSC          : TTSC_Registers absolute TSC_BASE;
+  GPIOA        : TGPIO_Registers absolute GPIOA_BASE;
+  GPIOB        : TGPIO_Registers absolute GPIOB_BASE;
+  GPIOC        : TGPIO_Registers absolute GPIOC_BASE;
+  GPIOD        : TGPIO_Registers absolute GPIOD_BASE;
+  GPIOF        : TGPIO_Registers absolute GPIOF_BASE;
+  ADC1         : TADC_Registers absolute ADC1_BASE;
+  ADC1_COMMON  : TADC_Common_Registers absolute ADC1_COMMON_BASE;
+
+implementation
+
+procedure NonMaskableInt_interrupt; external name 'NonMaskableInt_interrupt';
+procedure HardFault_interrupt; external name 'HardFault_interrupt';
+procedure MemoryManagement_interrupt; external name 'MemoryManagement_interrupt';
+procedure BusFault_interrupt; external name 'BusFault_interrupt';
+procedure UsageFault_interrupt; external name 'UsageFault_interrupt';
+procedure SVCall_interrupt; external name 'SVCall_interrupt';
+procedure DebugMonitor_interrupt; external name 'DebugMonitor_interrupt';
+procedure PendSV_interrupt; external name 'PendSV_interrupt';
+procedure SysTick_interrupt; external name 'SysTick_interrupt';
+procedure WWDG_interrupt; external name 'WWDG_interrupt';
+procedure PVD_interrupt; external name 'PVD_interrupt';
+procedure TAMP_STAMP_interrupt; external name 'TAMP_STAMP_interrupt';
+procedure RTC_WKUP_interrupt; external name 'RTC_WKUP_interrupt';
+procedure FLASH_interrupt; external name 'FLASH_interrupt';
+procedure RCC_interrupt; external name 'RCC_interrupt';
+procedure EXTI0_interrupt; external name 'EXTI0_interrupt';
+procedure EXTI1_interrupt; external name 'EXTI1_interrupt';
+procedure EXTI2_TSC_interrupt; external name 'EXTI2_TSC_interrupt';
+procedure EXTI3_interrupt; external name 'EXTI3_interrupt';
+procedure EXTI4_interrupt; external name 'EXTI4_interrupt';
+procedure DMA1_Channel1_interrupt; external name 'DMA1_Channel1_interrupt';
+procedure DMA1_Channel2_interrupt; external name 'DMA1_Channel2_interrupt';
+procedure DMA1_Channel3_interrupt; external name 'DMA1_Channel3_interrupt';
+procedure DMA1_Channel4_interrupt; external name 'DMA1_Channel4_interrupt';
+procedure DMA1_Channel5_interrupt; external name 'DMA1_Channel5_interrupt';
+procedure DMA1_Channel6_interrupt; external name 'DMA1_Channel6_interrupt';
+procedure DMA1_Channel7_interrupt; external name 'DMA1_Channel7_interrupt';
+procedure ADC1_interrupt; external name 'ADC1_interrupt';
+procedure EXTI9_5_interrupt; external name 'EXTI9_5_interrupt';
+procedure TIM1_BRK_TIM15_interrupt; external name 'TIM1_BRK_TIM15_interrupt';
+procedure TIM1_UP_TIM16_interrupt; external name 'TIM1_UP_TIM16_interrupt';
+procedure TIM1_TRG_COM_TIM17_interrupt; external name 'TIM1_TRG_COM_TIM17_interrupt';
+procedure TIM1_CC_interrupt; external name 'TIM1_CC_interrupt';
+procedure TIM2_interrupt; external name 'TIM2_interrupt';
+procedure I2C1_EV_interrupt; external name 'I2C1_EV_interrupt';
+procedure I2C1_ER_interrupt; external name 'I2C1_ER_interrupt';
+procedure I2C2_EV_interrupt; external name 'I2C2_EV_interrupt';
+procedure I2C2_ER_interrupt; external name 'I2C2_ER_interrupt';
+procedure SPI2_interrupt; external name 'SPI2_interrupt';
+procedure USART1_interrupt; external name 'USART1_interrupt';
+procedure USART2_interrupt; external name 'USART2_interrupt';
+procedure USART3_interrupt; external name 'USART3_interrupt';
+procedure EXTI15_10_interrupt; external name 'EXTI15_10_interrupt';
+procedure RTC_Alarm_interrupt; external name 'RTC_Alarm_interrupt';
+procedure SPI3_interrupt; external name 'SPI3_interrupt';
+procedure TIM6_DAC_interrupt; external name 'TIM6_DAC_interrupt';
+procedure COMP2_interrupt; external name 'COMP2_interrupt';
+procedure COMP4_6_interrupt; external name 'COMP4_6_interrupt';
+procedure I2C3_EV_interrupt; external name 'I2C3_EV_interrupt';
+procedure I2C3_ER_interrupt; external name 'I2C3_ER_interrupt';
+procedure FPU_interrupt; external name 'FPU_interrupt';
+
+{$i cortexm4f_start.inc}
+
+procedure Vectors; assembler; nostackframe;
+label interrupt_vectors;
+asm
+  .section ".init.interrupt_vectors"
+  interrupt_vectors:
+  .long _stack_top
+  .long Startup
+  .long NonMaskableInt_interrupt
+  .long HardFault_interrupt
+  .long MemoryManagement_interrupt
+  .long BusFault_interrupt
+  .long UsageFault_interrupt
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long SVCall_interrupt
+  .long DebugMonitor_interrupt
+  .long 0
+  .long PendSV_interrupt
+  .long SysTick_interrupt
+  .long WWDG_interrupt
+  .long PVD_interrupt
+  .long TAMP_STAMP_interrupt
+  .long RTC_WKUP_interrupt
+  .long FLASH_interrupt
+  .long RCC_interrupt
+  .long EXTI0_interrupt
+  .long EXTI1_interrupt
+  .long EXTI2_TSC_interrupt
+  .long EXTI3_interrupt
+  .long EXTI4_interrupt
+  .long DMA1_Channel1_interrupt
+  .long DMA1_Channel2_interrupt
+  .long DMA1_Channel3_interrupt
+  .long DMA1_Channel4_interrupt
+  .long DMA1_Channel5_interrupt
+  .long DMA1_Channel6_interrupt
+  .long DMA1_Channel7_interrupt
+  .long ADC1_interrupt
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long EXTI9_5_interrupt
+  .long TIM1_BRK_TIM15_interrupt
+  .long TIM1_UP_TIM16_interrupt
+  .long TIM1_TRG_COM_TIM17_interrupt
+  .long TIM1_CC_interrupt
+  .long TIM2_interrupt
+  .long 0
+  .long 0
+  .long I2C1_EV_interrupt
+  .long I2C1_ER_interrupt
+  .long I2C2_EV_interrupt
+  .long I2C2_ER_interrupt
+  .long 0
+  .long SPI2_interrupt
+  .long USART1_interrupt
+  .long USART2_interrupt
+  .long USART3_interrupt
+  .long EXTI15_10_interrupt
+  .long RTC_Alarm_interrupt
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long SPI3_interrupt
+  .long 0
+  .long 0
+  .long TIM6_DAC_interrupt
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long COMP2_interrupt
+  .long COMP4_6_interrupt
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long I2C3_EV_interrupt
+  .long I2C3_ER_interrupt
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long FPU_interrupt
+  .weak NonMaskableInt_interrupt
+  .weak HardFault_interrupt
+  .weak MemoryManagement_interrupt
+  .weak BusFault_interrupt
+  .weak UsageFault_interrupt
+  .weak SVCall_interrupt
+  .weak DebugMonitor_interrupt
+  .weak PendSV_interrupt
+  .weak SysTick_interrupt
+  .weak WWDG_interrupt
+  .weak PVD_interrupt
+  .weak TAMP_STAMP_interrupt
+  .weak RTC_WKUP_interrupt
+  .weak FLASH_interrupt
+  .weak RCC_interrupt
+  .weak EXTI0_interrupt
+  .weak EXTI1_interrupt
+  .weak EXTI2_TSC_interrupt
+  .weak EXTI3_interrupt
+  .weak EXTI4_interrupt
+  .weak DMA1_Channel1_interrupt
+  .weak DMA1_Channel2_interrupt
+  .weak DMA1_Channel3_interrupt
+  .weak DMA1_Channel4_interrupt
+  .weak DMA1_Channel5_interrupt
+  .weak DMA1_Channel6_interrupt
+  .weak DMA1_Channel7_interrupt
+  .weak ADC1_interrupt
+  .weak EXTI9_5_interrupt
+  .weak TIM1_BRK_TIM15_interrupt
+  .weak TIM1_UP_TIM16_interrupt
+  .weak TIM1_TRG_COM_TIM17_interrupt
+  .weak TIM1_CC_interrupt
+  .weak TIM2_interrupt
+  .weak I2C1_EV_interrupt
+  .weak I2C1_ER_interrupt
+  .weak I2C2_EV_interrupt
+  .weak I2C2_ER_interrupt
+  .weak SPI2_interrupt
+  .weak USART1_interrupt
+  .weak USART2_interrupt
+  .weak USART3_interrupt
+  .weak EXTI15_10_interrupt
+  .weak RTC_Alarm_interrupt
+  .weak SPI3_interrupt
+  .weak TIM6_DAC_interrupt
+  .weak COMP2_interrupt
+  .weak COMP4_6_interrupt
+  .weak I2C3_EV_interrupt
+  .weak I2C3_ER_interrupt
+  .weak FPU_interrupt
+  .set NonMaskableInt_interrupt, HaltProc
+  .set HardFault_interrupt, HaltProc
+  .set MemoryManagement_interrupt, HaltProc
+  .set BusFault_interrupt, HaltProc
+  .set UsageFault_interrupt, HaltProc
+  .set SVCall_interrupt, HaltProc
+  .set DebugMonitor_interrupt, HaltProc
+  .set PendSV_interrupt, HaltProc
+  .set SysTick_interrupt, HaltProc
+  .set WWDG_interrupt, HaltProc
+  .set PVD_interrupt, HaltProc
+  .set TAMP_STAMP_interrupt, HaltProc
+  .set RTC_WKUP_interrupt, HaltProc
+  .set FLASH_interrupt, HaltProc
+  .set RCC_interrupt, HaltProc
+  .set EXTI0_interrupt, HaltProc
+  .set EXTI1_interrupt, HaltProc
+  .set EXTI2_TSC_interrupt, HaltProc
+  .set EXTI3_interrupt, HaltProc
+  .set EXTI4_interrupt, HaltProc
+  .set DMA1_Channel1_interrupt, HaltProc
+  .set DMA1_Channel2_interrupt, HaltProc
+  .set DMA1_Channel3_interrupt, HaltProc
+  .set DMA1_Channel4_interrupt, HaltProc
+  .set DMA1_Channel5_interrupt, HaltProc
+  .set DMA1_Channel6_interrupt, HaltProc
+  .set DMA1_Channel7_interrupt, HaltProc
+  .set ADC1_interrupt, HaltProc
+  .set EXTI9_5_interrupt, HaltProc
+  .set TIM1_BRK_TIM15_interrupt, HaltProc
+  .set TIM1_UP_TIM16_interrupt, HaltProc
+  .set TIM1_TRG_COM_TIM17_interrupt, HaltProc
+  .set TIM1_CC_interrupt, HaltProc
+  .set TIM2_interrupt, HaltProc
+  .set I2C1_EV_interrupt, HaltProc
+  .set I2C1_ER_interrupt, HaltProc
+  .set I2C2_EV_interrupt, HaltProc
+  .set I2C2_ER_interrupt, HaltProc
+  .set SPI2_interrupt, HaltProc
+  .set USART1_interrupt, HaltProc
+  .set USART2_interrupt, HaltProc
+  .set USART3_interrupt, HaltProc
+  .set EXTI15_10_interrupt, HaltProc
+  .set RTC_Alarm_interrupt, HaltProc
+  .set SPI3_interrupt, HaltProc
+  .set TIM6_DAC_interrupt, HaltProc
+  .set COMP2_interrupt, HaltProc
+  .set COMP4_6_interrupt, HaltProc
+  .set I2C3_EV_interrupt, HaltProc
+  .set I2C3_ER_interrupt, HaltProc
+  .set FPU_interrupt, HaltProc
+  .text
+end;
+end.
diff -Naur fpc-save/rtl/embedded/arm/stm32f302x8.pp fpc/rtl/embedded/arm/stm32f302x8.pp
--- fpc-save/rtl/embedded/arm/stm32f302x8.pp	1970-01-01 01:00:00.000000000 +0100
+++ fpc/rtl/embedded/arm/stm32f302x8.pp	2018-03-02 17:06:37.000000000 +0100
@@ -0,0 +1,925 @@
+unit stm32f302x8;
+interface
+{$PACKRECORDS C}
+{$GOTO ON}
+// *
+// ******************************************************************************
+// * @file    stm32f302x8.h
+// * @author  MCD Application Team
+//   CMSIS STM32F302x8 Devices Peripheral Access Layer Header File.
+// *
+// *          This file contains:
+// *           - Data structures and the address mapping for all peripherals
+// *           - Peripheral's registers declarations and bits definition
+// *           - Macros to access peripheral’s registers hardware
+// *
+// ******************************************************************************
+// * @attention
+// *
+// * <h2><center>&copy; COPYRIGHT(c) 2016 STMicroelectronics</center></h2>
+// *
+// * Redistribution and use in source and binary forms, with or without modification,
+// * are permitted provided that the following conditions are met:
+// *   1. Redistributions of source code must retain the above copyright notice,
+// *      this list of conditions and the following disclaimer.
+// *   2. Redistributions in binary form must reproduce the above copyright notice,
+// *      this list of conditions and the following disclaimer in the documentation
+// *      and/or other materials provided with the distribution.
+// *   3. Neither the name of STMicroelectronics nor the names of its contributors
+// *      may be used to endorse or promote products derived from this software
+// *      without specific prior written permission.
+// *
+// * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
+// * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
+// * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+// * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE
+// * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
+// * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
+// * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER
+// * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+// * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
+// * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
+// *
+// ******************************************************************************
+// Configuration of the Cortex-M4 Processor and Core Peripherals
+// STM32F302x8 devices Interrupt Number Definition, according to the selected device
+// *        in @ref Library_configuration_section
+
+type
+  TIRQn_Enum   = (
+    NonMaskableInt_IRQn = -14,        // 2 Non Maskable Interrupt
+    HardFault_IRQn = -13,             // 3 Cortex-M4 Hard Fault Interrupt
+    MemoryManagement_IRQn = -12,      // 4 Cortex-M4 Memory Management Interrupt
+    BusFault_IRQn = -11,              // 5 Cortex-M4 Bus Fault Interrupt
+    UsageFault_IRQn = -10,            // 6 Cortex-M4 Usage Fault Interrupt
+    SVCall_IRQn = -5,                 // 11 Cortex-M4 SV Call Interrupt
+    DebugMonitor_IRQn = -4,           // 12 Cortex-M4 Debug Monitor Interrupt
+    PendSV_IRQn = -2,                 // 14 Cortex-M4 Pend SV Interrupt
+    SysTick_IRQn = -1,                // 15 Cortex-M4 System Tick Interrupt
+    WWDG_IRQn  = 0,                   // Window WatchDog Interrupt
+    PVD_IRQn   = 1,                   // PVD through EXTI Line detection Interrupt
+    TAMP_STAMP_IRQn = 2,              // Tamper and TimeStamp interrupts through the EXTI line 19
+    RTC_WKUP_IRQn = 3,                // RTC Wakeup interrupt through the EXTI line 20
+    FLASH_IRQn = 4,                   // FLASH global Interrupt
+    RCC_IRQn   = 5,                   // RCC global Interrupt
+    EXTI0_IRQn = 6,                   // EXTI Line0 Interrupt
+    EXTI1_IRQn = 7,                   // EXTI Line1 Interrupt
+    EXTI2_TSC_IRQn = 8,               // EXTI Line2 Interrupt and Touch Sense Controller Interrupt
+    EXTI3_IRQn = 9,                   // EXTI Line3 Interrupt
+    EXTI4_IRQn = 10,                  // EXTI Line4 Interrupt
+    DMA1_Channel1_IRQn = 11,          // DMA1 Channel 1 Interrupt
+    DMA1_Channel2_IRQn = 12,          // DMA1 Channel 2 Interrupt
+    DMA1_Channel3_IRQn = 13,          // DMA1 Channel 3 Interrupt
+    DMA1_Channel4_IRQn = 14,          // DMA1 Channel 4 Interrupt
+    DMA1_Channel5_IRQn = 15,          // DMA1 Channel 5 Interrupt
+    DMA1_Channel6_IRQn = 16,          // DMA1 Channel 6 Interrupt
+    DMA1_Channel7_IRQn = 17,          // DMA1 Channel 7 Interrupt
+    ADC1_IRQn  = 18,                  // ADC1 Interrupts
+    USB_HP_CAN_TX_IRQn = 19,          // USB Device High Priority or CAN TX Interrupts
+    USB_LP_CAN_RX0_IRQn = 20,         // USB Device Low Priority or CAN RX0 Interrupts
+    CAN_RX1_IRQn = 21,                // CAN RX1 Interrupt
+    CAN_SCE_IRQn = 22,                // CAN SCE Interrupt
+    EXTI9_5_IRQn = 23,                // External Line[9:5] Interrupts
+    TIM1_BRK_TIM15_IRQn = 24,         // TIM1 Break and TIM15 Interrupts
+    TIM1_UP_TIM16_IRQn = 25,          // TIM1 Update and TIM16 Interrupts
+    TIM1_TRG_COM_TIM17_IRQn = 26,     // TIM1 Trigger and Commutation and TIM17 Interrupt
+    TIM1_CC_IRQn = 27,                // TIM1 Capture Compare Interrupt
+    TIM2_IRQn  = 28,                  // TIM2 global Interrupt
+    I2C1_EV_IRQn = 31,                // I2C1 Event Interrupt & EXTI Line23 Interrupt (I2C1 wakeup)
+    I2C1_ER_IRQn = 32,                // I2C1 Error Interrupt
+    I2C2_EV_IRQn = 33,                // I2C2 Event Interrupt & EXTI Line24 Interrupt (I2C2 wakeup)
+    I2C2_ER_IRQn = 34,                // I2C2 Error Interrupt
+    SPI2_IRQn  = 36,                  // SPI2 global Interrupt
+    USART1_IRQn = 37,                 // USART1 global Interrupt & EXTI Line25 Interrupt (USART1 wakeup)
+    USART2_IRQn = 38,                 // USART2 global Interrupt & EXTI Line26 Interrupt (USART2 wakeup)
+    USART3_IRQn = 39,                 // USART3 global Interrupt & EXTI Line28 Interrupt (USART3 wakeup)
+    EXTI15_10_IRQn = 40,              // External Line[15:10] Interrupts
+    RTC_Alarm_IRQn = 41,              // RTC Alarm (A and B) through EXTI Line 17 Interrupt
+    USBWakeUp_IRQn = 42,              // USB Wakeup Interrupt
+    SPI3_IRQn  = 51,                  // SPI3 global Interrupt
+    TIM6_DAC_IRQn = 54,               // TIM6 global and DAC underrun error Interrupt
+    COMP2_IRQn = 64,                  // COMP2 global Interrupt via EXTI Line22
+    COMP4_6_IRQn = 65,                // COMP4 and COMP6 global Interrupt via EXTI Line30 and 32
+    I2C3_EV_IRQn = 72,                // I2C3 Event Interrupt & EXTI Line27 Interrupt (I2C3 wakeup)
+    I2C3_ER_IRQn = 73,                // I2C3 Error Interrupt
+    USB_HP_IRQn = 74,                 // USB High Priority global Interrupt
+    USB_LP_IRQn = 75,                 // USB Low Priority global Interrupt
+    USBWakeUp_RMP_IRQn = 76,          // USB Wakeup Interrupt remap
+    FPU_IRQn   = 81                   // Floating point Interrupt
+  );
+
+  TADC_Registers = record
+    ISR        : longword;            // ADC Interrupt and Status Register
+    IER        : longword;            // ADC Interrupt Enable Register
+    CR         : longword;            // ADC control register
+    CFGR       : longword;            // ADC Configuration register
+    RESERVED0  : longword;            // Reserved, 0x010
+    SMPR1      : longword;            // ADC sample time register 1
+    SMPR2      : longword;            // ADC sample time register 2
+    RESERVED1  : longword;            // Reserved, 0x01C
+    TR1        : longword;            // ADC watchdog threshold register 1
+    TR2        : longword;            // ADC watchdog threshold register 2
+    TR3        : longword;            // ADC watchdog threshold register 3
+    RESERVED2  : longword;            // Reserved, 0x02C
+    SQR1       : longword;            // ADC regular sequence register 1
+    SQR2       : longword;            // ADC regular sequence register 2
+    SQR3       : longword;            // ADC regular sequence register 3
+    SQR4       : longword;            // ADC regular sequence register 4
+    DR         : longword;            // ADC regular data register
+    RESERVED3  : longword;            // Reserved, 0x044
+    RESERVED4  : longword;            // Reserved, 0x048
+    JSQR       : longword;            // ADC injected sequence register
+    RESERVED5  : array[0..3] of longword; // Reserved, 0x050 - 0x05C
+    OFR1       : longword;            // ADC offset register 1
+    OFR2       : longword;            // ADC offset register 2
+    OFR3       : longword;            // ADC offset register 3
+    OFR4       : longword;            // ADC offset register 4
+    RESERVED6  : array[0..3] of longword; // Reserved, 0x070 - 0x07C
+    JDR1       : longword;            // ADC injected data register 1
+    JDR2       : longword;            // ADC injected data register 2
+    JDR3       : longword;            // ADC injected data register 3
+    JDR4       : longword;            // ADC injected data register 4
+    RESERVED7  : array[0..3] of longword; // Reserved, 0x090 - 0x09C
+    AWD2CR     : longword;            // ADC  Analog Watchdog 2 Configuration Register
+    AWD3CR     : longword;            // ADC  Analog Watchdog 3 Configuration Register
+    RESERVED8  : longword;            // Reserved, 0x0A8
+    RESERVED9  : longword;            // Reserved, 0x0AC
+    DIFSEL     : longword;            // ADC  Differential Mode Selection Register
+    CALFACT    : longword;            // ADC  Calibration Factors
+  end;
+
+  TADC_COMMON_Registers = record
+    CSR        : longword;            // ADC Common status register
+    RESERVED   : longword;            // Reserved, ADC1/3 base address + 0x304
+    CCR        : longword;            // ADC common control register
+    CDR        : longword;            // ADC common regular data register for dual
+  end;
+
+  TCAN_TXMAILBOX_Registers = record
+    TIR        : longword;            // CAN TX mailbox identifier register
+    TDTR       : longword;            // CAN mailbox data length control and time stamp register
+    TDLR       : longword;            // CAN mailbox data low register
+    TDHR       : longword;            // CAN mailbox data high register
+  end;
+
+  TCAN_FIFOMAILBOX_Registers = record
+    RIR        : longword;            // CAN receive FIFO mailbox identifier register
+    RDTR       : longword;            // CAN receive FIFO mailbox data length control and time stamp register
+    RDLR       : longword;            // CAN receive FIFO mailbox data low register
+    RDHR       : longword;            // CAN receive FIFO mailbox data high register
+  end;
+
+  TCAN_FILTERREGISTER_Registers = record
+    FR1        : longword;            // CAN Filter bank register 1
+    FR2        : longword;            // CAN Filter bank register 1
+  end;
+
+  TCAN_Registers = record
+    MCR        : longword;            // CAN master control register
+    MSR        : longword;            // CAN master status register
+    TSR        : longword;            // CAN transmit status register
+    RF0R       : longword;            // CAN receive FIFO 0 register
+    RF1R       : longword;            // CAN receive FIFO 1 register
+    IER        : longword;            // CAN interrupt enable register
+    ESR        : longword;            // CAN error status register
+    BTR        : longword;            // CAN bit timing register
+    RESERVED0  : array[0..87] of longword; // Reserved, 0x020 - 0x17F
+    sTxMailBox : array[0..2] of TCAN_TxMailBox_Registers; // CAN Tx MailBox
+    sFIFOMailBox : array[0..1] of TCAN_FIFOMailBox_Registers; // CAN FIFO MailBox
+    RESERVED1  : array[0..11] of longword; // Reserved, 0x1D0 - 0x1FF
+    FMR        : longword;            // CAN filter master register
+    FM1R       : longword;            // CAN filter mode register
+    RESERVED2  : longword;            // Reserved, 0x208
+    FS1R       : longword;            // CAN filter scale register
+    RESERVED3  : longword;            // Reserved, 0x210
+    FFA1R      : longword;            // CAN filter FIFO assignment register
+    RESERVED4  : longword;            // Reserved, 0x218
+    FA1R       : longword;            // CAN filter activation register
+    RESERVED5  : array[0..7] of longword; // Reserved, 0x220-0x23F
+    sFilterRegister : array[0..27] of TCAN_FilterRegister_Registers; // CAN Filter Register
+  end;
+
+  TCOMP_Registers = record
+    CSR        : longword;            // COMP control and status register
+  end;
+
+  TCOMP_COMMON_Registers = record
+    CSR        : longword;            // COMP control and status register, used for bits common to several COMP instances
+  end;
+
+  TCRC_Registers = record
+    DR         : longword;            // CRC Data register
+    IDR        : byte;                // CRC Independent data register
+    RESERVED0  : byte;                // Reserved,                                                    0x05
+    RESERVED1  : word;                // Reserved,                                                    0x06
+    CR         : longword;            // CRC Control register
+    RESERVED2  : longword;            // Reserved,                                                    0x0C
+    INIT       : longword;            // Initial CRC value register
+    POL        : longword;            // CRC polynomial register
+  end;
+
+  TDAC_Registers = record
+    CR         : longword;            // DAC control register
+    SWTRIGR    : longword;            // DAC software trigger register
+    DHR12R1    : longword;            // DAC channel1 12-bit right-aligned data holding register
+    DHR12L1    : longword;            // DAC channel1 12-bit left aligned data holding register
+    DHR8R1     : longword;            // DAC channel1 8-bit right aligned data holding register
+    RESERVED0  : longword;            // Reserved,                                                                0x14
+    RESERVED1  : longword;            // Reserved,                                                                0x18
+    RESERVED2  : longword;            // Reserved,                                                                0x1C
+    DHR12RD    : longword;            // Dual DAC 12-bit right-aligned data holding register
+    DHR12LD    : longword;            // DUAL DAC 12-bit left aligned data holding register
+    DHR8RD     : longword;            // DUAL DAC 8-bit right aligned data holding register
+    DOR1       : longword;            // DAC channel1 data output register
+    RESERVED3  : longword;            // Reserved,                                                                0x30
+    SR         : longword;            // DAC status register
+  end;
+
+  TDBGMCU_Registers = record
+    IDCODE     : longword;            // MCU device ID code
+    CR         : longword;            // Debug MCU configuration register
+    APB1FZ     : longword;            // Debug MCU APB1 freeze register
+    APB2FZ     : longword;            // Debug MCU APB2 freeze register
+  end;
+
+  TDMA_CHANNEL_Registers = record
+    CCR        : longword;            // DMA channel x configuration register
+    CNDTR      : longword;            // DMA channel x number of data register
+    CPAR       : longword;            // DMA channel x peripheral address register
+    CMAR       : longword;            // DMA channel x memory address register
+  end;
+
+  TDMA_Registers = record
+    ISR        : longword;            // DMA interrupt status register
+    IFCR       : longword;            // DMA interrupt flag clear register
+  end;
+
+  TEXTI_Registers = record
+    IMR        : longword;            // XTI Interrupt mask register
+    EMR        : longword;            // XTI Event mask register
+    RTSR       : longword;            // XTI Rising trigger selection register
+    FTSR       : longword;            // XTI Falling trigger selection register
+    SWIER      : longword;            // XTI Software interrupt event register
+    PR         : longword;            // XTI Pending register
+    RESERVED1  : longword;            // Reserved, 0x18
+    RESERVED2  : longword;            // Reserved, 0x1C
+    IMR2       : longword;            // EXTI Interrupt mask register
+    EMR2       : longword;            // EXTI Event mask register
+    RTSR2      : longword;            // EXTI Rising trigger selection register
+    FTSR2      : longword;            // EXTI Falling trigger selection register
+    SWIER2     : longword;            // EXTI Software interrupt event register
+    PR2        : longword;            // EXTI Pending register
+  end;
+
+  TFLASH_Registers = record
+    ACR        : longword;            // FLASH access control register
+    KEYR       : longword;            // FLASH key register
+    OPTKEYR    : longword;            // FLASH option key register
+    SR         : longword;            // FLASH status register
+    CR         : longword;            // FLASH control register
+    AR         : longword;            // FLASH address register
+    RESERVED   : longword;            // Reserved, 0x18
+    OBR        : longword;            // FLASH Option byte register
+    WRPR       : longword;            // FLASH Write register
+  end;
+
+  TOB_Registers = record
+    RDP        : word;                // LASH option byte Read protection
+    USER       : word;                // LASH option byte user options
+    RESERVED0  : word;                // Reserved,                                                     0x04
+    RESERVED1  : word;                // Reserved,                                                     0x06
+    WRP0       : word;                // LASH option byte write protection 0
+    WRP1       : word;                // LASH option byte write protection 1
+    WRP2       : word;                // LASH option byte write protection 2
+    WRP3       : word;                // LASH option byte write protection 3
+  end;
+
+  TGPIO_Registers = record
+    MODER      : longword;            // GPIO port mode register
+    OTYPER     : longword;            // GPIO port output type register
+    OSPEEDR    : longword;            // GPIO port output speed register
+    PUPDR      : longword;            // GPIO port pull-up/pull-down register
+    IDR        : longword;            // GPIO port input data register
+    ODR        : longword;            // GPIO port output data register
+    BSRR       : longword;            // GPIO port bit set/reset register
+    LCKR       : longword;            // GPIO port configuration lock register
+    AFR        : array[0..1] of longword; // GPIO alternate function registers
+    BRR        : longword;            // GPIO bit reset register
+  end;
+
+  TOPAMP_Registers = record
+    CSR        : longword;            // OPAMP control and status register
+  end;
+
+  TSYSCFG_Registers = record
+    CFGR1      : longword;            // SYSCFG configuration register 1
+    RESERVED   : longword;            // Reserved,                                                             0x04
+    EXTICR     : array[0..3] of longword; // SYSCFG external interrupt configuration registers
+    CFGR2      : longword;            // SYSCFG configuration register 2
+  end;
+
+  TI2C_Registers = record
+    CR1        : longword;            // I2C Control register 1
+    CR2        : longword;            // I2C Control register 2
+    OAR1       : longword;            // I2C Own address 1 register
+    OAR2       : longword;            // I2C Own address 2 register
+    TIMINGR    : longword;            // I2C Timing register
+    TIMEOUTR   : longword;            // I2C Timeout register
+    ISR        : longword;            // I2C Interrupt and status register
+    ICR        : longword;            // I2C Interrupt clear register
+    PECR       : longword;            // I2C PEC register
+    RXDR       : longword;            // I2C Receive data register
+    TXDR       : longword;            // I2C Transmit data register
+  end;
+
+  TIWDG_Registers = record
+    KR         : longword;            // IWDG Key register
+    PR         : longword;            // IWDG Prescaler register
+    RLR        : longword;            // IWDG Reload register
+    SR         : longword;            // IWDG Status register
+    WINR       : longword;            // IWDG Window register
+  end;
+
+  TPWR_Registers = record
+    CR         : longword;            // PWR power control register
+    CSR        : longword;            // PWR power control/status register
+  end;
+
+  TRCC_Registers = record
+    CR         : longword;            // RCC clock control register
+    CFGR       : longword;            // RCC clock configuration register
+    CIR        : longword;            // RCC clock interrupt register
+    APB2RSTR   : longword;            // RCC APB2 peripheral reset register
+    APB1RSTR   : longword;            // RCC APB1 peripheral reset register
+    AHBENR     : longword;            // RCC AHB peripheral clock register
+    APB2ENR    : longword;            // RCC APB2 peripheral clock enable register
+    APB1ENR    : longword;            // RCC APB1 peripheral clock enable register
+    BDCR       : longword;            // RCC Backup domain control register
+    CSR        : longword;            // RCC clock control & status register
+    AHBRSTR    : longword;            // RCC AHB peripheral reset register
+    CFGR2      : longword;            // RCC clock configuration register 2
+    CFGR3      : longword;            // RCC clock configuration register 3
+  end;
+
+  TRTC_Registers = record
+    TR         : longword;            // RTC time register
+    DR         : longword;            // RTC date register
+    CR         : longword;            // RTC control register
+    ISR        : longword;            // RTC initialization and status register
+    PRER       : longword;            // RTC prescaler register
+    WUTR       : longword;            // RTC wakeup timer register
+    RESERVED0  : longword;            // Reserved, 0x18
+    ALRMAR     : longword;            // RTC alarm A register
+    ALRMBR     : longword;            // RTC alarm B register
+    WPR        : longword;            // RTC write protection register
+    SSR        : longword;            // RTC sub second register
+    SHIFTR     : longword;            // RTC shift control register
+    TSTR       : longword;            // RTC time stamp time register
+    TSDR       : longword;            // RTC time stamp date register
+    TSSSR      : longword;            // RTC time-stamp sub second register
+    CALR       : longword;            // RTC calibration register
+    TAFCR      : longword;            // RTC tamper and alternate function configuration register
+    ALRMASSR   : longword;            // RTC alarm A sub second register
+    ALRMBSSR   : longword;            // RTC alarm B sub second register
+    RESERVED7  : longword;            // Reserved, 0x4C
+    BKP0R      : longword;            // RTC backup register 0
+    BKP1R      : longword;            // RTC backup register 1
+    BKP2R      : longword;            // RTC backup register 2
+    BKP3R      : longword;            // RTC backup register 3
+    BKP4R      : longword;            // RTC backup register 4
+    BKP5R      : longword;            // RTC backup register 5
+    BKP6R      : longword;            // RTC backup register 6
+    BKP7R      : longword;            // RTC backup register 7
+    BKP8R      : longword;            // RTC backup register 8
+    BKP9R      : longword;            // RTC backup register 9
+    BKP10R     : longword;            // RTC backup register 10
+    BKP11R     : longword;            // RTC backup register 11
+    BKP12R     : longword;            // RTC backup register 12
+    BKP13R     : longword;            // RTC backup register 13
+    BKP14R     : longword;            // RTC backup register 14
+    BKP15R     : longword;            // RTC backup register 15
+    BKP16R     : longword;            // RTC backup register 16
+    BKP17R     : longword;            // RTC backup register 17
+    BKP18R     : longword;            // RTC backup register 18
+    BKP19R     : longword;            // RTC backup register 19
+  end;
+
+  TSPI_Registers = record
+    CR1        : longword;            // SPI Control register 1
+    CR2        : longword;            // SPI Control register 2
+    SR         : longword;            // SPI Status register
+    DR         : longword;            // SPI data register
+    CRCPR      : longword;            // SPI CRC polynomial register
+    RXCRCR     : longword;            // SPI Rx CRC register
+    TXCRCR     : longword;            // SPI Tx CRC register
+    I2SCFGR    : longword;            // SPI_I2S configuration register
+    I2SPR      : longword;            // SPI_I2S prescaler register
+  end;
+
+  TTIM_Registers = record
+    CR1        : longword;            // TIM control register 1
+    CR2        : longword;            // TIM control register 2
+    SMCR       : longword;            // TIM slave mode control register
+    DIER       : longword;            // TIM DMA/interrupt enable register
+    SR         : longword;            // TIM status register
+    EGR        : longword;            // TIM event generation register
+    CCMR1      : longword;            // TIM capture/compare mode register 1
+    CCMR2      : longword;            // TIM capture/compare mode register 2
+    CCER       : longword;            // TIM capture/compare enable register
+    CNT        : longword;            // TIM counter register
+    PSC        : longword;            // TIM prescaler
+    ARR        : longword;            // TIM auto-reload register
+    RCR        : longword;            // TIM repetition counter register
+    CCR1       : longword;            // TIM capture/compare register 1
+    CCR2       : longword;            // TIM capture/compare register 2
+    CCR3       : longword;            // TIM capture/compare register 3
+    CCR4       : longword;            // TIM capture/compare register 4
+    BDTR       : longword;            // TIM break and dead-time register
+    DCR        : longword;            // TIM DMA control register
+    DMAR       : longword;            // TIM DMA address for full transfer
+    &OR        : longword;            // TIM option register
+    CCMR3      : longword;            // TIM capture/compare mode register 3
+    CCR5       : longword;            // TIM capture/compare register5
+    CCR6       : longword;            // TIM capture/compare register 4
+  end;
+
+  TTSC_Registers = record
+    CR         : longword;            // TSC control register
+    IER        : longword;            // TSC interrupt enable register
+    ICR        : longword;            // TSC interrupt clear register
+    ISR        : longword;            // TSC interrupt status register
+    IOHCR      : longword;            // TSC I/O hysteresis control register
+    RESERVED1  : longword;            // Reserved
+    IOASCR     : longword;            // TSC I/O analog switch control register
+    RESERVED2  : longword;            // Reserved
+    IOSCR      : longword;            // TSC I/O sampling control register
+    RESERVED3  : longword;            // Reserved
+    IOCCR      : longword;            // TSC I/O channel control register
+    RESERVED4  : longword;            // Reserved
+    IOGCSR     : longword;            // TSC I/O group control status register
+    IOGXCR     : array[0..7] of longword; // TSC I/O group x counter register
+  end;
+
+  TUSART_Registers = record
+    CR1        : longword;            // USART Control register 1
+    CR2        : longword;            // USART Control register 2
+    CR3        : longword;            // USART Control register 3
+    BRR        : longword;            // USART Baud rate register
+    GTPR       : longword;            // USART Guard time and prescaler register
+    RTOR       : longword;            // USART Receiver Time Out register
+    RQR        : longword;            // USART Request register
+    ISR        : longword;            // USART Interrupt and status register
+    ICR        : longword;            // USART Interrupt flag Clear register
+    RDR        : word;                // USART Receive Data register
+    RESERVED1  : word;                // Reserved, 0x26
+    TDR        : word;                // USART Transmit Data register
+    RESERVED2  : word;                // Reserved, 0x2A
+  end;
+
+  TUSB_Registers = record
+    EP0R       : word;                // USB Endpoint 0 register
+    RESERVED0  : word;                // Reserved
+    EP1R       : word;                // USB Endpoint 1 register
+    RESERVED1  : word;                // Reserved
+    EP2R       : word;                // USB Endpoint 2 register
+    RESERVED2  : word;                // Reserved
+    EP3R       : word;                // USB Endpoint 3 register
+    RESERVED3  : word;                // Reserved
+    EP4R       : word;                // USB Endpoint 4 register
+    RESERVED4  : word;                // Reserved
+    EP5R       : word;                // USB Endpoint 5 register
+    RESERVED5  : word;                // Reserved
+    EP6R       : word;                // USB Endpoint 6 register
+    RESERVED6  : word;                // Reserved
+    EP7R       : word;                // USB Endpoint 7 register
+    RESERVED7  : array[0..16] of word; // Reserved
+    CNTR       : word;                // Control register
+    RESERVED8  : word;                // Reserved
+    ISTR       : word;                // Interrupt status register
+    RESERVED9  : word;                // Reserved
+    FNR        : word;                // Frame number register
+    RESERVEDA  : word;                // Reserved
+    DADDR      : word;                // Device address register
+    RESERVEDB  : word;                // Reserved
+    BTABLE     : word;                // Buffer Table address register
+    RESERVEDC  : word;                // Reserved
+    LPMCSR     : word;                // LPM Control and Status register
+    RESERVEDD  : word;                // Reserved
+  end;
+
+  TWWDG_Registers = record
+    CR         : longword;            // WWDG Control register
+    CFR        : longword;            // WWDG Configuration register
+    SR         : longword;            // WWDG Status register
+  end;
+
+const
+  FLASH_BASE   = $08000000;           // FLASH base address in the alias region
+  SRAM_BASE    = $20000000;           // SRAM base address in the alias region
+  PERIPH_BASE  = $40000000;           // Peripheral base address in the alias region
+  SRAM_BB_BASE = $22000000;           // SRAM base address in the bit-band region
+  PERIPH_BB_BASE = $42000000;         // Peripheral base address in the bit-band region
+  APB1PERIPH_BASE = $40000000;
+  APB2PERIPH_BASE = PERIPH_BASE + $00010000;
+  AHB1PERIPH_BASE = PERIPH_BASE + $00020000;
+  AHB2PERIPH_BASE = PERIPH_BASE + $08000000;
+  AHB3PERIPH_BASE = PERIPH_BASE + $10000000;
+  TIM2_BASE    = APB1PERIPH_BASE + $00000000;
+  TIM6_BASE    = APB1PERIPH_BASE + $00001000;
+  RTC_BASE     = APB1PERIPH_BASE + $00002800;
+  WWDG_BASE    = APB1PERIPH_BASE + $00002C00;
+  IWDG_BASE    = APB1PERIPH_BASE + $00003000;
+  I2S2ext_BASE = APB1PERIPH_BASE + $00003400;
+  SPI2_BASE    = APB1PERIPH_BASE + $00003800;
+  SPI3_BASE    = APB1PERIPH_BASE + $00003C00;
+  I2S3ext_BASE = APB1PERIPH_BASE + $00004000;
+  USART2_BASE  = APB1PERIPH_BASE + $00004400;
+  USART3_BASE  = APB1PERIPH_BASE + $00004800;
+  I2C1_BASE    = APB1PERIPH_BASE + $00005400;
+  I2C2_BASE    = APB1PERIPH_BASE + $00005800;
+  USB_BASE     = APB1PERIPH_BASE + $00005C00; // USB_IP Peripheral Registers base address
+  CAN_BASE     = APB1PERIPH_BASE + $00006400;
+  PWR_BASE     = APB1PERIPH_BASE + $00007000;
+  DAC1_BASE    = APB1PERIPH_BASE + $00007400;
+  DAC_BASE     = APB1PERIPH_BASE + $00007400;
+  I2C3_BASE    = APB1PERIPH_BASE + $00007800;
+  SYSCFG_BASE  = APB2PERIPH_BASE + $00000000;
+  COMP2_BASE   = APB2PERIPH_BASE + $00000020;
+  COMP4_BASE   = APB2PERIPH_BASE + $00000028;
+  COMP6_BASE   = APB2PERIPH_BASE + $00000030;
+  COMP_BASE    = APB2PERIPH_BASE + $00000020;
+  OPAMP2_BASE  = APB2PERIPH_BASE + $0000003C;
+  OPAMP_BASE   = APB2PERIPH_BASE + $0000003C;
+  EXTI_BASE    = APB2PERIPH_BASE + $00000400;
+  TIM1_BASE    = APB2PERIPH_BASE + $00002C00;
+  USART1_BASE  = APB2PERIPH_BASE + $00003800;
+  TIM15_BASE   = APB2PERIPH_BASE + $00004000;
+  TIM16_BASE   = APB2PERIPH_BASE + $00004400;
+  TIM17_BASE   = APB2PERIPH_BASE + $00004800;
+  DMA1_BASE    = AHB1PERIPH_BASE + $00000000;
+  DMA1_Channel1_BASE = AHB1PERIPH_BASE + $00000008;
+  DMA1_Channel2_BASE = AHB1PERIPH_BASE + $0000001C;
+  DMA1_Channel3_BASE = AHB1PERIPH_BASE + $00000030;
+  DMA1_Channel4_BASE = AHB1PERIPH_BASE + $00000044;
+  DMA1_Channel5_BASE = AHB1PERIPH_BASE + $00000058;
+  DMA1_Channel6_BASE = AHB1PERIPH_BASE + $0000006C;
+  DMA1_Channel7_BASE = AHB1PERIPH_BASE + $00000080;
+  RCC_BASE     = AHB1PERIPH_BASE + $00001000;
+  FLASH_R_BASE = AHB1PERIPH_BASE + $00002000; // Flash registers base address
+  OB_BASE      = $1FFFF800;           // Flash Option Bytes base address
+  FLASHSIZE_BASE = $1FFFF7CC;         // FLASH Size register base address
+  UID_BASE     = $1FFFF7AC;           // Unique device ID register base address
+  CRC_BASE     = AHB1PERIPH_BASE + $00003000;
+  TSC_BASE     = AHB1PERIPH_BASE + $00004000;
+  GPIOA_BASE   = AHB2PERIPH_BASE + $00000000;
+  GPIOB_BASE   = AHB2PERIPH_BASE + $00000400;
+  GPIOC_BASE   = AHB2PERIPH_BASE + $00000800;
+  GPIOD_BASE   = AHB2PERIPH_BASE + $00000C00;
+  GPIOF_BASE   = AHB2PERIPH_BASE + $00001400;
+  ADC1_BASE    = AHB3PERIPH_BASE + $00000000;
+  ADC1_COMMON_BASE = AHB3PERIPH_BASE + $00000300;
+  DBGMCU_BASE  = $E0042000;           // Debug MCU registers base address
+
+var
+  TIM2         : TTIM_Registers absolute TIM2_BASE;
+  TIM6         : TTIM_Registers absolute TIM6_BASE;
+  RTC          : TRTC_Registers absolute RTC_BASE;
+  WWDG         : TWWDG_Registers absolute WWDG_BASE;
+  IWDG         : TIWDG_Registers absolute IWDG_BASE;
+  I2S2ext      : TSPI_Registers absolute I2S2ext_BASE;
+  SPI2         : TSPI_Registers absolute SPI2_BASE;
+  SPI3         : TSPI_Registers absolute SPI3_BASE;
+  I2S3ext      : TSPI_Registers absolute I2S3ext_BASE;
+  USART2       : TUSART_Registers absolute USART2_BASE;
+  USART3       : TUSART_Registers absolute USART3_BASE;
+  I2C1         : TI2C_Registers absolute I2C1_BASE;
+  I2C2         : TI2C_Registers absolute I2C2_BASE;
+  I2C3         : TI2C_Registers absolute I2C3_BASE;
+  CAN          : TCAN_Registers absolute CAN_BASE;
+  PWR          : TPWR_Registers absolute PWR_BASE;
+  DAC          : TDAC_Registers absolute DAC_BASE;
+  DAC1         : TDAC_Registers absolute DAC1_BASE;
+  COMP2        : TCOMP_Registers absolute COMP2_BASE;
+  COMP4        : TCOMP_Registers absolute COMP4_BASE;
+  COMP6        : TCOMP_Registers absolute COMP6_BASE;
+  COMP         : TCOMP_Registers absolute COMP_BASE;
+  OPAMP        : TOPAMP_Registers absolute OPAMP_BASE;
+  OPAMP2       : TOPAMP_Registers absolute OPAMP2_BASE;
+  SYSCFG       : TSYSCFG_Registers absolute SYSCFG_BASE;
+  EXTI         : TEXTI_Registers absolute EXTI_BASE;
+  TIM1         : TTIM_Registers absolute TIM1_BASE;
+  USART1       : TUSART_Registers absolute USART1_BASE;
+  TIM15        : TTIM_Registers absolute TIM15_BASE;
+  TIM16        : TTIM_Registers absolute TIM16_BASE;
+  TIM17        : TTIM_Registers absolute TIM17_BASE;
+  DBGMCU       : TDBGMCU_Registers absolute DBGMCU_BASE;
+  DMA1         : TDMA_Registers absolute DMA1_BASE;
+  DMA1_Channel1 : TDMA_Channel_Registers absolute DMA1_Channel1_BASE;
+  DMA1_Channel2 : TDMA_Channel_Registers absolute DMA1_Channel2_BASE;
+  DMA1_Channel3 : TDMA_Channel_Registers absolute DMA1_Channel3_BASE;
+  DMA1_Channel4 : TDMA_Channel_Registers absolute DMA1_Channel4_BASE;
+  DMA1_Channel5 : TDMA_Channel_Registers absolute DMA1_Channel5_BASE;
+  DMA1_Channel6 : TDMA_Channel_Registers absolute DMA1_Channel6_BASE;
+  DMA1_Channel7 : TDMA_Channel_Registers absolute DMA1_Channel7_BASE;
+  RCC          : TRCC_Registers absolute RCC_BASE;
+  FLASH        : TFLASH_Registers absolute FLASH_R_BASE;
+  OB           : TOB_Registers absolute OB_BASE;
+  CRC          : TCRC_Registers absolute CRC_BASE;
+  TSC          : TTSC_Registers absolute TSC_BASE;
+  GPIOA        : TGPIO_Registers absolute GPIOA_BASE;
+  GPIOB        : TGPIO_Registers absolute GPIOB_BASE;
+  GPIOC        : TGPIO_Registers absolute GPIOC_BASE;
+  GPIOD        : TGPIO_Registers absolute GPIOD_BASE;
+  GPIOF        : TGPIO_Registers absolute GPIOF_BASE;
+  ADC1         : TADC_Registers absolute ADC1_BASE;
+  ADC1_COMMON  : TADC_Common_Registers absolute ADC1_COMMON_BASE;
+  USB          : TUSB_Registers absolute USB_BASE;
+
+implementation
+
+procedure NonMaskableInt_interrupt; external name 'NonMaskableInt_interrupt';
+procedure HardFault_interrupt; external name 'HardFault_interrupt';
+procedure MemoryManagement_interrupt; external name 'MemoryManagement_interrupt';
+procedure BusFault_interrupt; external name 'BusFault_interrupt';
+procedure UsageFault_interrupt; external name 'UsageFault_interrupt';
+procedure SVCall_interrupt; external name 'SVCall_interrupt';
+procedure DebugMonitor_interrupt; external name 'DebugMonitor_interrupt';
+procedure PendSV_interrupt; external name 'PendSV_interrupt';
+procedure SysTick_interrupt; external name 'SysTick_interrupt';
+procedure WWDG_interrupt; external name 'WWDG_interrupt';
+procedure PVD_interrupt; external name 'PVD_interrupt';
+procedure TAMP_STAMP_interrupt; external name 'TAMP_STAMP_interrupt';
+procedure RTC_WKUP_interrupt; external name 'RTC_WKUP_interrupt';
+procedure FLASH_interrupt; external name 'FLASH_interrupt';
+procedure RCC_interrupt; external name 'RCC_interrupt';
+procedure EXTI0_interrupt; external name 'EXTI0_interrupt';
+procedure EXTI1_interrupt; external name 'EXTI1_interrupt';
+procedure EXTI2_TSC_interrupt; external name 'EXTI2_TSC_interrupt';
+procedure EXTI3_interrupt; external name 'EXTI3_interrupt';
+procedure EXTI4_interrupt; external name 'EXTI4_interrupt';
+procedure DMA1_Channel1_interrupt; external name 'DMA1_Channel1_interrupt';
+procedure DMA1_Channel2_interrupt; external name 'DMA1_Channel2_interrupt';
+procedure DMA1_Channel3_interrupt; external name 'DMA1_Channel3_interrupt';
+procedure DMA1_Channel4_interrupt; external name 'DMA1_Channel4_interrupt';
+procedure DMA1_Channel5_interrupt; external name 'DMA1_Channel5_interrupt';
+procedure DMA1_Channel6_interrupt; external name 'DMA1_Channel6_interrupt';
+procedure DMA1_Channel7_interrupt; external name 'DMA1_Channel7_interrupt';
+procedure ADC1_interrupt; external name 'ADC1_interrupt';
+procedure USB_HP_CAN_TX_interrupt; external name 'USB_HP_CAN_TX_interrupt';
+procedure USB_LP_CAN_RX0_interrupt; external name 'USB_LP_CAN_RX0_interrupt';
+procedure CAN_RX1_interrupt; external name 'CAN_RX1_interrupt';
+procedure CAN_SCE_interrupt; external name 'CAN_SCE_interrupt';
+procedure EXTI9_5_interrupt; external name 'EXTI9_5_interrupt';
+procedure TIM1_BRK_TIM15_interrupt; external name 'TIM1_BRK_TIM15_interrupt';
+procedure TIM1_UP_TIM16_interrupt; external name 'TIM1_UP_TIM16_interrupt';
+procedure TIM1_TRG_COM_TIM17_interrupt; external name 'TIM1_TRG_COM_TIM17_interrupt';
+procedure TIM1_CC_interrupt; external name 'TIM1_CC_interrupt';
+procedure TIM2_interrupt; external name 'TIM2_interrupt';
+procedure I2C1_EV_interrupt; external name 'I2C1_EV_interrupt';
+procedure I2C1_ER_interrupt; external name 'I2C1_ER_interrupt';
+procedure I2C2_EV_interrupt; external name 'I2C2_EV_interrupt';
+procedure I2C2_ER_interrupt; external name 'I2C2_ER_interrupt';
+procedure SPI2_interrupt; external name 'SPI2_interrupt';
+procedure USART1_interrupt; external name 'USART1_interrupt';
+procedure USART2_interrupt; external name 'USART2_interrupt';
+procedure USART3_interrupt; external name 'USART3_interrupt';
+procedure EXTI15_10_interrupt; external name 'EXTI15_10_interrupt';
+procedure RTC_Alarm_interrupt; external name 'RTC_Alarm_interrupt';
+procedure USBWakeUp_interrupt; external name 'USBWakeUp_interrupt';
+procedure SPI3_interrupt; external name 'SPI3_interrupt';
+procedure TIM6_DAC_interrupt; external name 'TIM6_DAC_interrupt';
+procedure COMP2_interrupt; external name 'COMP2_interrupt';
+procedure COMP4_6_interrupt; external name 'COMP4_6_interrupt';
+procedure I2C3_EV_interrupt; external name 'I2C3_EV_interrupt';
+procedure I2C3_ER_interrupt; external name 'I2C3_ER_interrupt';
+procedure USB_HP_interrupt; external name 'USB_HP_interrupt';
+procedure USB_LP_interrupt; external name 'USB_LP_interrupt';
+procedure USBWakeUp_RMP_interrupt; external name 'USBWakeUp_RMP_interrupt';
+procedure FPU_interrupt; external name 'FPU_interrupt';
+
+{$i cortexm4f_start.inc}
+
+procedure Vectors; assembler; nostackframe;
+label interrupt_vectors;
+asm
+  .section ".init.interrupt_vectors"
+  interrupt_vectors:
+  .long _stack_top
+  .long Startup
+  .long NonMaskableInt_interrupt
+  .long HardFault_interrupt
+  .long MemoryManagement_interrupt
+  .long BusFault_interrupt
+  .long UsageFault_interrupt
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long SVCall_interrupt
+  .long DebugMonitor_interrupt
+  .long 0
+  .long PendSV_interrupt
+  .long SysTick_interrupt
+  .long WWDG_interrupt
+  .long PVD_interrupt
+  .long TAMP_STAMP_interrupt
+  .long RTC_WKUP_interrupt
+  .long FLASH_interrupt
+  .long RCC_interrupt
+  .long EXTI0_interrupt
+  .long EXTI1_interrupt
+  .long EXTI2_TSC_interrupt
+  .long EXTI3_interrupt
+  .long EXTI4_interrupt
+  .long DMA1_Channel1_interrupt
+  .long DMA1_Channel2_interrupt
+  .long DMA1_Channel3_interrupt
+  .long DMA1_Channel4_interrupt
+  .long DMA1_Channel5_interrupt
+  .long DMA1_Channel6_interrupt
+  .long DMA1_Channel7_interrupt
+  .long ADC1_interrupt
+  .long USB_HP_CAN_TX_interrupt
+  .long USB_LP_CAN_RX0_interrupt
+  .long CAN_RX1_interrupt
+  .long CAN_SCE_interrupt
+  .long EXTI9_5_interrupt
+  .long TIM1_BRK_TIM15_interrupt
+  .long TIM1_UP_TIM16_interrupt
+  .long TIM1_TRG_COM_TIM17_interrupt
+  .long TIM1_CC_interrupt
+  .long TIM2_interrupt
+  .long 0
+  .long 0
+  .long I2C1_EV_interrupt
+  .long I2C1_ER_interrupt
+  .long I2C2_EV_interrupt
+  .long I2C2_ER_interrupt
+  .long 0
+  .long SPI2_interrupt
+  .long USART1_interrupt
+  .long USART2_interrupt
+  .long USART3_interrupt
+  .long EXTI15_10_interrupt
+  .long RTC_Alarm_interrupt
+  .long USBWakeUp_interrupt
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long SPI3_interrupt
+  .long 0
+  .long 0
+  .long TIM6_DAC_interrupt
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long COMP2_interrupt
+  .long COMP4_6_interrupt
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long I2C3_EV_interrupt
+  .long I2C3_ER_interrupt
+  .long USB_HP_interrupt
+  .long USB_LP_interrupt
+  .long USBWakeUp_RMP_interrupt
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long FPU_interrupt
+  .weak NonMaskableInt_interrupt
+  .weak HardFault_interrupt
+  .weak MemoryManagement_interrupt
+  .weak BusFault_interrupt
+  .weak UsageFault_interrupt
+  .weak SVCall_interrupt
+  .weak DebugMonitor_interrupt
+  .weak PendSV_interrupt
+  .weak SysTick_interrupt
+  .weak WWDG_interrupt
+  .weak PVD_interrupt
+  .weak TAMP_STAMP_interrupt
+  .weak RTC_WKUP_interrupt
+  .weak FLASH_interrupt
+  .weak RCC_interrupt
+  .weak EXTI0_interrupt
+  .weak EXTI1_interrupt
+  .weak EXTI2_TSC_interrupt
+  .weak EXTI3_interrupt
+  .weak EXTI4_interrupt
+  .weak DMA1_Channel1_interrupt
+  .weak DMA1_Channel2_interrupt
+  .weak DMA1_Channel3_interrupt
+  .weak DMA1_Channel4_interrupt
+  .weak DMA1_Channel5_interrupt
+  .weak DMA1_Channel6_interrupt
+  .weak DMA1_Channel7_interrupt
+  .weak ADC1_interrupt
+  .weak USB_HP_CAN_TX_interrupt
+  .weak USB_LP_CAN_RX0_interrupt
+  .weak CAN_RX1_interrupt
+  .weak CAN_SCE_interrupt
+  .weak EXTI9_5_interrupt
+  .weak TIM1_BRK_TIM15_interrupt
+  .weak TIM1_UP_TIM16_interrupt
+  .weak TIM1_TRG_COM_TIM17_interrupt
+  .weak TIM1_CC_interrupt
+  .weak TIM2_interrupt
+  .weak I2C1_EV_interrupt
+  .weak I2C1_ER_interrupt
+  .weak I2C2_EV_interrupt
+  .weak I2C2_ER_interrupt
+  .weak SPI2_interrupt
+  .weak USART1_interrupt
+  .weak USART2_interrupt
+  .weak USART3_interrupt
+  .weak EXTI15_10_interrupt
+  .weak RTC_Alarm_interrupt
+  .weak USBWakeUp_interrupt
+  .weak SPI3_interrupt
+  .weak TIM6_DAC_interrupt
+  .weak COMP2_interrupt
+  .weak COMP4_6_interrupt
+  .weak I2C3_EV_interrupt
+  .weak I2C3_ER_interrupt
+  .weak USB_HP_interrupt
+  .weak USB_LP_interrupt
+  .weak USBWakeUp_RMP_interrupt
+  .weak FPU_interrupt
+  .set NonMaskableInt_interrupt, HaltProc
+  .set HardFault_interrupt, HaltProc
+  .set MemoryManagement_interrupt, HaltProc
+  .set BusFault_interrupt, HaltProc
+  .set UsageFault_interrupt, HaltProc
+  .set SVCall_interrupt, HaltProc
+  .set DebugMonitor_interrupt, HaltProc
+  .set PendSV_interrupt, HaltProc
+  .set SysTick_interrupt, HaltProc
+  .set WWDG_interrupt, HaltProc
+  .set PVD_interrupt, HaltProc
+  .set TAMP_STAMP_interrupt, HaltProc
+  .set RTC_WKUP_interrupt, HaltProc
+  .set FLASH_interrupt, HaltProc
+  .set RCC_interrupt, HaltProc
+  .set EXTI0_interrupt, HaltProc
+  .set EXTI1_interrupt, HaltProc
+  .set EXTI2_TSC_interrupt, HaltProc
+  .set EXTI3_interrupt, HaltProc
+  .set EXTI4_interrupt, HaltProc
+  .set DMA1_Channel1_interrupt, HaltProc
+  .set DMA1_Channel2_interrupt, HaltProc
+  .set DMA1_Channel3_interrupt, HaltProc
+  .set DMA1_Channel4_interrupt, HaltProc
+  .set DMA1_Channel5_interrupt, HaltProc
+  .set DMA1_Channel6_interrupt, HaltProc
+  .set DMA1_Channel7_interrupt, HaltProc
+  .set ADC1_interrupt, HaltProc
+  .set USB_HP_CAN_TX_interrupt, HaltProc
+  .set USB_LP_CAN_RX0_interrupt, HaltProc
+  .set CAN_RX1_interrupt, HaltProc
+  .set CAN_SCE_interrupt, HaltProc
+  .set EXTI9_5_interrupt, HaltProc
+  .set TIM1_BRK_TIM15_interrupt, HaltProc
+  .set TIM1_UP_TIM16_interrupt, HaltProc
+  .set TIM1_TRG_COM_TIM17_interrupt, HaltProc
+  .set TIM1_CC_interrupt, HaltProc
+  .set TIM2_interrupt, HaltProc
+  .set I2C1_EV_interrupt, HaltProc
+  .set I2C1_ER_interrupt, HaltProc
+  .set I2C2_EV_interrupt, HaltProc
+  .set I2C2_ER_interrupt, HaltProc
+  .set SPI2_interrupt, HaltProc
+  .set USART1_interrupt, HaltProc
+  .set USART2_interrupt, HaltProc
+  .set USART3_interrupt, HaltProc
+  .set EXTI15_10_interrupt, HaltProc
+  .set RTC_Alarm_interrupt, HaltProc
+  .set USBWakeUp_interrupt, HaltProc
+  .set SPI3_interrupt, HaltProc
+  .set TIM6_DAC_interrupt, HaltProc
+  .set COMP2_interrupt, HaltProc
+  .set COMP4_6_interrupt, HaltProc
+  .set I2C3_EV_interrupt, HaltProc
+  .set I2C3_ER_interrupt, HaltProc
+  .set USB_HP_interrupt, HaltProc
+  .set USB_LP_interrupt, HaltProc
+  .set USBWakeUp_RMP_interrupt, HaltProc
+  .set FPU_interrupt, HaltProc
+  .text
+end;
+end.
diff -Naur fpc-save/rtl/embedded/arm/stm32f302xc.pp fpc/rtl/embedded/arm/stm32f302xc.pp
--- fpc-save/rtl/embedded/arm/stm32f302xc.pp	1970-01-01 01:00:00.000000000 +0100
+++ fpc/rtl/embedded/arm/stm32f302xc.pp	2018-03-02 17:06:44.000000000 +0100
@@ -0,0 +1,980 @@
+unit stm32f302xc;
+interface
+{$PACKRECORDS C}
+{$GOTO ON}
+// *
+// ******************************************************************************
+// * @file    stm32f302xc.h
+// * @author  MCD Application Team
+//   CMSIS STM32F302xC Devices Peripheral Access Layer Header File.
+// *
+// *          This file contains:
+// *           - Data structures and the address mapping for all peripherals
+// *           - Peripheral's registers declarations and bits definition
+// *           - Macros to access peripheral’s registers hardware
+// *
+// ******************************************************************************
+// * @attention
+// *
+// * <h2><center>&copy; COPYRIGHT(c) 2016 STMicroelectronics</center></h2>
+// *
+// * Redistribution and use in source and binary forms, with or without modification,
+// * are permitted provided that the following conditions are met:
+// *   1. Redistributions of source code must retain the above copyright notice,
+// *      this list of conditions and the following disclaimer.
+// *   2. Redistributions in binary form must reproduce the above copyright notice,
+// *      this list of conditions and the following disclaimer in the documentation
+// *      and/or other materials provided with the distribution.
+// *   3. Neither the name of STMicroelectronics nor the names of its contributors
+// *      may be used to endorse or promote products derived from this software
+// *      without specific prior written permission.
+// *
+// * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
+// * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
+// * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+// * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE
+// * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
+// * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
+// * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER
+// * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+// * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
+// * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
+// *
+// ******************************************************************************
+// Configuration of the Cortex-M4 Processor and Core Peripherals
+// STM32F302xC devices Interrupt Number Definition, according to the selected device
+// *        in @ref Library_configuration_section
+
+type
+  TIRQn_Enum   = (
+    NonMaskableInt_IRQn = -14,        // 2 Non Maskable Interrupt
+    HardFault_IRQn = -13,             // 3 Cortex-M4 Hard Fault Interrupt
+    MemoryManagement_IRQn = -12,      // 4 Cortex-M4 Memory Management Interrupt
+    BusFault_IRQn = -11,              // 5 Cortex-M4 Bus Fault Interrupt
+    UsageFault_IRQn = -10,            // 6 Cortex-M4 Usage Fault Interrupt
+    SVCall_IRQn = -5,                 // 11 Cortex-M4 SV Call Interrupt
+    DebugMonitor_IRQn = -4,           // 12 Cortex-M4 Debug Monitor Interrupt
+    PendSV_IRQn = -2,                 // 14 Cortex-M4 Pend SV Interrupt
+    SysTick_IRQn = -1,                // 15 Cortex-M4 System Tick Interrupt
+    WWDG_IRQn  = 0,                   // Window WatchDog Interrupt
+    PVD_IRQn   = 1,                   // PVD through EXTI Line detection Interrupt
+    TAMP_STAMP_IRQn = 2,              // Tamper and TimeStamp interrupts through the EXTI line 19
+    RTC_WKUP_IRQn = 3,                // RTC Wakeup interrupt through the EXTI line 20
+    FLASH_IRQn = 4,                   // FLASH global Interrupt
+    RCC_IRQn   = 5,                   // RCC global Interrupt
+    EXTI0_IRQn = 6,                   // EXTI Line0 Interrupt
+    EXTI1_IRQn = 7,                   // EXTI Line1 Interrupt
+    EXTI2_TSC_IRQn = 8,               // EXTI Line2 Interrupt and Touch Sense Controller Interrupt
+    EXTI3_IRQn = 9,                   // EXTI Line3 Interrupt
+    EXTI4_IRQn = 10,                  // EXTI Line4 Interrupt
+    DMA1_Channel1_IRQn = 11,          // DMA1 Channel 1 Interrupt
+    DMA1_Channel2_IRQn = 12,          // DMA1 Channel 2 Interrupt
+    DMA1_Channel3_IRQn = 13,          // DMA1 Channel 3 Interrupt
+    DMA1_Channel4_IRQn = 14,          // DMA1 Channel 4 Interrupt
+    DMA1_Channel5_IRQn = 15,          // DMA1 Channel 5 Interrupt
+    DMA1_Channel6_IRQn = 16,          // DMA1 Channel 6 Interrupt
+    DMA1_Channel7_IRQn = 17,          // DMA1 Channel 7 Interrupt
+    ADC1_2_IRQn = 18,                 // ADC1 & ADC2 Interrupts
+    USB_HP_CAN_TX_IRQn = 19,          // USB Device High Priority or CAN TX Interrupts
+    USB_LP_CAN_RX0_IRQn = 20,         // USB Device Low Priority or CAN RX0 Interrupts
+    CAN_RX1_IRQn = 21,                // CAN RX1 Interrupt
+    CAN_SCE_IRQn = 22,                // CAN SCE Interrupt
+    EXTI9_5_IRQn = 23,                // External Line[9:5] Interrupts
+    TIM1_BRK_TIM15_IRQn = 24,         // TIM1 Break and TIM15 Interrupts
+    TIM1_UP_TIM16_IRQn = 25,          // TIM1 Update and TIM16 Interrupts
+    TIM1_TRG_COM_TIM17_IRQn = 26,     // TIM1 Trigger and Commutation and TIM17 Interrupt
+    TIM1_CC_IRQn = 27,                // TIM1 Capture Compare Interrupt
+    TIM2_IRQn  = 28,                  // TIM2 global Interrupt
+    TIM3_IRQn  = 29,                  // TIM3 global Interrupt
+    TIM4_IRQn  = 30,                  // TIM4 global Interrupt
+    I2C1_EV_IRQn = 31,                // I2C1 Event Interrupt & EXTI Line23 Interrupt (I2C1 wakeup)
+    I2C1_ER_IRQn = 32,                // I2C1 Error Interrupt
+    I2C2_EV_IRQn = 33,                // I2C2 Event Interrupt & EXTI Line24 Interrupt (I2C2 wakeup)
+    I2C2_ER_IRQn = 34,                // I2C2 Error Interrupt
+    SPI1_IRQn  = 35,                  // SPI1 global Interrupt
+    SPI2_IRQn  = 36,                  // SPI2 global Interrupt
+    USART1_IRQn = 37,                 // USART1 global Interrupt & EXTI Line25 Interrupt (USART1 wakeup)
+    USART2_IRQn = 38,                 // USART2 global Interrupt & EXTI Line26 Interrupt (USART2 wakeup)
+    USART3_IRQn = 39,                 // USART3 global Interrupt & EXTI Line28 Interrupt (USART3 wakeup)
+    EXTI15_10_IRQn = 40,              // External Line[15:10] Interrupts
+    RTC_Alarm_IRQn = 41,              // RTC Alarm (A and B) through EXTI Line 17 Interrupt
+    USBWakeUp_IRQn = 42,              // USB Wakeup Interrupt
+    SPI3_IRQn  = 51,                  // SPI3 global Interrupt
+    UART4_IRQn = 52,                  // UART4 global Interrupt & EXTI Line34 Interrupt (UART4 wakeup)
+    UART5_IRQn = 53,                  // UART5 global Interrupt & EXTI Line35 Interrupt (UART5 wakeup)
+    TIM6_DAC_IRQn = 54,               // TIM6 global and DAC underrun error Interrupt
+    DMA2_Channel1_IRQn = 56,          // DMA2 Channel 1 global Interrupt
+    DMA2_Channel2_IRQn = 57,          // DMA2 Channel 2 global Interrupt
+    DMA2_Channel3_IRQn = 58,          // DMA2 Channel 3 global Interrupt
+    DMA2_Channel4_IRQn = 59,          // DMA2 Channel 4 global Interrupt
+    DMA2_Channel5_IRQn = 60,          // DMA2 Channel 5 global Interrupt
+    COMP1_2_IRQn = 64,                // COMP1 and COMP2 global Interrupt via EXTI Line21 and 22
+    COMP4_6_IRQn = 65,                // COMP4 and COMP6 global Interrupt via EXTI Line30 and 32
+    USB_HP_IRQn = 74,                 // USB High Priority global Interrupt
+    USB_LP_IRQn = 75,                 // USB Low Priority global Interrupt
+    USBWakeUp_RMP_IRQn = 76,          // USB Wakeup Interrupt remap
+    FPU_IRQn   = 81                   // Floating point Interrupt
+  );
+
+  TADC_Registers = record
+    ISR        : longword;            // ADC Interrupt and Status Register
+    IER        : longword;            // ADC Interrupt Enable Register
+    CR         : longword;            // ADC control register
+    CFGR       : longword;            // ADC Configuration register
+    RESERVED0  : longword;            // Reserved, 0x010
+    SMPR1      : longword;            // ADC sample time register 1
+    SMPR2      : longword;            // ADC sample time register 2
+    RESERVED1  : longword;            // Reserved, 0x01C
+    TR1        : longword;            // ADC watchdog threshold register 1
+    TR2        : longword;            // ADC watchdog threshold register 2
+    TR3        : longword;            // ADC watchdog threshold register 3
+    RESERVED2  : longword;            // Reserved, 0x02C
+    SQR1       : longword;            // ADC regular sequence register 1
+    SQR2       : longword;            // ADC regular sequence register 2
+    SQR3       : longword;            // ADC regular sequence register 3
+    SQR4       : longword;            // ADC regular sequence register 4
+    DR         : longword;            // ADC regular data register
+    RESERVED3  : longword;            // Reserved, 0x044
+    RESERVED4  : longword;            // Reserved, 0x048
+    JSQR       : longword;            // ADC injected sequence register
+    RESERVED5  : array[0..3] of longword; // Reserved, 0x050 - 0x05C
+    OFR1       : longword;            // ADC offset register 1
+    OFR2       : longword;            // ADC offset register 2
+    OFR3       : longword;            // ADC offset register 3
+    OFR4       : longword;            // ADC offset register 4
+    RESERVED6  : array[0..3] of longword; // Reserved, 0x070 - 0x07C
+    JDR1       : longword;            // ADC injected data register 1
+    JDR2       : longword;            // ADC injected data register 2
+    JDR3       : longword;            // ADC injected data register 3
+    JDR4       : longword;            // ADC injected data register 4
+    RESERVED7  : array[0..3] of longword; // Reserved, 0x090 - 0x09C
+    AWD2CR     : longword;            // ADC  Analog Watchdog 2 Configuration Register
+    AWD3CR     : longword;            // ADC  Analog Watchdog 3 Configuration Register
+    RESERVED8  : longword;            // Reserved, 0x0A8
+    RESERVED9  : longword;            // Reserved, 0x0AC
+    DIFSEL     : longword;            // ADC  Differential Mode Selection Register
+    CALFACT    : longword;            // ADC  Calibration Factors
+  end;
+
+  TADC_COMMON_Registers = record
+    CSR        : longword;            // ADC Common status register
+    RESERVED   : longword;            // Reserved, ADC1/3 base address + 0x304
+    CCR        : longword;            // ADC common control register
+    CDR        : longword;            // ADC common regular data register for dual
+  end;
+
+  TCAN_TXMAILBOX_Registers = record
+    TIR        : longword;            // CAN TX mailbox identifier register
+    TDTR       : longword;            // CAN mailbox data length control and time stamp register
+    TDLR       : longword;            // CAN mailbox data low register
+    TDHR       : longword;            // CAN mailbox data high register
+  end;
+
+  TCAN_FIFOMAILBOX_Registers = record
+    RIR        : longword;            // CAN receive FIFO mailbox identifier register
+    RDTR       : longword;            // CAN receive FIFO mailbox data length control and time stamp register
+    RDLR       : longword;            // CAN receive FIFO mailbox data low register
+    RDHR       : longword;            // CAN receive FIFO mailbox data high register
+  end;
+
+  TCAN_FILTERREGISTER_Registers = record
+    FR1        : longword;            // CAN Filter bank register 1
+    FR2        : longword;            // CAN Filter bank register 1
+  end;
+
+  TCAN_Registers = record
+    MCR        : longword;            // CAN master control register
+    MSR        : longword;            // CAN master status register
+    TSR        : longword;            // CAN transmit status register
+    RF0R       : longword;            // CAN receive FIFO 0 register
+    RF1R       : longword;            // CAN receive FIFO 1 register
+    IER        : longword;            // CAN interrupt enable register
+    ESR        : longword;            // CAN error status register
+    BTR        : longword;            // CAN bit timing register
+    RESERVED0  : array[0..87] of longword; // Reserved, 0x020 - 0x17F
+    sTxMailBox : array[0..2] of TCAN_TxMailBox_Registers; // CAN Tx MailBox
+    sFIFOMailBox : array[0..1] of TCAN_FIFOMailBox_Registers; // CAN FIFO MailBox
+    RESERVED1  : array[0..11] of longword; // Reserved, 0x1D0 - 0x1FF
+    FMR        : longword;            // CAN filter master register
+    FM1R       : longword;            // CAN filter mode register
+    RESERVED2  : longword;            // Reserved, 0x208
+    FS1R       : longword;            // CAN filter scale register
+    RESERVED3  : longword;            // Reserved, 0x210
+    FFA1R      : longword;            // CAN filter FIFO assignment register
+    RESERVED4  : longword;            // Reserved, 0x218
+    FA1R       : longword;            // CAN filter activation register
+    RESERVED5  : array[0..7] of longword; // Reserved, 0x220-0x23F
+    sFilterRegister : array[0..27] of TCAN_FilterRegister_Registers; // CAN Filter Register
+  end;
+
+  TCOMP_Registers = record
+    CSR        : longword;            // COMP control and status register
+  end;
+
+  TCOMP_COMMON_Registers = record
+    CSR        : longword;            // COMP control and status register, used for bits common to several COMP instances
+  end;
+
+  TCRC_Registers = record
+    DR         : longword;            // CRC Data register
+    IDR        : byte;                // CRC Independent data register
+    RESERVED0  : byte;                // Reserved,                                                    0x05
+    RESERVED1  : word;                // Reserved,                                                    0x06
+    CR         : longword;            // CRC Control register
+    RESERVED2  : longword;            // Reserved,                                                    0x0C
+    INIT       : longword;            // Initial CRC value register
+    POL        : longword;            // CRC polynomial register
+  end;
+
+  TDAC_Registers = record
+    CR         : longword;            // DAC control register
+    SWTRIGR    : longword;            // DAC software trigger register
+    DHR12R1    : longword;            // DAC channel1 12-bit right-aligned data holding register
+    DHR12L1    : longword;            // DAC channel1 12-bit left aligned data holding register
+    DHR8R1     : longword;            // DAC channel1 8-bit right aligned data holding register
+    RESERVED0  : longword;            // Reserved,                                                                0x14
+    RESERVED1  : longword;            // Reserved,                                                                0x18
+    RESERVED2  : longword;            // Reserved,                                                                0x1C
+    DHR12RD    : longword;            // Dual DAC 12-bit right-aligned data holding register
+    DHR12LD    : longword;            // DUAL DAC 12-bit left aligned data holding register
+    DHR8RD     : longword;            // DUAL DAC 8-bit right aligned data holding register
+    DOR1       : longword;            // DAC channel1 data output register
+    RESERVED3  : longword;            // Reserved,                                                                0x30
+    SR         : longword;            // DAC status register
+  end;
+
+  TDBGMCU_Registers = record
+    IDCODE     : longword;            // MCU device ID code
+    CR         : longword;            // Debug MCU configuration register
+    APB1FZ     : longword;            // Debug MCU APB1 freeze register
+    APB2FZ     : longword;            // Debug MCU APB2 freeze register
+  end;
+
+  TDMA_CHANNEL_Registers = record
+    CCR        : longword;            // DMA channel x configuration register
+    CNDTR      : longword;            // DMA channel x number of data register
+    CPAR       : longword;            // DMA channel x peripheral address register
+    CMAR       : longword;            // DMA channel x memory address register
+  end;
+
+  TDMA_Registers = record
+    ISR        : longword;            // DMA interrupt status register
+    IFCR       : longword;            // DMA interrupt flag clear register
+  end;
+
+  TEXTI_Registers = record
+    IMR        : longword;            // XTI Interrupt mask register
+    EMR        : longword;            // XTI Event mask register
+    RTSR       : longword;            // XTI Rising trigger selection register
+    FTSR       : longword;            // XTI Falling trigger selection register
+    SWIER      : longword;            // XTI Software interrupt event register
+    PR         : longword;            // XTI Pending register
+    RESERVED1  : longword;            // Reserved, 0x18
+    RESERVED2  : longword;            // Reserved, 0x1C
+    IMR2       : longword;            // EXTI Interrupt mask register
+    EMR2       : longword;            // EXTI Event mask register
+    RTSR2      : longword;            // EXTI Rising trigger selection register
+    FTSR2      : longword;            // EXTI Falling trigger selection register
+    SWIER2     : longword;            // EXTI Software interrupt event register
+    PR2        : longword;            // EXTI Pending register
+  end;
+
+  TFLASH_Registers = record
+    ACR        : longword;            // FLASH access control register
+    KEYR       : longword;            // FLASH key register
+    OPTKEYR    : longword;            // FLASH option key register
+    SR         : longword;            // FLASH status register
+    CR         : longword;            // FLASH control register
+    AR         : longword;            // FLASH address register
+    RESERVED   : longword;            // Reserved, 0x18
+    OBR        : longword;            // FLASH Option byte register
+    WRPR       : longword;            // FLASH Write register
+  end;
+
+  TOB_Registers = record
+    RDP        : word;                // LASH option byte Read protection
+    USER       : word;                // LASH option byte user options
+    RESERVED0  : word;                // Reserved,                                                     0x04
+    RESERVED1  : word;                // Reserved,                                                     0x06
+    WRP0       : word;                // LASH option byte write protection 0
+    WRP1       : word;                // LASH option byte write protection 1
+    WRP2       : word;                // LASH option byte write protection 2
+    WRP3       : word;                // LASH option byte write protection 3
+  end;
+
+  TGPIO_Registers = record
+    MODER      : longword;            // GPIO port mode register
+    OTYPER     : longword;            // GPIO port output type register
+    OSPEEDR    : longword;            // GPIO port output speed register
+    PUPDR      : longword;            // GPIO port pull-up/pull-down register
+    IDR        : longword;            // GPIO port input data register
+    ODR        : longword;            // GPIO port output data register
+    BSRR       : longword;            // GPIO port bit set/reset register
+    LCKR       : longword;            // GPIO port configuration lock register
+    AFR        : array[0..1] of longword; // GPIO alternate function registers
+    BRR        : longword;            // GPIO bit reset register
+  end;
+
+  TOPAMP_Registers = record
+    CSR        : longword;            // OPAMP control and status register
+  end;
+
+  TSYSCFG_Registers = record
+    CFGR1      : longword;            // SYSCFG configuration register 1
+    RESERVED   : longword;            // Reserved,                                                             0x04
+    EXTICR     : array[0..3] of longword; // SYSCFG external interrupt configuration registers
+    CFGR2      : longword;            // SYSCFG configuration register 2
+  end;
+
+  TI2C_Registers = record
+    CR1        : longword;            // I2C Control register 1
+    CR2        : longword;            // I2C Control register 2
+    OAR1       : longword;            // I2C Own address 1 register
+    OAR2       : longword;            // I2C Own address 2 register
+    TIMINGR    : longword;            // I2C Timing register
+    TIMEOUTR   : longword;            // I2C Timeout register
+    ISR        : longword;            // I2C Interrupt and status register
+    ICR        : longword;            // I2C Interrupt clear register
+    PECR       : longword;            // I2C PEC register
+    RXDR       : longword;            // I2C Receive data register
+    TXDR       : longword;            // I2C Transmit data register
+  end;
+
+  TIWDG_Registers = record
+    KR         : longword;            // IWDG Key register
+    PR         : longword;            // IWDG Prescaler register
+    RLR        : longword;            // IWDG Reload register
+    SR         : longword;            // IWDG Status register
+    WINR       : longword;            // IWDG Window register
+  end;
+
+  TPWR_Registers = record
+    CR         : longword;            // PWR power control register
+    CSR        : longword;            // PWR power control/status register
+  end;
+
+  TRCC_Registers = record
+    CR         : longword;            // RCC clock control register
+    CFGR       : longword;            // RCC clock configuration register
+    CIR        : longword;            // RCC clock interrupt register
+    APB2RSTR   : longword;            // RCC APB2 peripheral reset register
+    APB1RSTR   : longword;            // RCC APB1 peripheral reset register
+    AHBENR     : longword;            // RCC AHB peripheral clock register
+    APB2ENR    : longword;            // RCC APB2 peripheral clock enable register
+    APB1ENR    : longword;            // RCC APB1 peripheral clock enable register
+    BDCR       : longword;            // RCC Backup domain control register
+    CSR        : longword;            // RCC clock control & status register
+    AHBRSTR    : longword;            // RCC AHB peripheral reset register
+    CFGR2      : longword;            // RCC clock configuration register 2
+    CFGR3      : longword;            // RCC clock configuration register 3
+  end;
+
+  TRTC_Registers = record
+    TR         : longword;            // RTC time register
+    DR         : longword;            // RTC date register
+    CR         : longword;            // RTC control register
+    ISR        : longword;            // RTC initialization and status register
+    PRER       : longword;            // RTC prescaler register
+    WUTR       : longword;            // RTC wakeup timer register
+    RESERVED0  : longword;            // Reserved, 0x18
+    ALRMAR     : longword;            // RTC alarm A register
+    ALRMBR     : longword;            // RTC alarm B register
+    WPR        : longword;            // RTC write protection register
+    SSR        : longword;            // RTC sub second register
+    SHIFTR     : longword;            // RTC shift control register
+    TSTR       : longword;            // RTC time stamp time register
+    TSDR       : longword;            // RTC time stamp date register
+    TSSSR      : longword;            // RTC time-stamp sub second register
+    CALR       : longword;            // RTC calibration register
+    TAFCR      : longword;            // RTC tamper and alternate function configuration register
+    ALRMASSR   : longword;            // RTC alarm A sub second register
+    ALRMBSSR   : longword;            // RTC alarm B sub second register
+    RESERVED7  : longword;            // Reserved, 0x4C
+    BKP0R      : longword;            // RTC backup register 0
+    BKP1R      : longword;            // RTC backup register 1
+    BKP2R      : longword;            // RTC backup register 2
+    BKP3R      : longword;            // RTC backup register 3
+    BKP4R      : longword;            // RTC backup register 4
+    BKP5R      : longword;            // RTC backup register 5
+    BKP6R      : longword;            // RTC backup register 6
+    BKP7R      : longword;            // RTC backup register 7
+    BKP8R      : longword;            // RTC backup register 8
+    BKP9R      : longword;            // RTC backup register 9
+    BKP10R     : longword;            // RTC backup register 10
+    BKP11R     : longword;            // RTC backup register 11
+    BKP12R     : longword;            // RTC backup register 12
+    BKP13R     : longword;            // RTC backup register 13
+    BKP14R     : longword;            // RTC backup register 14
+    BKP15R     : longword;            // RTC backup register 15
+  end;
+
+  TSPI_Registers = record
+    CR1        : longword;            // SPI Control register 1
+    CR2        : longword;            // SPI Control register 2
+    SR         : longword;            // SPI Status register
+    DR         : longword;            // SPI data register
+    CRCPR      : longword;            // SPI CRC polynomial register
+    RXCRCR     : longword;            // SPI Rx CRC register
+    TXCRCR     : longword;            // SPI Tx CRC register
+    I2SCFGR    : longword;            // SPI_I2S configuration register
+    I2SPR      : longword;            // SPI_I2S prescaler register
+  end;
+
+  TTIM_Registers = record
+    CR1        : longword;            // TIM control register 1
+    CR2        : longword;            // TIM control register 2
+    SMCR       : longword;            // TIM slave mode control register
+    DIER       : longword;            // TIM DMA/interrupt enable register
+    SR         : longword;            // TIM status register
+    EGR        : longword;            // TIM event generation register
+    CCMR1      : longword;            // TIM capture/compare mode register 1
+    CCMR2      : longword;            // TIM capture/compare mode register 2
+    CCER       : longword;            // TIM capture/compare enable register
+    CNT        : longword;            // TIM counter register
+    PSC        : longword;            // TIM prescaler
+    ARR        : longword;            // TIM auto-reload register
+    RCR        : longword;            // TIM repetition counter register
+    CCR1       : longword;            // TIM capture/compare register 1
+    CCR2       : longword;            // TIM capture/compare register 2
+    CCR3       : longword;            // TIM capture/compare register 3
+    CCR4       : longword;            // TIM capture/compare register 4
+    BDTR       : longword;            // TIM break and dead-time register
+    DCR        : longword;            // TIM DMA control register
+    DMAR       : longword;            // TIM DMA address for full transfer
+    &OR        : longword;            // TIM option register
+    CCMR3      : longword;            // TIM capture/compare mode register 3
+    CCR5       : longword;            // TIM capture/compare register5
+    CCR6       : longword;            // TIM capture/compare register 4
+  end;
+
+  TTSC_Registers = record
+    CR         : longword;            // TSC control register
+    IER        : longword;            // TSC interrupt enable register
+    ICR        : longword;            // TSC interrupt clear register
+    ISR        : longword;            // TSC interrupt status register
+    IOHCR      : longword;            // TSC I/O hysteresis control register
+    RESERVED1  : longword;            // Reserved
+    IOASCR     : longword;            // TSC I/O analog switch control register
+    RESERVED2  : longword;            // Reserved
+    IOSCR      : longword;            // TSC I/O sampling control register
+    RESERVED3  : longword;            // Reserved
+    IOCCR      : longword;            // TSC I/O channel control register
+    RESERVED4  : longword;            // Reserved
+    IOGCSR     : longword;            // TSC I/O group control status register
+    IOGXCR     : array[0..7] of longword; // TSC I/O group x counter register
+  end;
+
+  TUSART_Registers = record
+    CR1        : longword;            // USART Control register 1
+    CR2        : longword;            // USART Control register 2
+    CR3        : longword;            // USART Control register 3
+    BRR        : longword;            // USART Baud rate register
+    GTPR       : longword;            // USART Guard time and prescaler register
+    RTOR       : longword;            // USART Receiver Time Out register
+    RQR        : longword;            // USART Request register
+    ISR        : longword;            // USART Interrupt and status register
+    ICR        : longword;            // USART Interrupt flag Clear register
+    RDR        : word;                // USART Receive Data register
+    RESERVED1  : word;                // Reserved, 0x26
+    TDR        : word;                // USART Transmit Data register
+    RESERVED2  : word;                // Reserved, 0x2A
+  end;
+
+  TUSB_Registers = record
+    EP0R       : word;                // USB Endpoint 0 register
+    RESERVED0  : word;                // Reserved
+    EP1R       : word;                // USB Endpoint 1 register
+    RESERVED1  : word;                // Reserved
+    EP2R       : word;                // USB Endpoint 2 register
+    RESERVED2  : word;                // Reserved
+    EP3R       : word;                // USB Endpoint 3 register
+    RESERVED3  : word;                // Reserved
+    EP4R       : word;                // USB Endpoint 4 register
+    RESERVED4  : word;                // Reserved
+    EP5R       : word;                // USB Endpoint 5 register
+    RESERVED5  : word;                // Reserved
+    EP6R       : word;                // USB Endpoint 6 register
+    RESERVED6  : word;                // Reserved
+    EP7R       : word;                // USB Endpoint 7 register
+    RESERVED7  : array[0..16] of word; // Reserved
+    CNTR       : word;                // Control register
+    RESERVED8  : word;                // Reserved
+    ISTR       : word;                // Interrupt status register
+    RESERVED9  : word;                // Reserved
+    FNR        : word;                // Frame number register
+    RESERVEDA  : word;                // Reserved
+    DADDR      : word;                // Device address register
+    RESERVEDB  : word;                // Reserved
+    BTABLE     : word;                // Buffer Table address register
+    RESERVEDC  : word;                // Reserved
+  end;
+
+  TWWDG_Registers = record
+    CR         : longword;            // WWDG Control register
+    CFR        : longword;            // WWDG Configuration register
+    SR         : longword;            // WWDG Status register
+  end;
+
+const
+  FLASH_BASE   = $08000000;           // FLASH base address in the alias region
+  SRAM_BASE    = $20000000;           // SRAM base address in the alias region
+  PERIPH_BASE  = $40000000;           // Peripheral base address in the alias region
+  SRAM_BB_BASE = $22000000;           // SRAM base address in the bit-band region
+  PERIPH_BB_BASE = $42000000;         // Peripheral base address in the bit-band region
+  APB1PERIPH_BASE = $40000000;
+  APB2PERIPH_BASE = PERIPH_BASE + $00010000;
+  AHB1PERIPH_BASE = PERIPH_BASE + $00020000;
+  AHB2PERIPH_BASE = PERIPH_BASE + $08000000;
+  AHB3PERIPH_BASE = PERIPH_BASE + $10000000;
+  TIM2_BASE    = APB1PERIPH_BASE + $00000000;
+  TIM3_BASE    = APB1PERIPH_BASE + $00000400;
+  TIM4_BASE    = APB1PERIPH_BASE + $00000800;
+  TIM6_BASE    = APB1PERIPH_BASE + $00001000;
+  RTC_BASE     = APB1PERIPH_BASE + $00002800;
+  WWDG_BASE    = APB1PERIPH_BASE + $00002C00;
+  IWDG_BASE    = APB1PERIPH_BASE + $00003000;
+  I2S2ext_BASE = APB1PERIPH_BASE + $00003400;
+  SPI2_BASE    = APB1PERIPH_BASE + $00003800;
+  SPI3_BASE    = APB1PERIPH_BASE + $00003C00;
+  I2S3ext_BASE = APB1PERIPH_BASE + $00004000;
+  USART2_BASE  = APB1PERIPH_BASE + $00004400;
+  USART3_BASE  = APB1PERIPH_BASE + $00004800;
+  UART4_BASE   = APB1PERIPH_BASE + $00004C00;
+  UART5_BASE   = APB1PERIPH_BASE + $00005000;
+  I2C1_BASE    = APB1PERIPH_BASE + $00005400;
+  I2C2_BASE    = APB1PERIPH_BASE + $00005800;
+  USB_BASE     = APB1PERIPH_BASE + $00005C00; // USB_IP Peripheral Registers base address
+  CAN_BASE     = APB1PERIPH_BASE + $00006400;
+  PWR_BASE     = APB1PERIPH_BASE + $00007000;
+  DAC1_BASE    = APB1PERIPH_BASE + $00007400;
+  DAC_BASE     = APB1PERIPH_BASE + $00007400;
+  SYSCFG_BASE  = APB2PERIPH_BASE + $00000000;
+  COMP1_BASE   = APB2PERIPH_BASE + $0000001C;
+  COMP2_BASE   = APB2PERIPH_BASE + $00000020;
+  COMP4_BASE   = APB2PERIPH_BASE + $00000028;
+  COMP6_BASE   = APB2PERIPH_BASE + $00000030;
+  COMP_BASE    = APB2PERIPH_BASE + $0000001C;
+  OPAMP1_BASE  = APB2PERIPH_BASE + $00000038;
+  OPAMP2_BASE  = APB2PERIPH_BASE + $0000003C;
+  OPAMP_BASE   = APB2PERIPH_BASE + $00000038;
+  EXTI_BASE    = APB2PERIPH_BASE + $00000400;
+  TIM1_BASE    = APB2PERIPH_BASE + $00002C00;
+  SPI1_BASE    = APB2PERIPH_BASE + $00003000;
+  USART1_BASE  = APB2PERIPH_BASE + $00003800;
+  TIM15_BASE   = APB2PERIPH_BASE + $00004000;
+  TIM16_BASE   = APB2PERIPH_BASE + $00004400;
+  TIM17_BASE   = APB2PERIPH_BASE + $00004800;
+  DMA1_BASE    = AHB1PERIPH_BASE + $00000000;
+  DMA1_Channel1_BASE = AHB1PERIPH_BASE + $00000008;
+  DMA1_Channel2_BASE = AHB1PERIPH_BASE + $0000001C;
+  DMA1_Channel3_BASE = AHB1PERIPH_BASE + $00000030;
+  DMA1_Channel4_BASE = AHB1PERIPH_BASE + $00000044;
+  DMA1_Channel5_BASE = AHB1PERIPH_BASE + $00000058;
+  DMA1_Channel6_BASE = AHB1PERIPH_BASE + $0000006C;
+  DMA1_Channel7_BASE = AHB1PERIPH_BASE + $00000080;
+  DMA2_BASE    = AHB1PERIPH_BASE + $00000400;
+  DMA2_Channel1_BASE = AHB1PERIPH_BASE + $00000408;
+  DMA2_Channel2_BASE = AHB1PERIPH_BASE + $0000041C;
+  DMA2_Channel3_BASE = AHB1PERIPH_BASE + $00000430;
+  DMA2_Channel4_BASE = AHB1PERIPH_BASE + $00000444;
+  DMA2_Channel5_BASE = AHB1PERIPH_BASE + $00000458;
+  RCC_BASE     = AHB1PERIPH_BASE + $00001000;
+  FLASH_R_BASE = AHB1PERIPH_BASE + $00002000; // Flash registers base address
+  OB_BASE      = $1FFFF800;           // Flash Option Bytes base address
+  FLASHSIZE_BASE = $1FFFF7CC;         // FLASH Size register base address
+  UID_BASE     = $1FFFF7AC;           // Unique device ID register base address
+  CRC_BASE     = AHB1PERIPH_BASE + $00003000;
+  TSC_BASE     = AHB1PERIPH_BASE + $00004000;
+  GPIOA_BASE   = AHB2PERIPH_BASE + $00000000;
+  GPIOB_BASE   = AHB2PERIPH_BASE + $00000400;
+  GPIOC_BASE   = AHB2PERIPH_BASE + $00000800;
+  GPIOD_BASE   = AHB2PERIPH_BASE + $00000C00;
+  GPIOE_BASE   = AHB2PERIPH_BASE + $00001000;
+  GPIOF_BASE   = AHB2PERIPH_BASE + $00001400;
+  ADC1_BASE    = AHB3PERIPH_BASE + $00000000;
+  ADC2_BASE    = AHB3PERIPH_BASE + $00000100;
+  ADC1_2_COMMON_BASE = AHB3PERIPH_BASE + $00000300;
+  DBGMCU_BASE  = $E0042000;           // Debug MCU registers base address
+
+var
+  TIM2         : TTIM_Registers absolute TIM2_BASE;
+  TIM3         : TTIM_Registers absolute TIM3_BASE;
+  TIM4         : TTIM_Registers absolute TIM4_BASE;
+  TIM6         : TTIM_Registers absolute TIM6_BASE;
+  RTC          : TRTC_Registers absolute RTC_BASE;
+  WWDG         : TWWDG_Registers absolute WWDG_BASE;
+  IWDG         : TIWDG_Registers absolute IWDG_BASE;
+  I2S2ext      : TSPI_Registers absolute I2S2ext_BASE;
+  SPI2         : TSPI_Registers absolute SPI2_BASE;
+  SPI3         : TSPI_Registers absolute SPI3_BASE;
+  I2S3ext      : TSPI_Registers absolute I2S3ext_BASE;
+  USART2       : TUSART_Registers absolute USART2_BASE;
+  USART3       : TUSART_Registers absolute USART3_BASE;
+  UART4        : TUSART_Registers absolute UART4_BASE;
+  UART5        : TUSART_Registers absolute UART5_BASE;
+  I2C1         : TI2C_Registers absolute I2C1_BASE;
+  I2C2         : TI2C_Registers absolute I2C2_BASE;
+  CAN          : TCAN_Registers absolute CAN_BASE;
+  PWR          : TPWR_Registers absolute PWR_BASE;
+  DAC          : TDAC_Registers absolute DAC_BASE;
+  DAC1         : TDAC_Registers absolute DAC1_BASE;
+  COMP1        : TCOMP_Registers absolute COMP1_BASE;
+  COMP2        : TCOMP_Registers absolute COMP2_BASE;
+  COMP12_COMMON : TCOMP_Common_Registers absolute COMP2_BASE;
+  COMP4        : TCOMP_Registers absolute COMP4_BASE;
+  COMP6        : TCOMP_Registers absolute COMP6_BASE;
+  COMP         : TCOMP_Registers absolute COMP_BASE;
+  OPAMP1       : TOPAMP_Registers absolute OPAMP1_BASE;
+  OPAMP        : TOPAMP_Registers absolute OPAMP_BASE;
+  OPAMP2       : TOPAMP_Registers absolute OPAMP2_BASE;
+  SYSCFG       : TSYSCFG_Registers absolute SYSCFG_BASE;
+  EXTI         : TEXTI_Registers absolute EXTI_BASE;
+  TIM1         : TTIM_Registers absolute TIM1_BASE;
+  SPI1         : TSPI_Registers absolute SPI1_BASE;
+  USART1       : TUSART_Registers absolute USART1_BASE;
+  TIM15        : TTIM_Registers absolute TIM15_BASE;
+  TIM16        : TTIM_Registers absolute TIM16_BASE;
+  TIM17        : TTIM_Registers absolute TIM17_BASE;
+  DBGMCU       : TDBGMCU_Registers absolute DBGMCU_BASE;
+  DMA1         : TDMA_Registers absolute DMA1_BASE;
+  DMA1_Channel1 : TDMA_Channel_Registers absolute DMA1_Channel1_BASE;
+  DMA1_Channel2 : TDMA_Channel_Registers absolute DMA1_Channel2_BASE;
+  DMA1_Channel3 : TDMA_Channel_Registers absolute DMA1_Channel3_BASE;
+  DMA1_Channel4 : TDMA_Channel_Registers absolute DMA1_Channel4_BASE;
+  DMA1_Channel5 : TDMA_Channel_Registers absolute DMA1_Channel5_BASE;
+  DMA1_Channel6 : TDMA_Channel_Registers absolute DMA1_Channel6_BASE;
+  DMA1_Channel7 : TDMA_Channel_Registers absolute DMA1_Channel7_BASE;
+  DMA2         : TDMA_Registers absolute DMA2_BASE;
+  DMA2_Channel1 : TDMA_Channel_Registers absolute DMA2_Channel1_BASE;
+  DMA2_Channel2 : TDMA_Channel_Registers absolute DMA2_Channel2_BASE;
+  DMA2_Channel3 : TDMA_Channel_Registers absolute DMA2_Channel3_BASE;
+  DMA2_Channel4 : TDMA_Channel_Registers absolute DMA2_Channel4_BASE;
+  DMA2_Channel5 : TDMA_Channel_Registers absolute DMA2_Channel5_BASE;
+  RCC          : TRCC_Registers absolute RCC_BASE;
+  FLASH        : TFLASH_Registers absolute FLASH_R_BASE;
+  OB           : TOB_Registers absolute OB_BASE;
+  CRC          : TCRC_Registers absolute CRC_BASE;
+  TSC          : TTSC_Registers absolute TSC_BASE;
+  GPIOA        : TGPIO_Registers absolute GPIOA_BASE;
+  GPIOB        : TGPIO_Registers absolute GPIOB_BASE;
+  GPIOC        : TGPIO_Registers absolute GPIOC_BASE;
+  GPIOD        : TGPIO_Registers absolute GPIOD_BASE;
+  GPIOE        : TGPIO_Registers absolute GPIOE_BASE;
+  GPIOF        : TGPIO_Registers absolute GPIOF_BASE;
+  ADC1         : TADC_Registers absolute ADC1_BASE;
+  ADC2         : TADC_Registers absolute ADC2_BASE;
+  ADC12_COMMON : TADC_Common_Registers absolute ADC1_2_COMMON_BASE;
+  USB          : TUSB_Registers absolute USB_BASE;
+
+implementation
+
+procedure NonMaskableInt_interrupt; external name 'NonMaskableInt_interrupt';
+procedure HardFault_interrupt; external name 'HardFault_interrupt';
+procedure MemoryManagement_interrupt; external name 'MemoryManagement_interrupt';
+procedure BusFault_interrupt; external name 'BusFault_interrupt';
+procedure UsageFault_interrupt; external name 'UsageFault_interrupt';
+procedure SVCall_interrupt; external name 'SVCall_interrupt';
+procedure DebugMonitor_interrupt; external name 'DebugMonitor_interrupt';
+procedure PendSV_interrupt; external name 'PendSV_interrupt';
+procedure SysTick_interrupt; external name 'SysTick_interrupt';
+procedure WWDG_interrupt; external name 'WWDG_interrupt';
+procedure PVD_interrupt; external name 'PVD_interrupt';
+procedure TAMP_STAMP_interrupt; external name 'TAMP_STAMP_interrupt';
+procedure RTC_WKUP_interrupt; external name 'RTC_WKUP_interrupt';
+procedure FLASH_interrupt; external name 'FLASH_interrupt';
+procedure RCC_interrupt; external name 'RCC_interrupt';
+procedure EXTI0_interrupt; external name 'EXTI0_interrupt';
+procedure EXTI1_interrupt; external name 'EXTI1_interrupt';
+procedure EXTI2_TSC_interrupt; external name 'EXTI2_TSC_interrupt';
+procedure EXTI3_interrupt; external name 'EXTI3_interrupt';
+procedure EXTI4_interrupt; external name 'EXTI4_interrupt';
+procedure DMA1_Channel1_interrupt; external name 'DMA1_Channel1_interrupt';
+procedure DMA1_Channel2_interrupt; external name 'DMA1_Channel2_interrupt';
+procedure DMA1_Channel3_interrupt; external name 'DMA1_Channel3_interrupt';
+procedure DMA1_Channel4_interrupt; external name 'DMA1_Channel4_interrupt';
+procedure DMA1_Channel5_interrupt; external name 'DMA1_Channel5_interrupt';
+procedure DMA1_Channel6_interrupt; external name 'DMA1_Channel6_interrupt';
+procedure DMA1_Channel7_interrupt; external name 'DMA1_Channel7_interrupt';
+procedure ADC1_2_interrupt; external name 'ADC1_2_interrupt';
+procedure USB_HP_CAN_TX_interrupt; external name 'USB_HP_CAN_TX_interrupt';
+procedure USB_LP_CAN_RX0_interrupt; external name 'USB_LP_CAN_RX0_interrupt';
+procedure CAN_RX1_interrupt; external name 'CAN_RX1_interrupt';
+procedure CAN_SCE_interrupt; external name 'CAN_SCE_interrupt';
+procedure EXTI9_5_interrupt; external name 'EXTI9_5_interrupt';
+procedure TIM1_BRK_TIM15_interrupt; external name 'TIM1_BRK_TIM15_interrupt';
+procedure TIM1_UP_TIM16_interrupt; external name 'TIM1_UP_TIM16_interrupt';
+procedure TIM1_TRG_COM_TIM17_interrupt; external name 'TIM1_TRG_COM_TIM17_interrupt';
+procedure TIM1_CC_interrupt; external name 'TIM1_CC_interrupt';
+procedure TIM2_interrupt; external name 'TIM2_interrupt';
+procedure TIM3_interrupt; external name 'TIM3_interrupt';
+procedure TIM4_interrupt; external name 'TIM4_interrupt';
+procedure I2C1_EV_interrupt; external name 'I2C1_EV_interrupt';
+procedure I2C1_ER_interrupt; external name 'I2C1_ER_interrupt';
+procedure I2C2_EV_interrupt; external name 'I2C2_EV_interrupt';
+procedure I2C2_ER_interrupt; external name 'I2C2_ER_interrupt';
+procedure SPI1_interrupt; external name 'SPI1_interrupt';
+procedure SPI2_interrupt; external name 'SPI2_interrupt';
+procedure USART1_interrupt; external name 'USART1_interrupt';
+procedure USART2_interrupt; external name 'USART2_interrupt';
+procedure USART3_interrupt; external name 'USART3_interrupt';
+procedure EXTI15_10_interrupt; external name 'EXTI15_10_interrupt';
+procedure RTC_Alarm_interrupt; external name 'RTC_Alarm_interrupt';
+procedure USBWakeUp_interrupt; external name 'USBWakeUp_interrupt';
+procedure SPI3_interrupt; external name 'SPI3_interrupt';
+procedure UART4_interrupt; external name 'UART4_interrupt';
+procedure UART5_interrupt; external name 'UART5_interrupt';
+procedure TIM6_DAC_interrupt; external name 'TIM6_DAC_interrupt';
+procedure DMA2_Channel1_interrupt; external name 'DMA2_Channel1_interrupt';
+procedure DMA2_Channel2_interrupt; external name 'DMA2_Channel2_interrupt';
+procedure DMA2_Channel3_interrupt; external name 'DMA2_Channel3_interrupt';
+procedure DMA2_Channel4_interrupt; external name 'DMA2_Channel4_interrupt';
+procedure DMA2_Channel5_interrupt; external name 'DMA2_Channel5_interrupt';
+procedure COMP1_2_interrupt; external name 'COMP1_2_interrupt';
+procedure COMP4_6_interrupt; external name 'COMP4_6_interrupt';
+procedure USB_HP_interrupt; external name 'USB_HP_interrupt';
+procedure USB_LP_interrupt; external name 'USB_LP_interrupt';
+procedure USBWakeUp_RMP_interrupt; external name 'USBWakeUp_RMP_interrupt';
+procedure FPU_interrupt; external name 'FPU_interrupt';
+
+{$i cortexm4f_start.inc}
+
+procedure Vectors; assembler; nostackframe;
+label interrupt_vectors;
+asm
+  .section ".init.interrupt_vectors"
+  interrupt_vectors:
+  .long _stack_top
+  .long Startup
+  .long NonMaskableInt_interrupt
+  .long HardFault_interrupt
+  .long MemoryManagement_interrupt
+  .long BusFault_interrupt
+  .long UsageFault_interrupt
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long SVCall_interrupt
+  .long DebugMonitor_interrupt
+  .long 0
+  .long PendSV_interrupt
+  .long SysTick_interrupt
+  .long WWDG_interrupt
+  .long PVD_interrupt
+  .long TAMP_STAMP_interrupt
+  .long RTC_WKUP_interrupt
+  .long FLASH_interrupt
+  .long RCC_interrupt
+  .long EXTI0_interrupt
+  .long EXTI1_interrupt
+  .long EXTI2_TSC_interrupt
+  .long EXTI3_interrupt
+  .long EXTI4_interrupt
+  .long DMA1_Channel1_interrupt
+  .long DMA1_Channel2_interrupt
+  .long DMA1_Channel3_interrupt
+  .long DMA1_Channel4_interrupt
+  .long DMA1_Channel5_interrupt
+  .long DMA1_Channel6_interrupt
+  .long DMA1_Channel7_interrupt
+  .long ADC1_2_interrupt
+  .long USB_HP_CAN_TX_interrupt
+  .long USB_LP_CAN_RX0_interrupt
+  .long CAN_RX1_interrupt
+  .long CAN_SCE_interrupt
+  .long EXTI9_5_interrupt
+  .long TIM1_BRK_TIM15_interrupt
+  .long TIM1_UP_TIM16_interrupt
+  .long TIM1_TRG_COM_TIM17_interrupt
+  .long TIM1_CC_interrupt
+  .long TIM2_interrupt
+  .long TIM3_interrupt
+  .long TIM4_interrupt
+  .long I2C1_EV_interrupt
+  .long I2C1_ER_interrupt
+  .long I2C2_EV_interrupt
+  .long I2C2_ER_interrupt
+  .long SPI1_interrupt
+  .long SPI2_interrupt
+  .long USART1_interrupt
+  .long USART2_interrupt
+  .long USART3_interrupt
+  .long EXTI15_10_interrupt
+  .long RTC_Alarm_interrupt
+  .long USBWakeUp_interrupt
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long SPI3_interrupt
+  .long UART4_interrupt
+  .long UART5_interrupt
+  .long TIM6_DAC_interrupt
+  .long 0
+  .long DMA2_Channel1_interrupt
+  .long DMA2_Channel2_interrupt
+  .long DMA2_Channel3_interrupt
+  .long DMA2_Channel4_interrupt
+  .long DMA2_Channel5_interrupt
+  .long 0
+  .long 0
+  .long 0
+  .long COMP1_2_interrupt
+  .long COMP4_6_interrupt
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long USB_HP_interrupt
+  .long USB_LP_interrupt
+  .long USBWakeUp_RMP_interrupt
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long FPU_interrupt
+  .weak NonMaskableInt_interrupt
+  .weak HardFault_interrupt
+  .weak MemoryManagement_interrupt
+  .weak BusFault_interrupt
+  .weak UsageFault_interrupt
+  .weak SVCall_interrupt
+  .weak DebugMonitor_interrupt
+  .weak PendSV_interrupt
+  .weak SysTick_interrupt
+  .weak WWDG_interrupt
+  .weak PVD_interrupt
+  .weak TAMP_STAMP_interrupt
+  .weak RTC_WKUP_interrupt
+  .weak FLASH_interrupt
+  .weak RCC_interrupt
+  .weak EXTI0_interrupt
+  .weak EXTI1_interrupt
+  .weak EXTI2_TSC_interrupt
+  .weak EXTI3_interrupt
+  .weak EXTI4_interrupt
+  .weak DMA1_Channel1_interrupt
+  .weak DMA1_Channel2_interrupt
+  .weak DMA1_Channel3_interrupt
+  .weak DMA1_Channel4_interrupt
+  .weak DMA1_Channel5_interrupt
+  .weak DMA1_Channel6_interrupt
+  .weak DMA1_Channel7_interrupt
+  .weak ADC1_2_interrupt
+  .weak USB_HP_CAN_TX_interrupt
+  .weak USB_LP_CAN_RX0_interrupt
+  .weak CAN_RX1_interrupt
+  .weak CAN_SCE_interrupt
+  .weak EXTI9_5_interrupt
+  .weak TIM1_BRK_TIM15_interrupt
+  .weak TIM1_UP_TIM16_interrupt
+  .weak TIM1_TRG_COM_TIM17_interrupt
+  .weak TIM1_CC_interrupt
+  .weak TIM2_interrupt
+  .weak TIM3_interrupt
+  .weak TIM4_interrupt
+  .weak I2C1_EV_interrupt
+  .weak I2C1_ER_interrupt
+  .weak I2C2_EV_interrupt
+  .weak I2C2_ER_interrupt
+  .weak SPI1_interrupt
+  .weak SPI2_interrupt
+  .weak USART1_interrupt
+  .weak USART2_interrupt
+  .weak USART3_interrupt
+  .weak EXTI15_10_interrupt
+  .weak RTC_Alarm_interrupt
+  .weak USBWakeUp_interrupt
+  .weak SPI3_interrupt
+  .weak UART4_interrupt
+  .weak UART5_interrupt
+  .weak TIM6_DAC_interrupt
+  .weak DMA2_Channel1_interrupt
+  .weak DMA2_Channel2_interrupt
+  .weak DMA2_Channel3_interrupt
+  .weak DMA2_Channel4_interrupt
+  .weak DMA2_Channel5_interrupt
+  .weak COMP1_2_interrupt
+  .weak COMP4_6_interrupt
+  .weak USB_HP_interrupt
+  .weak USB_LP_interrupt
+  .weak USBWakeUp_RMP_interrupt
+  .weak FPU_interrupt
+  .set NonMaskableInt_interrupt, HaltProc
+  .set HardFault_interrupt, HaltProc
+  .set MemoryManagement_interrupt, HaltProc
+  .set BusFault_interrupt, HaltProc
+  .set UsageFault_interrupt, HaltProc
+  .set SVCall_interrupt, HaltProc
+  .set DebugMonitor_interrupt, HaltProc
+  .set PendSV_interrupt, HaltProc
+  .set SysTick_interrupt, HaltProc
+  .set WWDG_interrupt, HaltProc
+  .set PVD_interrupt, HaltProc
+  .set TAMP_STAMP_interrupt, HaltProc
+  .set RTC_WKUP_interrupt, HaltProc
+  .set FLASH_interrupt, HaltProc
+  .set RCC_interrupt, HaltProc
+  .set EXTI0_interrupt, HaltProc
+  .set EXTI1_interrupt, HaltProc
+  .set EXTI2_TSC_interrupt, HaltProc
+  .set EXTI3_interrupt, HaltProc
+  .set EXTI4_interrupt, HaltProc
+  .set DMA1_Channel1_interrupt, HaltProc
+  .set DMA1_Channel2_interrupt, HaltProc
+  .set DMA1_Channel3_interrupt, HaltProc
+  .set DMA1_Channel4_interrupt, HaltProc
+  .set DMA1_Channel5_interrupt, HaltProc
+  .set DMA1_Channel6_interrupt, HaltProc
+  .set DMA1_Channel7_interrupt, HaltProc
+  .set ADC1_2_interrupt, HaltProc
+  .set USB_HP_CAN_TX_interrupt, HaltProc
+  .set USB_LP_CAN_RX0_interrupt, HaltProc
+  .set CAN_RX1_interrupt, HaltProc
+  .set CAN_SCE_interrupt, HaltProc
+  .set EXTI9_5_interrupt, HaltProc
+  .set TIM1_BRK_TIM15_interrupt, HaltProc
+  .set TIM1_UP_TIM16_interrupt, HaltProc
+  .set TIM1_TRG_COM_TIM17_interrupt, HaltProc
+  .set TIM1_CC_interrupt, HaltProc
+  .set TIM2_interrupt, HaltProc
+  .set TIM3_interrupt, HaltProc
+  .set TIM4_interrupt, HaltProc
+  .set I2C1_EV_interrupt, HaltProc
+  .set I2C1_ER_interrupt, HaltProc
+  .set I2C2_EV_interrupt, HaltProc
+  .set I2C2_ER_interrupt, HaltProc
+  .set SPI1_interrupt, HaltProc
+  .set SPI2_interrupt, HaltProc
+  .set USART1_interrupt, HaltProc
+  .set USART2_interrupt, HaltProc
+  .set USART3_interrupt, HaltProc
+  .set EXTI15_10_interrupt, HaltProc
+  .set RTC_Alarm_interrupt, HaltProc
+  .set USBWakeUp_interrupt, HaltProc
+  .set SPI3_interrupt, HaltProc
+  .set UART4_interrupt, HaltProc
+  .set UART5_interrupt, HaltProc
+  .set TIM6_DAC_interrupt, HaltProc
+  .set DMA2_Channel1_interrupt, HaltProc
+  .set DMA2_Channel2_interrupt, HaltProc
+  .set DMA2_Channel3_interrupt, HaltProc
+  .set DMA2_Channel4_interrupt, HaltProc
+  .set DMA2_Channel5_interrupt, HaltProc
+  .set COMP1_2_interrupt, HaltProc
+  .set COMP4_6_interrupt, HaltProc
+  .set USB_HP_interrupt, HaltProc
+  .set USB_LP_interrupt, HaltProc
+  .set USBWakeUp_RMP_interrupt, HaltProc
+  .set FPU_interrupt, HaltProc
+  .text
+end;
+end.
diff -Naur fpc-save/rtl/embedded/arm/stm32f302xe.pp fpc/rtl/embedded/arm/stm32f302xe.pp
--- fpc-save/rtl/embedded/arm/stm32f302xe.pp	1970-01-01 01:00:00.000000000 +0100
+++ fpc/rtl/embedded/arm/stm32f302xe.pp	2018-03-02 17:06:51.000000000 +0100
@@ -0,0 +1,1052 @@
+unit stm32f302xe;
+interface
+{$PACKRECORDS C}
+{$GOTO ON}
+// *
+// ******************************************************************************
+// * @file    stm32f302xe.h
+// * @author  MCD Application Team
+//   CMSIS STM32F302xE Devices Peripheral Access Layer Header File.
+// *
+// *          This file contains:
+// *           - Data structures and the address mapping for all peripherals
+// *           - Peripheral's registers declarations and bits definition
+// *           - Macros to access peripheral’s registers hardware
+// *
+// ******************************************************************************
+// * @attention
+// *
+// * <h2><center>&copy; COPYRIGHT(c) 2016 STMicroelectronics</center></h2>
+// *
+// * Redistribution and use in source and binary forms, with or without modification,
+// * are permitted provided that the following conditions are met:
+// *   1. Redistributions of source code must retain the above copyright notice,
+// *      this list of conditions and the following disclaimer.
+// *   2. Redistributions in binary form must reproduce the above copyright notice,
+// *      this list of conditions and the following disclaimer in the documentation
+// *      and/or other materials provided with the distribution.
+// *   3. Neither the name of STMicroelectronics nor the names of its contributors
+// *      may be used to endorse or promote products derived from this software
+// *      without specific prior written permission.
+// *
+// * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
+// * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
+// * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+// * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE
+// * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
+// * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
+// * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER
+// * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+// * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
+// * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
+// *
+// ******************************************************************************
+// Configuration of the Cortex-M4 Processor and Core Peripherals
+// STM32F302xE devices Interrupt Number Definition, according to the selected device
+// *        in @ref Library_configuration_section
+
+type
+  TIRQn_Enum   = (
+    NonMaskableInt_IRQn = -14,        // 2 Non Maskable Interrupt
+    HardFault_IRQn = -13,             // 3 Cortex-M4 Hard Fault Interrupt
+    MemoryManagement_IRQn = -12,      // 4 Cortex-M4 Memory Management Interrupt
+    BusFault_IRQn = -11,              // 5 Cortex-M4 Bus Fault Interrupt
+    UsageFault_IRQn = -10,            // 6 Cortex-M4 Usage Fault Interrupt
+    SVCall_IRQn = -5,                 // 11 Cortex-M4 SV Call Interrupt
+    DebugMonitor_IRQn = -4,           // 12 Cortex-M4 Debug Monitor Interrupt
+    PendSV_IRQn = -2,                 // 14 Cortex-M4 Pend SV Interrupt
+    SysTick_IRQn = -1,                // 15 Cortex-M4 System Tick Interrupt
+    WWDG_IRQn  = 0,                   // Window WatchDog Interrupt
+    PVD_IRQn   = 1,                   // PVD through EXTI Line detection Interrupt
+    TAMP_STAMP_IRQn = 2,              // Tamper and TimeStamp interrupts through the EXTI line 19
+    RTC_WKUP_IRQn = 3,                // RTC Wakeup interrupt through the EXTI line 20
+    FLASH_IRQn = 4,                   // FLASH global Interrupt
+    RCC_IRQn   = 5,                   // RCC global Interrupt
+    EXTI0_IRQn = 6,                   // EXTI Line0 Interrupt
+    EXTI1_IRQn = 7,                   // EXTI Line1 Interrupt
+    EXTI2_TSC_IRQn = 8,               // EXTI Line2 Interrupt and Touch Sense Controller Interrupt
+    EXTI3_IRQn = 9,                   // EXTI Line3 Interrupt
+    EXTI4_IRQn = 10,                  // EXTI Line4 Interrupt
+    DMA1_Channel1_IRQn = 11,          // DMA1 Channel 1 Interrupt
+    DMA1_Channel2_IRQn = 12,          // DMA1 Channel 2 Interrupt
+    DMA1_Channel3_IRQn = 13,          // DMA1 Channel 3 Interrupt
+    DMA1_Channel4_IRQn = 14,          // DMA1 Channel 4 Interrupt
+    DMA1_Channel5_IRQn = 15,          // DMA1 Channel 5 Interrupt
+    DMA1_Channel6_IRQn = 16,          // DMA1 Channel 6 Interrupt
+    DMA1_Channel7_IRQn = 17,          // DMA1 Channel 7 Interrupt
+    ADC1_2_IRQn = 18,                 // ADC1 & ADC2 Interrupts
+    USB_HP_CAN_TX_IRQn = 19,          // USB Device High Priority or CAN TX Interrupts
+    USB_LP_CAN_RX0_IRQn = 20,         // USB Device Low Priority or CAN RX0 Interrupts
+    CAN_RX1_IRQn = 21,                // CAN RX1 Interrupt
+    CAN_SCE_IRQn = 22,                // CAN SCE Interrupt
+    EXTI9_5_IRQn = 23,                // External Line[9:5] Interrupts
+    TIM1_BRK_TIM15_IRQn = 24,         // TIM1 Break and TIM15 Interrupts
+    TIM1_UP_TIM16_IRQn = 25,          // TIM1 Update and TIM16 Interrupts
+    TIM1_TRG_COM_TIM17_IRQn = 26,     // TIM1 Trigger and Commutation and TIM17 Interrupt
+    TIM1_CC_IRQn = 27,                // TIM1 Capture Compare Interrupt
+    TIM2_IRQn  = 28,                  // TIM2 global Interrupt
+    TIM3_IRQn  = 29,                  // TIM3 global Interrupt
+    TIM4_IRQn  = 30,                  // TIM4 global Interrupt
+    I2C1_EV_IRQn = 31,                // I2C1 Event Interrupt & EXTI Line23 Interrupt (I2C1 wakeup)
+    I2C1_ER_IRQn = 32,                // I2C1 Error Interrupt
+    I2C2_EV_IRQn = 33,                // I2C2 Event Interrupt & EXTI Line24 Interrupt (I2C2 wakeup)
+    I2C2_ER_IRQn = 34,                // I2C2 Error Interrupt
+    SPI1_IRQn  = 35,                  // SPI1 global Interrupt
+    SPI2_IRQn  = 36,                  // SPI2 global Interrupt
+    USART1_IRQn = 37,                 // USART1 global Interrupt & EXTI Line25 Interrupt (USART1 wakeup)
+    USART2_IRQn = 38,                 // USART2 global Interrupt & EXTI Line26 Interrupt (USART2 wakeup)
+    USART3_IRQn = 39,                 // USART3 global Interrupt & EXTI Line28 Interrupt (USART3 wakeup)
+    EXTI15_10_IRQn = 40,              // External Line[15:10] Interrupts
+    RTC_Alarm_IRQn = 41,              // RTC Alarm (A and B) through EXTI Line 17 Interrupt
+    USBWakeUp_IRQn = 42,              // USB Wakeup Interrupt
+    FMC_IRQn   = 48,                  // FMC global Interrupt
+    SPI3_IRQn  = 51,                  // SPI3 global Interrupt
+    UART4_IRQn = 52,                  // UART4 global Interrupt & EXTI Line34 Interrupt (UART4 wakeup)
+    UART5_IRQn = 53,                  // UART5 global Interrupt & EXTI Line35 Interrupt (UART5 wakeup)
+    TIM6_DAC_IRQn = 54,               // TIM6 global and DAC underrun error Interrupt
+    DMA2_Channel1_IRQn = 56,          // DMA2 Channel 1 global Interrupt
+    DMA2_Channel2_IRQn = 57,          // DMA2 Channel 2 global Interrupt
+    DMA2_Channel3_IRQn = 58,          // DMA2 Channel 3 global Interrupt
+    DMA2_Channel4_IRQn = 59,          // DMA2 Channel 4 global Interrupt
+    DMA2_Channel5_IRQn = 60,          // DMA2 Channel 5 global Interrupt
+    COMP1_2_IRQn = 64,                // COMP1 and COMP2 global Interrupt via EXTI Line21 and 22
+    COMP4_6_IRQn = 65,                // COMP4 and COMP6 global Interrupt via EXTI Line30 and 32
+    I2C3_EV_IRQn = 72,                // I2C3 event interrupt
+    I2C3_ER_IRQn = 73,                // I2C3 Error Interrupt
+    USB_HP_IRQn = 74,                 // USB High Priority global Interrupt
+    USB_LP_IRQn = 75,                 // USB Low Priority global Interrupt
+    USBWakeUp_RMP_IRQn = 76,          // USB Wakeup Interrupt remap
+    FPU_IRQn   = 81,                  // Floating point Interrupt
+    SPI4_IRQn  = 84                   // SPI4 global Interrupt
+  );
+
+  TADC_Registers = record
+    ISR        : longword;            // ADC Interrupt and Status Register
+    IER        : longword;            // ADC Interrupt Enable Register
+    CR         : longword;            // ADC control register
+    CFGR       : longword;            // ADC Configuration register
+    RESERVED0  : longword;            // Reserved, 0x010
+    SMPR1      : longword;            // ADC sample time register 1
+    SMPR2      : longword;            // ADC sample time register 2
+    RESERVED1  : longword;            // Reserved, 0x01C
+    TR1        : longword;            // ADC watchdog threshold register 1
+    TR2        : longword;            // ADC watchdog threshold register 2
+    TR3        : longword;            // ADC watchdog threshold register 3
+    RESERVED2  : longword;            // Reserved, 0x02C
+    SQR1       : longword;            // ADC regular sequence register 1
+    SQR2       : longword;            // ADC regular sequence register 2
+    SQR3       : longword;            // ADC regular sequence register 3
+    SQR4       : longword;            // ADC regular sequence register 4
+    DR         : longword;            // ADC regular data register
+    RESERVED3  : longword;            // Reserved, 0x044
+    RESERVED4  : longword;            // Reserved, 0x048
+    JSQR       : longword;            // ADC injected sequence register
+    RESERVED5  : array[0..3] of longword; // Reserved, 0x050 - 0x05C
+    OFR1       : longword;            // ADC offset register 1
+    OFR2       : longword;            // ADC offset register 2
+    OFR3       : longword;            // ADC offset register 3
+    OFR4       : longword;            // ADC offset register 4
+    RESERVED6  : array[0..3] of longword; // Reserved, 0x070 - 0x07C
+    JDR1       : longword;            // ADC injected data register 1
+    JDR2       : longword;            // ADC injected data register 2
+    JDR3       : longword;            // ADC injected data register 3
+    JDR4       : longword;            // ADC injected data register 4
+    RESERVED7  : array[0..3] of longword; // Reserved, 0x090 - 0x09C
+    AWD2CR     : longword;            // ADC  Analog Watchdog 2 Configuration Register
+    AWD3CR     : longword;            // ADC  Analog Watchdog 3 Configuration Register
+    RESERVED8  : longword;            // Reserved, 0x0A8
+    RESERVED9  : longword;            // Reserved, 0x0AC
+    DIFSEL     : longword;            // ADC  Differential Mode Selection Register
+    CALFACT    : longword;            // ADC  Calibration Factors
+  end;
+
+  TADC_COMMON_Registers = record
+    CSR        : longword;            // ADC Common status register
+    RESERVED   : longword;            // Reserved, ADC1/3 base address + 0x304
+    CCR        : longword;            // ADC common control register
+    CDR        : longword;            // ADC common regular data register for dual
+  end;
+
+  TCAN_TXMAILBOX_Registers = record
+    TIR        : longword;            // CAN TX mailbox identifier register
+    TDTR       : longword;            // CAN mailbox data length control and time stamp register
+    TDLR       : longword;            // CAN mailbox data low register
+    TDHR       : longword;            // CAN mailbox data high register
+  end;
+
+  TCAN_FIFOMAILBOX_Registers = record
+    RIR        : longword;            // CAN receive FIFO mailbox identifier register
+    RDTR       : longword;            // CAN receive FIFO mailbox data length control and time stamp register
+    RDLR       : longword;            // CAN receive FIFO mailbox data low register
+    RDHR       : longword;            // CAN receive FIFO mailbox data high register
+  end;
+
+  TCAN_FILTERREGISTER_Registers = record
+    FR1        : longword;            // CAN Filter bank register 1
+    FR2        : longword;            // CAN Filter bank register 1
+  end;
+
+  TCAN_Registers = record
+    MCR        : longword;            // CAN master control register
+    MSR        : longword;            // CAN master status register
+    TSR        : longword;            // CAN transmit status register
+    RF0R       : longword;            // CAN receive FIFO 0 register
+    RF1R       : longword;            // CAN receive FIFO 1 register
+    IER        : longword;            // CAN interrupt enable register
+    ESR        : longword;            // CAN error status register
+    BTR        : longword;            // CAN bit timing register
+    RESERVED0  : array[0..87] of longword; // Reserved, 0x020 - 0x17F
+    sTxMailBox : array[0..2] of TCAN_TxMailBox_Registers; // CAN Tx MailBox
+    sFIFOMailBox : array[0..1] of TCAN_FIFOMailBox_Registers; // CAN FIFO MailBox
+    RESERVED1  : array[0..11] of longword; // Reserved, 0x1D0 - 0x1FF
+    FMR        : longword;            // CAN filter master register
+    FM1R       : longword;            // CAN filter mode register
+    RESERVED2  : longword;            // Reserved, 0x208
+    FS1R       : longword;            // CAN filter scale register
+    RESERVED3  : longword;            // Reserved, 0x210
+    FFA1R      : longword;            // CAN filter FIFO assignment register
+    RESERVED4  : longword;            // Reserved, 0x218
+    FA1R       : longword;            // CAN filter activation register
+    RESERVED5  : array[0..7] of longword; // Reserved, 0x220-0x23F
+    sFilterRegister : array[0..27] of TCAN_FilterRegister_Registers; // CAN Filter Register
+  end;
+
+  TCOMP_Registers = record
+    CSR        : longword;            // COMP control and status register
+  end;
+
+  TCOMP_COMMON_Registers = record
+    CSR        : longword;            // COMP control and status register, used for bits common to several COMP instances
+  end;
+
+  TCRC_Registers = record
+    DR         : longword;            // CRC Data register
+    IDR        : byte;                // CRC Independent data register
+    RESERVED0  : byte;                // Reserved,                                                    0x05
+    RESERVED1  : word;                // Reserved,                                                    0x06
+    CR         : longword;            // CRC Control register
+    RESERVED2  : longword;            // Reserved,                                                    0x0C
+    INIT       : longword;            // Initial CRC value register
+    POL        : longword;            // CRC polynomial register
+  end;
+
+  TDAC_Registers = record
+    CR         : longword;            // DAC control register
+    SWTRIGR    : longword;            // DAC software trigger register
+    DHR12R1    : longword;            // DAC channel1 12-bit right-aligned data holding register
+    DHR12L1    : longword;            // DAC channel1 12-bit left aligned data holding register
+    DHR8R1     : longword;            // DAC channel1 8-bit right aligned data holding register
+    RESERVED0  : longword;            // Reserved,                                                                0x14
+    RESERVED1  : longword;            // Reserved,                                                                0x18
+    RESERVED2  : longword;            // Reserved,                                                                0x1C
+    DHR12RD    : longword;            // Dual DAC 12-bit right-aligned data holding register
+    DHR12LD    : longword;            // DUAL DAC 12-bit left aligned data holding register
+    DHR8RD     : longword;            // DUAL DAC 8-bit right aligned data holding register
+    DOR1       : longword;            // DAC channel1 data output register
+    RESERVED3  : longword;            // Reserved,                                                                0x30
+    SR         : longword;            // DAC status register
+  end;
+
+  TDBGMCU_Registers = record
+    IDCODE     : longword;            // MCU device ID code
+    CR         : longword;            // Debug MCU configuration register
+    APB1FZ     : longword;            // Debug MCU APB1 freeze register
+    APB2FZ     : longword;            // Debug MCU APB2 freeze register
+  end;
+
+  TDMA_CHANNEL_Registers = record
+    CCR        : longword;            // DMA channel x configuration register
+    CNDTR      : longword;            // DMA channel x number of data register
+    CPAR       : longword;            // DMA channel x peripheral address register
+    CMAR       : longword;            // DMA channel x memory address register
+  end;
+
+  TDMA_Registers = record
+    ISR        : longword;            // DMA interrupt status register
+    IFCR       : longword;            // DMA interrupt flag clear register
+  end;
+
+  TEXTI_Registers = record
+    IMR        : longword;            // XTI Interrupt mask register
+    EMR        : longword;            // XTI Event mask register
+    RTSR       : longword;            // XTI Rising trigger selection register
+    FTSR       : longword;            // XTI Falling trigger selection register
+    SWIER      : longword;            // XTI Software interrupt event register
+    PR         : longword;            // XTI Pending register
+    RESERVED1  : longword;            // Reserved, 0x18
+    RESERVED2  : longword;            // Reserved, 0x1C
+    IMR2       : longword;            // EXTI Interrupt mask register
+    EMR2       : longword;            // EXTI Event mask register
+    RTSR2      : longword;            // EXTI Rising trigger selection register
+    FTSR2      : longword;            // EXTI Falling trigger selection register
+    SWIER2     : longword;            // EXTI Software interrupt event register
+    PR2        : longword;            // EXTI Pending register
+  end;
+
+  TFLASH_Registers = record
+    ACR        : longword;            // FLASH access control register
+    KEYR       : longword;            // FLASH key register
+    OPTKEYR    : longword;            // FLASH option key register
+    SR         : longword;            // FLASH status register
+    CR         : longword;            // FLASH control register
+    AR         : longword;            // FLASH address register
+    RESERVED   : longword;            // Reserved, 0x18
+    OBR        : longword;            // FLASH Option byte register
+    WRPR       : longword;            // FLASH Write register
+  end;
+
+  TFMC_BANK1_Registers = record
+    BTCR       : array[0..7] of longword; // NOR/PSRAM chip-select control register(BCR) and chip-select timing register(BTR)
+  end;
+
+  TFMC_BANK1E_Registers = record
+    BWTR       : array[0..6] of longword; // NOR/PSRAM write timing registers
+  end;
+
+  TFMC_BANK2_3_Registers = record
+    PCR2       : longword;            // NAND Flash control register 2
+    SR2        : longword;            // NAND Flash FIFO status and interrupt register 2
+    PMEM2      : longword;            // NAND Flash Common memory space timing register 2
+    PATT2      : longword;            // NAND Flash Attribute memory space timing register 2
+    RESERVED0  : longword;            // Reserved, 0x70
+    ECCR2      : longword;            // NAND Flash ECC result registers 2
+    RESERVED1  : longword;            // Reserved, 0x78
+    RESERVED2  : longword;            // Reserved, 0x7C
+    PCR3       : longword;            // NAND Flash control register 3
+    SR3        : longword;            // NAND Flash FIFO status and interrupt register 3
+    PMEM3      : longword;            // NAND Flash Common memory space timing register 3
+    PATT3      : longword;            // NAND Flash Attribute memory space timing register 3
+    RESERVED3  : longword;            // Reserved, 0x90
+    ECCR3      : longword;            // NAND Flash ECC result registers 3
+  end;
+
+  TFMC_BANK4_Registers = record
+    PCR4       : longword;            // PC Card  control register 4
+    SR4        : longword;            // PC Card  FIFO status and interrupt register 4
+    PMEM4      : longword;            // PC Card  Common memory space timing register 4
+    PATT4      : longword;            // PC Card  Attribute memory space timing register 4
+    PIO4       : longword;            // PC Card  I/O space timing register 4
+  end;
+
+  TOB_Registers = record
+    RDP        : word;                // LASH option byte Read protection
+    USER       : word;                // LASH option byte user options
+    RESERVED0  : word;                // Reserved,                                                     0x04
+    RESERVED1  : word;                // Reserved,                                                     0x06
+    WRP0       : word;                // LASH option byte write protection 0
+    WRP1       : word;                // LASH option byte write protection 1
+    WRP2       : word;                // LASH option byte write protection 2
+    WRP3       : word;                // LASH option byte write protection 3
+  end;
+
+  TGPIO_Registers = record
+    MODER      : longword;            // GPIO port mode register
+    OTYPER     : longword;            // GPIO port output type register
+    OSPEEDR    : longword;            // GPIO port output speed register
+    PUPDR      : longword;            // GPIO port pull-up/pull-down register
+    IDR        : longword;            // GPIO port input data register
+    ODR        : longword;            // GPIO port output data register
+    BSRR       : longword;            // GPIO port bit set/reset register
+    LCKR       : longword;            // GPIO port configuration lock register
+    AFR        : array[0..1] of longword; // GPIO alternate function registers
+    BRR        : longword;            // GPIO bit reset register
+  end;
+
+  TOPAMP_Registers = record
+    CSR        : longword;            // OPAMP control and status register
+  end;
+
+  TSYSCFG_Registers = record
+    CFGR1      : longword;            // SYSCFG configuration register 1
+    RESERVED   : longword;            // Reserved,                                                             0x04
+    EXTICR     : array[0..3] of longword; // SYSCFG external interrupt configuration registers
+    CFGR2      : longword;            // SYSCFG configuration register 2
+  end;
+
+  TI2C_Registers = record
+    CR1        : longword;            // I2C Control register 1
+    CR2        : longword;            // I2C Control register 2
+    OAR1       : longword;            // I2C Own address 1 register
+    OAR2       : longword;            // I2C Own address 2 register
+    TIMINGR    : longword;            // I2C Timing register
+    TIMEOUTR   : longword;            // I2C Timeout register
+    ISR        : longword;            // I2C Interrupt and status register
+    ICR        : longword;            // I2C Interrupt clear register
+    PECR       : longword;            // I2C PEC register
+    RXDR       : longword;            // I2C Receive data register
+    TXDR       : longword;            // I2C Transmit data register
+  end;
+
+  TIWDG_Registers = record
+    KR         : longword;            // IWDG Key register
+    PR         : longword;            // IWDG Prescaler register
+    RLR        : longword;            // IWDG Reload register
+    SR         : longword;            // IWDG Status register
+    WINR       : longword;            // IWDG Window register
+  end;
+
+  TPWR_Registers = record
+    CR         : longword;            // PWR power control register
+    CSR        : longword;            // PWR power control/status register
+  end;
+
+  TRCC_Registers = record
+    CR         : longword;            // RCC clock control register
+    CFGR       : longword;            // RCC clock configuration register
+    CIR        : longword;            // RCC clock interrupt register
+    APB2RSTR   : longword;            // RCC APB2 peripheral reset register
+    APB1RSTR   : longword;            // RCC APB1 peripheral reset register
+    AHBENR     : longword;            // RCC AHB peripheral clock register
+    APB2ENR    : longword;            // RCC APB2 peripheral clock enable register
+    APB1ENR    : longword;            // RCC APB1 peripheral clock enable register
+    BDCR       : longword;            // RCC Backup domain control register
+    CSR        : longword;            // RCC clock control & status register
+    AHBRSTR    : longword;            // RCC AHB peripheral reset register
+    CFGR2      : longword;            // RCC clock configuration register 2
+    CFGR3      : longword;            // RCC clock configuration register 3
+  end;
+
+  TRTC_Registers = record
+    TR         : longword;            // RTC time register
+    DR         : longword;            // RTC date register
+    CR         : longword;            // RTC control register
+    ISR        : longword;            // RTC initialization and status register
+    PRER       : longword;            // RTC prescaler register
+    WUTR       : longword;            // RTC wakeup timer register
+    RESERVED0  : longword;            // Reserved, 0x18
+    ALRMAR     : longword;            // RTC alarm A register
+    ALRMBR     : longword;            // RTC alarm B register
+    WPR        : longword;            // RTC write protection register
+    SSR        : longword;            // RTC sub second register
+    SHIFTR     : longword;            // RTC shift control register
+    TSTR       : longword;            // RTC time stamp time register
+    TSDR       : longword;            // RTC time stamp date register
+    TSSSR      : longword;            // RTC time-stamp sub second register
+    CALR       : longword;            // RTC calibration register
+    TAFCR      : longword;            // RTC tamper and alternate function configuration register
+    ALRMASSR   : longword;            // RTC alarm A sub second register
+    ALRMBSSR   : longword;            // RTC alarm B sub second register
+    RESERVED7  : longword;            // Reserved, 0x4C
+    BKP0R      : longword;            // RTC backup register 0
+    BKP1R      : longword;            // RTC backup register 1
+    BKP2R      : longword;            // RTC backup register 2
+    BKP3R      : longword;            // RTC backup register 3
+    BKP4R      : longword;            // RTC backup register 4
+    BKP5R      : longword;            // RTC backup register 5
+    BKP6R      : longword;            // RTC backup register 6
+    BKP7R      : longword;            // RTC backup register 7
+    BKP8R      : longword;            // RTC backup register 8
+    BKP9R      : longword;            // RTC backup register 9
+    BKP10R     : longword;            // RTC backup register 10
+    BKP11R     : longword;            // RTC backup register 11
+    BKP12R     : longword;            // RTC backup register 12
+    BKP13R     : longword;            // RTC backup register 13
+    BKP14R     : longword;            // RTC backup register 14
+    BKP15R     : longword;            // RTC backup register 15
+  end;
+
+  TSPI_Registers = record
+    CR1        : longword;            // SPI Control register 1
+    CR2        : longword;            // SPI Control register 2
+    SR         : longword;            // SPI Status register
+    DR         : longword;            // SPI data register
+    CRCPR      : longword;            // SPI CRC polynomial register
+    RXCRCR     : longword;            // SPI Rx CRC register
+    TXCRCR     : longword;            // SPI Tx CRC register
+    I2SCFGR    : longword;            // SPI_I2S configuration register
+    I2SPR      : longword;            // SPI_I2S prescaler register
+  end;
+
+  TTIM_Registers = record
+    CR1        : longword;            // TIM control register 1
+    CR2        : longword;            // TIM control register 2
+    SMCR       : longword;            // TIM slave mode control register
+    DIER       : longword;            // TIM DMA/interrupt enable register
+    SR         : longword;            // TIM status register
+    EGR        : longword;            // TIM event generation register
+    CCMR1      : longword;            // TIM capture/compare mode register 1
+    CCMR2      : longword;            // TIM capture/compare mode register 2
+    CCER       : longword;            // TIM capture/compare enable register
+    CNT        : longword;            // TIM counter register
+    PSC        : longword;            // TIM prescaler
+    ARR        : longword;            // TIM auto-reload register
+    RCR        : longword;            // TIM repetition counter register
+    CCR1       : longword;            // TIM capture/compare register 1
+    CCR2       : longword;            // TIM capture/compare register 2
+    CCR3       : longword;            // TIM capture/compare register 3
+    CCR4       : longword;            // TIM capture/compare register 4
+    BDTR       : longword;            // TIM break and dead-time register
+    DCR        : longword;            // TIM DMA control register
+    DMAR       : longword;            // TIM DMA address for full transfer
+    &OR        : longword;            // TIM option register
+    CCMR3      : longword;            // TIM capture/compare mode register 3
+    CCR5       : longword;            // TIM capture/compare register5
+    CCR6       : longword;            // TIM capture/compare register 4
+  end;
+
+  TTSC_Registers = record
+    CR         : longword;            // TSC control register
+    IER        : longword;            // TSC interrupt enable register
+    ICR        : longword;            // TSC interrupt clear register
+    ISR        : longword;            // TSC interrupt status register
+    IOHCR      : longword;            // TSC I/O hysteresis control register
+    RESERVED1  : longword;            // Reserved
+    IOASCR     : longword;            // TSC I/O analog switch control register
+    RESERVED2  : longword;            // Reserved
+    IOSCR      : longword;            // TSC I/O sampling control register
+    RESERVED3  : longword;            // Reserved
+    IOCCR      : longword;            // TSC I/O channel control register
+    RESERVED4  : longword;            // Reserved
+    IOGCSR     : longword;            // TSC I/O group control status register
+    IOGXCR     : array[0..7] of longword; // TSC I/O group x counter register
+  end;
+
+  TUSART_Registers = record
+    CR1        : longword;            // USART Control register 1
+    CR2        : longword;            // USART Control register 2
+    CR3        : longword;            // USART Control register 3
+    BRR        : longword;            // USART Baud rate register
+    GTPR       : longword;            // USART Guard time and prescaler register
+    RTOR       : longword;            // USART Receiver Time Out register
+    RQR        : longword;            // USART Request register
+    ISR        : longword;            // USART Interrupt and status register
+    ICR        : longword;            // USART Interrupt flag Clear register
+    RDR        : word;                // USART Receive Data register
+    RESERVED1  : word;                // Reserved, 0x26
+    TDR        : word;                // USART Transmit Data register
+    RESERVED2  : word;                // Reserved, 0x2A
+  end;
+
+  TUSB_Registers = record
+    EP0R       : word;                // USB Endpoint 0 register
+    RESERVED0  : word;                // Reserved
+    EP1R       : word;                // USB Endpoint 1 register
+    RESERVED1  : word;                // Reserved
+    EP2R       : word;                // USB Endpoint 2 register
+    RESERVED2  : word;                // Reserved
+    EP3R       : word;                // USB Endpoint 3 register
+    RESERVED3  : word;                // Reserved
+    EP4R       : word;                // USB Endpoint 4 register
+    RESERVED4  : word;                // Reserved
+    EP5R       : word;                // USB Endpoint 5 register
+    RESERVED5  : word;                // Reserved
+    EP6R       : word;                // USB Endpoint 6 register
+    RESERVED6  : word;                // Reserved
+    EP7R       : word;                // USB Endpoint 7 register
+    RESERVED7  : array[0..16] of word; // Reserved
+    CNTR       : word;                // Control register
+    RESERVED8  : word;                // Reserved
+    ISTR       : word;                // Interrupt status register
+    RESERVED9  : word;                // Reserved
+    FNR        : word;                // Frame number register
+    RESERVEDA  : word;                // Reserved
+    DADDR      : word;                // Device address register
+    RESERVEDB  : word;                // Reserved
+    BTABLE     : word;                // Buffer Table address register
+    RESERVEDC  : word;                // Reserved
+    LPMCSR     : word;                // LPM Control and Status register
+    RESERVEDD  : word;                // Reserved
+  end;
+
+  TWWDG_Registers = record
+    CR         : longword;            // WWDG Control register
+    CFR        : longword;            // WWDG Configuration register
+    SR         : longword;            // WWDG Status register
+  end;
+
+const
+  FLASH_BASE   = $08000000;           // FLASH base address in the alias region
+  SRAM_BASE    = $20000000;           // SRAM base address in the alias region
+  PERIPH_BASE  = $40000000;           // Peripheral base address in the alias region
+  FMC_BASE     = $60000000;           // FMC base address
+  FMC_R_BASE   = $A0000000;           // FMC registers base address
+  SRAM_BB_BASE = $22000000;           // SRAM base address in the bit-band region
+  PERIPH_BB_BASE = $42000000;         // Peripheral base address in the bit-band region
+  APB1PERIPH_BASE = $40000000;
+  APB2PERIPH_BASE = PERIPH_BASE + $00010000;
+  AHB1PERIPH_BASE = PERIPH_BASE + $00020000;
+  AHB2PERIPH_BASE = PERIPH_BASE + $08000000;
+  AHB3PERIPH_BASE = PERIPH_BASE + $10000000;
+  TIM2_BASE    = APB1PERIPH_BASE + $00000000;
+  TIM3_BASE    = APB1PERIPH_BASE + $00000400;
+  TIM4_BASE    = APB1PERIPH_BASE + $00000800;
+  TIM6_BASE    = APB1PERIPH_BASE + $00001000;
+  RTC_BASE     = APB1PERIPH_BASE + $00002800;
+  WWDG_BASE    = APB1PERIPH_BASE + $00002C00;
+  IWDG_BASE    = APB1PERIPH_BASE + $00003000;
+  I2S2ext_BASE = APB1PERIPH_BASE + $00003400;
+  SPI2_BASE    = APB1PERIPH_BASE + $00003800;
+  SPI3_BASE    = APB1PERIPH_BASE + $00003C00;
+  I2S3ext_BASE = APB1PERIPH_BASE + $00004000;
+  USART2_BASE  = APB1PERIPH_BASE + $00004400;
+  USART3_BASE  = APB1PERIPH_BASE + $00004800;
+  UART4_BASE   = APB1PERIPH_BASE + $00004C00;
+  UART5_BASE   = APB1PERIPH_BASE + $00005000;
+  I2C1_BASE    = APB1PERIPH_BASE + $00005400;
+  I2C2_BASE    = APB1PERIPH_BASE + $00005800;
+  USB_BASE     = APB1PERIPH_BASE + $00005C00; // USB_IP Peripheral Registers base address
+  CAN_BASE     = APB1PERIPH_BASE + $00006400;
+  PWR_BASE     = APB1PERIPH_BASE + $00007000;
+  DAC1_BASE    = APB1PERIPH_BASE + $00007400;
+  DAC_BASE     = APB1PERIPH_BASE + $00007400;
+  I2C3_BASE    = APB1PERIPH_BASE + $00007800;
+  SYSCFG_BASE  = APB2PERIPH_BASE + $00000000;
+  COMP1_BASE   = APB2PERIPH_BASE + $0000001C;
+  COMP2_BASE   = APB2PERIPH_BASE + $00000020;
+  COMP4_BASE   = APB2PERIPH_BASE + $00000028;
+  COMP6_BASE   = APB2PERIPH_BASE + $00000030;
+  COMP_BASE    = APB2PERIPH_BASE + $0000001C;
+  OPAMP1_BASE  = APB2PERIPH_BASE + $00000038;
+  OPAMP2_BASE  = APB2PERIPH_BASE + $0000003C;
+  OPAMP_BASE   = APB2PERIPH_BASE + $00000038;
+  EXTI_BASE    = APB2PERIPH_BASE + $00000400;
+  TIM1_BASE    = APB2PERIPH_BASE + $00002C00;
+  SPI1_BASE    = APB2PERIPH_BASE + $00003000;
+  USART1_BASE  = APB2PERIPH_BASE + $00003800;
+  SPI4_BASE    = APB2PERIPH_BASE + $00003C00;
+  TIM15_BASE   = APB2PERIPH_BASE + $00004000;
+  TIM16_BASE   = APB2PERIPH_BASE + $00004400;
+  TIM17_BASE   = APB2PERIPH_BASE + $00004800;
+  DMA1_BASE    = AHB1PERIPH_BASE + $00000000;
+  DMA1_Channel1_BASE = AHB1PERIPH_BASE + $00000008;
+  DMA1_Channel2_BASE = AHB1PERIPH_BASE + $0000001C;
+  DMA1_Channel3_BASE = AHB1PERIPH_BASE + $00000030;
+  DMA1_Channel4_BASE = AHB1PERIPH_BASE + $00000044;
+  DMA1_Channel5_BASE = AHB1PERIPH_BASE + $00000058;
+  DMA1_Channel6_BASE = AHB1PERIPH_BASE + $0000006C;
+  DMA1_Channel7_BASE = AHB1PERIPH_BASE + $00000080;
+  DMA2_BASE    = AHB1PERIPH_BASE + $00000400;
+  DMA2_Channel1_BASE = AHB1PERIPH_BASE + $00000408;
+  DMA2_Channel2_BASE = AHB1PERIPH_BASE + $0000041C;
+  DMA2_Channel3_BASE = AHB1PERIPH_BASE + $00000430;
+  DMA2_Channel4_BASE = AHB1PERIPH_BASE + $00000444;
+  DMA2_Channel5_BASE = AHB1PERIPH_BASE + $00000458;
+  RCC_BASE     = AHB1PERIPH_BASE + $00001000;
+  FLASH_R_BASE = AHB1PERIPH_BASE + $00002000; // Flash registers base address
+  OB_BASE      = $1FFFF800;           // Flash Option Bytes base address
+  FLASHSIZE_BASE = $1FFFF7CC;         // FLASH Size register base address
+  UID_BASE     = $1FFFF7AC;           // Unique device ID register base address
+  CRC_BASE     = AHB1PERIPH_BASE + $00003000;
+  TSC_BASE     = AHB1PERIPH_BASE + $00004000;
+  GPIOA_BASE   = AHB2PERIPH_BASE + $00000000;
+  GPIOB_BASE   = AHB2PERIPH_BASE + $00000400;
+  GPIOC_BASE   = AHB2PERIPH_BASE + $00000800;
+  GPIOD_BASE   = AHB2PERIPH_BASE + $00000C00;
+  GPIOE_BASE   = AHB2PERIPH_BASE + $00001000;
+  GPIOF_BASE   = AHB2PERIPH_BASE + $00001400;
+  GPIOG_BASE   = AHB2PERIPH_BASE + $00001800;
+  GPIOH_BASE   = AHB2PERIPH_BASE + $00001C00;
+  ADC1_BASE    = AHB3PERIPH_BASE + $00000000;
+  ADC2_BASE    = AHB3PERIPH_BASE + $00000100;
+  ADC1_2_COMMON_BASE = AHB3PERIPH_BASE + $00000300;
+  FMC_Bank1_R_BASE = FMC_R_BASE + $0000;
+  FMC_Bank1E_R_BASE = FMC_R_BASE + $0104;
+  FMC_Bank2_3_R_BASE = FMC_R_BASE + $0060;
+  FMC_Bank4_R_BASE = FMC_R_BASE + $00A0;
+  DBGMCU_BASE  = $E0042000;           // Debug MCU registers base address
+
+var
+  TIM2         : TTIM_Registers absolute TIM2_BASE;
+  TIM3         : TTIM_Registers absolute TIM3_BASE;
+  TIM4         : TTIM_Registers absolute TIM4_BASE;
+  TIM6         : TTIM_Registers absolute TIM6_BASE;
+  RTC          : TRTC_Registers absolute RTC_BASE;
+  WWDG         : TWWDG_Registers absolute WWDG_BASE;
+  IWDG         : TIWDG_Registers absolute IWDG_BASE;
+  I2S2ext      : TSPI_Registers absolute I2S2ext_BASE;
+  SPI2         : TSPI_Registers absolute SPI2_BASE;
+  SPI3         : TSPI_Registers absolute SPI3_BASE;
+  I2S3ext      : TSPI_Registers absolute I2S3ext_BASE;
+  USART2       : TUSART_Registers absolute USART2_BASE;
+  USART3       : TUSART_Registers absolute USART3_BASE;
+  UART4        : TUSART_Registers absolute UART4_BASE;
+  UART5        : TUSART_Registers absolute UART5_BASE;
+  I2C1         : TI2C_Registers absolute I2C1_BASE;
+  I2C2         : TI2C_Registers absolute I2C2_BASE;
+  I2C3         : TI2C_Registers absolute I2C3_BASE;
+  CAN          : TCAN_Registers absolute CAN_BASE;
+  PWR          : TPWR_Registers absolute PWR_BASE;
+  DAC          : TDAC_Registers absolute DAC_BASE;
+  DAC1         : TDAC_Registers absolute DAC1_BASE;
+  COMP1        : TCOMP_Registers absolute COMP1_BASE;
+  COMP2        : TCOMP_Registers absolute COMP2_BASE;
+  COMP12_COMMON : TCOMP_Common_Registers absolute COMP2_BASE;
+  COMP4        : TCOMP_Registers absolute COMP4_BASE;
+  COMP6        : TCOMP_Registers absolute COMP6_BASE;
+  COMP         : TCOMP_Registers absolute COMP_BASE;
+  OPAMP1       : TOPAMP_Registers absolute OPAMP1_BASE;
+  OPAMP        : TOPAMP_Registers absolute OPAMP_BASE;
+  OPAMP2       : TOPAMP_Registers absolute OPAMP2_BASE;
+  SYSCFG       : TSYSCFG_Registers absolute SYSCFG_BASE;
+  EXTI         : TEXTI_Registers absolute EXTI_BASE;
+  TIM1         : TTIM_Registers absolute TIM1_BASE;
+  SPI1         : TSPI_Registers absolute SPI1_BASE;
+  USART1       : TUSART_Registers absolute USART1_BASE;
+  SPI4         : TSPI_Registers absolute SPI4_BASE;
+  TIM15        : TTIM_Registers absolute TIM15_BASE;
+  TIM16        : TTIM_Registers absolute TIM16_BASE;
+  TIM17        : TTIM_Registers absolute TIM17_BASE;
+  DBGMCU       : TDBGMCU_Registers absolute DBGMCU_BASE;
+  DMA1         : TDMA_Registers absolute DMA1_BASE;
+  DMA1_Channel1 : TDMA_Channel_Registers absolute DMA1_Channel1_BASE;
+  DMA1_Channel2 : TDMA_Channel_Registers absolute DMA1_Channel2_BASE;
+  DMA1_Channel3 : TDMA_Channel_Registers absolute DMA1_Channel3_BASE;
+  DMA1_Channel4 : TDMA_Channel_Registers absolute DMA1_Channel4_BASE;
+  DMA1_Channel5 : TDMA_Channel_Registers absolute DMA1_Channel5_BASE;
+  DMA1_Channel6 : TDMA_Channel_Registers absolute DMA1_Channel6_BASE;
+  DMA1_Channel7 : TDMA_Channel_Registers absolute DMA1_Channel7_BASE;
+  DMA2         : TDMA_Registers absolute DMA2_BASE;
+  DMA2_Channel1 : TDMA_Channel_Registers absolute DMA2_Channel1_BASE;
+  DMA2_Channel2 : TDMA_Channel_Registers absolute DMA2_Channel2_BASE;
+  DMA2_Channel3 : TDMA_Channel_Registers absolute DMA2_Channel3_BASE;
+  DMA2_Channel4 : TDMA_Channel_Registers absolute DMA2_Channel4_BASE;
+  DMA2_Channel5 : TDMA_Channel_Registers absolute DMA2_Channel5_BASE;
+  RCC          : TRCC_Registers absolute RCC_BASE;
+  FLASH        : TFLASH_Registers absolute FLASH_R_BASE;
+  OB           : TOB_Registers absolute OB_BASE;
+  CRC          : TCRC_Registers absolute CRC_BASE;
+  TSC          : TTSC_Registers absolute TSC_BASE;
+  GPIOA        : TGPIO_Registers absolute GPIOA_BASE;
+  GPIOB        : TGPIO_Registers absolute GPIOB_BASE;
+  GPIOC        : TGPIO_Registers absolute GPIOC_BASE;
+  GPIOD        : TGPIO_Registers absolute GPIOD_BASE;
+  GPIOE        : TGPIO_Registers absolute GPIOE_BASE;
+  GPIOF        : TGPIO_Registers absolute GPIOF_BASE;
+  GPIOG        : TGPIO_Registers absolute GPIOG_BASE;
+  GPIOH        : TGPIO_Registers absolute GPIOH_BASE;
+  ADC1         : TADC_Registers absolute ADC1_BASE;
+  ADC2         : TADC_Registers absolute ADC2_BASE;
+  ADC12_COMMON : TADC_Common_Registers absolute ADC1_2_COMMON_BASE;
+  USB          : TUSB_Registers absolute USB_BASE;
+  FMC_Bank1    : TFMC_Bank1_Registers absolute FMC_Bank1_R_BASE;
+  FMC_Bank1E   : TFMC_Bank1E_Registers absolute FMC_Bank1E_R_BASE;
+  FMC_Bank2_3  : TFMC_Bank2_3_Registers absolute FMC_Bank2_3_R_BASE;
+  FMC_Bank4    : TFMC_Bank4_Registers absolute FMC_Bank4_R_BASE;
+
+implementation
+
+procedure NonMaskableInt_interrupt; external name 'NonMaskableInt_interrupt';
+procedure HardFault_interrupt; external name 'HardFault_interrupt';
+procedure MemoryManagement_interrupt; external name 'MemoryManagement_interrupt';
+procedure BusFault_interrupt; external name 'BusFault_interrupt';
+procedure UsageFault_interrupt; external name 'UsageFault_interrupt';
+procedure SVCall_interrupt; external name 'SVCall_interrupt';
+procedure DebugMonitor_interrupt; external name 'DebugMonitor_interrupt';
+procedure PendSV_interrupt; external name 'PendSV_interrupt';
+procedure SysTick_interrupt; external name 'SysTick_interrupt';
+procedure WWDG_interrupt; external name 'WWDG_interrupt';
+procedure PVD_interrupt; external name 'PVD_interrupt';
+procedure TAMP_STAMP_interrupt; external name 'TAMP_STAMP_interrupt';
+procedure RTC_WKUP_interrupt; external name 'RTC_WKUP_interrupt';
+procedure FLASH_interrupt; external name 'FLASH_interrupt';
+procedure RCC_interrupt; external name 'RCC_interrupt';
+procedure EXTI0_interrupt; external name 'EXTI0_interrupt';
+procedure EXTI1_interrupt; external name 'EXTI1_interrupt';
+procedure EXTI2_TSC_interrupt; external name 'EXTI2_TSC_interrupt';
+procedure EXTI3_interrupt; external name 'EXTI3_interrupt';
+procedure EXTI4_interrupt; external name 'EXTI4_interrupt';
+procedure DMA1_Channel1_interrupt; external name 'DMA1_Channel1_interrupt';
+procedure DMA1_Channel2_interrupt; external name 'DMA1_Channel2_interrupt';
+procedure DMA1_Channel3_interrupt; external name 'DMA1_Channel3_interrupt';
+procedure DMA1_Channel4_interrupt; external name 'DMA1_Channel4_interrupt';
+procedure DMA1_Channel5_interrupt; external name 'DMA1_Channel5_interrupt';
+procedure DMA1_Channel6_interrupt; external name 'DMA1_Channel6_interrupt';
+procedure DMA1_Channel7_interrupt; external name 'DMA1_Channel7_interrupt';
+procedure ADC1_2_interrupt; external name 'ADC1_2_interrupt';
+procedure USB_HP_CAN_TX_interrupt; external name 'USB_HP_CAN_TX_interrupt';
+procedure USB_LP_CAN_RX0_interrupt; external name 'USB_LP_CAN_RX0_interrupt';
+procedure CAN_RX1_interrupt; external name 'CAN_RX1_interrupt';
+procedure CAN_SCE_interrupt; external name 'CAN_SCE_interrupt';
+procedure EXTI9_5_interrupt; external name 'EXTI9_5_interrupt';
+procedure TIM1_BRK_TIM15_interrupt; external name 'TIM1_BRK_TIM15_interrupt';
+procedure TIM1_UP_TIM16_interrupt; external name 'TIM1_UP_TIM16_interrupt';
+procedure TIM1_TRG_COM_TIM17_interrupt; external name 'TIM1_TRG_COM_TIM17_interrupt';
+procedure TIM1_CC_interrupt; external name 'TIM1_CC_interrupt';
+procedure TIM2_interrupt; external name 'TIM2_interrupt';
+procedure TIM3_interrupt; external name 'TIM3_interrupt';
+procedure TIM4_interrupt; external name 'TIM4_interrupt';
+procedure I2C1_EV_interrupt; external name 'I2C1_EV_interrupt';
+procedure I2C1_ER_interrupt; external name 'I2C1_ER_interrupt';
+procedure I2C2_EV_interrupt; external name 'I2C2_EV_interrupt';
+procedure I2C2_ER_interrupt; external name 'I2C2_ER_interrupt';
+procedure SPI1_interrupt; external name 'SPI1_interrupt';
+procedure SPI2_interrupt; external name 'SPI2_interrupt';
+procedure USART1_interrupt; external name 'USART1_interrupt';
+procedure USART2_interrupt; external name 'USART2_interrupt';
+procedure USART3_interrupt; external name 'USART3_interrupt';
+procedure EXTI15_10_interrupt; external name 'EXTI15_10_interrupt';
+procedure RTC_Alarm_interrupt; external name 'RTC_Alarm_interrupt';
+procedure USBWakeUp_interrupt; external name 'USBWakeUp_interrupt';
+procedure FMC_interrupt; external name 'FMC_interrupt';
+procedure SPI3_interrupt; external name 'SPI3_interrupt';
+procedure UART4_interrupt; external name 'UART4_interrupt';
+procedure UART5_interrupt; external name 'UART5_interrupt';
+procedure TIM6_DAC_interrupt; external name 'TIM6_DAC_interrupt';
+procedure DMA2_Channel1_interrupt; external name 'DMA2_Channel1_interrupt';
+procedure DMA2_Channel2_interrupt; external name 'DMA2_Channel2_interrupt';
+procedure DMA2_Channel3_interrupt; external name 'DMA2_Channel3_interrupt';
+procedure DMA2_Channel4_interrupt; external name 'DMA2_Channel4_interrupt';
+procedure DMA2_Channel5_interrupt; external name 'DMA2_Channel5_interrupt';
+procedure COMP1_2_interrupt; external name 'COMP1_2_interrupt';
+procedure COMP4_6_interrupt; external name 'COMP4_6_interrupt';
+procedure I2C3_EV_interrupt; external name 'I2C3_EV_interrupt';
+procedure I2C3_ER_interrupt; external name 'I2C3_ER_interrupt';
+procedure USB_HP_interrupt; external name 'USB_HP_interrupt';
+procedure USB_LP_interrupt; external name 'USB_LP_interrupt';
+procedure USBWakeUp_RMP_interrupt; external name 'USBWakeUp_RMP_interrupt';
+procedure FPU_interrupt; external name 'FPU_interrupt';
+procedure SPI4_interrupt; external name 'SPI4_interrupt';
+
+{$i cortexm4f_start.inc}
+
+procedure Vectors; assembler; nostackframe;
+label interrupt_vectors;
+asm
+  .section ".init.interrupt_vectors"
+  interrupt_vectors:
+  .long _stack_top
+  .long Startup
+  .long NonMaskableInt_interrupt
+  .long HardFault_interrupt
+  .long MemoryManagement_interrupt
+  .long BusFault_interrupt
+  .long UsageFault_interrupt
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long SVCall_interrupt
+  .long DebugMonitor_interrupt
+  .long 0
+  .long PendSV_interrupt
+  .long SysTick_interrupt
+  .long WWDG_interrupt
+  .long PVD_interrupt
+  .long TAMP_STAMP_interrupt
+  .long RTC_WKUP_interrupt
+  .long FLASH_interrupt
+  .long RCC_interrupt
+  .long EXTI0_interrupt
+  .long EXTI1_interrupt
+  .long EXTI2_TSC_interrupt
+  .long EXTI3_interrupt
+  .long EXTI4_interrupt
+  .long DMA1_Channel1_interrupt
+  .long DMA1_Channel2_interrupt
+  .long DMA1_Channel3_interrupt
+  .long DMA1_Channel4_interrupt
+  .long DMA1_Channel5_interrupt
+  .long DMA1_Channel6_interrupt
+  .long DMA1_Channel7_interrupt
+  .long ADC1_2_interrupt
+  .long USB_HP_CAN_TX_interrupt
+  .long USB_LP_CAN_RX0_interrupt
+  .long CAN_RX1_interrupt
+  .long CAN_SCE_interrupt
+  .long EXTI9_5_interrupt
+  .long TIM1_BRK_TIM15_interrupt
+  .long TIM1_UP_TIM16_interrupt
+  .long TIM1_TRG_COM_TIM17_interrupt
+  .long TIM1_CC_interrupt
+  .long TIM2_interrupt
+  .long TIM3_interrupt
+  .long TIM4_interrupt
+  .long I2C1_EV_interrupt
+  .long I2C1_ER_interrupt
+  .long I2C2_EV_interrupt
+  .long I2C2_ER_interrupt
+  .long SPI1_interrupt
+  .long SPI2_interrupt
+  .long USART1_interrupt
+  .long USART2_interrupt
+  .long USART3_interrupt
+  .long EXTI15_10_interrupt
+  .long RTC_Alarm_interrupt
+  .long USBWakeUp_interrupt
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long FMC_interrupt
+  .long 0
+  .long 0
+  .long SPI3_interrupt
+  .long UART4_interrupt
+  .long UART5_interrupt
+  .long TIM6_DAC_interrupt
+  .long 0
+  .long DMA2_Channel1_interrupt
+  .long DMA2_Channel2_interrupt
+  .long DMA2_Channel3_interrupt
+  .long DMA2_Channel4_interrupt
+  .long DMA2_Channel5_interrupt
+  .long 0
+  .long 0
+  .long 0
+  .long COMP1_2_interrupt
+  .long COMP4_6_interrupt
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long I2C3_EV_interrupt
+  .long I2C3_ER_interrupt
+  .long USB_HP_interrupt
+  .long USB_LP_interrupt
+  .long USBWakeUp_RMP_interrupt
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long FPU_interrupt
+  .long 0
+  .long 0
+  .long SPI4_interrupt
+  .weak NonMaskableInt_interrupt
+  .weak HardFault_interrupt
+  .weak MemoryManagement_interrupt
+  .weak BusFault_interrupt
+  .weak UsageFault_interrupt
+  .weak SVCall_interrupt
+  .weak DebugMonitor_interrupt
+  .weak PendSV_interrupt
+  .weak SysTick_interrupt
+  .weak WWDG_interrupt
+  .weak PVD_interrupt
+  .weak TAMP_STAMP_interrupt
+  .weak RTC_WKUP_interrupt
+  .weak FLASH_interrupt
+  .weak RCC_interrupt
+  .weak EXTI0_interrupt
+  .weak EXTI1_interrupt
+  .weak EXTI2_TSC_interrupt
+  .weak EXTI3_interrupt
+  .weak EXTI4_interrupt
+  .weak DMA1_Channel1_interrupt
+  .weak DMA1_Channel2_interrupt
+  .weak DMA1_Channel3_interrupt
+  .weak DMA1_Channel4_interrupt
+  .weak DMA1_Channel5_interrupt
+  .weak DMA1_Channel6_interrupt
+  .weak DMA1_Channel7_interrupt
+  .weak ADC1_2_interrupt
+  .weak USB_HP_CAN_TX_interrupt
+  .weak USB_LP_CAN_RX0_interrupt
+  .weak CAN_RX1_interrupt
+  .weak CAN_SCE_interrupt
+  .weak EXTI9_5_interrupt
+  .weak TIM1_BRK_TIM15_interrupt
+  .weak TIM1_UP_TIM16_interrupt
+  .weak TIM1_TRG_COM_TIM17_interrupt
+  .weak TIM1_CC_interrupt
+  .weak TIM2_interrupt
+  .weak TIM3_interrupt
+  .weak TIM4_interrupt
+  .weak I2C1_EV_interrupt
+  .weak I2C1_ER_interrupt
+  .weak I2C2_EV_interrupt
+  .weak I2C2_ER_interrupt
+  .weak SPI1_interrupt
+  .weak SPI2_interrupt
+  .weak USART1_interrupt
+  .weak USART2_interrupt
+  .weak USART3_interrupt
+  .weak EXTI15_10_interrupt
+  .weak RTC_Alarm_interrupt
+  .weak USBWakeUp_interrupt
+  .weak FMC_interrupt
+  .weak SPI3_interrupt
+  .weak UART4_interrupt
+  .weak UART5_interrupt
+  .weak TIM6_DAC_interrupt
+  .weak DMA2_Channel1_interrupt
+  .weak DMA2_Channel2_interrupt
+  .weak DMA2_Channel3_interrupt
+  .weak DMA2_Channel4_interrupt
+  .weak DMA2_Channel5_interrupt
+  .weak COMP1_2_interrupt
+  .weak COMP4_6_interrupt
+  .weak I2C3_EV_interrupt
+  .weak I2C3_ER_interrupt
+  .weak USB_HP_interrupt
+  .weak USB_LP_interrupt
+  .weak USBWakeUp_RMP_interrupt
+  .weak FPU_interrupt
+  .weak SPI4_interrupt
+  .set NonMaskableInt_interrupt, HaltProc
+  .set HardFault_interrupt, HaltProc
+  .set MemoryManagement_interrupt, HaltProc
+  .set BusFault_interrupt, HaltProc
+  .set UsageFault_interrupt, HaltProc
+  .set SVCall_interrupt, HaltProc
+  .set DebugMonitor_interrupt, HaltProc
+  .set PendSV_interrupt, HaltProc
+  .set SysTick_interrupt, HaltProc
+  .set WWDG_interrupt, HaltProc
+  .set PVD_interrupt, HaltProc
+  .set TAMP_STAMP_interrupt, HaltProc
+  .set RTC_WKUP_interrupt, HaltProc
+  .set FLASH_interrupt, HaltProc
+  .set RCC_interrupt, HaltProc
+  .set EXTI0_interrupt, HaltProc
+  .set EXTI1_interrupt, HaltProc
+  .set EXTI2_TSC_interrupt, HaltProc
+  .set EXTI3_interrupt, HaltProc
+  .set EXTI4_interrupt, HaltProc
+  .set DMA1_Channel1_interrupt, HaltProc
+  .set DMA1_Channel2_interrupt, HaltProc
+  .set DMA1_Channel3_interrupt, HaltProc
+  .set DMA1_Channel4_interrupt, HaltProc
+  .set DMA1_Channel5_interrupt, HaltProc
+  .set DMA1_Channel6_interrupt, HaltProc
+  .set DMA1_Channel7_interrupt, HaltProc
+  .set ADC1_2_interrupt, HaltProc
+  .set USB_HP_CAN_TX_interrupt, HaltProc
+  .set USB_LP_CAN_RX0_interrupt, HaltProc
+  .set CAN_RX1_interrupt, HaltProc
+  .set CAN_SCE_interrupt, HaltProc
+  .set EXTI9_5_interrupt, HaltProc
+  .set TIM1_BRK_TIM15_interrupt, HaltProc
+  .set TIM1_UP_TIM16_interrupt, HaltProc
+  .set TIM1_TRG_COM_TIM17_interrupt, HaltProc
+  .set TIM1_CC_interrupt, HaltProc
+  .set TIM2_interrupt, HaltProc
+  .set TIM3_interrupt, HaltProc
+  .set TIM4_interrupt, HaltProc
+  .set I2C1_EV_interrupt, HaltProc
+  .set I2C1_ER_interrupt, HaltProc
+  .set I2C2_EV_interrupt, HaltProc
+  .set I2C2_ER_interrupt, HaltProc
+  .set SPI1_interrupt, HaltProc
+  .set SPI2_interrupt, HaltProc
+  .set USART1_interrupt, HaltProc
+  .set USART2_interrupt, HaltProc
+  .set USART3_interrupt, HaltProc
+  .set EXTI15_10_interrupt, HaltProc
+  .set RTC_Alarm_interrupt, HaltProc
+  .set USBWakeUp_interrupt, HaltProc
+  .set FMC_interrupt, HaltProc
+  .set SPI3_interrupt, HaltProc
+  .set UART4_interrupt, HaltProc
+  .set UART5_interrupt, HaltProc
+  .set TIM6_DAC_interrupt, HaltProc
+  .set DMA2_Channel1_interrupt, HaltProc
+  .set DMA2_Channel2_interrupt, HaltProc
+  .set DMA2_Channel3_interrupt, HaltProc
+  .set DMA2_Channel4_interrupt, HaltProc
+  .set DMA2_Channel5_interrupt, HaltProc
+  .set COMP1_2_interrupt, HaltProc
+  .set COMP4_6_interrupt, HaltProc
+  .set I2C3_EV_interrupt, HaltProc
+  .set I2C3_ER_interrupt, HaltProc
+  .set USB_HP_interrupt, HaltProc
+  .set USB_LP_interrupt, HaltProc
+  .set USBWakeUp_RMP_interrupt, HaltProc
+  .set FPU_interrupt, HaltProc
+  .set SPI4_interrupt, HaltProc
+  .text
+end;
+end.
diff -Naur fpc-save/rtl/embedded/arm/stm32f303x8.pp fpc/rtl/embedded/arm/stm32f303x8.pp
--- fpc-save/rtl/embedded/arm/stm32f303x8.pp	1970-01-01 01:00:00.000000000 +0100
+++ fpc/rtl/embedded/arm/stm32f303x8.pp	2018-03-02 17:06:58.000000000 +0100
@@ -0,0 +1,860 @@
+unit stm32f303x8;
+interface
+{$PACKRECORDS C}
+{$GOTO ON}
+// *
+// ******************************************************************************
+// * @file    stm32f303x8.h
+// * @author  MCD Application Team
+//   CMSIS STM32F303x8 Devices Peripheral Access Layer Header File.
+// *
+// *          This file contains:
+// *           - Data structures and the address mapping for all peripherals
+// *           - Peripheral's registers declarations and bits definition
+// *           - Macros to access peripheral’s registers hardware
+// *
+// ******************************************************************************
+// * @attention
+// *
+// * <h2><center>&copy; COPYRIGHT(c) 2016 STMicroelectronics</center></h2>
+// *
+// * Redistribution and use in source and binary forms, with or without modification,
+// * are permitted provided that the following conditions are met:
+// *   1. Redistributions of source code must retain the above copyright notice,
+// *      this list of conditions and the following disclaimer.
+// *   2. Redistributions in binary form must reproduce the above copyright notice,
+// *      this list of conditions and the following disclaimer in the documentation
+// *      and/or other materials provided with the distribution.
+// *   3. Neither the name of STMicroelectronics nor the names of its contributors
+// *      may be used to endorse or promote products derived from this software
+// *      without specific prior written permission.
+// *
+// * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
+// * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
+// * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+// * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE
+// * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
+// * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
+// * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER
+// * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+// * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
+// * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
+// *
+// ******************************************************************************
+// Configuration of the Cortex-M4 Processor and Core Peripherals
+// STM32F303x8 devices Interrupt Number Definition, according to the selected device
+// *        in @ref Library_configuration_section
+
+type
+  TIRQn_Enum   = (
+    NonMaskableInt_IRQn = -14,        // 2 Non Maskable Interrupt
+    HardFault_IRQn = -13,             // 3 Cortex-M4 Hard Fault Interrupt
+    MemoryManagement_IRQn = -12,      // 4 Cortex-M4 Memory Management Interrupt
+    BusFault_IRQn = -11,              // 5 Cortex-M4 Bus Fault Interrupt
+    UsageFault_IRQn = -10,            // 6 Cortex-M4 Usage Fault Interrupt
+    SVCall_IRQn = -5,                 // 11 Cortex-M4 SV Call Interrupt
+    DebugMonitor_IRQn = -4,           // 12 Cortex-M4 Debug Monitor Interrupt
+    PendSV_IRQn = -2,                 // 14 Cortex-M4 Pend SV Interrupt
+    SysTick_IRQn = -1,                // 15 Cortex-M4 System Tick Interrupt
+    WWDG_IRQn  = 0,                   // Window WatchDog Interrupt
+    PVD_IRQn   = 1,                   // PVD through EXTI Line detection Interrupt
+    TAMP_STAMP_IRQn = 2,              // Tamper and TimeStamp interrupts through the EXTI line 19
+    RTC_WKUP_IRQn = 3,                // RTC Wakeup interrupt through the EXTI line 20
+    FLASH_IRQn = 4,                   // FLASH global Interrupt
+    RCC_IRQn   = 5,                   // RCC global Interrupt
+    EXTI0_IRQn = 6,                   // EXTI Line0 Interrupt
+    EXTI1_IRQn = 7,                   // EXTI Line1 Interrupt
+    EXTI2_TSC_IRQn = 8,               // EXTI Line2 Interrupt and Touch Sense Controller Interrupt
+    EXTI3_IRQn = 9,                   // EXTI Line3 Interrupt
+    EXTI4_IRQn = 10,                  // EXTI Line4 Interrupt
+    DMA1_Channel1_IRQn = 11,          // DMA1 Channel 1 Interrupt
+    DMA1_Channel2_IRQn = 12,          // DMA1 Channel 2 Interrupt
+    DMA1_Channel3_IRQn = 13,          // DMA1 Channel 3 Interrupt
+    DMA1_Channel4_IRQn = 14,          // DMA1 Channel 4 Interrupt
+    DMA1_Channel5_IRQn = 15,          // DMA1 Channel 5 Interrupt
+    DMA1_Channel6_IRQn = 16,          // DMA1 Channel 6 Interrupt
+    DMA1_Channel7_IRQn = 17,          // DMA1 Channel 7 Interrupt
+    ADC1_2_IRQn = 18,                 // ADC1 & ADC2 Interrupts
+    CAN_TX_IRQn = 19,                 // CAN TX Interrupt
+    CAN_RX0_IRQn = 20,                // CAN RX0 Interrupt
+    CAN_RX1_IRQn = 21,                // CAN RX1 Interrupt
+    CAN_SCE_IRQn = 22,                // CAN SCE Interrupt
+    EXTI9_5_IRQn = 23,                // External Line[9:5] Interrupts
+    TIM1_BRK_TIM15_IRQn = 24,         // TIM1 Break and TIM15 Interrupts
+    TIM1_UP_TIM16_IRQn = 25,          // TIM1 Update and TIM16 Interrupts
+    TIM1_TRG_COM_TIM17_IRQn = 26,     // TIM1 Trigger and Commutation and TIM17 Interrupt
+    TIM1_CC_IRQn = 27,                // TIM1 Capture Compare Interrupt
+    TIM2_IRQn  = 28,                  // TIM2 global Interrupt
+    TIM3_IRQn  = 29,                  // TIM3 global Interrupt
+    I2C1_EV_IRQn = 31,                // I2C1 Event Interrupt & EXTI Line23 Interrupt (I2C1 wakeup)
+    I2C1_ER_IRQn = 32,                // I2C1 Error Interrupt
+    SPI1_IRQn  = 35,                  // SPI1 global Interrupt
+    USART1_IRQn = 37,                 // USART1 global Interrupt & EXTI Line25 Interrupt (USART1 wakeup)
+    USART2_IRQn = 38,                 // USART2 global Interrupt & EXTI Line26 Interrupt (USART2 wakeup)
+    USART3_IRQn = 39,                 // USART3 global Interrupt & EXTI Line28 Interrupt (USART3 wakeup)
+    EXTI15_10_IRQn = 40,              // External Line[15:10] Interrupts
+    RTC_Alarm_IRQn = 41,              // RTC Alarm (A and B) through EXTI Line 17 Interrupt
+    TIM6_DAC1_IRQn = 54,              // TIM6 global and DAC1 underrun error Interrupts
+    TIM7_DAC2_IRQn = 55,              // TIM7 global and DAC2 channel1 underrun error Interrupt
+    COMP2_IRQn = 64,                  // COMP2 global Interrupt via EXTI Line22
+    COMP4_6_IRQn = 65,                // COMP4 and COMP6 global Interrupt via EXTI Line30 and 32
+    FPU_IRQn   = 81                   // Floating point Interrupt
+  );
+
+  TADC_Registers = record
+    ISR        : longword;            // ADC Interrupt and Status Register
+    IER        : longword;            // ADC Interrupt Enable Register
+    CR         : longword;            // ADC control register
+    CFGR       : longword;            // ADC Configuration register
+    RESERVED0  : longword;            // Reserved, 0x010
+    SMPR1      : longword;            // ADC sample time register 1
+    SMPR2      : longword;            // ADC sample time register 2
+    RESERVED1  : longword;            // Reserved, 0x01C
+    TR1        : longword;            // ADC watchdog threshold register 1
+    TR2        : longword;            // ADC watchdog threshold register 2
+    TR3        : longword;            // ADC watchdog threshold register 3
+    RESERVED2  : longword;            // Reserved, 0x02C
+    SQR1       : longword;            // ADC regular sequence register 1
+    SQR2       : longword;            // ADC regular sequence register 2
+    SQR3       : longword;            // ADC regular sequence register 3
+    SQR4       : longword;            // ADC regular sequence register 4
+    DR         : longword;            // ADC regular data register
+    RESERVED3  : longword;            // Reserved, 0x044
+    RESERVED4  : longword;            // Reserved, 0x048
+    JSQR       : longword;            // ADC injected sequence register
+    RESERVED5  : array[0..3] of longword; // Reserved, 0x050 - 0x05C
+    OFR1       : longword;            // ADC offset register 1
+    OFR2       : longword;            // ADC offset register 2
+    OFR3       : longword;            // ADC offset register 3
+    OFR4       : longword;            // ADC offset register 4
+    RESERVED6  : array[0..3] of longword; // Reserved, 0x070 - 0x07C
+    JDR1       : longword;            // ADC injected data register 1
+    JDR2       : longword;            // ADC injected data register 2
+    JDR3       : longword;            // ADC injected data register 3
+    JDR4       : longword;            // ADC injected data register 4
+    RESERVED7  : array[0..3] of longword; // Reserved, 0x090 - 0x09C
+    AWD2CR     : longword;            // ADC  Analog Watchdog 2 Configuration Register
+    AWD3CR     : longword;            // ADC  Analog Watchdog 3 Configuration Register
+    RESERVED8  : longword;            // Reserved, 0x0A8
+    RESERVED9  : longword;            // Reserved, 0x0AC
+    DIFSEL     : longword;            // ADC  Differential Mode Selection Register
+    CALFACT    : longword;            // ADC  Calibration Factors
+  end;
+
+  TADC_COMMON_Registers = record
+    CSR        : longword;            // ADC Common status register
+    RESERVED   : longword;            // Reserved, ADC1/3 base address + 0x304
+    CCR        : longword;            // ADC common control register
+    CDR        : longword;            // ADC common regular data register for dual
+  end;
+
+  TCAN_TXMAILBOX_Registers = record
+    TIR        : longword;            // CAN TX mailbox identifier register
+    TDTR       : longword;            // CAN mailbox data length control and time stamp register
+    TDLR       : longword;            // CAN mailbox data low register
+    TDHR       : longword;            // CAN mailbox data high register
+  end;
+
+  TCAN_FIFOMAILBOX_Registers = record
+    RIR        : longword;            // CAN receive FIFO mailbox identifier register
+    RDTR       : longword;            // CAN receive FIFO mailbox data length control and time stamp register
+    RDLR       : longword;            // CAN receive FIFO mailbox data low register
+    RDHR       : longword;            // CAN receive FIFO mailbox data high register
+  end;
+
+  TCAN_FILTERREGISTER_Registers = record
+    FR1        : longword;            // CAN Filter bank register 1
+    FR2        : longword;            // CAN Filter bank register 1
+  end;
+
+  TCAN_Registers = record
+    MCR        : longword;            // CAN master control register
+    MSR        : longword;            // CAN master status register
+    TSR        : longword;            // CAN transmit status register
+    RF0R       : longword;            // CAN receive FIFO 0 register
+    RF1R       : longword;            // CAN receive FIFO 1 register
+    IER        : longword;            // CAN interrupt enable register
+    ESR        : longword;            // CAN error status register
+    BTR        : longword;            // CAN bit timing register
+    RESERVED0  : array[0..87] of longword; // Reserved, 0x020 - 0x17F
+    sTxMailBox : array[0..2] of TCAN_TxMailBox_Registers; // CAN Tx MailBox
+    sFIFOMailBox : array[0..1] of TCAN_FIFOMailBox_Registers; // CAN FIFO MailBox
+    RESERVED1  : array[0..11] of longword; // Reserved, 0x1D0 - 0x1FF
+    FMR        : longword;            // CAN filter master register
+    FM1R       : longword;            // CAN filter mode register
+    RESERVED2  : longword;            // Reserved, 0x208
+    FS1R       : longword;            // CAN filter scale register
+    RESERVED3  : longword;            // Reserved, 0x210
+    FFA1R      : longword;            // CAN filter FIFO assignment register
+    RESERVED4  : longword;            // Reserved, 0x218
+    FA1R       : longword;            // CAN filter activation register
+    RESERVED5  : array[0..7] of longword; // Reserved, 0x220-0x23F
+    sFilterRegister : array[0..27] of TCAN_FilterRegister_Registers; // CAN Filter Register
+  end;
+
+  TCOMP_Registers = record
+    CSR        : longword;            // COMP control and status register
+  end;
+
+  TCOMP_COMMON_Registers = record
+    CSR        : longword;            // COMP control and status register, used for bits common to several COMP instances
+  end;
+
+  TCRC_Registers = record
+    DR         : longword;            // CRC Data register
+    IDR        : byte;                // CRC Independent data register
+    RESERVED0  : byte;                // Reserved,                                                    0x05
+    RESERVED1  : word;                // Reserved,                                                    0x06
+    CR         : longword;            // CRC Control register
+    RESERVED2  : longword;            // Reserved,                                                    0x0C
+    INIT       : longword;            // Initial CRC value register
+    POL        : longword;            // CRC polynomial register
+  end;
+
+  TDAC_Registers = record
+    CR         : longword;            // DAC control register
+    SWTRIGR    : longword;            // DAC software trigger register
+    DHR12R1    : longword;            // DAC channel1 12-bit right-aligned data holding register
+    DHR12L1    : longword;            // DAC channel1 12-bit left aligned data holding register
+    DHR8R1     : longword;            // DAC channel1 8-bit right aligned data holding register
+    DHR12R2    : longword;            // DAC channel2 12-bit right aligned data holding register
+    DHR12L2    : longword;            // DAC channel2 12-bit left aligned data holding register
+    DHR8R2     : longword;            // DAC channel2 8-bit right-aligned data holding register
+    DHR12RD    : longword;            // Dual DAC 12-bit right-aligned data holding register
+    DHR12LD    : longword;            // DUAL DAC 12-bit left aligned data holding register
+    DHR8RD     : longword;            // DUAL DAC 8-bit right aligned data holding register
+    DOR1       : longword;            // DAC channel1 data output register
+    DOR2       : longword;            // DAC channel2 data output register
+    SR         : longword;            // DAC status register
+  end;
+
+  TDBGMCU_Registers = record
+    IDCODE     : longword;            // MCU device ID code
+    CR         : longword;            // Debug MCU configuration register
+    APB1FZ     : longword;            // Debug MCU APB1 freeze register
+    APB2FZ     : longword;            // Debug MCU APB2 freeze register
+  end;
+
+  TDMA_CHANNEL_Registers = record
+    CCR        : longword;            // DMA channel x configuration register
+    CNDTR      : longword;            // DMA channel x number of data register
+    CPAR       : longword;            // DMA channel x peripheral address register
+    CMAR       : longword;            // DMA channel x memory address register
+  end;
+
+  TDMA_Registers = record
+    ISR        : longword;            // DMA interrupt status register
+    IFCR       : longword;            // DMA interrupt flag clear register
+  end;
+
+  TEXTI_Registers = record
+    IMR        : longword;            // XTI Interrupt mask register
+    EMR        : longword;            // XTI Event mask register
+    RTSR       : longword;            // XTI Rising trigger selection register
+    FTSR       : longword;            // XTI Falling trigger selection register
+    SWIER      : longword;            // XTI Software interrupt event register
+    PR         : longword;            // XTI Pending register
+    RESERVED1  : longword;            // Reserved, 0x18
+    RESERVED2  : longword;            // Reserved, 0x1C
+    IMR2       : longword;            // EXTI Interrupt mask register
+    EMR2       : longword;            // EXTI Event mask register
+    RTSR2      : longword;            // EXTI Rising trigger selection register
+    FTSR2      : longword;            // EXTI Falling trigger selection register
+    SWIER2     : longword;            // EXTI Software interrupt event register
+    PR2        : longword;            // EXTI Pending register
+  end;
+
+  TFLASH_Registers = record
+    ACR        : longword;            // FLASH access control register
+    KEYR       : longword;            // FLASH key register
+    OPTKEYR    : longword;            // FLASH option key register
+    SR         : longword;            // FLASH status register
+    CR         : longword;            // FLASH control register
+    AR         : longword;            // FLASH address register
+    RESERVED   : longword;            // Reserved, 0x18
+    OBR        : longword;            // FLASH Option byte register
+    WRPR       : longword;            // FLASH Write register
+  end;
+
+  TOB_Registers = record
+    RDP        : word;                // LASH option byte Read protection
+    USER       : word;                // LASH option byte user options
+    RESERVED0  : word;                // Reserved,                                                     0x04
+    RESERVED1  : word;                // Reserved,                                                     0x06
+    WRP0       : word;                // LASH option byte write protection 0
+    WRP1       : word;                // LASH option byte write protection 1
+    WRP2       : word;                // LASH option byte write protection 2
+    WRP3       : word;                // LASH option byte write protection 3
+  end;
+
+  TGPIO_Registers = record
+    MODER      : longword;            // GPIO port mode register
+    OTYPER     : longword;            // GPIO port output type register
+    OSPEEDR    : longword;            // GPIO port output speed register
+    PUPDR      : longword;            // GPIO port pull-up/pull-down register
+    IDR        : longword;            // GPIO port input data register
+    ODR        : longword;            // GPIO port output data register
+    BSRR       : longword;            // GPIO port bit set/reset register
+    LCKR       : longword;            // GPIO port configuration lock register
+    AFR        : array[0..1] of longword; // GPIO alternate function registers
+    BRR        : longword;            // GPIO bit reset register
+  end;
+
+  TOPAMP_Registers = record
+    CSR        : longword;            // OPAMP control and status register
+  end;
+
+  TSYSCFG_Registers = record
+    CFGR1      : longword;            // SYSCFG configuration register 1
+    RCR        : longword;            // SYSCFG CCM SRAM protection register
+    EXTICR     : array[0..3] of longword; // SYSCFG external interrupt configuration registers
+    CFGR2      : longword;            // SYSCFG configuration register 2
+    RESERVED0  : longword;            // Reserved,                                                           0x1C
+    RESERVED1  : longword;            // Reserved,                                                          0x20
+    RESERVED2  : longword;            // Reserved,                                                          0x24
+    RESERVED4  : longword;            // Reserved,                                                          0x28
+    RESERVED5  : longword;            // Reserved,                                                          0x2C
+    RESERVED6  : longword;            // Reserved,                                                          0x30
+    RESERVED7  : longword;            // Reserved,                                                          0x34
+    RESERVED8  : longword;            // Reserved,                                                          0x38
+    RESERVED9  : longword;            // Reserved,                                                          0x3C
+    RESERVED10 : longword;            // Reserved,                                                          0x40
+    RESERVED11 : longword;            // Reserved,                                                          0x44
+    RESERVED12 : longword;            // Reserved,                                                          0x48
+    RESERVED13 : longword;            // Reserved,                                                          0x4C
+    CFGR3      : longword;            // SYSCFG configuration register 3
+  end;
+
+  TI2C_Registers = record
+    CR1        : longword;            // I2C Control register 1
+    CR2        : longword;            // I2C Control register 2
+    OAR1       : longword;            // I2C Own address 1 register
+    OAR2       : longword;            // I2C Own address 2 register
+    TIMINGR    : longword;            // I2C Timing register
+    TIMEOUTR   : longword;            // I2C Timeout register
+    ISR        : longword;            // I2C Interrupt and status register
+    ICR        : longword;            // I2C Interrupt clear register
+    PECR       : longword;            // I2C PEC register
+    RXDR       : longword;            // I2C Receive data register
+    TXDR       : longword;            // I2C Transmit data register
+  end;
+
+  TIWDG_Registers = record
+    KR         : longword;            // IWDG Key register
+    PR         : longword;            // IWDG Prescaler register
+    RLR        : longword;            // IWDG Reload register
+    SR         : longword;            // IWDG Status register
+    WINR       : longword;            // IWDG Window register
+  end;
+
+  TPWR_Registers = record
+    CR         : longword;            // PWR power control register
+    CSR        : longword;            // PWR power control/status register
+  end;
+
+  TRCC_Registers = record
+    CR         : longword;            // RCC clock control register
+    CFGR       : longword;            // RCC clock configuration register
+    CIR        : longword;            // RCC clock interrupt register
+    APB2RSTR   : longword;            // RCC APB2 peripheral reset register
+    APB1RSTR   : longword;            // RCC APB1 peripheral reset register
+    AHBENR     : longword;            // RCC AHB peripheral clock register
+    APB2ENR    : longword;            // RCC APB2 peripheral clock enable register
+    APB1ENR    : longword;            // RCC APB1 peripheral clock enable register
+    BDCR       : longword;            // RCC Backup domain control register
+    CSR        : longword;            // RCC clock control & status register
+    AHBRSTR    : longword;            // RCC AHB peripheral reset register
+    CFGR2      : longword;            // RCC clock configuration register 2
+    CFGR3      : longword;            // RCC clock configuration register 3
+  end;
+
+  TRTC_Registers = record
+    TR         : longword;            // RTC time register
+    DR         : longword;            // RTC date register
+    CR         : longword;            // RTC control register
+    ISR        : longword;            // RTC initialization and status register
+    PRER       : longword;            // RTC prescaler register
+    WUTR       : longword;            // RTC wakeup timer register
+    RESERVED0  : longword;            // Reserved, 0x18
+    ALRMAR     : longword;            // RTC alarm A register
+    ALRMBR     : longword;            // RTC alarm B register
+    WPR        : longword;            // RTC write protection register
+    SSR        : longword;            // RTC sub second register
+    SHIFTR     : longword;            // RTC shift control register
+    TSTR       : longword;            // RTC time stamp time register
+    TSDR       : longword;            // RTC time stamp date register
+    TSSSR      : longword;            // RTC time-stamp sub second register
+    CALR       : longword;            // RTC calibration register
+    TAFCR      : longword;            // RTC tamper and alternate function configuration register
+    ALRMASSR   : longword;            // RTC alarm A sub second register
+    ALRMBSSR   : longword;            // RTC alarm B sub second register
+    RESERVED7  : longword;            // Reserved, 0x4C
+    BKP0R      : longword;            // RTC backup register 0
+    BKP1R      : longword;            // RTC backup register 1
+    BKP2R      : longword;            // RTC backup register 2
+    BKP3R      : longword;            // RTC backup register 3
+    BKP4R      : longword;            // RTC backup register 4
+  end;
+
+  TSPI_Registers = record
+    CR1        : longword;            // SPI Control register 1
+    CR2        : longword;            // SPI Control register 2
+    SR         : longword;            // SPI Status register
+    DR         : longword;            // SPI data register
+    CRCPR      : longword;            // SPI CRC polynomial register
+    RXCRCR     : longword;            // SPI Rx CRC register
+    TXCRCR     : longword;            // SPI Tx CRC register
+  end;
+
+  TTIM_Registers = record
+    CR1        : longword;            // TIM control register 1
+    CR2        : longword;            // TIM control register 2
+    SMCR       : longword;            // TIM slave mode control register
+    DIER       : longword;            // TIM DMA/interrupt enable register
+    SR         : longword;            // TIM status register
+    EGR        : longword;            // TIM event generation register
+    CCMR1      : longword;            // TIM capture/compare mode register 1
+    CCMR2      : longword;            // TIM capture/compare mode register 2
+    CCER       : longword;            // TIM capture/compare enable register
+    CNT        : longword;            // TIM counter register
+    PSC        : longword;            // TIM prescaler
+    ARR        : longword;            // TIM auto-reload register
+    RCR        : longword;            // TIM repetition counter register
+    CCR1       : longword;            // TIM capture/compare register 1
+    CCR2       : longword;            // TIM capture/compare register 2
+    CCR3       : longword;            // TIM capture/compare register 3
+    CCR4       : longword;            // TIM capture/compare register 4
+    BDTR       : longword;            // TIM break and dead-time register
+    DCR        : longword;            // TIM DMA control register
+    DMAR       : longword;            // TIM DMA address for full transfer
+    &OR        : longword;            // TIM option register
+    CCMR3      : longword;            // TIM capture/compare mode register 3
+    CCR5       : longword;            // TIM capture/compare register5
+    CCR6       : longword;            // TIM capture/compare register 4
+  end;
+
+  TTSC_Registers = record
+    CR         : longword;            // TSC control register
+    IER        : longword;            // TSC interrupt enable register
+    ICR        : longword;            // TSC interrupt clear register
+    ISR        : longword;            // TSC interrupt status register
+    IOHCR      : longword;            // TSC I/O hysteresis control register
+    RESERVED1  : longword;            // Reserved
+    IOASCR     : longword;            // TSC I/O analog switch control register
+    RESERVED2  : longword;            // Reserved
+    IOSCR      : longword;            // TSC I/O sampling control register
+    RESERVED3  : longword;            // Reserved
+    IOCCR      : longword;            // TSC I/O channel control register
+    RESERVED4  : longword;            // Reserved
+    IOGCSR     : longword;            // TSC I/O group control status register
+    IOGXCR     : array[0..7] of longword; // TSC I/O group x counter register
+  end;
+
+  TUSART_Registers = record
+    CR1        : longword;            // USART Control register 1
+    CR2        : longword;            // USART Control register 2
+    CR3        : longword;            // USART Control register 3
+    BRR        : longword;            // USART Baud rate register
+    GTPR       : longword;            // USART Guard time and prescaler register
+    RTOR       : longword;            // USART Receiver Time Out register
+    RQR        : longword;            // USART Request register
+    ISR        : longword;            // USART Interrupt and status register
+    ICR        : longword;            // USART Interrupt flag Clear register
+    RDR        : word;                // USART Receive Data register
+    RESERVED1  : word;                // Reserved, 0x26
+    TDR        : word;                // USART Transmit Data register
+    RESERVED2  : word;                // Reserved, 0x2A
+  end;
+
+  TWWDG_Registers = record
+    CR         : longword;            // WWDG Control register
+    CFR        : longword;            // WWDG Configuration register
+    SR         : longword;            // WWDG Status register
+  end;
+
+const
+  FLASH_BASE   = $08000000;           // FLASH base address in the alias region
+  CCMDATARAM_BASE = $10000000;        // CCM(core coupled memory) data RAM base address in the alias region
+  SRAM_BASE    = $20000000;           // SRAM base address in the alias region
+  PERIPH_BASE  = $40000000;           // Peripheral base address in the alias region
+  SRAM_BB_BASE = $22000000;           // SRAM base address in the bit-band region
+  PERIPH_BB_BASE = $42000000;         // Peripheral base address in the bit-band region
+  APB1PERIPH_BASE = $40000000;
+  APB2PERIPH_BASE = PERIPH_BASE + $00010000;
+  AHB1PERIPH_BASE = PERIPH_BASE + $00020000;
+  AHB2PERIPH_BASE = PERIPH_BASE + $08000000;
+  AHB3PERIPH_BASE = PERIPH_BASE + $10000000;
+  TIM2_BASE    = APB1PERIPH_BASE + $00000000;
+  TIM3_BASE    = APB1PERIPH_BASE + $00000400;
+  TIM6_BASE    = APB1PERIPH_BASE + $00001000;
+  TIM7_BASE    = APB1PERIPH_BASE + $00001400;
+  RTC_BASE     = APB1PERIPH_BASE + $00002800;
+  WWDG_BASE    = APB1PERIPH_BASE + $00002C00;
+  IWDG_BASE    = APB1PERIPH_BASE + $00003000;
+  USART2_BASE  = APB1PERIPH_BASE + $00004400;
+  USART3_BASE  = APB1PERIPH_BASE + $00004800;
+  I2C1_BASE    = APB1PERIPH_BASE + $00005400;
+  CAN_BASE     = APB1PERIPH_BASE + $00006400;
+  PWR_BASE     = APB1PERIPH_BASE + $00007000;
+  DAC1_BASE    = APB1PERIPH_BASE + $00007400;
+  DAC2_BASE    = APB1PERIPH_BASE + $00009800;
+  DAC_BASE     = APB1PERIPH_BASE + $00007400;
+  SYSCFG_BASE  = APB2PERIPH_BASE + $00000000;
+  COMP2_BASE   = APB2PERIPH_BASE + $00000020;
+  COMP4_BASE   = APB2PERIPH_BASE + $00000028;
+  COMP6_BASE   = APB2PERIPH_BASE + $00000030;
+  COMP_BASE    = APB2PERIPH_BASE + $00000020;
+  OPAMP2_BASE  = APB2PERIPH_BASE + $0000003C;
+  OPAMP_BASE   = APB2PERIPH_BASE + $0000003C;
+  EXTI_BASE    = APB2PERIPH_BASE + $00000400;
+  TIM1_BASE    = APB2PERIPH_BASE + $00002C00;
+  SPI1_BASE    = APB2PERIPH_BASE + $00003000;
+  USART1_BASE  = APB2PERIPH_BASE + $00003800;
+  TIM15_BASE   = APB2PERIPH_BASE + $00004000;
+  TIM16_BASE   = APB2PERIPH_BASE + $00004400;
+  TIM17_BASE   = APB2PERIPH_BASE + $00004800;
+  DMA1_BASE    = AHB1PERIPH_BASE + $00000000;
+  DMA1_Channel1_BASE = AHB1PERIPH_BASE + $00000008;
+  DMA1_Channel2_BASE = AHB1PERIPH_BASE + $0000001C;
+  DMA1_Channel3_BASE = AHB1PERIPH_BASE + $00000030;
+  DMA1_Channel4_BASE = AHB1PERIPH_BASE + $00000044;
+  DMA1_Channel5_BASE = AHB1PERIPH_BASE + $00000058;
+  DMA1_Channel6_BASE = AHB1PERIPH_BASE + $0000006C;
+  DMA1_Channel7_BASE = AHB1PERIPH_BASE + $00000080;
+  RCC_BASE     = AHB1PERIPH_BASE + $00001000;
+  FLASH_R_BASE = AHB1PERIPH_BASE + $00002000; // Flash registers base address
+  OB_BASE      = $1FFFF800;           // Flash Option Bytes base address
+  FLASHSIZE_BASE = $1FFFF7CC;         // FLASH Size register base address
+  UID_BASE     = $1FFFF7AC;           // Unique device ID register base address
+  CRC_BASE     = AHB1PERIPH_BASE + $00003000;
+  TSC_BASE     = AHB1PERIPH_BASE + $00004000;
+  GPIOA_BASE   = AHB2PERIPH_BASE + $00000000;
+  GPIOB_BASE   = AHB2PERIPH_BASE + $00000400;
+  GPIOC_BASE   = AHB2PERIPH_BASE + $00000800;
+  GPIOD_BASE   = AHB2PERIPH_BASE + $00000C00;
+  GPIOF_BASE   = AHB2PERIPH_BASE + $00001400;
+  ADC1_BASE    = AHB3PERIPH_BASE + $00000000;
+  ADC2_BASE    = AHB3PERIPH_BASE + $00000100;
+  ADC1_2_COMMON_BASE = AHB3PERIPH_BASE + $00000300;
+  DBGMCU_BASE  = $E0042000;           // Debug MCU registers base address
+
+var
+  TIM2         : TTIM_Registers absolute TIM2_BASE;
+  TIM3         : TTIM_Registers absolute TIM3_BASE;
+  TIM6         : TTIM_Registers absolute TIM6_BASE;
+  TIM7         : TTIM_Registers absolute TIM7_BASE;
+  RTC          : TRTC_Registers absolute RTC_BASE;
+  WWDG         : TWWDG_Registers absolute WWDG_BASE;
+  IWDG         : TIWDG_Registers absolute IWDG_BASE;
+  USART2       : TUSART_Registers absolute USART2_BASE;
+  USART3       : TUSART_Registers absolute USART3_BASE;
+  I2C1         : TI2C_Registers absolute I2C1_BASE;
+  CAN          : TCAN_Registers absolute CAN_BASE;
+  PWR          : TPWR_Registers absolute PWR_BASE;
+  DAC          : TDAC_Registers absolute DAC_BASE;
+  DAC1         : TDAC_Registers absolute DAC1_BASE;
+  DAC2         : TDAC_Registers absolute DAC2_BASE;
+  COMP2        : TCOMP_Registers absolute COMP2_BASE;
+  COMP4        : TCOMP_Registers absolute COMP4_BASE;
+  COMP6        : TCOMP_Registers absolute COMP6_BASE;
+  COMP         : TCOMP_Registers absolute COMP_BASE;
+  OPAMP        : TOPAMP_Registers absolute OPAMP_BASE;
+  OPAMP2       : TOPAMP_Registers absolute OPAMP2_BASE;
+  SYSCFG       : TSYSCFG_Registers absolute SYSCFG_BASE;
+  EXTI         : TEXTI_Registers absolute EXTI_BASE;
+  TIM1         : TTIM_Registers absolute TIM1_BASE;
+  SPI1         : TSPI_Registers absolute SPI1_BASE;
+  USART1       : TUSART_Registers absolute USART1_BASE;
+  TIM15        : TTIM_Registers absolute TIM15_BASE;
+  TIM16        : TTIM_Registers absolute TIM16_BASE;
+  TIM17        : TTIM_Registers absolute TIM17_BASE;
+  DBGMCU       : TDBGMCU_Registers absolute DBGMCU_BASE;
+  DMA1         : TDMA_Registers absolute DMA1_BASE;
+  DMA1_Channel1 : TDMA_Channel_Registers absolute DMA1_Channel1_BASE;
+  DMA1_Channel2 : TDMA_Channel_Registers absolute DMA1_Channel2_BASE;
+  DMA1_Channel3 : TDMA_Channel_Registers absolute DMA1_Channel3_BASE;
+  DMA1_Channel4 : TDMA_Channel_Registers absolute DMA1_Channel4_BASE;
+  DMA1_Channel5 : TDMA_Channel_Registers absolute DMA1_Channel5_BASE;
+  DMA1_Channel6 : TDMA_Channel_Registers absolute DMA1_Channel6_BASE;
+  DMA1_Channel7 : TDMA_Channel_Registers absolute DMA1_Channel7_BASE;
+  RCC          : TRCC_Registers absolute RCC_BASE;
+  FLASH        : TFLASH_Registers absolute FLASH_R_BASE;
+  OB           : TOB_Registers absolute OB_BASE;
+  CRC          : TCRC_Registers absolute CRC_BASE;
+  TSC          : TTSC_Registers absolute TSC_BASE;
+  GPIOA        : TGPIO_Registers absolute GPIOA_BASE;
+  GPIOB        : TGPIO_Registers absolute GPIOB_BASE;
+  GPIOC        : TGPIO_Registers absolute GPIOC_BASE;
+  GPIOD        : TGPIO_Registers absolute GPIOD_BASE;
+  GPIOF        : TGPIO_Registers absolute GPIOF_BASE;
+  ADC1         : TADC_Registers absolute ADC1_BASE;
+  ADC2         : TADC_Registers absolute ADC2_BASE;
+  ADC12_COMMON : TADC_Common_Registers absolute ADC1_2_COMMON_BASE;
+
+implementation
+
+procedure NonMaskableInt_interrupt; external name 'NonMaskableInt_interrupt';
+procedure HardFault_interrupt; external name 'HardFault_interrupt';
+procedure MemoryManagement_interrupt; external name 'MemoryManagement_interrupt';
+procedure BusFault_interrupt; external name 'BusFault_interrupt';
+procedure UsageFault_interrupt; external name 'UsageFault_interrupt';
+procedure SVCall_interrupt; external name 'SVCall_interrupt';
+procedure DebugMonitor_interrupt; external name 'DebugMonitor_interrupt';
+procedure PendSV_interrupt; external name 'PendSV_interrupt';
+procedure SysTick_interrupt; external name 'SysTick_interrupt';
+procedure WWDG_interrupt; external name 'WWDG_interrupt';
+procedure PVD_interrupt; external name 'PVD_interrupt';
+procedure TAMP_STAMP_interrupt; external name 'TAMP_STAMP_interrupt';
+procedure RTC_WKUP_interrupt; external name 'RTC_WKUP_interrupt';
+procedure FLASH_interrupt; external name 'FLASH_interrupt';
+procedure RCC_interrupt; external name 'RCC_interrupt';
+procedure EXTI0_interrupt; external name 'EXTI0_interrupt';
+procedure EXTI1_interrupt; external name 'EXTI1_interrupt';
+procedure EXTI2_TSC_interrupt; external name 'EXTI2_TSC_interrupt';
+procedure EXTI3_interrupt; external name 'EXTI3_interrupt';
+procedure EXTI4_interrupt; external name 'EXTI4_interrupt';
+procedure DMA1_Channel1_interrupt; external name 'DMA1_Channel1_interrupt';
+procedure DMA1_Channel2_interrupt; external name 'DMA1_Channel2_interrupt';
+procedure DMA1_Channel3_interrupt; external name 'DMA1_Channel3_interrupt';
+procedure DMA1_Channel4_interrupt; external name 'DMA1_Channel4_interrupt';
+procedure DMA1_Channel5_interrupt; external name 'DMA1_Channel5_interrupt';
+procedure DMA1_Channel6_interrupt; external name 'DMA1_Channel6_interrupt';
+procedure DMA1_Channel7_interrupt; external name 'DMA1_Channel7_interrupt';
+procedure ADC1_2_interrupt; external name 'ADC1_2_interrupt';
+procedure CAN_TX_interrupt; external name 'CAN_TX_interrupt';
+procedure CAN_RX0_interrupt; external name 'CAN_RX0_interrupt';
+procedure CAN_RX1_interrupt; external name 'CAN_RX1_interrupt';
+procedure CAN_SCE_interrupt; external name 'CAN_SCE_interrupt';
+procedure EXTI9_5_interrupt; external name 'EXTI9_5_interrupt';
+procedure TIM1_BRK_TIM15_interrupt; external name 'TIM1_BRK_TIM15_interrupt';
+procedure TIM1_UP_TIM16_interrupt; external name 'TIM1_UP_TIM16_interrupt';
+procedure TIM1_TRG_COM_TIM17_interrupt; external name 'TIM1_TRG_COM_TIM17_interrupt';
+procedure TIM1_CC_interrupt; external name 'TIM1_CC_interrupt';
+procedure TIM2_interrupt; external name 'TIM2_interrupt';
+procedure TIM3_interrupt; external name 'TIM3_interrupt';
+procedure I2C1_EV_interrupt; external name 'I2C1_EV_interrupt';
+procedure I2C1_ER_interrupt; external name 'I2C1_ER_interrupt';
+procedure SPI1_interrupt; external name 'SPI1_interrupt';
+procedure USART1_interrupt; external name 'USART1_interrupt';
+procedure USART2_interrupt; external name 'USART2_interrupt';
+procedure USART3_interrupt; external name 'USART3_interrupt';
+procedure EXTI15_10_interrupt; external name 'EXTI15_10_interrupt';
+procedure RTC_Alarm_interrupt; external name 'RTC_Alarm_interrupt';
+procedure TIM6_DAC1_interrupt; external name 'TIM6_DAC1_interrupt';
+procedure TIM7_DAC2_interrupt; external name 'TIM7_DAC2_interrupt';
+procedure COMP2_interrupt; external name 'COMP2_interrupt';
+procedure COMP4_6_interrupt; external name 'COMP4_6_interrupt';
+procedure FPU_interrupt; external name 'FPU_interrupt';
+
+{$i cortexm4f_start.inc}
+
+procedure Vectors; assembler; nostackframe;
+label interrupt_vectors;
+asm
+  .section ".init.interrupt_vectors"
+  interrupt_vectors:
+  .long _stack_top
+  .long Startup
+  .long NonMaskableInt_interrupt
+  .long HardFault_interrupt
+  .long MemoryManagement_interrupt
+  .long BusFault_interrupt
+  .long UsageFault_interrupt
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long SVCall_interrupt
+  .long DebugMonitor_interrupt
+  .long 0
+  .long PendSV_interrupt
+  .long SysTick_interrupt
+  .long WWDG_interrupt
+  .long PVD_interrupt
+  .long TAMP_STAMP_interrupt
+  .long RTC_WKUP_interrupt
+  .long FLASH_interrupt
+  .long RCC_interrupt
+  .long EXTI0_interrupt
+  .long EXTI1_interrupt
+  .long EXTI2_TSC_interrupt
+  .long EXTI3_interrupt
+  .long EXTI4_interrupt
+  .long DMA1_Channel1_interrupt
+  .long DMA1_Channel2_interrupt
+  .long DMA1_Channel3_interrupt
+  .long DMA1_Channel4_interrupt
+  .long DMA1_Channel5_interrupt
+  .long DMA1_Channel6_interrupt
+  .long DMA1_Channel7_interrupt
+  .long ADC1_2_interrupt
+  .long CAN_TX_interrupt
+  .long CAN_RX0_interrupt
+  .long CAN_RX1_interrupt
+  .long CAN_SCE_interrupt
+  .long EXTI9_5_interrupt
+  .long TIM1_BRK_TIM15_interrupt
+  .long TIM1_UP_TIM16_interrupt
+  .long TIM1_TRG_COM_TIM17_interrupt
+  .long TIM1_CC_interrupt
+  .long TIM2_interrupt
+  .long TIM3_interrupt
+  .long 0
+  .long I2C1_EV_interrupt
+  .long I2C1_ER_interrupt
+  .long 0
+  .long 0
+  .long SPI1_interrupt
+  .long 0
+  .long USART1_interrupt
+  .long USART2_interrupt
+  .long USART3_interrupt
+  .long EXTI15_10_interrupt
+  .long RTC_Alarm_interrupt
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long TIM6_DAC1_interrupt
+  .long TIM7_DAC2_interrupt
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long COMP2_interrupt
+  .long COMP4_6_interrupt
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long FPU_interrupt
+  .weak NonMaskableInt_interrupt
+  .weak HardFault_interrupt
+  .weak MemoryManagement_interrupt
+  .weak BusFault_interrupt
+  .weak UsageFault_interrupt
+  .weak SVCall_interrupt
+  .weak DebugMonitor_interrupt
+  .weak PendSV_interrupt
+  .weak SysTick_interrupt
+  .weak WWDG_interrupt
+  .weak PVD_interrupt
+  .weak TAMP_STAMP_interrupt
+  .weak RTC_WKUP_interrupt
+  .weak FLASH_interrupt
+  .weak RCC_interrupt
+  .weak EXTI0_interrupt
+  .weak EXTI1_interrupt
+  .weak EXTI2_TSC_interrupt
+  .weak EXTI3_interrupt
+  .weak EXTI4_interrupt
+  .weak DMA1_Channel1_interrupt
+  .weak DMA1_Channel2_interrupt
+  .weak DMA1_Channel3_interrupt
+  .weak DMA1_Channel4_interrupt
+  .weak DMA1_Channel5_interrupt
+  .weak DMA1_Channel6_interrupt
+  .weak DMA1_Channel7_interrupt
+  .weak ADC1_2_interrupt
+  .weak CAN_TX_interrupt
+  .weak CAN_RX0_interrupt
+  .weak CAN_RX1_interrupt
+  .weak CAN_SCE_interrupt
+  .weak EXTI9_5_interrupt
+  .weak TIM1_BRK_TIM15_interrupt
+  .weak TIM1_UP_TIM16_interrupt
+  .weak TIM1_TRG_COM_TIM17_interrupt
+  .weak TIM1_CC_interrupt
+  .weak TIM2_interrupt
+  .weak TIM3_interrupt
+  .weak I2C1_EV_interrupt
+  .weak I2C1_ER_interrupt
+  .weak SPI1_interrupt
+  .weak USART1_interrupt
+  .weak USART2_interrupt
+  .weak USART3_interrupt
+  .weak EXTI15_10_interrupt
+  .weak RTC_Alarm_interrupt
+  .weak TIM6_DAC1_interrupt
+  .weak TIM7_DAC2_interrupt
+  .weak COMP2_interrupt
+  .weak COMP4_6_interrupt
+  .weak FPU_interrupt
+  .set NonMaskableInt_interrupt, HaltProc
+  .set HardFault_interrupt, HaltProc
+  .set MemoryManagement_interrupt, HaltProc
+  .set BusFault_interrupt, HaltProc
+  .set UsageFault_interrupt, HaltProc
+  .set SVCall_interrupt, HaltProc
+  .set DebugMonitor_interrupt, HaltProc
+  .set PendSV_interrupt, HaltProc
+  .set SysTick_interrupt, HaltProc
+  .set WWDG_interrupt, HaltProc
+  .set PVD_interrupt, HaltProc
+  .set TAMP_STAMP_interrupt, HaltProc
+  .set RTC_WKUP_interrupt, HaltProc
+  .set FLASH_interrupt, HaltProc
+  .set RCC_interrupt, HaltProc
+  .set EXTI0_interrupt, HaltProc
+  .set EXTI1_interrupt, HaltProc
+  .set EXTI2_TSC_interrupt, HaltProc
+  .set EXTI3_interrupt, HaltProc
+  .set EXTI4_interrupt, HaltProc
+  .set DMA1_Channel1_interrupt, HaltProc
+  .set DMA1_Channel2_interrupt, HaltProc
+  .set DMA1_Channel3_interrupt, HaltProc
+  .set DMA1_Channel4_interrupt, HaltProc
+  .set DMA1_Channel5_interrupt, HaltProc
+  .set DMA1_Channel6_interrupt, HaltProc
+  .set DMA1_Channel7_interrupt, HaltProc
+  .set ADC1_2_interrupt, HaltProc
+  .set CAN_TX_interrupt, HaltProc
+  .set CAN_RX0_interrupt, HaltProc
+  .set CAN_RX1_interrupt, HaltProc
+  .set CAN_SCE_interrupt, HaltProc
+  .set EXTI9_5_interrupt, HaltProc
+  .set TIM1_BRK_TIM15_interrupt, HaltProc
+  .set TIM1_UP_TIM16_interrupt, HaltProc
+  .set TIM1_TRG_COM_TIM17_interrupt, HaltProc
+  .set TIM1_CC_interrupt, HaltProc
+  .set TIM2_interrupt, HaltProc
+  .set TIM3_interrupt, HaltProc
+  .set I2C1_EV_interrupt, HaltProc
+  .set I2C1_ER_interrupt, HaltProc
+  .set SPI1_interrupt, HaltProc
+  .set USART1_interrupt, HaltProc
+  .set USART2_interrupt, HaltProc
+  .set USART3_interrupt, HaltProc
+  .set EXTI15_10_interrupt, HaltProc
+  .set RTC_Alarm_interrupt, HaltProc
+  .set TIM6_DAC1_interrupt, HaltProc
+  .set TIM7_DAC2_interrupt, HaltProc
+  .set COMP2_interrupt, HaltProc
+  .set COMP4_6_interrupt, HaltProc
+  .set FPU_interrupt, HaltProc
+  .text
+end;
+end.
diff -Naur fpc-save/rtl/embedded/arm/stm32f303xc.pp fpc/rtl/embedded/arm/stm32f303xc.pp
--- fpc-save/rtl/embedded/arm/stm32f303xc.pp	1970-01-01 01:00:00.000000000 +0100
+++ fpc/rtl/embedded/arm/stm32f303xc.pp	2018-03-02 17:07:04.000000000 +0100
@@ -0,0 +1,1035 @@
+unit stm32f303xc;
+interface
+{$PACKRECORDS C}
+{$GOTO ON}
+// *
+// ******************************************************************************
+// * @file    stm32f303xc.h
+// * @author  MCD Application Team
+//   CMSIS STM32F303xC Devices Peripheral Access Layer Header File.
+// *
+// *          This file contains:
+// *           - Data structures and the address mapping for all peripherals
+// *           - Peripheral's registers declarations and bits definition
+// *           - Macros to access peripheral’s registers hardware
+// *
+// ******************************************************************************
+// * @attention
+// *
+// * <h2><center>&copy; COPYRIGHT(c) 2016 STMicroelectronics</center></h2>
+// *
+// * Redistribution and use in source and binary forms, with or without modification,
+// * are permitted provided that the following conditions are met:
+// *   1. Redistributions of source code must retain the above copyright notice,
+// *      this list of conditions and the following disclaimer.
+// *   2. Redistributions in binary form must reproduce the above copyright notice,
+// *      this list of conditions and the following disclaimer in the documentation
+// *      and/or other materials provided with the distribution.
+// *   3. Neither the name of STMicroelectronics nor the names of its contributors
+// *      may be used to endorse or promote products derived from this software
+// *      without specific prior written permission.
+// *
+// * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
+// * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
+// * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+// * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE
+// * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
+// * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
+// * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER
+// * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+// * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
+// * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
+// *
+// ******************************************************************************
+// Configuration of the Cortex-M4 Processor and Core Peripherals
+// STM32F303xC devices Interrupt Number Definition, according to the selected device
+// *        in @ref Library_configuration_section
+
+type
+  TIRQn_Enum   = (
+    NonMaskableInt_IRQn = -14,        // 2 Non Maskable Interrupt
+    HardFault_IRQn = -13,             // 3 Cortex-M4 Hard Fault Interrupt
+    MemoryManagement_IRQn = -12,      // 4 Cortex-M4 Memory Management Interrupt
+    BusFault_IRQn = -11,              // 5 Cortex-M4 Bus Fault Interrupt
+    UsageFault_IRQn = -10,            // 6 Cortex-M4 Usage Fault Interrupt
+    SVCall_IRQn = -5,                 // 11 Cortex-M4 SV Call Interrupt
+    DebugMonitor_IRQn = -4,           // 12 Cortex-M4 Debug Monitor Interrupt
+    PendSV_IRQn = -2,                 // 14 Cortex-M4 Pend SV Interrupt
+    SysTick_IRQn = -1,                // 15 Cortex-M4 System Tick Interrupt
+    WWDG_IRQn  = 0,                   // Window WatchDog Interrupt
+    PVD_IRQn   = 1,                   // PVD through EXTI Line detection Interrupt
+    TAMP_STAMP_IRQn = 2,              // Tamper and TimeStamp interrupts through the EXTI line 19
+    RTC_WKUP_IRQn = 3,                // RTC Wakeup interrupt through the EXTI line 20
+    FLASH_IRQn = 4,                   // FLASH global Interrupt
+    RCC_IRQn   = 5,                   // RCC global Interrupt
+    EXTI0_IRQn = 6,                   // EXTI Line0 Interrupt
+    EXTI1_IRQn = 7,                   // EXTI Line1 Interrupt
+    EXTI2_TSC_IRQn = 8,               // EXTI Line2 Interrupt and Touch Sense Controller Interrupt
+    EXTI3_IRQn = 9,                   // EXTI Line3 Interrupt
+    EXTI4_IRQn = 10,                  // EXTI Line4 Interrupt
+    DMA1_Channel1_IRQn = 11,          // DMA1 Channel 1 Interrupt
+    DMA1_Channel2_IRQn = 12,          // DMA1 Channel 2 Interrupt
+    DMA1_Channel3_IRQn = 13,          // DMA1 Channel 3 Interrupt
+    DMA1_Channel4_IRQn = 14,          // DMA1 Channel 4 Interrupt
+    DMA1_Channel5_IRQn = 15,          // DMA1 Channel 5 Interrupt
+    DMA1_Channel6_IRQn = 16,          // DMA1 Channel 6 Interrupt
+    DMA1_Channel7_IRQn = 17,          // DMA1 Channel 7 Interrupt
+    ADC1_2_IRQn = 18,                 // ADC1 & ADC2 Interrupts
+    USB_HP_CAN_TX_IRQn = 19,          // USB Device High Priority or CAN TX Interrupts
+    USB_LP_CAN_RX0_IRQn = 20,         // USB Device Low Priority or CAN RX0 Interrupts
+    CAN_RX1_IRQn = 21,                // CAN RX1 Interrupt
+    CAN_SCE_IRQn = 22,                // CAN SCE Interrupt
+    EXTI9_5_IRQn = 23,                // External Line[9:5] Interrupts
+    TIM1_BRK_TIM15_IRQn = 24,         // TIM1 Break and TIM15 Interrupts
+    TIM1_UP_TIM16_IRQn = 25,          // TIM1 Update and TIM16 Interrupts
+    TIM1_TRG_COM_TIM17_IRQn = 26,     // TIM1 Trigger and Commutation and TIM17 Interrupt
+    TIM1_CC_IRQn = 27,                // TIM1 Capture Compare Interrupt
+    TIM2_IRQn  = 28,                  // TIM2 global Interrupt
+    TIM3_IRQn  = 29,                  // TIM3 global Interrupt
+    TIM4_IRQn  = 30,                  // TIM4 global Interrupt
+    I2C1_EV_IRQn = 31,                // I2C1 Event Interrupt & EXTI Line23 Interrupt (I2C1 wakeup)
+    I2C1_ER_IRQn = 32,                // I2C1 Error Interrupt
+    I2C2_EV_IRQn = 33,                // I2C2 Event Interrupt & EXTI Line24 Interrupt (I2C2 wakeup)
+    I2C2_ER_IRQn = 34,                // I2C2 Error Interrupt
+    SPI1_IRQn  = 35,                  // SPI1 global Interrupt
+    SPI2_IRQn  = 36,                  // SPI2 global Interrupt
+    USART1_IRQn = 37,                 // USART1 global Interrupt & EXTI Line25 Interrupt (USART1 wakeup)
+    USART2_IRQn = 38,                 // USART2 global Interrupt & EXTI Line26 Interrupt (USART2 wakeup)
+    USART3_IRQn = 39,                 // USART3 global Interrupt & EXTI Line28 Interrupt (USART3 wakeup)
+    EXTI15_10_IRQn = 40,              // External Line[15:10] Interrupts
+    RTC_Alarm_IRQn = 41,              // RTC Alarm (A and B) through EXTI Line 17 Interrupt
+    USBWakeUp_IRQn = 42,              // USB Wakeup Interrupt
+    TIM8_BRK_IRQn = 43,               // TIM8 Break Interrupt
+    TIM8_UP_IRQn = 44,                // TIM8 Update Interrupt
+    TIM8_TRG_COM_IRQn = 45,           // TIM8 Trigger and Commutation Interrupt
+    TIM8_CC_IRQn = 46,                // TIM8 Capture Compare Interrupt
+    ADC3_IRQn  = 47,                  // ADC3 global Interrupt
+    SPI3_IRQn  = 51,                  // SPI3 global Interrupt
+    UART4_IRQn = 52,                  // UART4 global Interrupt & EXTI Line34 Interrupt (UART4 wakeup)
+    UART5_IRQn = 53,                  // UART5 global Interrupt & EXTI Line35 Interrupt (UART5 wakeup)
+    TIM6_DAC_IRQn = 54,               // TIM6 global and DAC underrun error Interrupt
+    TIM7_IRQn  = 55,                  // TIM7 global Interrupt
+    DMA2_Channel1_IRQn = 56,          // DMA2 Channel 1 global Interrupt
+    DMA2_Channel2_IRQn = 57,          // DMA2 Channel 2 global Interrupt
+    DMA2_Channel3_IRQn = 58,          // DMA2 Channel 3 global Interrupt
+    DMA2_Channel4_IRQn = 59,          // DMA2 Channel 4 global Interrupt
+    DMA2_Channel5_IRQn = 60,          // DMA2 Channel 5 global Interrupt
+    ADC4_IRQn  = 61,                  // ADC4  global Interrupt
+    COMP1_2_3_IRQn = 64,              // COMP1, COMP2 and COMP3 global Interrupt via EXTI Line21, 22 and 29
+    COMP4_5_6_IRQn = 65,              // COMP4, COMP5 and COMP6 global Interrupt via EXTI Line30, 31 and 32
+    COMP7_IRQn = 66,                  // COMP7 global Interrupt via EXTI Line33
+    USB_HP_IRQn = 74,                 // USB High Priority global Interrupt
+    USB_LP_IRQn = 75,                 // USB Low Priority global Interrupt
+    USBWakeUp_RMP_IRQn = 76,          // USB Wakeup Interrupt remap
+    FPU_IRQn   = 81                   // Floating point Interrupt
+  );
+
+  TADC_Registers = record
+    ISR        : longword;            // ADC Interrupt and Status Register
+    IER        : longword;            // ADC Interrupt Enable Register
+    CR         : longword;            // ADC control register
+    CFGR       : longword;            // ADC Configuration register
+    RESERVED0  : longword;            // Reserved, 0x010
+    SMPR1      : longword;            // ADC sample time register 1
+    SMPR2      : longword;            // ADC sample time register 2
+    RESERVED1  : longword;            // Reserved, 0x01C
+    TR1        : longword;            // ADC watchdog threshold register 1
+    TR2        : longword;            // ADC watchdog threshold register 2
+    TR3        : longword;            // ADC watchdog threshold register 3
+    RESERVED2  : longword;            // Reserved, 0x02C
+    SQR1       : longword;            // ADC regular sequence register 1
+    SQR2       : longword;            // ADC regular sequence register 2
+    SQR3       : longword;            // ADC regular sequence register 3
+    SQR4       : longword;            // ADC regular sequence register 4
+    DR         : longword;            // ADC regular data register
+    RESERVED3  : longword;            // Reserved, 0x044
+    RESERVED4  : longword;            // Reserved, 0x048
+    JSQR       : longword;            // ADC injected sequence register
+    RESERVED5  : array[0..3] of longword; // Reserved, 0x050 - 0x05C
+    OFR1       : longword;            // ADC offset register 1
+    OFR2       : longword;            // ADC offset register 2
+    OFR3       : longword;            // ADC offset register 3
+    OFR4       : longword;            // ADC offset register 4
+    RESERVED6  : array[0..3] of longword; // Reserved, 0x070 - 0x07C
+    JDR1       : longword;            // ADC injected data register 1
+    JDR2       : longword;            // ADC injected data register 2
+    JDR3       : longword;            // ADC injected data register 3
+    JDR4       : longword;            // ADC injected data register 4
+    RESERVED7  : array[0..3] of longword; // Reserved, 0x090 - 0x09C
+    AWD2CR     : longword;            // ADC  Analog Watchdog 2 Configuration Register
+    AWD3CR     : longword;            // ADC  Analog Watchdog 3 Configuration Register
+    RESERVED8  : longword;            // Reserved, 0x0A8
+    RESERVED9  : longword;            // Reserved, 0x0AC
+    DIFSEL     : longword;            // ADC  Differential Mode Selection Register
+    CALFACT    : longword;            // ADC  Calibration Factors
+  end;
+
+  TADC_COMMON_Registers = record
+    CSR        : longword;            // ADC Common status register
+    RESERVED   : longword;            // Reserved, ADC1/3 base address + 0x304
+    CCR        : longword;            // ADC common control register
+    CDR        : longword;            // ADC common regular data register for dual
+  end;
+
+  TCAN_TXMAILBOX_Registers = record
+    TIR        : longword;            // CAN TX mailbox identifier register
+    TDTR       : longword;            // CAN mailbox data length control and time stamp register
+    TDLR       : longword;            // CAN mailbox data low register
+    TDHR       : longword;            // CAN mailbox data high register
+  end;
+
+  TCAN_FIFOMAILBOX_Registers = record
+    RIR        : longword;            // CAN receive FIFO mailbox identifier register
+    RDTR       : longword;            // CAN receive FIFO mailbox data length control and time stamp register
+    RDLR       : longword;            // CAN receive FIFO mailbox data low register
+    RDHR       : longword;            // CAN receive FIFO mailbox data high register
+  end;
+
+  TCAN_FILTERREGISTER_Registers = record
+    FR1        : longword;            // CAN Filter bank register 1
+    FR2        : longword;            // CAN Filter bank register 1
+  end;
+
+  TCAN_Registers = record
+    MCR        : longword;            // CAN master control register
+    MSR        : longword;            // CAN master status register
+    TSR        : longword;            // CAN transmit status register
+    RF0R       : longword;            // CAN receive FIFO 0 register
+    RF1R       : longword;            // CAN receive FIFO 1 register
+    IER        : longword;            // CAN interrupt enable register
+    ESR        : longword;            // CAN error status register
+    BTR        : longword;            // CAN bit timing register
+    RESERVED0  : array[0..87] of longword; // Reserved, 0x020 - 0x17F
+    sTxMailBox : array[0..2] of TCAN_TxMailBox_Registers; // CAN Tx MailBox
+    sFIFOMailBox : array[0..1] of TCAN_FIFOMailBox_Registers; // CAN FIFO MailBox
+    RESERVED1  : array[0..11] of longword; // Reserved, 0x1D0 - 0x1FF
+    FMR        : longword;            // CAN filter master register
+    FM1R       : longword;            // CAN filter mode register
+    RESERVED2  : longword;            // Reserved, 0x208
+    FS1R       : longword;            // CAN filter scale register
+    RESERVED3  : longword;            // Reserved, 0x210
+    FFA1R      : longword;            // CAN filter FIFO assignment register
+    RESERVED4  : longword;            // Reserved, 0x218
+    FA1R       : longword;            // CAN filter activation register
+    RESERVED5  : array[0..7] of longword; // Reserved, 0x220-0x23F
+    sFilterRegister : array[0..27] of TCAN_FilterRegister_Registers; // CAN Filter Register
+  end;
+
+  TCOMP_Registers = record
+    CSR        : longword;            // COMP control and status register
+  end;
+
+  TCOMP_COMMON_Registers = record
+    CSR        : longword;            // COMP control and status register, used for bits common to several COMP instances
+  end;
+
+  TCRC_Registers = record
+    DR         : longword;            // CRC Data register
+    IDR        : byte;                // CRC Independent data register
+    RESERVED0  : byte;                // Reserved,                                                    0x05
+    RESERVED1  : word;                // Reserved,                                                    0x06
+    CR         : longword;            // CRC Control register
+    RESERVED2  : longword;            // Reserved,                                                    0x0C
+    INIT       : longword;            // Initial CRC value register
+    POL        : longword;            // CRC polynomial register
+  end;
+
+  TDAC_Registers = record
+    CR         : longword;            // DAC control register
+    SWTRIGR    : longword;            // DAC software trigger register
+    DHR12R1    : longword;            // DAC channel1 12-bit right-aligned data holding register
+    DHR12L1    : longword;            // DAC channel1 12-bit left aligned data holding register
+    DHR8R1     : longword;            // DAC channel1 8-bit right aligned data holding register
+    DHR12R2    : longword;            // DAC channel2 12-bit right aligned data holding register
+    DHR12L2    : longword;            // DAC channel2 12-bit left aligned data holding register
+    DHR8R2     : longword;            // DAC channel2 8-bit right-aligned data holding register
+    DHR12RD    : longword;            // Dual DAC 12-bit right-aligned data holding register
+    DHR12LD    : longword;            // DUAL DAC 12-bit left aligned data holding register
+    DHR8RD     : longword;            // DUAL DAC 8-bit right aligned data holding register
+    DOR1       : longword;            // DAC channel1 data output register
+    DOR2       : longword;            // DAC channel2 data output register
+    SR         : longword;            // DAC status register
+  end;
+
+  TDBGMCU_Registers = record
+    IDCODE     : longword;            // MCU device ID code
+    CR         : longword;            // Debug MCU configuration register
+    APB1FZ     : longword;            // Debug MCU APB1 freeze register
+    APB2FZ     : longword;            // Debug MCU APB2 freeze register
+  end;
+
+  TDMA_CHANNEL_Registers = record
+    CCR        : longword;            // DMA channel x configuration register
+    CNDTR      : longword;            // DMA channel x number of data register
+    CPAR       : longword;            // DMA channel x peripheral address register
+    CMAR       : longword;            // DMA channel x memory address register
+  end;
+
+  TDMA_Registers = record
+    ISR        : longword;            // DMA interrupt status register
+    IFCR       : longword;            // DMA interrupt flag clear register
+  end;
+
+  TEXTI_Registers = record
+    IMR        : longword;            // XTI Interrupt mask register
+    EMR        : longword;            // XTI Event mask register
+    RTSR       : longword;            // XTI Rising trigger selection register
+    FTSR       : longword;            // XTI Falling trigger selection register
+    SWIER      : longword;            // XTI Software interrupt event register
+    PR         : longword;            // XTI Pending register
+    RESERVED1  : longword;            // Reserved, 0x18
+    RESERVED2  : longword;            // Reserved, 0x1C
+    IMR2       : longword;            // EXTI Interrupt mask register
+    EMR2       : longword;            // EXTI Event mask register
+    RTSR2      : longword;            // EXTI Rising trigger selection register
+    FTSR2      : longword;            // EXTI Falling trigger selection register
+    SWIER2     : longword;            // EXTI Software interrupt event register
+    PR2        : longword;            // EXTI Pending register
+  end;
+
+  TFLASH_Registers = record
+    ACR        : longword;            // FLASH access control register
+    KEYR       : longword;            // FLASH key register
+    OPTKEYR    : longword;            // FLASH option key register
+    SR         : longword;            // FLASH status register
+    CR         : longword;            // FLASH control register
+    AR         : longword;            // FLASH address register
+    RESERVED   : longword;            // Reserved, 0x18
+    OBR        : longword;            // FLASH Option byte register
+    WRPR       : longword;            // FLASH Write register
+  end;
+
+  TOB_Registers = record
+    RDP        : word;                // LASH option byte Read protection
+    USER       : word;                // LASH option byte user options
+    RESERVED0  : word;                // Reserved,                                                     0x04
+    RESERVED1  : word;                // Reserved,                                                     0x06
+    WRP0       : word;                // LASH option byte write protection 0
+    WRP1       : word;                // LASH option byte write protection 1
+    WRP2       : word;                // LASH option byte write protection 2
+    WRP3       : word;                // LASH option byte write protection 3
+  end;
+
+  TGPIO_Registers = record
+    MODER      : longword;            // GPIO port mode register
+    OTYPER     : longword;            // GPIO port output type register
+    OSPEEDR    : longword;            // GPIO port output speed register
+    PUPDR      : longword;            // GPIO port pull-up/pull-down register
+    IDR        : longword;            // GPIO port input data register
+    ODR        : longword;            // GPIO port output data register
+    BSRR       : longword;            // GPIO port bit set/reset register
+    LCKR       : longword;            // GPIO port configuration lock register
+    AFR        : array[0..1] of longword; // GPIO alternate function registers
+    BRR        : longword;            // GPIO bit reset register
+  end;
+
+  TOPAMP_Registers = record
+    CSR        : longword;            // OPAMP control and status register
+  end;
+
+  TSYSCFG_Registers = record
+    CFGR1      : longword;            // SYSCFG configuration register 1
+    RCR        : longword;            // SYSCFG CCM SRAM protection register
+    EXTICR     : array[0..3] of longword; // SYSCFG external interrupt configuration registers
+    CFGR2      : longword;            // SYSCFG configuration register 2
+  end;
+
+  TI2C_Registers = record
+    CR1        : longword;            // I2C Control register 1
+    CR2        : longword;            // I2C Control register 2
+    OAR1       : longword;            // I2C Own address 1 register
+    OAR2       : longword;            // I2C Own address 2 register
+    TIMINGR    : longword;            // I2C Timing register
+    TIMEOUTR   : longword;            // I2C Timeout register
+    ISR        : longword;            // I2C Interrupt and status register
+    ICR        : longword;            // I2C Interrupt clear register
+    PECR       : longword;            // I2C PEC register
+    RXDR       : longword;            // I2C Receive data register
+    TXDR       : longword;            // I2C Transmit data register
+  end;
+
+  TIWDG_Registers = record
+    KR         : longword;            // IWDG Key register
+    PR         : longword;            // IWDG Prescaler register
+    RLR        : longword;            // IWDG Reload register
+    SR         : longword;            // IWDG Status register
+    WINR       : longword;            // IWDG Window register
+  end;
+
+  TPWR_Registers = record
+    CR         : longword;            // PWR power control register
+    CSR        : longword;            // PWR power control/status register
+  end;
+
+  TRCC_Registers = record
+    CR         : longword;            // RCC clock control register
+    CFGR       : longword;            // RCC clock configuration register
+    CIR        : longword;            // RCC clock interrupt register
+    APB2RSTR   : longword;            // RCC APB2 peripheral reset register
+    APB1RSTR   : longword;            // RCC APB1 peripheral reset register
+    AHBENR     : longword;            // RCC AHB peripheral clock register
+    APB2ENR    : longword;            // RCC APB2 peripheral clock enable register
+    APB1ENR    : longword;            // RCC APB1 peripheral clock enable register
+    BDCR       : longword;            // RCC Backup domain control register
+    CSR        : longword;            // RCC clock control & status register
+    AHBRSTR    : longword;            // RCC AHB peripheral reset register
+    CFGR2      : longword;            // RCC clock configuration register 2
+    CFGR3      : longword;            // RCC clock configuration register 3
+  end;
+
+  TRTC_Registers = record
+    TR         : longword;            // RTC time register
+    DR         : longword;            // RTC date register
+    CR         : longword;            // RTC control register
+    ISR        : longword;            // RTC initialization and status register
+    PRER       : longword;            // RTC prescaler register
+    WUTR       : longword;            // RTC wakeup timer register
+    RESERVED0  : longword;            // Reserved, 0x18
+    ALRMAR     : longword;            // RTC alarm A register
+    ALRMBR     : longword;            // RTC alarm B register
+    WPR        : longword;            // RTC write protection register
+    SSR        : longword;            // RTC sub second register
+    SHIFTR     : longword;            // RTC shift control register
+    TSTR       : longword;            // RTC time stamp time register
+    TSDR       : longword;            // RTC time stamp date register
+    TSSSR      : longword;            // RTC time-stamp sub second register
+    CALR       : longword;            // RTC calibration register
+    TAFCR      : longword;            // RTC tamper and alternate function configuration register
+    ALRMASSR   : longword;            // RTC alarm A sub second register
+    ALRMBSSR   : longword;            // RTC alarm B sub second register
+    RESERVED7  : longword;            // Reserved, 0x4C
+    BKP0R      : longword;            // RTC backup register 0
+    BKP1R      : longword;            // RTC backup register 1
+    BKP2R      : longword;            // RTC backup register 2
+    BKP3R      : longword;            // RTC backup register 3
+    BKP4R      : longword;            // RTC backup register 4
+    BKP5R      : longword;            // RTC backup register 5
+    BKP6R      : longword;            // RTC backup register 6
+    BKP7R      : longword;            // RTC backup register 7
+    BKP8R      : longword;            // RTC backup register 8
+    BKP9R      : longword;            // RTC backup register 9
+    BKP10R     : longword;            // RTC backup register 10
+    BKP11R     : longword;            // RTC backup register 11
+    BKP12R     : longword;            // RTC backup register 12
+    BKP13R     : longword;            // RTC backup register 13
+    BKP14R     : longword;            // RTC backup register 14
+    BKP15R     : longword;            // RTC backup register 15
+  end;
+
+  TSPI_Registers = record
+    CR1        : longword;            // SPI Control register 1
+    CR2        : longword;            // SPI Control register 2
+    SR         : longword;            // SPI Status register
+    DR         : longword;            // SPI data register
+    CRCPR      : longword;            // SPI CRC polynomial register
+    RXCRCR     : longword;            // SPI Rx CRC register
+    TXCRCR     : longword;            // SPI Tx CRC register
+    I2SCFGR    : longword;            // SPI_I2S configuration register
+    I2SPR      : longword;            // SPI_I2S prescaler register
+  end;
+
+  TTIM_Registers = record
+    CR1        : longword;            // TIM control register 1
+    CR2        : longword;            // TIM control register 2
+    SMCR       : longword;            // TIM slave mode control register
+    DIER       : longword;            // TIM DMA/interrupt enable register
+    SR         : longword;            // TIM status register
+    EGR        : longword;            // TIM event generation register
+    CCMR1      : longword;            // TIM capture/compare mode register 1
+    CCMR2      : longword;            // TIM capture/compare mode register 2
+    CCER       : longword;            // TIM capture/compare enable register
+    CNT        : longword;            // TIM counter register
+    PSC        : longword;            // TIM prescaler
+    ARR        : longword;            // TIM auto-reload register
+    RCR        : longword;            // TIM repetition counter register
+    CCR1       : longword;            // TIM capture/compare register 1
+    CCR2       : longword;            // TIM capture/compare register 2
+    CCR3       : longword;            // TIM capture/compare register 3
+    CCR4       : longword;            // TIM capture/compare register 4
+    BDTR       : longword;            // TIM break and dead-time register
+    DCR        : longword;            // TIM DMA control register
+    DMAR       : longword;            // TIM DMA address for full transfer
+    &OR        : longword;            // TIM option register
+    CCMR3      : longword;            // TIM capture/compare mode register 3
+    CCR5       : longword;            // TIM capture/compare register5
+    CCR6       : longword;            // TIM capture/compare register 4
+  end;
+
+  TTSC_Registers = record
+    CR         : longword;            // TSC control register
+    IER        : longword;            // TSC interrupt enable register
+    ICR        : longword;            // TSC interrupt clear register
+    ISR        : longword;            // TSC interrupt status register
+    IOHCR      : longword;            // TSC I/O hysteresis control register
+    RESERVED1  : longword;            // Reserved
+    IOASCR     : longword;            // TSC I/O analog switch control register
+    RESERVED2  : longword;            // Reserved
+    IOSCR      : longword;            // TSC I/O sampling control register
+    RESERVED3  : longword;            // Reserved
+    IOCCR      : longword;            // TSC I/O channel control register
+    RESERVED4  : longword;            // Reserved
+    IOGCSR     : longword;            // TSC I/O group control status register
+    IOGXCR     : array[0..7] of longword; // TSC I/O group x counter register
+  end;
+
+  TUSART_Registers = record
+    CR1        : longword;            // USART Control register 1
+    CR2        : longword;            // USART Control register 2
+    CR3        : longword;            // USART Control register 3
+    BRR        : longword;            // USART Baud rate register
+    GTPR       : longword;            // USART Guard time and prescaler register
+    RTOR       : longword;            // USART Receiver Time Out register
+    RQR        : longword;            // USART Request register
+    ISR        : longword;            // USART Interrupt and status register
+    ICR        : longword;            // USART Interrupt flag Clear register
+    RDR        : word;                // USART Receive Data register
+    RESERVED1  : word;                // Reserved, 0x26
+    TDR        : word;                // USART Transmit Data register
+    RESERVED2  : word;                // Reserved, 0x2A
+  end;
+
+  TUSB_Registers = record
+    EP0R       : word;                // USB Endpoint 0 register
+    RESERVED0  : word;                // Reserved
+    EP1R       : word;                // USB Endpoint 1 register
+    RESERVED1  : word;                // Reserved
+    EP2R       : word;                // USB Endpoint 2 register
+    RESERVED2  : word;                // Reserved
+    EP3R       : word;                // USB Endpoint 3 register
+    RESERVED3  : word;                // Reserved
+    EP4R       : word;                // USB Endpoint 4 register
+    RESERVED4  : word;                // Reserved
+    EP5R       : word;                // USB Endpoint 5 register
+    RESERVED5  : word;                // Reserved
+    EP6R       : word;                // USB Endpoint 6 register
+    RESERVED6  : word;                // Reserved
+    EP7R       : word;                // USB Endpoint 7 register
+    RESERVED7  : array[0..16] of word; // Reserved
+    CNTR       : word;                // Control register
+    RESERVED8  : word;                // Reserved
+    ISTR       : word;                // Interrupt status register
+    RESERVED9  : word;                // Reserved
+    FNR        : word;                // Frame number register
+    RESERVEDA  : word;                // Reserved
+    DADDR      : word;                // Device address register
+    RESERVEDB  : word;                // Reserved
+    BTABLE     : word;                // Buffer Table address register
+    RESERVEDC  : word;                // Reserved
+  end;
+
+  TWWDG_Registers = record
+    CR         : longword;            // WWDG Control register
+    CFR        : longword;            // WWDG Configuration register
+    SR         : longword;            // WWDG Status register
+  end;
+
+const
+  FLASH_BASE   = $08000000;           // FLASH base address in the alias region
+  CCMDATARAM_BASE = $10000000;        // CCM(core coupled memory) data RAM base address in the alias region
+  SRAM_BASE    = $20000000;           // SRAM base address in the alias region
+  PERIPH_BASE  = $40000000;           // Peripheral base address in the alias region
+  SRAM_BB_BASE = $22000000;           // SRAM base address in the bit-band region
+  PERIPH_BB_BASE = $42000000;         // Peripheral base address in the bit-band region
+  APB1PERIPH_BASE = $40000000;
+  APB2PERIPH_BASE = PERIPH_BASE + $00010000;
+  AHB1PERIPH_BASE = PERIPH_BASE + $00020000;
+  AHB2PERIPH_BASE = PERIPH_BASE + $08000000;
+  AHB3PERIPH_BASE = PERIPH_BASE + $10000000;
+  TIM2_BASE    = APB1PERIPH_BASE + $00000000;
+  TIM3_BASE    = APB1PERIPH_BASE + $00000400;
+  TIM4_BASE    = APB1PERIPH_BASE + $00000800;
+  TIM6_BASE    = APB1PERIPH_BASE + $00001000;
+  TIM7_BASE    = APB1PERIPH_BASE + $00001400;
+  RTC_BASE     = APB1PERIPH_BASE + $00002800;
+  WWDG_BASE    = APB1PERIPH_BASE + $00002C00;
+  IWDG_BASE    = APB1PERIPH_BASE + $00003000;
+  I2S2ext_BASE = APB1PERIPH_BASE + $00003400;
+  SPI2_BASE    = APB1PERIPH_BASE + $00003800;
+  SPI3_BASE    = APB1PERIPH_BASE + $00003C00;
+  I2S3ext_BASE = APB1PERIPH_BASE + $00004000;
+  USART2_BASE  = APB1PERIPH_BASE + $00004400;
+  USART3_BASE  = APB1PERIPH_BASE + $00004800;
+  UART4_BASE   = APB1PERIPH_BASE + $00004C00;
+  UART5_BASE   = APB1PERIPH_BASE + $00005000;
+  I2C1_BASE    = APB1PERIPH_BASE + $00005400;
+  I2C2_BASE    = APB1PERIPH_BASE + $00005800;
+  USB_BASE     = APB1PERIPH_BASE + $00005C00; // USB_IP Peripheral Registers base address
+  CAN_BASE     = APB1PERIPH_BASE + $00006400;
+  PWR_BASE     = APB1PERIPH_BASE + $00007000;
+  DAC1_BASE    = APB1PERIPH_BASE + $00007400;
+  DAC_BASE     = APB1PERIPH_BASE + $00007400;
+  SYSCFG_BASE  = APB2PERIPH_BASE + $00000000;
+  COMP1_BASE   = APB2PERIPH_BASE + $0000001C;
+  COMP2_BASE   = APB2PERIPH_BASE + $00000020;
+  COMP3_BASE   = APB2PERIPH_BASE + $00000024;
+  COMP4_BASE   = APB2PERIPH_BASE + $00000028;
+  COMP5_BASE   = APB2PERIPH_BASE + $0000002C;
+  COMP6_BASE   = APB2PERIPH_BASE + $00000030;
+  COMP7_BASE   = APB2PERIPH_BASE + $00000034;
+  COMP_BASE    = APB2PERIPH_BASE + $0000001C;
+  OPAMP1_BASE  = APB2PERIPH_BASE + $00000038;
+  OPAMP2_BASE  = APB2PERIPH_BASE + $0000003C;
+  OPAMP3_BASE  = APB2PERIPH_BASE + $00000040;
+  OPAMP4_BASE  = APB2PERIPH_BASE + $00000044;
+  OPAMP_BASE   = APB2PERIPH_BASE + $00000038;
+  EXTI_BASE    = APB2PERIPH_BASE + $00000400;
+  TIM1_BASE    = APB2PERIPH_BASE + $00002C00;
+  SPI1_BASE    = APB2PERIPH_BASE + $00003000;
+  TIM8_BASE    = APB2PERIPH_BASE + $00003400;
+  USART1_BASE  = APB2PERIPH_BASE + $00003800;
+  TIM15_BASE   = APB2PERIPH_BASE + $00004000;
+  TIM16_BASE   = APB2PERIPH_BASE + $00004400;
+  TIM17_BASE   = APB2PERIPH_BASE + $00004800;
+  DMA1_BASE    = AHB1PERIPH_BASE + $00000000;
+  DMA1_Channel1_BASE = AHB1PERIPH_BASE + $00000008;
+  DMA1_Channel2_BASE = AHB1PERIPH_BASE + $0000001C;
+  DMA1_Channel3_BASE = AHB1PERIPH_BASE + $00000030;
+  DMA1_Channel4_BASE = AHB1PERIPH_BASE + $00000044;
+  DMA1_Channel5_BASE = AHB1PERIPH_BASE + $00000058;
+  DMA1_Channel6_BASE = AHB1PERIPH_BASE + $0000006C;
+  DMA1_Channel7_BASE = AHB1PERIPH_BASE + $00000080;
+  DMA2_BASE    = AHB1PERIPH_BASE + $00000400;
+  DMA2_Channel1_BASE = AHB1PERIPH_BASE + $00000408;
+  DMA2_Channel2_BASE = AHB1PERIPH_BASE + $0000041C;
+  DMA2_Channel3_BASE = AHB1PERIPH_BASE + $00000430;
+  DMA2_Channel4_BASE = AHB1PERIPH_BASE + $00000444;
+  DMA2_Channel5_BASE = AHB1PERIPH_BASE + $00000458;
+  RCC_BASE     = AHB1PERIPH_BASE + $00001000;
+  FLASH_R_BASE = AHB1PERIPH_BASE + $00002000; // Flash registers base address
+  OB_BASE      = $1FFFF800;           // Flash Option Bytes base address
+  FLASHSIZE_BASE = $1FFFF7CC;         // FLASH Size register base address
+  UID_BASE     = $1FFFF7AC;           // Unique device ID register base address
+  CRC_BASE     = AHB1PERIPH_BASE + $00003000;
+  TSC_BASE     = AHB1PERIPH_BASE + $00004000;
+  GPIOA_BASE   = AHB2PERIPH_BASE + $00000000;
+  GPIOB_BASE   = AHB2PERIPH_BASE + $00000400;
+  GPIOC_BASE   = AHB2PERIPH_BASE + $00000800;
+  GPIOD_BASE   = AHB2PERIPH_BASE + $00000C00;
+  GPIOE_BASE   = AHB2PERIPH_BASE + $00001000;
+  GPIOF_BASE   = AHB2PERIPH_BASE + $00001400;
+  ADC1_BASE    = AHB3PERIPH_BASE + $00000000;
+  ADC2_BASE    = AHB3PERIPH_BASE + $00000100;
+  ADC1_2_COMMON_BASE = AHB3PERIPH_BASE + $00000300;
+  ADC3_BASE    = AHB3PERIPH_BASE + $00000400;
+  ADC4_BASE    = AHB3PERIPH_BASE + $00000500;
+  ADC3_4_COMMON_BASE = AHB3PERIPH_BASE + $00000700;
+  DBGMCU_BASE  = $E0042000;           // Debug MCU registers base address
+
+var
+  TIM2         : TTIM_Registers absolute TIM2_BASE;
+  TIM3         : TTIM_Registers absolute TIM3_BASE;
+  TIM4         : TTIM_Registers absolute TIM4_BASE;
+  TIM6         : TTIM_Registers absolute TIM6_BASE;
+  TIM7         : TTIM_Registers absolute TIM7_BASE;
+  RTC          : TRTC_Registers absolute RTC_BASE;
+  WWDG         : TWWDG_Registers absolute WWDG_BASE;
+  IWDG         : TIWDG_Registers absolute IWDG_BASE;
+  I2S2ext      : TSPI_Registers absolute I2S2ext_BASE;
+  SPI2         : TSPI_Registers absolute SPI2_BASE;
+  SPI3         : TSPI_Registers absolute SPI3_BASE;
+  I2S3ext      : TSPI_Registers absolute I2S3ext_BASE;
+  USART2       : TUSART_Registers absolute USART2_BASE;
+  USART3       : TUSART_Registers absolute USART3_BASE;
+  UART4        : TUSART_Registers absolute UART4_BASE;
+  UART5        : TUSART_Registers absolute UART5_BASE;
+  I2C1         : TI2C_Registers absolute I2C1_BASE;
+  I2C2         : TI2C_Registers absolute I2C2_BASE;
+  CAN          : TCAN_Registers absolute CAN_BASE;
+  PWR          : TPWR_Registers absolute PWR_BASE;
+  DAC          : TDAC_Registers absolute DAC_BASE;
+  DAC1         : TDAC_Registers absolute DAC1_BASE;
+  COMP1        : TCOMP_Registers absolute COMP1_BASE;
+  COMP2        : TCOMP_Registers absolute COMP2_BASE;
+  COMP12_COMMON : TCOMP_Common_Registers absolute COMP2_BASE;
+  COMP3        : TCOMP_Registers absolute COMP3_BASE;
+  COMP4        : TCOMP_Registers absolute COMP4_BASE;
+  COMP34_COMMON : TCOMP_Common_Registers absolute COMP4_BASE;
+  COMP5        : TCOMP_Registers absolute COMP5_BASE;
+  COMP6        : TCOMP_Registers absolute COMP6_BASE;
+  COMP56_COMMON : TCOMP_Common_Registers absolute COMP6_BASE;
+  COMP7        : TCOMP_Registers absolute COMP7_BASE;
+  COMP         : TCOMP_Registers absolute COMP_BASE;
+  OPAMP1       : TOPAMP_Registers absolute OPAMP1_BASE;
+  OPAMP        : TOPAMP_Registers absolute OPAMP_BASE;
+  OPAMP2       : TOPAMP_Registers absolute OPAMP2_BASE;
+  OPAMP3       : TOPAMP_Registers absolute OPAMP3_BASE;
+  OPAMP4       : TOPAMP_Registers absolute OPAMP4_BASE;
+  SYSCFG       : TSYSCFG_Registers absolute SYSCFG_BASE;
+  EXTI         : TEXTI_Registers absolute EXTI_BASE;
+  TIM1         : TTIM_Registers absolute TIM1_BASE;
+  SPI1         : TSPI_Registers absolute SPI1_BASE;
+  TIM8         : TTIM_Registers absolute TIM8_BASE;
+  USART1       : TUSART_Registers absolute USART1_BASE;
+  TIM15        : TTIM_Registers absolute TIM15_BASE;
+  TIM16        : TTIM_Registers absolute TIM16_BASE;
+  TIM17        : TTIM_Registers absolute TIM17_BASE;
+  DBGMCU       : TDBGMCU_Registers absolute DBGMCU_BASE;
+  DMA1         : TDMA_Registers absolute DMA1_BASE;
+  DMA1_Channel1 : TDMA_Channel_Registers absolute DMA1_Channel1_BASE;
+  DMA1_Channel2 : TDMA_Channel_Registers absolute DMA1_Channel2_BASE;
+  DMA1_Channel3 : TDMA_Channel_Registers absolute DMA1_Channel3_BASE;
+  DMA1_Channel4 : TDMA_Channel_Registers absolute DMA1_Channel4_BASE;
+  DMA1_Channel5 : TDMA_Channel_Registers absolute DMA1_Channel5_BASE;
+  DMA1_Channel6 : TDMA_Channel_Registers absolute DMA1_Channel6_BASE;
+  DMA1_Channel7 : TDMA_Channel_Registers absolute DMA1_Channel7_BASE;
+  DMA2         : TDMA_Registers absolute DMA2_BASE;
+  DMA2_Channel1 : TDMA_Channel_Registers absolute DMA2_Channel1_BASE;
+  DMA2_Channel2 : TDMA_Channel_Registers absolute DMA2_Channel2_BASE;
+  DMA2_Channel3 : TDMA_Channel_Registers absolute DMA2_Channel3_BASE;
+  DMA2_Channel4 : TDMA_Channel_Registers absolute DMA2_Channel4_BASE;
+  DMA2_Channel5 : TDMA_Channel_Registers absolute DMA2_Channel5_BASE;
+  RCC          : TRCC_Registers absolute RCC_BASE;
+  FLASH        : TFLASH_Registers absolute FLASH_R_BASE;
+  OB           : TOB_Registers absolute OB_BASE;
+  CRC          : TCRC_Registers absolute CRC_BASE;
+  TSC          : TTSC_Registers absolute TSC_BASE;
+  GPIOA        : TGPIO_Registers absolute GPIOA_BASE;
+  GPIOB        : TGPIO_Registers absolute GPIOB_BASE;
+  GPIOC        : TGPIO_Registers absolute GPIOC_BASE;
+  GPIOD        : TGPIO_Registers absolute GPIOD_BASE;
+  GPIOE        : TGPIO_Registers absolute GPIOE_BASE;
+  GPIOF        : TGPIO_Registers absolute GPIOF_BASE;
+  ADC1         : TADC_Registers absolute ADC1_BASE;
+  ADC2         : TADC_Registers absolute ADC2_BASE;
+  ADC3         : TADC_Registers absolute ADC3_BASE;
+  ADC4         : TADC_Registers absolute ADC4_BASE;
+  ADC12_COMMON : TADC_Common_Registers absolute ADC1_2_COMMON_BASE;
+  ADC34_COMMON : TADC_Common_Registers absolute ADC3_4_COMMON_BASE;
+  USB          : TUSB_Registers absolute USB_BASE;
+
+implementation
+
+procedure NonMaskableInt_interrupt; external name 'NonMaskableInt_interrupt';
+procedure HardFault_interrupt; external name 'HardFault_interrupt';
+procedure MemoryManagement_interrupt; external name 'MemoryManagement_interrupt';
+procedure BusFault_interrupt; external name 'BusFault_interrupt';
+procedure UsageFault_interrupt; external name 'UsageFault_interrupt';
+procedure SVCall_interrupt; external name 'SVCall_interrupt';
+procedure DebugMonitor_interrupt; external name 'DebugMonitor_interrupt';
+procedure PendSV_interrupt; external name 'PendSV_interrupt';
+procedure SysTick_interrupt; external name 'SysTick_interrupt';
+procedure WWDG_interrupt; external name 'WWDG_interrupt';
+procedure PVD_interrupt; external name 'PVD_interrupt';
+procedure TAMP_STAMP_interrupt; external name 'TAMP_STAMP_interrupt';
+procedure RTC_WKUP_interrupt; external name 'RTC_WKUP_interrupt';
+procedure FLASH_interrupt; external name 'FLASH_interrupt';
+procedure RCC_interrupt; external name 'RCC_interrupt';
+procedure EXTI0_interrupt; external name 'EXTI0_interrupt';
+procedure EXTI1_interrupt; external name 'EXTI1_interrupt';
+procedure EXTI2_TSC_interrupt; external name 'EXTI2_TSC_interrupt';
+procedure EXTI3_interrupt; external name 'EXTI3_interrupt';
+procedure EXTI4_interrupt; external name 'EXTI4_interrupt';
+procedure DMA1_Channel1_interrupt; external name 'DMA1_Channel1_interrupt';
+procedure DMA1_Channel2_interrupt; external name 'DMA1_Channel2_interrupt';
+procedure DMA1_Channel3_interrupt; external name 'DMA1_Channel3_interrupt';
+procedure DMA1_Channel4_interrupt; external name 'DMA1_Channel4_interrupt';
+procedure DMA1_Channel5_interrupt; external name 'DMA1_Channel5_interrupt';
+procedure DMA1_Channel6_interrupt; external name 'DMA1_Channel6_interrupt';
+procedure DMA1_Channel7_interrupt; external name 'DMA1_Channel7_interrupt';
+procedure ADC1_2_interrupt; external name 'ADC1_2_interrupt';
+procedure USB_HP_CAN_TX_interrupt; external name 'USB_HP_CAN_TX_interrupt';
+procedure USB_LP_CAN_RX0_interrupt; external name 'USB_LP_CAN_RX0_interrupt';
+procedure CAN_RX1_interrupt; external name 'CAN_RX1_interrupt';
+procedure CAN_SCE_interrupt; external name 'CAN_SCE_interrupt';
+procedure EXTI9_5_interrupt; external name 'EXTI9_5_interrupt';
+procedure TIM1_BRK_TIM15_interrupt; external name 'TIM1_BRK_TIM15_interrupt';
+procedure TIM1_UP_TIM16_interrupt; external name 'TIM1_UP_TIM16_interrupt';
+procedure TIM1_TRG_COM_TIM17_interrupt; external name 'TIM1_TRG_COM_TIM17_interrupt';
+procedure TIM1_CC_interrupt; external name 'TIM1_CC_interrupt';
+procedure TIM2_interrupt; external name 'TIM2_interrupt';
+procedure TIM3_interrupt; external name 'TIM3_interrupt';
+procedure TIM4_interrupt; external name 'TIM4_interrupt';
+procedure I2C1_EV_interrupt; external name 'I2C1_EV_interrupt';
+procedure I2C1_ER_interrupt; external name 'I2C1_ER_interrupt';
+procedure I2C2_EV_interrupt; external name 'I2C2_EV_interrupt';
+procedure I2C2_ER_interrupt; external name 'I2C2_ER_interrupt';
+procedure SPI1_interrupt; external name 'SPI1_interrupt';
+procedure SPI2_interrupt; external name 'SPI2_interrupt';
+procedure USART1_interrupt; external name 'USART1_interrupt';
+procedure USART2_interrupt; external name 'USART2_interrupt';
+procedure USART3_interrupt; external name 'USART3_interrupt';
+procedure EXTI15_10_interrupt; external name 'EXTI15_10_interrupt';
+procedure RTC_Alarm_interrupt; external name 'RTC_Alarm_interrupt';
+procedure USBWakeUp_interrupt; external name 'USBWakeUp_interrupt';
+procedure TIM8_BRK_interrupt; external name 'TIM8_BRK_interrupt';
+procedure TIM8_UP_interrupt; external name 'TIM8_UP_interrupt';
+procedure TIM8_TRG_COM_interrupt; external name 'TIM8_TRG_COM_interrupt';
+procedure TIM8_CC_interrupt; external name 'TIM8_CC_interrupt';
+procedure ADC3_interrupt; external name 'ADC3_interrupt';
+procedure SPI3_interrupt; external name 'SPI3_interrupt';
+procedure UART4_interrupt; external name 'UART4_interrupt';
+procedure UART5_interrupt; external name 'UART5_interrupt';
+procedure TIM6_DAC_interrupt; external name 'TIM6_DAC_interrupt';
+procedure TIM7_interrupt; external name 'TIM7_interrupt';
+procedure DMA2_Channel1_interrupt; external name 'DMA2_Channel1_interrupt';
+procedure DMA2_Channel2_interrupt; external name 'DMA2_Channel2_interrupt';
+procedure DMA2_Channel3_interrupt; external name 'DMA2_Channel3_interrupt';
+procedure DMA2_Channel4_interrupt; external name 'DMA2_Channel4_interrupt';
+procedure DMA2_Channel5_interrupt; external name 'DMA2_Channel5_interrupt';
+procedure ADC4_interrupt; external name 'ADC4_interrupt';
+procedure COMP1_2_3_interrupt; external name 'COMP1_2_3_interrupt';
+procedure COMP4_5_6_interrupt; external name 'COMP4_5_6_interrupt';
+procedure COMP7_interrupt; external name 'COMP7_interrupt';
+procedure USB_HP_interrupt; external name 'USB_HP_interrupt';
+procedure USB_LP_interrupt; external name 'USB_LP_interrupt';
+procedure USBWakeUp_RMP_interrupt; external name 'USBWakeUp_RMP_interrupt';
+procedure FPU_interrupt; external name 'FPU_interrupt';
+
+{$i cortexm4f_start.inc}
+
+procedure Vectors; assembler; nostackframe;
+label interrupt_vectors;
+asm
+  .section ".init.interrupt_vectors"
+  interrupt_vectors:
+  .long _stack_top
+  .long Startup
+  .long NonMaskableInt_interrupt
+  .long HardFault_interrupt
+  .long MemoryManagement_interrupt
+  .long BusFault_interrupt
+  .long UsageFault_interrupt
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long SVCall_interrupt
+  .long DebugMonitor_interrupt
+  .long 0
+  .long PendSV_interrupt
+  .long SysTick_interrupt
+  .long WWDG_interrupt
+  .long PVD_interrupt
+  .long TAMP_STAMP_interrupt
+  .long RTC_WKUP_interrupt
+  .long FLASH_interrupt
+  .long RCC_interrupt
+  .long EXTI0_interrupt
+  .long EXTI1_interrupt
+  .long EXTI2_TSC_interrupt
+  .long EXTI3_interrupt
+  .long EXTI4_interrupt
+  .long DMA1_Channel1_interrupt
+  .long DMA1_Channel2_interrupt
+  .long DMA1_Channel3_interrupt
+  .long DMA1_Channel4_interrupt
+  .long DMA1_Channel5_interrupt
+  .long DMA1_Channel6_interrupt
+  .long DMA1_Channel7_interrupt
+  .long ADC1_2_interrupt
+  .long USB_HP_CAN_TX_interrupt
+  .long USB_LP_CAN_RX0_interrupt
+  .long CAN_RX1_interrupt
+  .long CAN_SCE_interrupt
+  .long EXTI9_5_interrupt
+  .long TIM1_BRK_TIM15_interrupt
+  .long TIM1_UP_TIM16_interrupt
+  .long TIM1_TRG_COM_TIM17_interrupt
+  .long TIM1_CC_interrupt
+  .long TIM2_interrupt
+  .long TIM3_interrupt
+  .long TIM4_interrupt
+  .long I2C1_EV_interrupt
+  .long I2C1_ER_interrupt
+  .long I2C2_EV_interrupt
+  .long I2C2_ER_interrupt
+  .long SPI1_interrupt
+  .long SPI2_interrupt
+  .long USART1_interrupt
+  .long USART2_interrupt
+  .long USART3_interrupt
+  .long EXTI15_10_interrupt
+  .long RTC_Alarm_interrupt
+  .long USBWakeUp_interrupt
+  .long TIM8_BRK_interrupt
+  .long TIM8_UP_interrupt
+  .long TIM8_TRG_COM_interrupt
+  .long TIM8_CC_interrupt
+  .long ADC3_interrupt
+  .long 0
+  .long 0
+  .long 0
+  .long SPI3_interrupt
+  .long UART4_interrupt
+  .long UART5_interrupt
+  .long TIM6_DAC_interrupt
+  .long TIM7_interrupt
+  .long DMA2_Channel1_interrupt
+  .long DMA2_Channel2_interrupt
+  .long DMA2_Channel3_interrupt
+  .long DMA2_Channel4_interrupt
+  .long DMA2_Channel5_interrupt
+  .long ADC4_interrupt
+  .long 0
+  .long 0
+  .long COMP1_2_3_interrupt
+  .long COMP4_5_6_interrupt
+  .long COMP7_interrupt
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long USB_HP_interrupt
+  .long USB_LP_interrupt
+  .long USBWakeUp_RMP_interrupt
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long FPU_interrupt
+  .weak NonMaskableInt_interrupt
+  .weak HardFault_interrupt
+  .weak MemoryManagement_interrupt
+  .weak BusFault_interrupt
+  .weak UsageFault_interrupt
+  .weak SVCall_interrupt
+  .weak DebugMonitor_interrupt
+  .weak PendSV_interrupt
+  .weak SysTick_interrupt
+  .weak WWDG_interrupt
+  .weak PVD_interrupt
+  .weak TAMP_STAMP_interrupt
+  .weak RTC_WKUP_interrupt
+  .weak FLASH_interrupt
+  .weak RCC_interrupt
+  .weak EXTI0_interrupt
+  .weak EXTI1_interrupt
+  .weak EXTI2_TSC_interrupt
+  .weak EXTI3_interrupt
+  .weak EXTI4_interrupt
+  .weak DMA1_Channel1_interrupt
+  .weak DMA1_Channel2_interrupt
+  .weak DMA1_Channel3_interrupt
+  .weak DMA1_Channel4_interrupt
+  .weak DMA1_Channel5_interrupt
+  .weak DMA1_Channel6_interrupt
+  .weak DMA1_Channel7_interrupt
+  .weak ADC1_2_interrupt
+  .weak USB_HP_CAN_TX_interrupt
+  .weak USB_LP_CAN_RX0_interrupt
+  .weak CAN_RX1_interrupt
+  .weak CAN_SCE_interrupt
+  .weak EXTI9_5_interrupt
+  .weak TIM1_BRK_TIM15_interrupt
+  .weak TIM1_UP_TIM16_interrupt
+  .weak TIM1_TRG_COM_TIM17_interrupt
+  .weak TIM1_CC_interrupt
+  .weak TIM2_interrupt
+  .weak TIM3_interrupt
+  .weak TIM4_interrupt
+  .weak I2C1_EV_interrupt
+  .weak I2C1_ER_interrupt
+  .weak I2C2_EV_interrupt
+  .weak I2C2_ER_interrupt
+  .weak SPI1_interrupt
+  .weak SPI2_interrupt
+  .weak USART1_interrupt
+  .weak USART2_interrupt
+  .weak USART3_interrupt
+  .weak EXTI15_10_interrupt
+  .weak RTC_Alarm_interrupt
+  .weak USBWakeUp_interrupt
+  .weak TIM8_BRK_interrupt
+  .weak TIM8_UP_interrupt
+  .weak TIM8_TRG_COM_interrupt
+  .weak TIM8_CC_interrupt
+  .weak ADC3_interrupt
+  .weak SPI3_interrupt
+  .weak UART4_interrupt
+  .weak UART5_interrupt
+  .weak TIM6_DAC_interrupt
+  .weak TIM7_interrupt
+  .weak DMA2_Channel1_interrupt
+  .weak DMA2_Channel2_interrupt
+  .weak DMA2_Channel3_interrupt
+  .weak DMA2_Channel4_interrupt
+  .weak DMA2_Channel5_interrupt
+  .weak ADC4_interrupt
+  .weak COMP1_2_3_interrupt
+  .weak COMP4_5_6_interrupt
+  .weak COMP7_interrupt
+  .weak USB_HP_interrupt
+  .weak USB_LP_interrupt
+  .weak USBWakeUp_RMP_interrupt
+  .weak FPU_interrupt
+  .set NonMaskableInt_interrupt, HaltProc
+  .set HardFault_interrupt, HaltProc
+  .set MemoryManagement_interrupt, HaltProc
+  .set BusFault_interrupt, HaltProc
+  .set UsageFault_interrupt, HaltProc
+  .set SVCall_interrupt, HaltProc
+  .set DebugMonitor_interrupt, HaltProc
+  .set PendSV_interrupt, HaltProc
+  .set SysTick_interrupt, HaltProc
+  .set WWDG_interrupt, HaltProc
+  .set PVD_interrupt, HaltProc
+  .set TAMP_STAMP_interrupt, HaltProc
+  .set RTC_WKUP_interrupt, HaltProc
+  .set FLASH_interrupt, HaltProc
+  .set RCC_interrupt, HaltProc
+  .set EXTI0_interrupt, HaltProc
+  .set EXTI1_interrupt, HaltProc
+  .set EXTI2_TSC_interrupt, HaltProc
+  .set EXTI3_interrupt, HaltProc
+  .set EXTI4_interrupt, HaltProc
+  .set DMA1_Channel1_interrupt, HaltProc
+  .set DMA1_Channel2_interrupt, HaltProc
+  .set DMA1_Channel3_interrupt, HaltProc
+  .set DMA1_Channel4_interrupt, HaltProc
+  .set DMA1_Channel5_interrupt, HaltProc
+  .set DMA1_Channel6_interrupt, HaltProc
+  .set DMA1_Channel7_interrupt, HaltProc
+  .set ADC1_2_interrupt, HaltProc
+  .set USB_HP_CAN_TX_interrupt, HaltProc
+  .set USB_LP_CAN_RX0_interrupt, HaltProc
+  .set CAN_RX1_interrupt, HaltProc
+  .set CAN_SCE_interrupt, HaltProc
+  .set EXTI9_5_interrupt, HaltProc
+  .set TIM1_BRK_TIM15_interrupt, HaltProc
+  .set TIM1_UP_TIM16_interrupt, HaltProc
+  .set TIM1_TRG_COM_TIM17_interrupt, HaltProc
+  .set TIM1_CC_interrupt, HaltProc
+  .set TIM2_interrupt, HaltProc
+  .set TIM3_interrupt, HaltProc
+  .set TIM4_interrupt, HaltProc
+  .set I2C1_EV_interrupt, HaltProc
+  .set I2C1_ER_interrupt, HaltProc
+  .set I2C2_EV_interrupt, HaltProc
+  .set I2C2_ER_interrupt, HaltProc
+  .set SPI1_interrupt, HaltProc
+  .set SPI2_interrupt, HaltProc
+  .set USART1_interrupt, HaltProc
+  .set USART2_interrupt, HaltProc
+  .set USART3_interrupt, HaltProc
+  .set EXTI15_10_interrupt, HaltProc
+  .set RTC_Alarm_interrupt, HaltProc
+  .set USBWakeUp_interrupt, HaltProc
+  .set TIM8_BRK_interrupt, HaltProc
+  .set TIM8_UP_interrupt, HaltProc
+  .set TIM8_TRG_COM_interrupt, HaltProc
+  .set TIM8_CC_interrupt, HaltProc
+  .set ADC3_interrupt, HaltProc
+  .set SPI3_interrupt, HaltProc
+  .set UART4_interrupt, HaltProc
+  .set UART5_interrupt, HaltProc
+  .set TIM6_DAC_interrupt, HaltProc
+  .set TIM7_interrupt, HaltProc
+  .set DMA2_Channel1_interrupt, HaltProc
+  .set DMA2_Channel2_interrupt, HaltProc
+  .set DMA2_Channel3_interrupt, HaltProc
+  .set DMA2_Channel4_interrupt, HaltProc
+  .set DMA2_Channel5_interrupt, HaltProc
+  .set ADC4_interrupt, HaltProc
+  .set COMP1_2_3_interrupt, HaltProc
+  .set COMP4_5_6_interrupt, HaltProc
+  .set COMP7_interrupt, HaltProc
+  .set USB_HP_interrupt, HaltProc
+  .set USB_LP_interrupt, HaltProc
+  .set USBWakeUp_RMP_interrupt, HaltProc
+  .set FPU_interrupt, HaltProc
+  .text
+end;
+end.
diff -Naur fpc-save/rtl/embedded/arm/stm32f303xe.pp fpc/rtl/embedded/arm/stm32f303xe.pp
--- fpc-save/rtl/embedded/arm/stm32f303xe.pp	1970-01-01 01:00:00.000000000 +0100
+++ fpc/rtl/embedded/arm/stm32f303xe.pp	2018-03-02 17:07:13.000000000 +0100
@@ -0,0 +1,1139 @@
+unit stm32f303xe;
+interface
+{$PACKRECORDS C}
+{$GOTO ON}
+// *
+// ******************************************************************************
+// * @file    stm32f303xe.h
+// * @author  MCD Application Team
+//   CMSIS STM32F303xE Devices Peripheral Access Layer Header File.
+// *
+// *          This file contains:
+// *           - Data structures and the address mapping for all peripherals
+// *           - Peripheral's registers declarations and bits definition
+// *           - Macros to access peripheral’s registers hardware
+// *
+// ******************************************************************************
+// * @attention
+// *
+// * <h2><center>&copy; COPYRIGHT(c) 2016 STMicroelectronics</center></h2>
+// *
+// * Redistribution and use in source and binary forms, with or without modification,
+// * are permitted provided that the following conditions are met:
+// *   1. Redistributions of source code must retain the above copyright notice,
+// *      this list of conditions and the following disclaimer.
+// *   2. Redistributions in binary form must reproduce the above copyright notice,
+// *      this list of conditions and the following disclaimer in the documentation
+// *      and/or other materials provided with the distribution.
+// *   3. Neither the name of STMicroelectronics nor the names of its contributors
+// *      may be used to endorse or promote products derived from this software
+// *      without specific prior written permission.
+// *
+// * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
+// * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
+// * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+// * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE
+// * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
+// * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
+// * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER
+// * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+// * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
+// * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
+// *
+// ******************************************************************************
+// Configuration of the Cortex-M4 Processor and Core Peripherals
+// STM32F303xE devices Interrupt Number Definition, according to the selected device
+// *        in @ref Library_configuration_section
+
+type
+  TIRQn_Enum   = (
+    NonMaskableInt_IRQn = -14,        // 2 Non Maskable Interrupt
+    HardFault_IRQn = -13,             // 3 Cortex-M4 Hard Fault Interrupt
+    MemoryManagement_IRQn = -12,      // 4 Cortex-M4 Memory Management Interrupt
+    BusFault_IRQn = -11,              // 5 Cortex-M4 Bus Fault Interrupt
+    UsageFault_IRQn = -10,            // 6 Cortex-M4 Usage Fault Interrupt
+    SVCall_IRQn = -5,                 // 11 Cortex-M4 SV Call Interrupt
+    DebugMonitor_IRQn = -4,           // 12 Cortex-M4 Debug Monitor Interrupt
+    PendSV_IRQn = -2,                 // 14 Cortex-M4 Pend SV Interrupt
+    SysTick_IRQn = -1,                // 15 Cortex-M4 System Tick Interrupt
+    WWDG_IRQn  = 0,                   // Window WatchDog Interrupt
+    PVD_IRQn   = 1,                   // PVD through EXTI Line detection Interrupt
+    TAMP_STAMP_IRQn = 2,              // Tamper and TimeStamp interrupts through the EXTI line 19
+    RTC_WKUP_IRQn = 3,                // RTC Wakeup interrupt through the EXTI line 20
+    FLASH_IRQn = 4,                   // FLASH global Interrupt
+    RCC_IRQn   = 5,                   // RCC global Interrupt
+    EXTI0_IRQn = 6,                   // EXTI Line0 Interrupt
+    EXTI1_IRQn = 7,                   // EXTI Line1 Interrupt
+    EXTI2_TSC_IRQn = 8,               // EXTI Line2 Interrupt and Touch Sense Controller Interrupt
+    EXTI3_IRQn = 9,                   // EXTI Line3 Interrupt
+    EXTI4_IRQn = 10,                  // EXTI Line4 Interrupt
+    DMA1_Channel1_IRQn = 11,          // DMA1 Channel 1 Interrupt
+    DMA1_Channel2_IRQn = 12,          // DMA1 Channel 2 Interrupt
+    DMA1_Channel3_IRQn = 13,          // DMA1 Channel 3 Interrupt
+    DMA1_Channel4_IRQn = 14,          // DMA1 Channel 4 Interrupt
+    DMA1_Channel5_IRQn = 15,          // DMA1 Channel 5 Interrupt
+    DMA1_Channel6_IRQn = 16,          // DMA1 Channel 6 Interrupt
+    DMA1_Channel7_IRQn = 17,          // DMA1 Channel 7 Interrupt
+    ADC1_2_IRQn = 18,                 // ADC1 & ADC2 Interrupts
+    USB_HP_CAN_TX_IRQn = 19,          // USB Device High Priority or CAN TX Interrupts
+    USB_LP_CAN_RX0_IRQn = 20,         // USB Device Low Priority or CAN RX0 Interrupts
+    CAN_RX1_IRQn = 21,                // CAN RX1 Interrupt
+    CAN_SCE_IRQn = 22,                // CAN SCE Interrupt
+    EXTI9_5_IRQn = 23,                // External Line[9:5] Interrupts
+    TIM1_BRK_TIM15_IRQn = 24,         // TIM1 Break and TIM15 Interrupts
+    TIM1_UP_TIM16_IRQn = 25,          // TIM1 Update and TIM16 Interrupts
+    TIM1_TRG_COM_TIM17_IRQn = 26,     // TIM1 Trigger and Commutation and TIM17 Interrupt
+    TIM1_CC_IRQn = 27,                // TIM1 Capture Compare Interrupt
+    TIM2_IRQn  = 28,                  // TIM2 global Interrupt
+    TIM3_IRQn  = 29,                  // TIM3 global Interrupt
+    TIM4_IRQn  = 30,                  // TIM4 global Interrupt
+    I2C1_EV_IRQn = 31,                // I2C1 Event Interrupt & EXTI Line23 Interrupt (I2C1 wakeup)
+    I2C1_ER_IRQn = 32,                // I2C1 Error Interrupt
+    I2C2_EV_IRQn = 33,                // I2C2 Event Interrupt & EXTI Line24 Interrupt (I2C2 wakeup)
+    I2C2_ER_IRQn = 34,                // I2C2 Error Interrupt
+    SPI1_IRQn  = 35,                  // SPI1 global Interrupt
+    SPI2_IRQn  = 36,                  // SPI2 global Interrupt
+    USART1_IRQn = 37,                 // USART1 global Interrupt & EXTI Line25 Interrupt (USART1 wakeup)
+    USART2_IRQn = 38,                 // USART2 global Interrupt & EXTI Line26 Interrupt (USART2 wakeup)
+    USART3_IRQn = 39,                 // USART3 global Interrupt & EXTI Line28 Interrupt (USART3 wakeup)
+    EXTI15_10_IRQn = 40,              // External Line[15:10] Interrupts
+    RTC_Alarm_IRQn = 41,              // RTC Alarm (A and B) through EXTI Line 17 Interrupt
+    USBWakeUp_IRQn = 42,              // USB Wakeup Interrupt
+    TIM8_BRK_IRQn = 43,               // TIM8 Break Interrupt
+    TIM8_UP_IRQn = 44,                // TIM8 Update Interrupt
+    TIM8_TRG_COM_IRQn = 45,           // TIM8 Trigger and Commutation Interrupt
+    TIM8_CC_IRQn = 46,                // TIM8 Capture Compare Interrupt
+    ADC3_IRQn  = 47,                  // ADC3 global Interrupt
+    FMC_IRQn   = 48,                  // FMC global Interrupt
+    SPI3_IRQn  = 51,                  // SPI3 global Interrupt
+    UART4_IRQn = 52,                  // UART4 global Interrupt & EXTI Line34 Interrupt (UART4 wakeup)
+    UART5_IRQn = 53,                  // UART5 global Interrupt & EXTI Line35 Interrupt (UART5 wakeup)
+    TIM6_DAC_IRQn = 54,               // TIM6 global and DAC underrun error Interrupt
+    TIM7_IRQn  = 55,                  // TIM7 global Interrupt
+    DMA2_Channel1_IRQn = 56,          // DMA2 Channel 1 global Interrupt
+    DMA2_Channel2_IRQn = 57,          // DMA2 Channel 2 global Interrupt
+    DMA2_Channel3_IRQn = 58,          // DMA2 Channel 3 global Interrupt
+    DMA2_Channel4_IRQn = 59,          // DMA2 Channel 4 global Interrupt
+    DMA2_Channel5_IRQn = 60,          // DMA2 Channel 5 global Interrupt
+    ADC4_IRQn  = 61,                  // ADC4  global Interrupt
+    COMP1_2_3_IRQn = 64,              // COMP1, COMP2 and COMP3 global Interrupt via EXTI Line21, 22 and 29
+    COMP4_5_6_IRQn = 65,              // COMP4, COMP5 and COMP6 global Interrupt via EXTI Line30, 31 and 32
+    COMP7_IRQn = 66,                  // COMP7 global Interrupt via EXTI Line33
+    I2C3_EV_IRQn = 72,                // I2C3 event interrupt
+    I2C3_ER_IRQn = 73,                // I2C3 Error Interrupt
+    USB_HP_IRQn = 74,                 // USB High Priority global Interrupt
+    USB_LP_IRQn = 75,                 // USB Low Priority global Interrupt
+    USBWakeUp_RMP_IRQn = 76,          // USB Wakeup Interrupt remap
+    TIM20_BRK_IRQn = 77,              // TIM20 Break Interrupt
+    TIM20_UP_IRQn = 78,               // TIM20 Update Interrupt
+    TIM20_TRG_COM_IRQn = 79,          // TIM20 Trigger and Commutation Interrupt
+    TIM20_CC_IRQn = 80,               // TIM20 Capture Compare Interrupt
+    FPU_IRQn   = 81,                  // Floating point Interrupt
+    SPI4_IRQn  = 84                   // SPI4 global Interrupt
+  );
+
+  TADC_Registers = record
+    ISR        : longword;            // ADC Interrupt and Status Register
+    IER        : longword;            // ADC Interrupt Enable Register
+    CR         : longword;            // ADC control register
+    CFGR       : longword;            // ADC Configuration register
+    RESERVED0  : longword;            // Reserved, 0x010
+    SMPR1      : longword;            // ADC sample time register 1
+    SMPR2      : longword;            // ADC sample time register 2
+    RESERVED1  : longword;            // Reserved, 0x01C
+    TR1        : longword;            // ADC watchdog threshold register 1
+    TR2        : longword;            // ADC watchdog threshold register 2
+    TR3        : longword;            // ADC watchdog threshold register 3
+    RESERVED2  : longword;            // Reserved, 0x02C
+    SQR1       : longword;            // ADC regular sequence register 1
+    SQR2       : longword;            // ADC regular sequence register 2
+    SQR3       : longword;            // ADC regular sequence register 3
+    SQR4       : longword;            // ADC regular sequence register 4
+    DR         : longword;            // ADC regular data register
+    RESERVED3  : longword;            // Reserved, 0x044
+    RESERVED4  : longword;            // Reserved, 0x048
+    JSQR       : longword;            // ADC injected sequence register
+    RESERVED5  : array[0..3] of longword; // Reserved, 0x050 - 0x05C
+    OFR1       : longword;            // ADC offset register 1
+    OFR2       : longword;            // ADC offset register 2
+    OFR3       : longword;            // ADC offset register 3
+    OFR4       : longword;            // ADC offset register 4
+    RESERVED6  : array[0..3] of longword; // Reserved, 0x070 - 0x07C
+    JDR1       : longword;            // ADC injected data register 1
+    JDR2       : longword;            // ADC injected data register 2
+    JDR3       : longword;            // ADC injected data register 3
+    JDR4       : longword;            // ADC injected data register 4
+    RESERVED7  : array[0..3] of longword; // Reserved, 0x090 - 0x09C
+    AWD2CR     : longword;            // ADC  Analog Watchdog 2 Configuration Register
+    AWD3CR     : longword;            // ADC  Analog Watchdog 3 Configuration Register
+    RESERVED8  : longword;            // Reserved, 0x0A8
+    RESERVED9  : longword;            // Reserved, 0x0AC
+    DIFSEL     : longword;            // ADC  Differential Mode Selection Register
+    CALFACT    : longword;            // ADC  Calibration Factors
+  end;
+
+  TADC_COMMON_Registers = record
+    CSR        : longword;            // ADC Common status register
+    RESERVED   : longword;            // Reserved, ADC1/3 base address + 0x304
+    CCR        : longword;            // ADC common control register
+    CDR        : longword;            // ADC common regular data register for dual
+  end;
+
+  TCAN_TXMAILBOX_Registers = record
+    TIR        : longword;            // CAN TX mailbox identifier register
+    TDTR       : longword;            // CAN mailbox data length control and time stamp register
+    TDLR       : longword;            // CAN mailbox data low register
+    TDHR       : longword;            // CAN mailbox data high register
+  end;
+
+  TCAN_FIFOMAILBOX_Registers = record
+    RIR        : longword;            // CAN receive FIFO mailbox identifier register
+    RDTR       : longword;            // CAN receive FIFO mailbox data length control and time stamp register
+    RDLR       : longword;            // CAN receive FIFO mailbox data low register
+    RDHR       : longword;            // CAN receive FIFO mailbox data high register
+  end;
+
+  TCAN_FILTERREGISTER_Registers = record
+    FR1        : longword;            // CAN Filter bank register 1
+    FR2        : longword;            // CAN Filter bank register 1
+  end;
+
+  TCAN_Registers = record
+    MCR        : longword;            // CAN master control register
+    MSR        : longword;            // CAN master status register
+    TSR        : longword;            // CAN transmit status register
+    RF0R       : longword;            // CAN receive FIFO 0 register
+    RF1R       : longword;            // CAN receive FIFO 1 register
+    IER        : longword;            // CAN interrupt enable register
+    ESR        : longword;            // CAN error status register
+    BTR        : longword;            // CAN bit timing register
+    RESERVED0  : array[0..87] of longword; // Reserved, 0x020 - 0x17F
+    sTxMailBox : array[0..2] of TCAN_TxMailBox_Registers; // CAN Tx MailBox
+    sFIFOMailBox : array[0..1] of TCAN_FIFOMailBox_Registers; // CAN FIFO MailBox
+    RESERVED1  : array[0..11] of longword; // Reserved, 0x1D0 - 0x1FF
+    FMR        : longword;            // CAN filter master register
+    FM1R       : longword;            // CAN filter mode register
+    RESERVED2  : longword;            // Reserved, 0x208
+    FS1R       : longword;            // CAN filter scale register
+    RESERVED3  : longword;            // Reserved, 0x210
+    FFA1R      : longword;            // CAN filter FIFO assignment register
+    RESERVED4  : longword;            // Reserved, 0x218
+    FA1R       : longword;            // CAN filter activation register
+    RESERVED5  : array[0..7] of longword; // Reserved, 0x220-0x23F
+    sFilterRegister : array[0..27] of TCAN_FilterRegister_Registers; // CAN Filter Register
+  end;
+
+  TCOMP_Registers = record
+    CSR        : longword;            // COMP control and status register
+  end;
+
+  TCOMP_COMMON_Registers = record
+    CSR        : longword;            // COMP control and status register, used for bits common to several COMP instances
+  end;
+
+  TCRC_Registers = record
+    DR         : longword;            // CRC Data register
+    IDR        : byte;                // CRC Independent data register
+    RESERVED0  : byte;                // Reserved,                                                    0x05
+    RESERVED1  : word;                // Reserved,                                                    0x06
+    CR         : longword;            // CRC Control register
+    RESERVED2  : longword;            // Reserved,                                                    0x0C
+    INIT       : longword;            // Initial CRC value register
+    POL        : longword;            // CRC polynomial register
+  end;
+
+  TDAC_Registers = record
+    CR         : longword;            // DAC control register
+    SWTRIGR    : longword;            // DAC software trigger register
+    DHR12R1    : longword;            // DAC channel1 12-bit right-aligned data holding register
+    DHR12L1    : longword;            // DAC channel1 12-bit left aligned data holding register
+    DHR8R1     : longword;            // DAC channel1 8-bit right aligned data holding register
+    DHR12R2    : longword;            // DAC channel2 12-bit right aligned data holding register
+    DHR12L2    : longword;            // DAC channel2 12-bit left aligned data holding register
+    DHR8R2     : longword;            // DAC channel2 8-bit right-aligned data holding register
+    DHR12RD    : longword;            // Dual DAC 12-bit right-aligned data holding register
+    DHR12LD    : longword;            // DUAL DAC 12-bit left aligned data holding register
+    DHR8RD     : longword;            // DUAL DAC 8-bit right aligned data holding register
+    DOR1       : longword;            // DAC channel1 data output register
+    DOR2       : longword;            // DAC channel2 data output register
+    SR         : longword;            // DAC status register
+  end;
+
+  TDBGMCU_Registers = record
+    IDCODE     : longword;            // MCU device ID code
+    CR         : longword;            // Debug MCU configuration register
+    APB1FZ     : longword;            // Debug MCU APB1 freeze register
+    APB2FZ     : longword;            // Debug MCU APB2 freeze register
+  end;
+
+  TDMA_CHANNEL_Registers = record
+    CCR        : longword;            // DMA channel x configuration register
+    CNDTR      : longword;            // DMA channel x number of data register
+    CPAR       : longword;            // DMA channel x peripheral address register
+    CMAR       : longword;            // DMA channel x memory address register
+  end;
+
+  TDMA_Registers = record
+    ISR        : longword;            // DMA interrupt status register
+    IFCR       : longword;            // DMA interrupt flag clear register
+  end;
+
+  TEXTI_Registers = record
+    IMR        : longword;            // XTI Interrupt mask register
+    EMR        : longword;            // XTI Event mask register
+    RTSR       : longword;            // XTI Rising trigger selection register
+    FTSR       : longword;            // XTI Falling trigger selection register
+    SWIER      : longword;            // XTI Software interrupt event register
+    PR         : longword;            // XTI Pending register
+    RESERVED1  : longword;            // Reserved, 0x18
+    RESERVED2  : longword;            // Reserved, 0x1C
+    IMR2       : longword;            // EXTI Interrupt mask register
+    EMR2       : longword;            // EXTI Event mask register
+    RTSR2      : longword;            // EXTI Rising trigger selection register
+    FTSR2      : longword;            // EXTI Falling trigger selection register
+    SWIER2     : longword;            // EXTI Software interrupt event register
+    PR2        : longword;            // EXTI Pending register
+  end;
+
+  TFLASH_Registers = record
+    ACR        : longword;            // FLASH access control register
+    KEYR       : longword;            // FLASH key register
+    OPTKEYR    : longword;            // FLASH option key register
+    SR         : longword;            // FLASH status register
+    CR         : longword;            // FLASH control register
+    AR         : longword;            // FLASH address register
+    RESERVED   : longword;            // Reserved, 0x18
+    OBR        : longword;            // FLASH Option byte register
+    WRPR       : longword;            // FLASH Write register
+  end;
+
+  TFMC_BANK1_Registers = record
+    BTCR       : array[0..7] of longword; // NOR/PSRAM chip-select control register(BCR) and chip-select timing register(BTR)
+  end;
+
+  TFMC_BANK1E_Registers = record
+    BWTR       : array[0..6] of longword; // NOR/PSRAM write timing registers
+  end;
+
+  TFMC_BANK2_3_Registers = record
+    PCR2       : longword;            // NAND Flash control register 2
+    SR2        : longword;            // NAND Flash FIFO status and interrupt register 2
+    PMEM2      : longword;            // NAND Flash Common memory space timing register 2
+    PATT2      : longword;            // NAND Flash Attribute memory space timing register 2
+    RESERVED0  : longword;            // Reserved, 0x70
+    ECCR2      : longword;            // NAND Flash ECC result registers 2
+    RESERVED1  : longword;            // Reserved, 0x78
+    RESERVED2  : longword;            // Reserved, 0x7C
+    PCR3       : longword;            // NAND Flash control register 3
+    SR3        : longword;            // NAND Flash FIFO status and interrupt register 3
+    PMEM3      : longword;            // NAND Flash Common memory space timing register 3
+    PATT3      : longword;            // NAND Flash Attribute memory space timing register 3
+    RESERVED3  : longword;            // Reserved, 0x90
+    ECCR3      : longword;            // NAND Flash ECC result registers 3
+  end;
+
+  TFMC_BANK4_Registers = record
+    PCR4       : longword;            // PC Card  control register 4
+    SR4        : longword;            // PC Card  FIFO status and interrupt register 4
+    PMEM4      : longword;            // PC Card  Common memory space timing register 4
+    PATT4      : longword;            // PC Card  Attribute memory space timing register 4
+    PIO4       : longword;            // PC Card  I/O space timing register 4
+  end;
+
+  TOB_Registers = record
+    RDP        : word;                // LASH option byte Read protection
+    USER       : word;                // LASH option byte user options
+    RESERVED0  : word;                // Reserved,                                                     0x04
+    RESERVED1  : word;                // Reserved,                                                     0x06
+    WRP0       : word;                // LASH option byte write protection 0
+    WRP1       : word;                // LASH option byte write protection 1
+    WRP2       : word;                // LASH option byte write protection 2
+    WRP3       : word;                // LASH option byte write protection 3
+  end;
+
+  TGPIO_Registers = record
+    MODER      : longword;            // GPIO port mode register
+    OTYPER     : longword;            // GPIO port output type register
+    OSPEEDR    : longword;            // GPIO port output speed register
+    PUPDR      : longword;            // GPIO port pull-up/pull-down register
+    IDR        : longword;            // GPIO port input data register
+    ODR        : longword;            // GPIO port output data register
+    BSRR       : longword;            // GPIO port bit set/reset register
+    LCKR       : longword;            // GPIO port configuration lock register
+    AFR        : array[0..1] of longword; // GPIO alternate function registers
+    BRR        : longword;            // GPIO bit reset register
+  end;
+
+  TOPAMP_Registers = record
+    CSR        : longword;            // OPAMP control and status register
+  end;
+
+  TSYSCFG_Registers = record
+    CFGR1      : longword;            // SYSCFG configuration register 1
+    RCR        : longword;            // SYSCFG CCM SRAM protection register
+    EXTICR     : array[0..3] of longword; // SYSCFG external interrupt configuration registers
+    CFGR2      : longword;            // SYSCFG configuration register 2
+    RESERVED0  : longword;            // Reserved,                                                          0x1C
+    RESERVED1  : longword;            // Reserved,                                                          0x20
+    RESERVED2  : longword;            // Reserved,                                                          0x24
+    RESERVED4  : longword;            // Reserved,                                                          0x28
+    RESERVED5  : longword;            // Reserved,                                                          0x2C
+    RESERVED6  : longword;            // Reserved,                                                          0x30
+    RESERVED7  : longword;            // Reserved,                                                          0x34
+    RESERVED8  : longword;            // Reserved,                                                          0x38
+    RESERVED9  : longword;            // Reserved,                                                          0x3C
+    RESERVED10 : longword;            // Reserved,                                                          0x40
+    RESERVED11 : longword;            // Reserved,                                                          0x44
+    CFGR4      : longword;            // SYSCFG configuration register 4
+    RESERVED12 : longword;            // Reserved,                                                          0x4C
+    RESERVED13 : longword;            // Reserved,                                                          0x50
+  end;
+
+  TI2C_Registers = record
+    CR1        : longword;            // I2C Control register 1
+    CR2        : longword;            // I2C Control register 2
+    OAR1       : longword;            // I2C Own address 1 register
+    OAR2       : longword;            // I2C Own address 2 register
+    TIMINGR    : longword;            // I2C Timing register
+    TIMEOUTR   : longword;            // I2C Timeout register
+    ISR        : longword;            // I2C Interrupt and status register
+    ICR        : longword;            // I2C Interrupt clear register
+    PECR       : longword;            // I2C PEC register
+    RXDR       : longword;            // I2C Receive data register
+    TXDR       : longword;            // I2C Transmit data register
+  end;
+
+  TIWDG_Registers = record
+    KR         : longword;            // IWDG Key register
+    PR         : longword;            // IWDG Prescaler register
+    RLR        : longword;            // IWDG Reload register
+    SR         : longword;            // IWDG Status register
+    WINR       : longword;            // IWDG Window register
+  end;
+
+  TPWR_Registers = record
+    CR         : longword;            // PWR power control register
+    CSR        : longword;            // PWR power control/status register
+  end;
+
+  TRCC_Registers = record
+    CR         : longword;            // RCC clock control register
+    CFGR       : longword;            // RCC clock configuration register
+    CIR        : longword;            // RCC clock interrupt register
+    APB2RSTR   : longword;            // RCC APB2 peripheral reset register
+    APB1RSTR   : longword;            // RCC APB1 peripheral reset register
+    AHBENR     : longword;            // RCC AHB peripheral clock register
+    APB2ENR    : longword;            // RCC APB2 peripheral clock enable register
+    APB1ENR    : longword;            // RCC APB1 peripheral clock enable register
+    BDCR       : longword;            // RCC Backup domain control register
+    CSR        : longword;            // RCC clock control & status register
+    AHBRSTR    : longword;            // RCC AHB peripheral reset register
+    CFGR2      : longword;            // RCC clock configuration register 2
+    CFGR3      : longword;            // RCC clock configuration register 3
+  end;
+
+  TRTC_Registers = record
+    TR         : longword;            // RTC time register
+    DR         : longword;            // RTC date register
+    CR         : longword;            // RTC control register
+    ISR        : longword;            // RTC initialization and status register
+    PRER       : longword;            // RTC prescaler register
+    WUTR       : longword;            // RTC wakeup timer register
+    RESERVED0  : longword;            // Reserved, 0x18
+    ALRMAR     : longword;            // RTC alarm A register
+    ALRMBR     : longword;            // RTC alarm B register
+    WPR        : longword;            // RTC write protection register
+    SSR        : longword;            // RTC sub second register
+    SHIFTR     : longword;            // RTC shift control register
+    TSTR       : longword;            // RTC time stamp time register
+    TSDR       : longword;            // RTC time stamp date register
+    TSSSR      : longword;            // RTC time-stamp sub second register
+    CALR       : longword;            // RTC calibration register
+    TAFCR      : longword;            // RTC tamper and alternate function configuration register
+    ALRMASSR   : longword;            // RTC alarm A sub second register
+    ALRMBSSR   : longword;            // RTC alarm B sub second register
+    RESERVED7  : longword;            // Reserved, 0x4C
+    BKP0R      : longword;            // RTC backup register 0
+    BKP1R      : longword;            // RTC backup register 1
+    BKP2R      : longword;            // RTC backup register 2
+    BKP3R      : longword;            // RTC backup register 3
+    BKP4R      : longword;            // RTC backup register 4
+    BKP5R      : longword;            // RTC backup register 5
+    BKP6R      : longword;            // RTC backup register 6
+    BKP7R      : longword;            // RTC backup register 7
+    BKP8R      : longword;            // RTC backup register 8
+    BKP9R      : longword;            // RTC backup register 9
+    BKP10R     : longword;            // RTC backup register 10
+    BKP11R     : longword;            // RTC backup register 11
+    BKP12R     : longword;            // RTC backup register 12
+    BKP13R     : longword;            // RTC backup register 13
+    BKP14R     : longword;            // RTC backup register 14
+    BKP15R     : longword;            // RTC backup register 15
+  end;
+
+  TSPI_Registers = record
+    CR1        : longword;            // SPI Control register 1
+    CR2        : longword;            // SPI Control register 2
+    SR         : longword;            // SPI Status register
+    DR         : longword;            // SPI data register
+    CRCPR      : longword;            // SPI CRC polynomial register
+    RXCRCR     : longword;            // SPI Rx CRC register
+    TXCRCR     : longword;            // SPI Tx CRC register
+    I2SCFGR    : longword;            // SPI_I2S configuration register
+    I2SPR      : longword;            // SPI_I2S prescaler register
+  end;
+
+  TTIM_Registers = record
+    CR1        : longword;            // TIM control register 1
+    CR2        : longword;            // TIM control register 2
+    SMCR       : longword;            // TIM slave mode control register
+    DIER       : longword;            // TIM DMA/interrupt enable register
+    SR         : longword;            // TIM status register
+    EGR        : longword;            // TIM event generation register
+    CCMR1      : longword;            // TIM capture/compare mode register 1
+    CCMR2      : longword;            // TIM capture/compare mode register 2
+    CCER       : longword;            // TIM capture/compare enable register
+    CNT        : longword;            // TIM counter register
+    PSC        : longword;            // TIM prescaler
+    ARR        : longword;            // TIM auto-reload register
+    RCR        : longword;            // TIM repetition counter register
+    CCR1       : longword;            // TIM capture/compare register 1
+    CCR2       : longword;            // TIM capture/compare register 2
+    CCR3       : longword;            // TIM capture/compare register 3
+    CCR4       : longword;            // TIM capture/compare register 4
+    BDTR       : longword;            // TIM break and dead-time register
+    DCR        : longword;            // TIM DMA control register
+    DMAR       : longword;            // TIM DMA address for full transfer
+    &OR        : longword;            // TIM option register
+    CCMR3      : longword;            // TIM capture/compare mode register 3
+    CCR5       : longword;            // TIM capture/compare register5
+    CCR6       : longword;            // TIM capture/compare register 4
+  end;
+
+  TTSC_Registers = record
+    CR         : longword;            // TSC control register
+    IER        : longword;            // TSC interrupt enable register
+    ICR        : longword;            // TSC interrupt clear register
+    ISR        : longword;            // TSC interrupt status register
+    IOHCR      : longword;            // TSC I/O hysteresis control register
+    RESERVED1  : longword;            // Reserved
+    IOASCR     : longword;            // TSC I/O analog switch control register
+    RESERVED2  : longword;            // Reserved
+    IOSCR      : longword;            // TSC I/O sampling control register
+    RESERVED3  : longword;            // Reserved
+    IOCCR      : longword;            // TSC I/O channel control register
+    RESERVED4  : longword;            // Reserved
+    IOGCSR     : longword;            // TSC I/O group control status register
+    IOGXCR     : array[0..7] of longword; // TSC I/O group x counter register
+  end;
+
+  TUSART_Registers = record
+    CR1        : longword;            // USART Control register 1
+    CR2        : longword;            // USART Control register 2
+    CR3        : longword;            // USART Control register 3
+    BRR        : longword;            // USART Baud rate register
+    GTPR       : longword;            // USART Guard time and prescaler register
+    RTOR       : longword;            // USART Receiver Time Out register
+    RQR        : longword;            // USART Request register
+    ISR        : longword;            // USART Interrupt and status register
+    ICR        : longword;            // USART Interrupt flag Clear register
+    RDR        : word;                // USART Receive Data register
+    RESERVED1  : word;                // Reserved, 0x26
+    TDR        : word;                // USART Transmit Data register
+    RESERVED2  : word;                // Reserved, 0x2A
+  end;
+
+  TUSB_Registers = record
+    EP0R       : word;                // USB Endpoint 0 register
+    RESERVED0  : word;                // Reserved
+    EP1R       : word;                // USB Endpoint 1 register
+    RESERVED1  : word;                // Reserved
+    EP2R       : word;                // USB Endpoint 2 register
+    RESERVED2  : word;                // Reserved
+    EP3R       : word;                // USB Endpoint 3 register
+    RESERVED3  : word;                // Reserved
+    EP4R       : word;                // USB Endpoint 4 register
+    RESERVED4  : word;                // Reserved
+    EP5R       : word;                // USB Endpoint 5 register
+    RESERVED5  : word;                // Reserved
+    EP6R       : word;                // USB Endpoint 6 register
+    RESERVED6  : word;                // Reserved
+    EP7R       : word;                // USB Endpoint 7 register
+    RESERVED7  : array[0..16] of word; // Reserved
+    CNTR       : word;                // Control register
+    RESERVED8  : word;                // Reserved
+    ISTR       : word;                // Interrupt status register
+    RESERVED9  : word;                // Reserved
+    FNR        : word;                // Frame number register
+    RESERVEDA  : word;                // Reserved
+    DADDR      : word;                // Device address register
+    RESERVEDB  : word;                // Reserved
+    BTABLE     : word;                // Buffer Table address register
+    RESERVEDC  : word;                // Reserved
+    LPMCSR     : word;                // LPM Control and Status register
+    RESERVEDD  : word;                // Reserved
+  end;
+
+  TWWDG_Registers = record
+    CR         : longword;            // WWDG Control register
+    CFR        : longword;            // WWDG Configuration register
+    SR         : longword;            // WWDG Status register
+  end;
+
+const
+  FLASH_BASE   = $08000000;           // FLASH base address in the alias region
+  CCMDATARAM_BASE = $10000000;        // CCM(core coupled memory) data RAM base address in the alias region
+  SRAM_BASE    = $20000000;           // SRAM base address in the alias region
+  PERIPH_BASE  = $40000000;           // Peripheral base address in the alias region
+  FMC_BASE     = $60000000;           // FMC base address
+  FMC_R_BASE   = $A0000000;           // FMC registers base address
+  SRAM_BB_BASE = $22000000;           // SRAM base address in the bit-band region
+  PERIPH_BB_BASE = $42000000;         // Peripheral base address in the bit-band region
+  APB1PERIPH_BASE = $40000000;
+  APB2PERIPH_BASE = PERIPH_BASE + $00010000;
+  AHB1PERIPH_BASE = PERIPH_BASE + $00020000;
+  AHB2PERIPH_BASE = PERIPH_BASE + $08000000;
+  AHB3PERIPH_BASE = PERIPH_BASE + $10000000;
+  TIM2_BASE    = APB1PERIPH_BASE + $00000000;
+  TIM3_BASE    = APB1PERIPH_BASE + $00000400;
+  TIM4_BASE    = APB1PERIPH_BASE + $00000800;
+  TIM6_BASE    = APB1PERIPH_BASE + $00001000;
+  TIM7_BASE    = APB1PERIPH_BASE + $00001400;
+  RTC_BASE     = APB1PERIPH_BASE + $00002800;
+  WWDG_BASE    = APB1PERIPH_BASE + $00002C00;
+  IWDG_BASE    = APB1PERIPH_BASE + $00003000;
+  I2S2ext_BASE = APB1PERIPH_BASE + $00003400;
+  SPI2_BASE    = APB1PERIPH_BASE + $00003800;
+  SPI3_BASE    = APB1PERIPH_BASE + $00003C00;
+  I2S3ext_BASE = APB1PERIPH_BASE + $00004000;
+  USART2_BASE  = APB1PERIPH_BASE + $00004400;
+  USART3_BASE  = APB1PERIPH_BASE + $00004800;
+  UART4_BASE   = APB1PERIPH_BASE + $00004C00;
+  UART5_BASE   = APB1PERIPH_BASE + $00005000;
+  I2C1_BASE    = APB1PERIPH_BASE + $00005400;
+  I2C2_BASE    = APB1PERIPH_BASE + $00005800;
+  USB_BASE     = APB1PERIPH_BASE + $00005C00; // USB_IP Peripheral Registers base address
+  CAN_BASE     = APB1PERIPH_BASE + $00006400;
+  PWR_BASE     = APB1PERIPH_BASE + $00007000;
+  DAC1_BASE    = APB1PERIPH_BASE + $00007400;
+  DAC_BASE     = APB1PERIPH_BASE + $00007400;
+  I2C3_BASE    = APB1PERIPH_BASE + $00007800;
+  SYSCFG_BASE  = APB2PERIPH_BASE + $00000000;
+  COMP1_BASE   = APB2PERIPH_BASE + $0000001C;
+  COMP2_BASE   = APB2PERIPH_BASE + $00000020;
+  COMP3_BASE   = APB2PERIPH_BASE + $00000024;
+  COMP4_BASE   = APB2PERIPH_BASE + $00000028;
+  COMP5_BASE   = APB2PERIPH_BASE + $0000002C;
+  COMP6_BASE   = APB2PERIPH_BASE + $00000030;
+  COMP7_BASE   = APB2PERIPH_BASE + $00000034;
+  COMP_BASE    = APB2PERIPH_BASE + $0000001C;
+  OPAMP1_BASE  = APB2PERIPH_BASE + $00000038;
+  OPAMP2_BASE  = APB2PERIPH_BASE + $0000003C;
+  OPAMP3_BASE  = APB2PERIPH_BASE + $00000040;
+  OPAMP4_BASE  = APB2PERIPH_BASE + $00000044;
+  OPAMP_BASE   = APB2PERIPH_BASE + $00000038;
+  EXTI_BASE    = APB2PERIPH_BASE + $00000400;
+  TIM1_BASE    = APB2PERIPH_BASE + $00002C00;
+  SPI1_BASE    = APB2PERIPH_BASE + $00003000;
+  TIM8_BASE    = APB2PERIPH_BASE + $00003400;
+  USART1_BASE  = APB2PERIPH_BASE + $00003800;
+  SPI4_BASE    = APB2PERIPH_BASE + $00003C00;
+  TIM15_BASE   = APB2PERIPH_BASE + $00004000;
+  TIM16_BASE   = APB2PERIPH_BASE + $00004400;
+  TIM17_BASE   = APB2PERIPH_BASE + $00004800;
+  TIM20_BASE   = APB2PERIPH_BASE + $00005000;
+  DMA1_BASE    = AHB1PERIPH_BASE + $00000000;
+  DMA1_Channel1_BASE = AHB1PERIPH_BASE + $00000008;
+  DMA1_Channel2_BASE = AHB1PERIPH_BASE + $0000001C;
+  DMA1_Channel3_BASE = AHB1PERIPH_BASE + $00000030;
+  DMA1_Channel4_BASE = AHB1PERIPH_BASE + $00000044;
+  DMA1_Channel5_BASE = AHB1PERIPH_BASE + $00000058;
+  DMA1_Channel6_BASE = AHB1PERIPH_BASE + $0000006C;
+  DMA1_Channel7_BASE = AHB1PERIPH_BASE + $00000080;
+  DMA2_BASE    = AHB1PERIPH_BASE + $00000400;
+  DMA2_Channel1_BASE = AHB1PERIPH_BASE + $00000408;
+  DMA2_Channel2_BASE = AHB1PERIPH_BASE + $0000041C;
+  DMA2_Channel3_BASE = AHB1PERIPH_BASE + $00000430;
+  DMA2_Channel4_BASE = AHB1PERIPH_BASE + $00000444;
+  DMA2_Channel5_BASE = AHB1PERIPH_BASE + $00000458;
+  RCC_BASE     = AHB1PERIPH_BASE + $00001000;
+  FLASH_R_BASE = AHB1PERIPH_BASE + $00002000; // Flash registers base address
+  OB_BASE      = $1FFFF800;           // Flash Option Bytes base address
+  FLASHSIZE_BASE = $1FFFF7CC;         // FLASH Size register base address
+  UID_BASE     = $1FFFF7AC;           // Unique device ID register base address
+  CRC_BASE     = AHB1PERIPH_BASE + $00003000;
+  TSC_BASE     = AHB1PERIPH_BASE + $00004000;
+  GPIOA_BASE   = AHB2PERIPH_BASE + $00000000;
+  GPIOB_BASE   = AHB2PERIPH_BASE + $00000400;
+  GPIOC_BASE   = AHB2PERIPH_BASE + $00000800;
+  GPIOD_BASE   = AHB2PERIPH_BASE + $00000C00;
+  GPIOE_BASE   = AHB2PERIPH_BASE + $00001000;
+  GPIOF_BASE   = AHB2PERIPH_BASE + $00001400;
+  GPIOG_BASE   = AHB2PERIPH_BASE + $00001800;
+  GPIOH_BASE   = AHB2PERIPH_BASE + $00001C00;
+  ADC1_BASE    = AHB3PERIPH_BASE + $00000000;
+  ADC2_BASE    = AHB3PERIPH_BASE + $00000100;
+  ADC1_2_COMMON_BASE = AHB3PERIPH_BASE + $00000300;
+  ADC3_BASE    = AHB3PERIPH_BASE + $00000400;
+  ADC4_BASE    = AHB3PERIPH_BASE + $00000500;
+  ADC3_4_COMMON_BASE = AHB3PERIPH_BASE + $00000700;
+  FMC_Bank1_R_BASE = FMC_R_BASE + $0000;
+  FMC_Bank1E_R_BASE = FMC_R_BASE + $0104;
+  FMC_Bank2_3_R_BASE = FMC_R_BASE + $0060;
+  FMC_Bank4_R_BASE = FMC_R_BASE + $00A0;
+  DBGMCU_BASE  = $E0042000;           // Debug MCU registers base address
+
+var
+  TIM2         : TTIM_Registers absolute TIM2_BASE;
+  TIM3         : TTIM_Registers absolute TIM3_BASE;
+  TIM4         : TTIM_Registers absolute TIM4_BASE;
+  TIM6         : TTIM_Registers absolute TIM6_BASE;
+  TIM7         : TTIM_Registers absolute TIM7_BASE;
+  RTC          : TRTC_Registers absolute RTC_BASE;
+  WWDG         : TWWDG_Registers absolute WWDG_BASE;
+  IWDG         : TIWDG_Registers absolute IWDG_BASE;
+  I2S2ext      : TSPI_Registers absolute I2S2ext_BASE;
+  SPI2         : TSPI_Registers absolute SPI2_BASE;
+  SPI3         : TSPI_Registers absolute SPI3_BASE;
+  I2S3ext      : TSPI_Registers absolute I2S3ext_BASE;
+  USART2       : TUSART_Registers absolute USART2_BASE;
+  USART3       : TUSART_Registers absolute USART3_BASE;
+  UART4        : TUSART_Registers absolute UART4_BASE;
+  UART5        : TUSART_Registers absolute UART5_BASE;
+  I2C1         : TI2C_Registers absolute I2C1_BASE;
+  I2C2         : TI2C_Registers absolute I2C2_BASE;
+  I2C3         : TI2C_Registers absolute I2C3_BASE;
+  CAN          : TCAN_Registers absolute CAN_BASE;
+  PWR          : TPWR_Registers absolute PWR_BASE;
+  DAC          : TDAC_Registers absolute DAC_BASE;
+  DAC1         : TDAC_Registers absolute DAC1_BASE;
+  COMP1        : TCOMP_Registers absolute COMP1_BASE;
+  COMP2        : TCOMP_Registers absolute COMP2_BASE;
+  COMP12_COMMON : TCOMP_Common_Registers absolute COMP2_BASE;
+  COMP3        : TCOMP_Registers absolute COMP3_BASE;
+  COMP4        : TCOMP_Registers absolute COMP4_BASE;
+  COMP34_COMMON : TCOMP_Common_Registers absolute COMP4_BASE;
+  COMP5        : TCOMP_Registers absolute COMP5_BASE;
+  COMP6        : TCOMP_Registers absolute COMP6_BASE;
+  COMP56_COMMON : TCOMP_Common_Registers absolute COMP6_BASE;
+  COMP7        : TCOMP_Registers absolute COMP7_BASE;
+  COMP         : TCOMP_Registers absolute COMP_BASE;
+  OPAMP1       : TOPAMP_Registers absolute OPAMP1_BASE;
+  OPAMP        : TOPAMP_Registers absolute OPAMP_BASE;
+  OPAMP2       : TOPAMP_Registers absolute OPAMP2_BASE;
+  OPAMP3       : TOPAMP_Registers absolute OPAMP3_BASE;
+  OPAMP4       : TOPAMP_Registers absolute OPAMP4_BASE;
+  SYSCFG       : TSYSCFG_Registers absolute SYSCFG_BASE;
+  EXTI         : TEXTI_Registers absolute EXTI_BASE;
+  TIM1         : TTIM_Registers absolute TIM1_BASE;
+  SPI1         : TSPI_Registers absolute SPI1_BASE;
+  TIM8         : TTIM_Registers absolute TIM8_BASE;
+  USART1       : TUSART_Registers absolute USART1_BASE;
+  SPI4         : TSPI_Registers absolute SPI4_BASE;
+  TIM15        : TTIM_Registers absolute TIM15_BASE;
+  TIM16        : TTIM_Registers absolute TIM16_BASE;
+  TIM17        : TTIM_Registers absolute TIM17_BASE;
+  TIM20        : TTIM_Registers absolute TIM20_BASE;
+  DBGMCU       : TDBGMCU_Registers absolute DBGMCU_BASE;
+  DMA1         : TDMA_Registers absolute DMA1_BASE;
+  DMA1_Channel1 : TDMA_Channel_Registers absolute DMA1_Channel1_BASE;
+  DMA1_Channel2 : TDMA_Channel_Registers absolute DMA1_Channel2_BASE;
+  DMA1_Channel3 : TDMA_Channel_Registers absolute DMA1_Channel3_BASE;
+  DMA1_Channel4 : TDMA_Channel_Registers absolute DMA1_Channel4_BASE;
+  DMA1_Channel5 : TDMA_Channel_Registers absolute DMA1_Channel5_BASE;
+  DMA1_Channel6 : TDMA_Channel_Registers absolute DMA1_Channel6_BASE;
+  DMA1_Channel7 : TDMA_Channel_Registers absolute DMA1_Channel7_BASE;
+  DMA2         : TDMA_Registers absolute DMA2_BASE;
+  DMA2_Channel1 : TDMA_Channel_Registers absolute DMA2_Channel1_BASE;
+  DMA2_Channel2 : TDMA_Channel_Registers absolute DMA2_Channel2_BASE;
+  DMA2_Channel3 : TDMA_Channel_Registers absolute DMA2_Channel3_BASE;
+  DMA2_Channel4 : TDMA_Channel_Registers absolute DMA2_Channel4_BASE;
+  DMA2_Channel5 : TDMA_Channel_Registers absolute DMA2_Channel5_BASE;
+  RCC          : TRCC_Registers absolute RCC_BASE;
+  FLASH        : TFLASH_Registers absolute FLASH_R_BASE;
+  OB           : TOB_Registers absolute OB_BASE;
+  CRC          : TCRC_Registers absolute CRC_BASE;
+  TSC          : TTSC_Registers absolute TSC_BASE;
+  GPIOA        : TGPIO_Registers absolute GPIOA_BASE;
+  GPIOB        : TGPIO_Registers absolute GPIOB_BASE;
+  GPIOC        : TGPIO_Registers absolute GPIOC_BASE;
+  GPIOD        : TGPIO_Registers absolute GPIOD_BASE;
+  GPIOE        : TGPIO_Registers absolute GPIOE_BASE;
+  GPIOF        : TGPIO_Registers absolute GPIOF_BASE;
+  GPIOG        : TGPIO_Registers absolute GPIOG_BASE;
+  GPIOH        : TGPIO_Registers absolute GPIOH_BASE;
+  ADC1         : TADC_Registers absolute ADC1_BASE;
+  ADC2         : TADC_Registers absolute ADC2_BASE;
+  ADC3         : TADC_Registers absolute ADC3_BASE;
+  ADC4         : TADC_Registers absolute ADC4_BASE;
+  ADC12_COMMON : TADC_Common_Registers absolute ADC1_2_COMMON_BASE;
+  ADC34_COMMON : TADC_Common_Registers absolute ADC3_4_COMMON_BASE;
+  USB          : TUSB_Registers absolute USB_BASE;
+  FMC_Bank1    : TFMC_Bank1_Registers absolute FMC_Bank1_R_BASE;
+  FMC_Bank1E   : TFMC_Bank1E_Registers absolute FMC_Bank1E_R_BASE;
+  FMC_Bank2_3  : TFMC_Bank2_3_Registers absolute FMC_Bank2_3_R_BASE;
+  FMC_Bank4    : TFMC_Bank4_Registers absolute FMC_Bank4_R_BASE;
+
+implementation
+
+procedure NonMaskableInt_interrupt; external name 'NonMaskableInt_interrupt';
+procedure HardFault_interrupt; external name 'HardFault_interrupt';
+procedure MemoryManagement_interrupt; external name 'MemoryManagement_interrupt';
+procedure BusFault_interrupt; external name 'BusFault_interrupt';
+procedure UsageFault_interrupt; external name 'UsageFault_interrupt';
+procedure SVCall_interrupt; external name 'SVCall_interrupt';
+procedure DebugMonitor_interrupt; external name 'DebugMonitor_interrupt';
+procedure PendSV_interrupt; external name 'PendSV_interrupt';
+procedure SysTick_interrupt; external name 'SysTick_interrupt';
+procedure WWDG_interrupt; external name 'WWDG_interrupt';
+procedure PVD_interrupt; external name 'PVD_interrupt';
+procedure TAMP_STAMP_interrupt; external name 'TAMP_STAMP_interrupt';
+procedure RTC_WKUP_interrupt; external name 'RTC_WKUP_interrupt';
+procedure FLASH_interrupt; external name 'FLASH_interrupt';
+procedure RCC_interrupt; external name 'RCC_interrupt';
+procedure EXTI0_interrupt; external name 'EXTI0_interrupt';
+procedure EXTI1_interrupt; external name 'EXTI1_interrupt';
+procedure EXTI2_TSC_interrupt; external name 'EXTI2_TSC_interrupt';
+procedure EXTI3_interrupt; external name 'EXTI3_interrupt';
+procedure EXTI4_interrupt; external name 'EXTI4_interrupt';
+procedure DMA1_Channel1_interrupt; external name 'DMA1_Channel1_interrupt';
+procedure DMA1_Channel2_interrupt; external name 'DMA1_Channel2_interrupt';
+procedure DMA1_Channel3_interrupt; external name 'DMA1_Channel3_interrupt';
+procedure DMA1_Channel4_interrupt; external name 'DMA1_Channel4_interrupt';
+procedure DMA1_Channel5_interrupt; external name 'DMA1_Channel5_interrupt';
+procedure DMA1_Channel6_interrupt; external name 'DMA1_Channel6_interrupt';
+procedure DMA1_Channel7_interrupt; external name 'DMA1_Channel7_interrupt';
+procedure ADC1_2_interrupt; external name 'ADC1_2_interrupt';
+procedure USB_HP_CAN_TX_interrupt; external name 'USB_HP_CAN_TX_interrupt';
+procedure USB_LP_CAN_RX0_interrupt; external name 'USB_LP_CAN_RX0_interrupt';
+procedure CAN_RX1_interrupt; external name 'CAN_RX1_interrupt';
+procedure CAN_SCE_interrupt; external name 'CAN_SCE_interrupt';
+procedure EXTI9_5_interrupt; external name 'EXTI9_5_interrupt';
+procedure TIM1_BRK_TIM15_interrupt; external name 'TIM1_BRK_TIM15_interrupt';
+procedure TIM1_UP_TIM16_interrupt; external name 'TIM1_UP_TIM16_interrupt';
+procedure TIM1_TRG_COM_TIM17_interrupt; external name 'TIM1_TRG_COM_TIM17_interrupt';
+procedure TIM1_CC_interrupt; external name 'TIM1_CC_interrupt';
+procedure TIM2_interrupt; external name 'TIM2_interrupt';
+procedure TIM3_interrupt; external name 'TIM3_interrupt';
+procedure TIM4_interrupt; external name 'TIM4_interrupt';
+procedure I2C1_EV_interrupt; external name 'I2C1_EV_interrupt';
+procedure I2C1_ER_interrupt; external name 'I2C1_ER_interrupt';
+procedure I2C2_EV_interrupt; external name 'I2C2_EV_interrupt';
+procedure I2C2_ER_interrupt; external name 'I2C2_ER_interrupt';
+procedure SPI1_interrupt; external name 'SPI1_interrupt';
+procedure SPI2_interrupt; external name 'SPI2_interrupt';
+procedure USART1_interrupt; external name 'USART1_interrupt';
+procedure USART2_interrupt; external name 'USART2_interrupt';
+procedure USART3_interrupt; external name 'USART3_interrupt';
+procedure EXTI15_10_interrupt; external name 'EXTI15_10_interrupt';
+procedure RTC_Alarm_interrupt; external name 'RTC_Alarm_interrupt';
+procedure USBWakeUp_interrupt; external name 'USBWakeUp_interrupt';
+procedure TIM8_BRK_interrupt; external name 'TIM8_BRK_interrupt';
+procedure TIM8_UP_interrupt; external name 'TIM8_UP_interrupt';
+procedure TIM8_TRG_COM_interrupt; external name 'TIM8_TRG_COM_interrupt';
+procedure TIM8_CC_interrupt; external name 'TIM8_CC_interrupt';
+procedure ADC3_interrupt; external name 'ADC3_interrupt';
+procedure FMC_interrupt; external name 'FMC_interrupt';
+procedure SPI3_interrupt; external name 'SPI3_interrupt';
+procedure UART4_interrupt; external name 'UART4_interrupt';
+procedure UART5_interrupt; external name 'UART5_interrupt';
+procedure TIM6_DAC_interrupt; external name 'TIM6_DAC_interrupt';
+procedure TIM7_interrupt; external name 'TIM7_interrupt';
+procedure DMA2_Channel1_interrupt; external name 'DMA2_Channel1_interrupt';
+procedure DMA2_Channel2_interrupt; external name 'DMA2_Channel2_interrupt';
+procedure DMA2_Channel3_interrupt; external name 'DMA2_Channel3_interrupt';
+procedure DMA2_Channel4_interrupt; external name 'DMA2_Channel4_interrupt';
+procedure DMA2_Channel5_interrupt; external name 'DMA2_Channel5_interrupt';
+procedure ADC4_interrupt; external name 'ADC4_interrupt';
+procedure COMP1_2_3_interrupt; external name 'COMP1_2_3_interrupt';
+procedure COMP4_5_6_interrupt; external name 'COMP4_5_6_interrupt';
+procedure COMP7_interrupt; external name 'COMP7_interrupt';
+procedure I2C3_EV_interrupt; external name 'I2C3_EV_interrupt';
+procedure I2C3_ER_interrupt; external name 'I2C3_ER_interrupt';
+procedure USB_HP_interrupt; external name 'USB_HP_interrupt';
+procedure USB_LP_interrupt; external name 'USB_LP_interrupt';
+procedure USBWakeUp_RMP_interrupt; external name 'USBWakeUp_RMP_interrupt';
+procedure TIM20_BRK_interrupt; external name 'TIM20_BRK_interrupt';
+procedure TIM20_UP_interrupt; external name 'TIM20_UP_interrupt';
+procedure TIM20_TRG_COM_interrupt; external name 'TIM20_TRG_COM_interrupt';
+procedure TIM20_CC_interrupt; external name 'TIM20_CC_interrupt';
+procedure FPU_interrupt; external name 'FPU_interrupt';
+procedure SPI4_interrupt; external name 'SPI4_interrupt';
+
+{$i cortexm4f_start.inc}
+
+procedure Vectors; assembler; nostackframe;
+label interrupt_vectors;
+asm
+  .section ".init.interrupt_vectors"
+  interrupt_vectors:
+  .long _stack_top
+  .long Startup
+  .long NonMaskableInt_interrupt
+  .long HardFault_interrupt
+  .long MemoryManagement_interrupt
+  .long BusFault_interrupt
+  .long UsageFault_interrupt
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long SVCall_interrupt
+  .long DebugMonitor_interrupt
+  .long 0
+  .long PendSV_interrupt
+  .long SysTick_interrupt
+  .long WWDG_interrupt
+  .long PVD_interrupt
+  .long TAMP_STAMP_interrupt
+  .long RTC_WKUP_interrupt
+  .long FLASH_interrupt
+  .long RCC_interrupt
+  .long EXTI0_interrupt
+  .long EXTI1_interrupt
+  .long EXTI2_TSC_interrupt
+  .long EXTI3_interrupt
+  .long EXTI4_interrupt
+  .long DMA1_Channel1_interrupt
+  .long DMA1_Channel2_interrupt
+  .long DMA1_Channel3_interrupt
+  .long DMA1_Channel4_interrupt
+  .long DMA1_Channel5_interrupt
+  .long DMA1_Channel6_interrupt
+  .long DMA1_Channel7_interrupt
+  .long ADC1_2_interrupt
+  .long USB_HP_CAN_TX_interrupt
+  .long USB_LP_CAN_RX0_interrupt
+  .long CAN_RX1_interrupt
+  .long CAN_SCE_interrupt
+  .long EXTI9_5_interrupt
+  .long TIM1_BRK_TIM15_interrupt
+  .long TIM1_UP_TIM16_interrupt
+  .long TIM1_TRG_COM_TIM17_interrupt
+  .long TIM1_CC_interrupt
+  .long TIM2_interrupt
+  .long TIM3_interrupt
+  .long TIM4_interrupt
+  .long I2C1_EV_interrupt
+  .long I2C1_ER_interrupt
+  .long I2C2_EV_interrupt
+  .long I2C2_ER_interrupt
+  .long SPI1_interrupt
+  .long SPI2_interrupt
+  .long USART1_interrupt
+  .long USART2_interrupt
+  .long USART3_interrupt
+  .long EXTI15_10_interrupt
+  .long RTC_Alarm_interrupt
+  .long USBWakeUp_interrupt
+  .long TIM8_BRK_interrupt
+  .long TIM8_UP_interrupt
+  .long TIM8_TRG_COM_interrupt
+  .long TIM8_CC_interrupt
+  .long ADC3_interrupt
+  .long FMC_interrupt
+  .long 0
+  .long 0
+  .long SPI3_interrupt
+  .long UART4_interrupt
+  .long UART5_interrupt
+  .long TIM6_DAC_interrupt
+  .long TIM7_interrupt
+  .long DMA2_Channel1_interrupt
+  .long DMA2_Channel2_interrupt
+  .long DMA2_Channel3_interrupt
+  .long DMA2_Channel4_interrupt
+  .long DMA2_Channel5_interrupt
+  .long ADC4_interrupt
+  .long 0
+  .long 0
+  .long COMP1_2_3_interrupt
+  .long COMP4_5_6_interrupt
+  .long COMP7_interrupt
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long I2C3_EV_interrupt
+  .long I2C3_ER_interrupt
+  .long USB_HP_interrupt
+  .long USB_LP_interrupt
+  .long USBWakeUp_RMP_interrupt
+  .long TIM20_BRK_interrupt
+  .long TIM20_UP_interrupt
+  .long TIM20_TRG_COM_interrupt
+  .long TIM20_CC_interrupt
+  .long FPU_interrupt
+  .long 0
+  .long 0
+  .long SPI4_interrupt
+  .weak NonMaskableInt_interrupt
+  .weak HardFault_interrupt
+  .weak MemoryManagement_interrupt
+  .weak BusFault_interrupt
+  .weak UsageFault_interrupt
+  .weak SVCall_interrupt
+  .weak DebugMonitor_interrupt
+  .weak PendSV_interrupt
+  .weak SysTick_interrupt
+  .weak WWDG_interrupt
+  .weak PVD_interrupt
+  .weak TAMP_STAMP_interrupt
+  .weak RTC_WKUP_interrupt
+  .weak FLASH_interrupt
+  .weak RCC_interrupt
+  .weak EXTI0_interrupt
+  .weak EXTI1_interrupt
+  .weak EXTI2_TSC_interrupt
+  .weak EXTI3_interrupt
+  .weak EXTI4_interrupt
+  .weak DMA1_Channel1_interrupt
+  .weak DMA1_Channel2_interrupt
+  .weak DMA1_Channel3_interrupt
+  .weak DMA1_Channel4_interrupt
+  .weak DMA1_Channel5_interrupt
+  .weak DMA1_Channel6_interrupt
+  .weak DMA1_Channel7_interrupt
+  .weak ADC1_2_interrupt
+  .weak USB_HP_CAN_TX_interrupt
+  .weak USB_LP_CAN_RX0_interrupt
+  .weak CAN_RX1_interrupt
+  .weak CAN_SCE_interrupt
+  .weak EXTI9_5_interrupt
+  .weak TIM1_BRK_TIM15_interrupt
+  .weak TIM1_UP_TIM16_interrupt
+  .weak TIM1_TRG_COM_TIM17_interrupt
+  .weak TIM1_CC_interrupt
+  .weak TIM2_interrupt
+  .weak TIM3_interrupt
+  .weak TIM4_interrupt
+  .weak I2C1_EV_interrupt
+  .weak I2C1_ER_interrupt
+  .weak I2C2_EV_interrupt
+  .weak I2C2_ER_interrupt
+  .weak SPI1_interrupt
+  .weak SPI2_interrupt
+  .weak USART1_interrupt
+  .weak USART2_interrupt
+  .weak USART3_interrupt
+  .weak EXTI15_10_interrupt
+  .weak RTC_Alarm_interrupt
+  .weak USBWakeUp_interrupt
+  .weak TIM8_BRK_interrupt
+  .weak TIM8_UP_interrupt
+  .weak TIM8_TRG_COM_interrupt
+  .weak TIM8_CC_interrupt
+  .weak ADC3_interrupt
+  .weak FMC_interrupt
+  .weak SPI3_interrupt
+  .weak UART4_interrupt
+  .weak UART5_interrupt
+  .weak TIM6_DAC_interrupt
+  .weak TIM7_interrupt
+  .weak DMA2_Channel1_interrupt
+  .weak DMA2_Channel2_interrupt
+  .weak DMA2_Channel3_interrupt
+  .weak DMA2_Channel4_interrupt
+  .weak DMA2_Channel5_interrupt
+  .weak ADC4_interrupt
+  .weak COMP1_2_3_interrupt
+  .weak COMP4_5_6_interrupt
+  .weak COMP7_interrupt
+  .weak I2C3_EV_interrupt
+  .weak I2C3_ER_interrupt
+  .weak USB_HP_interrupt
+  .weak USB_LP_interrupt
+  .weak USBWakeUp_RMP_interrupt
+  .weak TIM20_BRK_interrupt
+  .weak TIM20_UP_interrupt
+  .weak TIM20_TRG_COM_interrupt
+  .weak TIM20_CC_interrupt
+  .weak FPU_interrupt
+  .weak SPI4_interrupt
+  .set NonMaskableInt_interrupt, HaltProc
+  .set HardFault_interrupt, HaltProc
+  .set MemoryManagement_interrupt, HaltProc
+  .set BusFault_interrupt, HaltProc
+  .set UsageFault_interrupt, HaltProc
+  .set SVCall_interrupt, HaltProc
+  .set DebugMonitor_interrupt, HaltProc
+  .set PendSV_interrupt, HaltProc
+  .set SysTick_interrupt, HaltProc
+  .set WWDG_interrupt, HaltProc
+  .set PVD_interrupt, HaltProc
+  .set TAMP_STAMP_interrupt, HaltProc
+  .set RTC_WKUP_interrupt, HaltProc
+  .set FLASH_interrupt, HaltProc
+  .set RCC_interrupt, HaltProc
+  .set EXTI0_interrupt, HaltProc
+  .set EXTI1_interrupt, HaltProc
+  .set EXTI2_TSC_interrupt, HaltProc
+  .set EXTI3_interrupt, HaltProc
+  .set EXTI4_interrupt, HaltProc
+  .set DMA1_Channel1_interrupt, HaltProc
+  .set DMA1_Channel2_interrupt, HaltProc
+  .set DMA1_Channel3_interrupt, HaltProc
+  .set DMA1_Channel4_interrupt, HaltProc
+  .set DMA1_Channel5_interrupt, HaltProc
+  .set DMA1_Channel6_interrupt, HaltProc
+  .set DMA1_Channel7_interrupt, HaltProc
+  .set ADC1_2_interrupt, HaltProc
+  .set USB_HP_CAN_TX_interrupt, HaltProc
+  .set USB_LP_CAN_RX0_interrupt, HaltProc
+  .set CAN_RX1_interrupt, HaltProc
+  .set CAN_SCE_interrupt, HaltProc
+  .set EXTI9_5_interrupt, HaltProc
+  .set TIM1_BRK_TIM15_interrupt, HaltProc
+  .set TIM1_UP_TIM16_interrupt, HaltProc
+  .set TIM1_TRG_COM_TIM17_interrupt, HaltProc
+  .set TIM1_CC_interrupt, HaltProc
+  .set TIM2_interrupt, HaltProc
+  .set TIM3_interrupt, HaltProc
+  .set TIM4_interrupt, HaltProc
+  .set I2C1_EV_interrupt, HaltProc
+  .set I2C1_ER_interrupt, HaltProc
+  .set I2C2_EV_interrupt, HaltProc
+  .set I2C2_ER_interrupt, HaltProc
+  .set SPI1_interrupt, HaltProc
+  .set SPI2_interrupt, HaltProc
+  .set USART1_interrupt, HaltProc
+  .set USART2_interrupt, HaltProc
+  .set USART3_interrupt, HaltProc
+  .set EXTI15_10_interrupt, HaltProc
+  .set RTC_Alarm_interrupt, HaltProc
+  .set USBWakeUp_interrupt, HaltProc
+  .set TIM8_BRK_interrupt, HaltProc
+  .set TIM8_UP_interrupt, HaltProc
+  .set TIM8_TRG_COM_interrupt, HaltProc
+  .set TIM8_CC_interrupt, HaltProc
+  .set ADC3_interrupt, HaltProc
+  .set FMC_interrupt, HaltProc
+  .set SPI3_interrupt, HaltProc
+  .set UART4_interrupt, HaltProc
+  .set UART5_interrupt, HaltProc
+  .set TIM6_DAC_interrupt, HaltProc
+  .set TIM7_interrupt, HaltProc
+  .set DMA2_Channel1_interrupt, HaltProc
+  .set DMA2_Channel2_interrupt, HaltProc
+  .set DMA2_Channel3_interrupt, HaltProc
+  .set DMA2_Channel4_interrupt, HaltProc
+  .set DMA2_Channel5_interrupt, HaltProc
+  .set ADC4_interrupt, HaltProc
+  .set COMP1_2_3_interrupt, HaltProc
+  .set COMP4_5_6_interrupt, HaltProc
+  .set COMP7_interrupt, HaltProc
+  .set I2C3_EV_interrupt, HaltProc
+  .set I2C3_ER_interrupt, HaltProc
+  .set USB_HP_interrupt, HaltProc
+  .set USB_LP_interrupt, HaltProc
+  .set USBWakeUp_RMP_interrupt, HaltProc
+  .set TIM20_BRK_interrupt, HaltProc
+  .set TIM20_UP_interrupt, HaltProc
+  .set TIM20_TRG_COM_interrupt, HaltProc
+  .set TIM20_CC_interrupt, HaltProc
+  .set FPU_interrupt, HaltProc
+  .set SPI4_interrupt, HaltProc
+  .text
+end;
+end.
diff -Naur fpc-save/rtl/embedded/arm/stm32f318xx.pp fpc/rtl/embedded/arm/stm32f318xx.pp
--- fpc-save/rtl/embedded/arm/stm32f318xx.pp	1970-01-01 01:00:00.000000000 +0100
+++ fpc/rtl/embedded/arm/stm32f318xx.pp	2018-03-02 17:07:16.000000000 +0100
@@ -0,0 +1,810 @@
+unit stm32f318xx;
+interface
+{$PACKRECORDS C}
+{$GOTO ON}
+// *
+// ******************************************************************************
+// * @file    stm32f318xx.h
+// * @author  MCD Application Team
+//   CMSIS STM32F318xx Devices Peripheral Access Layer Header File.
+// *
+// *          This file contains:
+// *           - Data structures and the address mapping for all peripherals
+// *           - Peripheral's registers declarations and bits definition
+// *           - Macros to access peripheral’s registers hardware
+// *
+// ******************************************************************************
+// * @attention
+// *
+// * <h2><center>&copy; COPYRIGHT(c) 2016 STMicroelectronics</center></h2>
+// *
+// * Redistribution and use in source and binary forms, with or without modification,
+// * are permitted provided that the following conditions are met:
+// *   1. Redistributions of source code must retain the above copyright notice,
+// *      this list of conditions and the following disclaimer.
+// *   2. Redistributions in binary form must reproduce the above copyright notice,
+// *      this list of conditions and the following disclaimer in the documentation
+// *      and/or other materials provided with the distribution.
+// *   3. Neither the name of STMicroelectronics nor the names of its contributors
+// *      may be used to endorse or promote products derived from this software
+// *      without specific prior written permission.
+// *
+// * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
+// * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
+// * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+// * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE
+// * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
+// * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
+// * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER
+// * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+// * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
+// * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
+// *
+// ******************************************************************************
+// Configuration of the Cortex-M4 Processor and Core Peripherals
+// STM32F318xx devices Interrupt Number Definition, according to the selected device
+// *        in @ref Library_configuration_section
+
+type
+  TIRQn_Enum   = (
+    NonMaskableInt_IRQn = -14,        // 2 Non Maskable Interrupt
+    HardFault_IRQn = -13,             // 3 Cortex-M4 Hard Fault Interrupt
+    MemoryManagement_IRQn = -12,      // 4 Cortex-M4 Memory Management Interrupt
+    BusFault_IRQn = -11,              // 5 Cortex-M4 Bus Fault Interrupt
+    UsageFault_IRQn = -10,            // 6 Cortex-M4 Usage Fault Interrupt
+    SVCall_IRQn = -5,                 // 11 Cortex-M4 SV Call Interrupt
+    DebugMonitor_IRQn = -4,           // 12 Cortex-M4 Debug Monitor Interrupt
+    PendSV_IRQn = -2,                 // 14 Cortex-M4 Pend SV Interrupt
+    SysTick_IRQn = -1,                // 15 Cortex-M4 System Tick Interrupt
+    WWDG_IRQn  = 0,                   // Window WatchDog Interrupt
+    TAMP_STAMP_IRQn = 2,              // Tamper and TimeStamp interrupts through the EXTI line 19
+    RTC_WKUP_IRQn = 3,                // RTC Wakeup interrupt through the EXTI line 20
+    FLASH_IRQn = 4,                   // FLASH global Interrupt
+    RCC_IRQn   = 5,                   // RCC global Interrupt
+    EXTI0_IRQn = 6,                   // EXTI Line0 Interrupt
+    EXTI1_IRQn = 7,                   // EXTI Line1 Interrupt
+    EXTI2_TSC_IRQn = 8,               // EXTI Line2 Interrupt and Touch Sense Controller Interrupt
+    EXTI3_IRQn = 9,                   // EXTI Line3 Interrupt
+    EXTI4_IRQn = 10,                  // EXTI Line4 Interrupt
+    DMA1_Channel1_IRQn = 11,          // DMA1 Channel 1 Interrupt
+    DMA1_Channel2_IRQn = 12,          // DMA1 Channel 2 Interrupt
+    DMA1_Channel3_IRQn = 13,          // DMA1 Channel 3 Interrupt
+    DMA1_Channel4_IRQn = 14,          // DMA1 Channel 4 Interrupt
+    DMA1_Channel5_IRQn = 15,          // DMA1 Channel 5 Interrupt
+    DMA1_Channel6_IRQn = 16,          // DMA1 Channel 6 Interrupt
+    DMA1_Channel7_IRQn = 17,          // DMA1 Channel 7 Interrupt
+    ADC1_IRQn  = 18,                  // ADC1 Interrupts
+    EXTI9_5_IRQn = 23,                // External Line[9:5] Interrupts
+    TIM1_BRK_TIM15_IRQn = 24,         // TIM1 Break and TIM15 Interrupts
+    TIM1_UP_TIM16_IRQn = 25,          // TIM1 Update and TIM16 Interrupts
+    TIM1_TRG_COM_TIM17_IRQn = 26,     // TIM1 Trigger and Commutation and TIM17 Interrupt
+    TIM1_CC_IRQn = 27,                // TIM1 Capture Compare Interrupt
+    TIM2_IRQn  = 28,                  // TIM2 global Interrupt
+    I2C1_EV_IRQn = 31,                // I2C1 Event Interrupt & EXTI Line23 Interrupt (I2C1 wakeup)
+    I2C1_ER_IRQn = 32,                // I2C1 Error Interrupt
+    I2C2_EV_IRQn = 33,                // I2C2 Event Interrupt & EXTI Line24 Interrupt (I2C2 wakeup)
+    I2C2_ER_IRQn = 34,                // I2C2 Error Interrupt
+    SPI2_IRQn  = 36,                  // SPI2 global Interrupt
+    USART1_IRQn = 37,                 // USART1 global Interrupt & EXTI Line25 Interrupt (USART1 wakeup)
+    USART2_IRQn = 38,                 // USART2 global Interrupt & EXTI Line26 Interrupt (USART2 wakeup)
+    USART3_IRQn = 39,                 // USART3 global Interrupt & EXTI Line28 Interrupt (USART3 wakeup)
+    EXTI15_10_IRQn = 40,              // External Line[15:10] Interrupts
+    RTC_Alarm_IRQn = 41,              // RTC Alarm (A and B) through EXTI Line 17 Interrupt
+    SPI3_IRQn  = 51,                  // SPI3 global Interrupt
+    TIM6_DAC_IRQn = 54,               // TIM6 global and DAC underrun error Interrupt
+    COMP2_IRQn = 64,                  // COMP2 global Interrupt via EXTI Line22
+    COMP4_6_IRQn = 65,                // COMP4 and COMP6 global Interrupt via EXTI Line30 and 32
+    I2C3_EV_IRQn = 72,                // I2C3 Event Interrupt & EXTI Line27 Interrupt (I2C3 wakeup)
+    I2C3_ER_IRQn = 73,                // I2C3 Error Interrupt
+    FPU_IRQn   = 81                   // Floating point Interrupt
+  );
+
+  TADC_Registers = record
+    ISR        : longword;            // ADC Interrupt and Status Register
+    IER        : longword;            // ADC Interrupt Enable Register
+    CR         : longword;            // ADC control register
+    CFGR       : longword;            // ADC Configuration register
+    RESERVED0  : longword;            // Reserved, 0x010
+    SMPR1      : longword;            // ADC sample time register 1
+    SMPR2      : longword;            // ADC sample time register 2
+    RESERVED1  : longword;            // Reserved, 0x01C
+    TR1        : longword;            // ADC watchdog threshold register 1
+    TR2        : longword;            // ADC watchdog threshold register 2
+    TR3        : longword;            // ADC watchdog threshold register 3
+    RESERVED2  : longword;            // Reserved, 0x02C
+    SQR1       : longword;            // ADC regular sequence register 1
+    SQR2       : longword;            // ADC regular sequence register 2
+    SQR3       : longword;            // ADC regular sequence register 3
+    SQR4       : longword;            // ADC regular sequence register 4
+    DR         : longword;            // ADC regular data register
+    RESERVED3  : longword;            // Reserved, 0x044
+    RESERVED4  : longword;            // Reserved, 0x048
+    JSQR       : longword;            // ADC injected sequence register
+    RESERVED5  : array[0..3] of longword; // Reserved, 0x050 - 0x05C
+    OFR1       : longword;            // ADC offset register 1
+    OFR2       : longword;            // ADC offset register 2
+    OFR3       : longword;            // ADC offset register 3
+    OFR4       : longword;            // ADC offset register 4
+    RESERVED6  : array[0..3] of longword; // Reserved, 0x070 - 0x07C
+    JDR1       : longword;            // ADC injected data register 1
+    JDR2       : longword;            // ADC injected data register 2
+    JDR3       : longword;            // ADC injected data register 3
+    JDR4       : longword;            // ADC injected data register 4
+    RESERVED7  : array[0..3] of longword; // Reserved, 0x090 - 0x09C
+    AWD2CR     : longword;            // ADC  Analog Watchdog 2 Configuration Register
+    AWD3CR     : longword;            // ADC  Analog Watchdog 3 Configuration Register
+    RESERVED8  : longword;            // Reserved, 0x0A8
+    RESERVED9  : longword;            // Reserved, 0x0AC
+    DIFSEL     : longword;            // ADC  Differential Mode Selection Register
+    CALFACT    : longword;            // ADC  Calibration Factors
+  end;
+
+  TADC_COMMON_Registers = record
+    CSR        : longword;            // ADC Common status register
+    RESERVED   : longword;            // Reserved, ADC1/3 base address + 0x304
+    CCR        : longword;            // ADC common control register
+    CDR        : longword;            // ADC common regular data register for dual
+  end;
+
+  TCOMP_Registers = record
+    CSR        : longword;            // COMP control and status register
+  end;
+
+  TCOMP_COMMON_Registers = record
+    CSR        : longword;            // COMP control and status register, used for bits common to several COMP instances
+  end;
+
+  TCRC_Registers = record
+    DR         : longword;            // CRC Data register
+    IDR        : byte;                // CRC Independent data register
+    RESERVED0  : byte;                // Reserved,                                                    0x05
+    RESERVED1  : word;                // Reserved,                                                    0x06
+    CR         : longword;            // CRC Control register
+    RESERVED2  : longword;            // Reserved,                                                    0x0C
+    INIT       : longword;            // Initial CRC value register
+    POL        : longword;            // CRC polynomial register
+  end;
+
+  TDAC_Registers = record
+    CR         : longword;            // DAC control register
+    SWTRIGR    : longword;            // DAC software trigger register
+    DHR12R1    : longword;            // DAC channel1 12-bit right-aligned data holding register
+    DHR12L1    : longword;            // DAC channel1 12-bit left aligned data holding register
+    DHR8R1     : longword;            // DAC channel1 8-bit right aligned data holding register
+    RESERVED0  : longword;            // Reserved,                                                                0x14
+    RESERVED1  : longword;            // Reserved,                                                                0x18
+    RESERVED2  : longword;            // Reserved,                                                                0x1C
+    DHR12RD    : longword;            // Dual DAC 12-bit right-aligned data holding register
+    DHR12LD    : longword;            // DUAL DAC 12-bit left aligned data holding register
+    DHR8RD     : longword;            // DUAL DAC 8-bit right aligned data holding register
+    DOR1       : longword;            // DAC channel1 data output register
+    RESERVED3  : longword;            // Reserved,                                                                0x30
+    SR         : longword;            // DAC status register
+  end;
+
+  TDBGMCU_Registers = record
+    IDCODE     : longword;            // MCU device ID code
+    CR         : longword;            // Debug MCU configuration register
+    APB1FZ     : longword;            // Debug MCU APB1 freeze register
+    APB2FZ     : longword;            // Debug MCU APB2 freeze register
+  end;
+
+  TDMA_CHANNEL_Registers = record
+    CCR        : longword;            // DMA channel x configuration register
+    CNDTR      : longword;            // DMA channel x number of data register
+    CPAR       : longword;            // DMA channel x peripheral address register
+    CMAR       : longword;            // DMA channel x memory address register
+  end;
+
+  TDMA_Registers = record
+    ISR        : longword;            // DMA interrupt status register
+    IFCR       : longword;            // DMA interrupt flag clear register
+  end;
+
+  TEXTI_Registers = record
+    IMR        : longword;            // XTI Interrupt mask register
+    EMR        : longword;            // XTI Event mask register
+    RTSR       : longword;            // XTI Rising trigger selection register
+    FTSR       : longword;            // XTI Falling trigger selection register
+    SWIER      : longword;            // XTI Software interrupt event register
+    PR         : longword;            // XTI Pending register
+    RESERVED1  : longword;            // Reserved, 0x18
+    RESERVED2  : longword;            // Reserved, 0x1C
+    IMR2       : longword;            // EXTI Interrupt mask register
+    EMR2       : longword;            // EXTI Event mask register
+    RTSR2      : longword;            // EXTI Rising trigger selection register
+    FTSR2      : longword;            // EXTI Falling trigger selection register
+    SWIER2     : longword;            // EXTI Software interrupt event register
+    PR2        : longword;            // EXTI Pending register
+  end;
+
+  TFLASH_Registers = record
+    ACR        : longword;            // FLASH access control register
+    KEYR       : longword;            // FLASH key register
+    OPTKEYR    : longword;            // FLASH option key register
+    SR         : longword;            // FLASH status register
+    CR         : longword;            // FLASH control register
+    AR         : longword;            // FLASH address register
+    RESERVED   : longword;            // Reserved, 0x18
+    OBR        : longword;            // FLASH Option byte register
+    WRPR       : longword;            // FLASH Write register
+  end;
+
+  TOB_Registers = record
+    RDP        : word;                // LASH option byte Read protection
+    USER       : word;                // LASH option byte user options
+    RESERVED0  : word;                // Reserved,                                                     0x04
+    RESERVED1  : word;                // Reserved,                                                     0x06
+    WRP0       : word;                // LASH option byte write protection 0
+    WRP1       : word;                // LASH option byte write protection 1
+    WRP2       : word;                // LASH option byte write protection 2
+    WRP3       : word;                // LASH option byte write protection 3
+  end;
+
+  TGPIO_Registers = record
+    MODER      : longword;            // GPIO port mode register
+    OTYPER     : longword;            // GPIO port output type register
+    OSPEEDR    : longword;            // GPIO port output speed register
+    PUPDR      : longword;            // GPIO port pull-up/pull-down register
+    IDR        : longword;            // GPIO port input data register
+    ODR        : longword;            // GPIO port output data register
+    BSRR       : longword;            // GPIO port bit set/reset register
+    LCKR       : longword;            // GPIO port configuration lock register
+    AFR        : array[0..1] of longword; // GPIO alternate function registers
+    BRR        : longword;            // GPIO bit reset register
+  end;
+
+  TOPAMP_Registers = record
+    CSR        : longword;            // OPAMP control and status register
+  end;
+
+  TSYSCFG_Registers = record
+    CFGR1      : longword;            // SYSCFG configuration register 1
+    RESERVED   : longword;            // Reserved,                                                             0x04
+    EXTICR     : array[0..3] of longword; // SYSCFG external interrupt configuration registers
+    CFGR2      : longword;            // SYSCFG configuration register 2
+  end;
+
+  TI2C_Registers = record
+    CR1        : longword;            // I2C Control register 1
+    CR2        : longword;            // I2C Control register 2
+    OAR1       : longword;            // I2C Own address 1 register
+    OAR2       : longword;            // I2C Own address 2 register
+    TIMINGR    : longword;            // I2C Timing register
+    TIMEOUTR   : longword;            // I2C Timeout register
+    ISR        : longword;            // I2C Interrupt and status register
+    ICR        : longword;            // I2C Interrupt clear register
+    PECR       : longword;            // I2C PEC register
+    RXDR       : longword;            // I2C Receive data register
+    TXDR       : longword;            // I2C Transmit data register
+  end;
+
+  TIWDG_Registers = record
+    KR         : longword;            // IWDG Key register
+    PR         : longword;            // IWDG Prescaler register
+    RLR        : longword;            // IWDG Reload register
+    SR         : longword;            // IWDG Status register
+    WINR       : longword;            // IWDG Window register
+  end;
+
+  TPWR_Registers = record
+    CR         : longword;            // PWR power control register
+    CSR        : longword;            // PWR power control/status register
+  end;
+
+  TRCC_Registers = record
+    CR         : longword;            // RCC clock control register
+    CFGR       : longword;            // RCC clock configuration register
+    CIR        : longword;            // RCC clock interrupt register
+    APB2RSTR   : longword;            // RCC APB2 peripheral reset register
+    APB1RSTR   : longword;            // RCC APB1 peripheral reset register
+    AHBENR     : longword;            // RCC AHB peripheral clock register
+    APB2ENR    : longword;            // RCC APB2 peripheral clock enable register
+    APB1ENR    : longword;            // RCC APB1 peripheral clock enable register
+    BDCR       : longword;            // RCC Backup domain control register
+    CSR        : longword;            // RCC clock control & status register
+    AHBRSTR    : longword;            // RCC AHB peripheral reset register
+    CFGR2      : longword;            // RCC clock configuration register 2
+    CFGR3      : longword;            // RCC clock configuration register 3
+  end;
+
+  TRTC_Registers = record
+    TR         : longword;            // RTC time register
+    DR         : longword;            // RTC date register
+    CR         : longword;            // RTC control register
+    ISR        : longword;            // RTC initialization and status register
+    PRER       : longword;            // RTC prescaler register
+    WUTR       : longword;            // RTC wakeup timer register
+    RESERVED0  : longword;            // Reserved, 0x18
+    ALRMAR     : longword;            // RTC alarm A register
+    ALRMBR     : longword;            // RTC alarm B register
+    WPR        : longword;            // RTC write protection register
+    SSR        : longword;            // RTC sub second register
+    SHIFTR     : longword;            // RTC shift control register
+    TSTR       : longword;            // RTC time stamp time register
+    TSDR       : longword;            // RTC time stamp date register
+    TSSSR      : longword;            // RTC time-stamp sub second register
+    CALR       : longword;            // RTC calibration register
+    TAFCR      : longword;            // RTC tamper and alternate function configuration register
+    ALRMASSR   : longword;            // RTC alarm A sub second register
+    ALRMBSSR   : longword;            // RTC alarm B sub second register
+    RESERVED7  : longword;            // Reserved, 0x4C
+    BKP0R      : longword;            // RTC backup register 0
+    BKP1R      : longword;            // RTC backup register 1
+    BKP2R      : longword;            // RTC backup register 2
+    BKP3R      : longword;            // RTC backup register 3
+    BKP4R      : longword;            // RTC backup register 4
+    BKP5R      : longword;            // RTC backup register 5
+    BKP6R      : longword;            // RTC backup register 6
+    BKP7R      : longword;            // RTC backup register 7
+    BKP8R      : longword;            // RTC backup register 8
+    BKP9R      : longword;            // RTC backup register 9
+    BKP10R     : longword;            // RTC backup register 10
+    BKP11R     : longword;            // RTC backup register 11
+    BKP12R     : longword;            // RTC backup register 12
+    BKP13R     : longword;            // RTC backup register 13
+    BKP14R     : longword;            // RTC backup register 14
+    BKP15R     : longword;            // RTC backup register 15
+    BKP16R     : longword;            // RTC backup register 16
+    BKP17R     : longword;            // RTC backup register 17
+    BKP18R     : longword;            // RTC backup register 18
+    BKP19R     : longword;            // RTC backup register 19
+  end;
+
+  TSPI_Registers = record
+    CR1        : longword;            // SPI Control register 1
+    CR2        : longword;            // SPI Control register 2
+    SR         : longword;            // SPI Status register
+    DR         : longword;            // SPI data register
+    CRCPR      : longword;            // SPI CRC polynomial register
+    RXCRCR     : longword;            // SPI Rx CRC register
+    TXCRCR     : longword;            // SPI Tx CRC register
+    I2SCFGR    : longword;            // SPI_I2S configuration register
+    I2SPR      : longword;            // SPI_I2S prescaler register
+  end;
+
+  TTIM_Registers = record
+    CR1        : longword;            // TIM control register 1
+    CR2        : longword;            // TIM control register 2
+    SMCR       : longword;            // TIM slave mode control register
+    DIER       : longword;            // TIM DMA/interrupt enable register
+    SR         : longword;            // TIM status register
+    EGR        : longword;            // TIM event generation register
+    CCMR1      : longword;            // TIM capture/compare mode register 1
+    CCMR2      : longword;            // TIM capture/compare mode register 2
+    CCER       : longword;            // TIM capture/compare enable register
+    CNT        : longword;            // TIM counter register
+    PSC        : longword;            // TIM prescaler
+    ARR        : longword;            // TIM auto-reload register
+    RCR        : longword;            // TIM repetition counter register
+    CCR1       : longword;            // TIM capture/compare register 1
+    CCR2       : longword;            // TIM capture/compare register 2
+    CCR3       : longword;            // TIM capture/compare register 3
+    CCR4       : longword;            // TIM capture/compare register 4
+    BDTR       : longword;            // TIM break and dead-time register
+    DCR        : longword;            // TIM DMA control register
+    DMAR       : longword;            // TIM DMA address for full transfer
+    &OR        : longword;            // TIM option register
+    CCMR3      : longword;            // TIM capture/compare mode register 3
+    CCR5       : longword;            // TIM capture/compare register5
+    CCR6       : longword;            // TIM capture/compare register 4
+  end;
+
+  TTSC_Registers = record
+    CR         : longword;            // TSC control register
+    IER        : longword;            // TSC interrupt enable register
+    ICR        : longword;            // TSC interrupt clear register
+    ISR        : longword;            // TSC interrupt status register
+    IOHCR      : longword;            // TSC I/O hysteresis control register
+    RESERVED1  : longword;            // Reserved
+    IOASCR     : longword;            // TSC I/O analog switch control register
+    RESERVED2  : longword;            // Reserved
+    IOSCR      : longword;            // TSC I/O sampling control register
+    RESERVED3  : longword;            // Reserved
+    IOCCR      : longword;            // TSC I/O channel control register
+    RESERVED4  : longword;            // Reserved
+    IOGCSR     : longword;            // TSC I/O group control status register
+    IOGXCR     : array[0..7] of longword; // TSC I/O group x counter register
+  end;
+
+  TUSART_Registers = record
+    CR1        : longword;            // USART Control register 1
+    CR2        : longword;            // USART Control register 2
+    CR3        : longword;            // USART Control register 3
+    BRR        : longword;            // USART Baud rate register
+    GTPR       : longword;            // USART Guard time and prescaler register
+    RTOR       : longword;            // USART Receiver Time Out register
+    RQR        : longword;            // USART Request register
+    ISR        : longword;            // USART Interrupt and status register
+    ICR        : longword;            // USART Interrupt flag Clear register
+    RDR        : word;                // USART Receive Data register
+    RESERVED1  : word;                // Reserved, 0x26
+    TDR        : word;                // USART Transmit Data register
+    RESERVED2  : word;                // Reserved, 0x2A
+  end;
+
+  TWWDG_Registers = record
+    CR         : longword;            // WWDG Control register
+    CFR        : longword;            // WWDG Configuration register
+    SR         : longword;            // WWDG Status register
+  end;
+
+const
+  FLASH_BASE   = $08000000;           // FLASH base address in the alias region
+  SRAM_BASE    = $20000000;           // SRAM base address in the alias region
+  PERIPH_BASE  = $40000000;           // Peripheral base address in the alias region
+  SRAM_BB_BASE = $22000000;           // SRAM base address in the bit-band region
+  PERIPH_BB_BASE = $42000000;         // Peripheral base address in the bit-band region
+  APB1PERIPH_BASE = $40000000;
+  APB2PERIPH_BASE = PERIPH_BASE + $00010000;
+  AHB1PERIPH_BASE = PERIPH_BASE + $00020000;
+  AHB2PERIPH_BASE = PERIPH_BASE + $08000000;
+  AHB3PERIPH_BASE = PERIPH_BASE + $10000000;
+  TIM2_BASE    = APB1PERIPH_BASE + $00000000;
+  TIM6_BASE    = APB1PERIPH_BASE + $00001000;
+  RTC_BASE     = APB1PERIPH_BASE + $00002800;
+  WWDG_BASE    = APB1PERIPH_BASE + $00002C00;
+  IWDG_BASE    = APB1PERIPH_BASE + $00003000;
+  I2S2ext_BASE = APB1PERIPH_BASE + $00003400;
+  SPI2_BASE    = APB1PERIPH_BASE + $00003800;
+  SPI3_BASE    = APB1PERIPH_BASE + $00003C00;
+  I2S3ext_BASE = APB1PERIPH_BASE + $00004000;
+  USART2_BASE  = APB1PERIPH_BASE + $00004400;
+  USART3_BASE  = APB1PERIPH_BASE + $00004800;
+  I2C1_BASE    = APB1PERIPH_BASE + $00005400;
+  I2C2_BASE    = APB1PERIPH_BASE + $00005800;
+  PWR_BASE     = APB1PERIPH_BASE + $00007000;
+  DAC1_BASE    = APB1PERIPH_BASE + $00007400;
+  DAC_BASE     = APB1PERIPH_BASE + $00007400;
+  I2C3_BASE    = APB1PERIPH_BASE + $00007800;
+  SYSCFG_BASE  = APB2PERIPH_BASE + $00000000;
+  COMP2_BASE   = APB2PERIPH_BASE + $00000020;
+  COMP4_BASE   = APB2PERIPH_BASE + $00000028;
+  COMP6_BASE   = APB2PERIPH_BASE + $00000030;
+  COMP_BASE    = APB2PERIPH_BASE + $00000020;
+  OPAMP2_BASE  = APB2PERIPH_BASE + $0000003C;
+  OPAMP_BASE   = APB2PERIPH_BASE + $0000003C;
+  EXTI_BASE    = APB2PERIPH_BASE + $00000400;
+  TIM1_BASE    = APB2PERIPH_BASE + $00002C00;
+  USART1_BASE  = APB2PERIPH_BASE + $00003800;
+  TIM15_BASE   = APB2PERIPH_BASE + $00004000;
+  TIM16_BASE   = APB2PERIPH_BASE + $00004400;
+  TIM17_BASE   = APB2PERIPH_BASE + $00004800;
+  DMA1_BASE    = AHB1PERIPH_BASE + $00000000;
+  DMA1_Channel1_BASE = AHB1PERIPH_BASE + $00000008;
+  DMA1_Channel2_BASE = AHB1PERIPH_BASE + $0000001C;
+  DMA1_Channel3_BASE = AHB1PERIPH_BASE + $00000030;
+  DMA1_Channel4_BASE = AHB1PERIPH_BASE + $00000044;
+  DMA1_Channel5_BASE = AHB1PERIPH_BASE + $00000058;
+  DMA1_Channel6_BASE = AHB1PERIPH_BASE + $0000006C;
+  DMA1_Channel7_BASE = AHB1PERIPH_BASE + $00000080;
+  RCC_BASE     = AHB1PERIPH_BASE + $00001000;
+  FLASH_R_BASE = AHB1PERIPH_BASE + $00002000; // Flash registers base address
+  OB_BASE      = $1FFFF800;           // Flash Option Bytes base address
+  FLASHSIZE_BASE = $1FFFF7CC;         // FLASH Size register base address
+  UID_BASE     = $1FFFF7AC;           // Unique device ID register base address
+  CRC_BASE     = AHB1PERIPH_BASE + $00003000;
+  TSC_BASE     = AHB1PERIPH_BASE + $00004000;
+  GPIOA_BASE   = AHB2PERIPH_BASE + $00000000;
+  GPIOB_BASE   = AHB2PERIPH_BASE + $00000400;
+  GPIOC_BASE   = AHB2PERIPH_BASE + $00000800;
+  GPIOD_BASE   = AHB2PERIPH_BASE + $00000C00;
+  GPIOF_BASE   = AHB2PERIPH_BASE + $00001400;
+  ADC1_BASE    = AHB3PERIPH_BASE + $00000000;
+  ADC1_COMMON_BASE = AHB3PERIPH_BASE + $00000300;
+  DBGMCU_BASE  = $E0042000;           // Debug MCU registers base address
+
+var
+  TIM2         : TTIM_Registers absolute TIM2_BASE;
+  TIM6         : TTIM_Registers absolute TIM6_BASE;
+  RTC          : TRTC_Registers absolute RTC_BASE;
+  WWDG         : TWWDG_Registers absolute WWDG_BASE;
+  IWDG         : TIWDG_Registers absolute IWDG_BASE;
+  I2S2ext      : TSPI_Registers absolute I2S2ext_BASE;
+  SPI2         : TSPI_Registers absolute SPI2_BASE;
+  SPI3         : TSPI_Registers absolute SPI3_BASE;
+  I2S3ext      : TSPI_Registers absolute I2S3ext_BASE;
+  USART2       : TUSART_Registers absolute USART2_BASE;
+  USART3       : TUSART_Registers absolute USART3_BASE;
+  I2C1         : TI2C_Registers absolute I2C1_BASE;
+  I2C2         : TI2C_Registers absolute I2C2_BASE;
+  I2C3         : TI2C_Registers absolute I2C3_BASE;
+  PWR          : TPWR_Registers absolute PWR_BASE;
+  DAC          : TDAC_Registers absolute DAC_BASE;
+  DAC1         : TDAC_Registers absolute DAC1_BASE;
+  COMP2        : TCOMP_Registers absolute COMP2_BASE;
+  COMP4        : TCOMP_Registers absolute COMP4_BASE;
+  COMP6        : TCOMP_Registers absolute COMP6_BASE;
+  COMP         : TCOMP_Registers absolute COMP_BASE;
+  OPAMP        : TOPAMP_Registers absolute OPAMP_BASE;
+  OPAMP2       : TOPAMP_Registers absolute OPAMP2_BASE;
+  SYSCFG       : TSYSCFG_Registers absolute SYSCFG_BASE;
+  EXTI         : TEXTI_Registers absolute EXTI_BASE;
+  TIM1         : TTIM_Registers absolute TIM1_BASE;
+  USART1       : TUSART_Registers absolute USART1_BASE;
+  TIM15        : TTIM_Registers absolute TIM15_BASE;
+  TIM16        : TTIM_Registers absolute TIM16_BASE;
+  TIM17        : TTIM_Registers absolute TIM17_BASE;
+  DBGMCU       : TDBGMCU_Registers absolute DBGMCU_BASE;
+  DMA1         : TDMA_Registers absolute DMA1_BASE;
+  DMA1_Channel1 : TDMA_Channel_Registers absolute DMA1_Channel1_BASE;
+  DMA1_Channel2 : TDMA_Channel_Registers absolute DMA1_Channel2_BASE;
+  DMA1_Channel3 : TDMA_Channel_Registers absolute DMA1_Channel3_BASE;
+  DMA1_Channel4 : TDMA_Channel_Registers absolute DMA1_Channel4_BASE;
+  DMA1_Channel5 : TDMA_Channel_Registers absolute DMA1_Channel5_BASE;
+  DMA1_Channel6 : TDMA_Channel_Registers absolute DMA1_Channel6_BASE;
+  DMA1_Channel7 : TDMA_Channel_Registers absolute DMA1_Channel7_BASE;
+  RCC          : TRCC_Registers absolute RCC_BASE;
+  FLASH        : TFLASH_Registers absolute FLASH_R_BASE;
+  OB           : TOB_Registers absolute OB_BASE;
+  CRC          : TCRC_Registers absolute CRC_BASE;
+  TSC          : TTSC_Registers absolute TSC_BASE;
+  GPIOA        : TGPIO_Registers absolute GPIOA_BASE;
+  GPIOB        : TGPIO_Registers absolute GPIOB_BASE;
+  GPIOC        : TGPIO_Registers absolute GPIOC_BASE;
+  GPIOD        : TGPIO_Registers absolute GPIOD_BASE;
+  GPIOF        : TGPIO_Registers absolute GPIOF_BASE;
+  ADC1         : TADC_Registers absolute ADC1_BASE;
+  ADC1_COMMON  : TADC_Common_Registers absolute ADC1_COMMON_BASE;
+
+implementation
+
+procedure NonMaskableInt_interrupt; external name 'NonMaskableInt_interrupt';
+procedure HardFault_interrupt; external name 'HardFault_interrupt';
+procedure MemoryManagement_interrupt; external name 'MemoryManagement_interrupt';
+procedure BusFault_interrupt; external name 'BusFault_interrupt';
+procedure UsageFault_interrupt; external name 'UsageFault_interrupt';
+procedure SVCall_interrupt; external name 'SVCall_interrupt';
+procedure DebugMonitor_interrupt; external name 'DebugMonitor_interrupt';
+procedure PendSV_interrupt; external name 'PendSV_interrupt';
+procedure SysTick_interrupt; external name 'SysTick_interrupt';
+procedure WWDG_interrupt; external name 'WWDG_interrupt';
+procedure TAMP_STAMP_interrupt; external name 'TAMP_STAMP_interrupt';
+procedure RTC_WKUP_interrupt; external name 'RTC_WKUP_interrupt';
+procedure FLASH_interrupt; external name 'FLASH_interrupt';
+procedure RCC_interrupt; external name 'RCC_interrupt';
+procedure EXTI0_interrupt; external name 'EXTI0_interrupt';
+procedure EXTI1_interrupt; external name 'EXTI1_interrupt';
+procedure EXTI2_TSC_interrupt; external name 'EXTI2_TSC_interrupt';
+procedure EXTI3_interrupt; external name 'EXTI3_interrupt';
+procedure EXTI4_interrupt; external name 'EXTI4_interrupt';
+procedure DMA1_Channel1_interrupt; external name 'DMA1_Channel1_interrupt';
+procedure DMA1_Channel2_interrupt; external name 'DMA1_Channel2_interrupt';
+procedure DMA1_Channel3_interrupt; external name 'DMA1_Channel3_interrupt';
+procedure DMA1_Channel4_interrupt; external name 'DMA1_Channel4_interrupt';
+procedure DMA1_Channel5_interrupt; external name 'DMA1_Channel5_interrupt';
+procedure DMA1_Channel6_interrupt; external name 'DMA1_Channel6_interrupt';
+procedure DMA1_Channel7_interrupt; external name 'DMA1_Channel7_interrupt';
+procedure ADC1_interrupt; external name 'ADC1_interrupt';
+procedure EXTI9_5_interrupt; external name 'EXTI9_5_interrupt';
+procedure TIM1_BRK_TIM15_interrupt; external name 'TIM1_BRK_TIM15_interrupt';
+procedure TIM1_UP_TIM16_interrupt; external name 'TIM1_UP_TIM16_interrupt';
+procedure TIM1_TRG_COM_TIM17_interrupt; external name 'TIM1_TRG_COM_TIM17_interrupt';
+procedure TIM1_CC_interrupt; external name 'TIM1_CC_interrupt';
+procedure TIM2_interrupt; external name 'TIM2_interrupt';
+procedure I2C1_EV_interrupt; external name 'I2C1_EV_interrupt';
+procedure I2C1_ER_interrupt; external name 'I2C1_ER_interrupt';
+procedure I2C2_EV_interrupt; external name 'I2C2_EV_interrupt';
+procedure I2C2_ER_interrupt; external name 'I2C2_ER_interrupt';
+procedure SPI2_interrupt; external name 'SPI2_interrupt';
+procedure USART1_interrupt; external name 'USART1_interrupt';
+procedure USART2_interrupt; external name 'USART2_interrupt';
+procedure USART3_interrupt; external name 'USART3_interrupt';
+procedure EXTI15_10_interrupt; external name 'EXTI15_10_interrupt';
+procedure RTC_Alarm_interrupt; external name 'RTC_Alarm_interrupt';
+procedure SPI3_interrupt; external name 'SPI3_interrupt';
+procedure TIM6_DAC_interrupt; external name 'TIM6_DAC_interrupt';
+procedure COMP2_interrupt; external name 'COMP2_interrupt';
+procedure COMP4_6_interrupt; external name 'COMP4_6_interrupt';
+procedure I2C3_EV_interrupt; external name 'I2C3_EV_interrupt';
+procedure I2C3_ER_interrupt; external name 'I2C3_ER_interrupt';
+procedure FPU_interrupt; external name 'FPU_interrupt';
+
+{$i cortexm4f_start.inc}
+
+procedure Vectors; assembler; nostackframe;
+label interrupt_vectors;
+asm
+  .section ".init.interrupt_vectors"
+  interrupt_vectors:
+  .long _stack_top
+  .long Startup
+  .long NonMaskableInt_interrupt
+  .long HardFault_interrupt
+  .long MemoryManagement_interrupt
+  .long BusFault_interrupt
+  .long UsageFault_interrupt
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long SVCall_interrupt
+  .long DebugMonitor_interrupt
+  .long 0
+  .long PendSV_interrupt
+  .long SysTick_interrupt
+  .long WWDG_interrupt
+  .long 0
+  .long TAMP_STAMP_interrupt
+  .long RTC_WKUP_interrupt
+  .long FLASH_interrupt
+  .long RCC_interrupt
+  .long EXTI0_interrupt
+  .long EXTI1_interrupt
+  .long EXTI2_TSC_interrupt
+  .long EXTI3_interrupt
+  .long EXTI4_interrupt
+  .long DMA1_Channel1_interrupt
+  .long DMA1_Channel2_interrupt
+  .long DMA1_Channel3_interrupt
+  .long DMA1_Channel4_interrupt
+  .long DMA1_Channel5_interrupt
+  .long DMA1_Channel6_interrupt
+  .long DMA1_Channel7_interrupt
+  .long ADC1_interrupt
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long EXTI9_5_interrupt
+  .long TIM1_BRK_TIM15_interrupt
+  .long TIM1_UP_TIM16_interrupt
+  .long TIM1_TRG_COM_TIM17_interrupt
+  .long TIM1_CC_interrupt
+  .long TIM2_interrupt
+  .long 0
+  .long 0
+  .long I2C1_EV_interrupt
+  .long I2C1_ER_interrupt
+  .long I2C2_EV_interrupt
+  .long I2C2_ER_interrupt
+  .long 0
+  .long SPI2_interrupt
+  .long USART1_interrupt
+  .long USART2_interrupt
+  .long USART3_interrupt
+  .long EXTI15_10_interrupt
+  .long RTC_Alarm_interrupt
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long SPI3_interrupt
+  .long 0
+  .long 0
+  .long TIM6_DAC_interrupt
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long COMP2_interrupt
+  .long COMP4_6_interrupt
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long I2C3_EV_interrupt
+  .long I2C3_ER_interrupt
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long FPU_interrupt
+  .weak NonMaskableInt_interrupt
+  .weak HardFault_interrupt
+  .weak MemoryManagement_interrupt
+  .weak BusFault_interrupt
+  .weak UsageFault_interrupt
+  .weak SVCall_interrupt
+  .weak DebugMonitor_interrupt
+  .weak PendSV_interrupt
+  .weak SysTick_interrupt
+  .weak WWDG_interrupt
+  .weak TAMP_STAMP_interrupt
+  .weak RTC_WKUP_interrupt
+  .weak FLASH_interrupt
+  .weak RCC_interrupt
+  .weak EXTI0_interrupt
+  .weak EXTI1_interrupt
+  .weak EXTI2_TSC_interrupt
+  .weak EXTI3_interrupt
+  .weak EXTI4_interrupt
+  .weak DMA1_Channel1_interrupt
+  .weak DMA1_Channel2_interrupt
+  .weak DMA1_Channel3_interrupt
+  .weak DMA1_Channel4_interrupt
+  .weak DMA1_Channel5_interrupt
+  .weak DMA1_Channel6_interrupt
+  .weak DMA1_Channel7_interrupt
+  .weak ADC1_interrupt
+  .weak EXTI9_5_interrupt
+  .weak TIM1_BRK_TIM15_interrupt
+  .weak TIM1_UP_TIM16_interrupt
+  .weak TIM1_TRG_COM_TIM17_interrupt
+  .weak TIM1_CC_interrupt
+  .weak TIM2_interrupt
+  .weak I2C1_EV_interrupt
+  .weak I2C1_ER_interrupt
+  .weak I2C2_EV_interrupt
+  .weak I2C2_ER_interrupt
+  .weak SPI2_interrupt
+  .weak USART1_interrupt
+  .weak USART2_interrupt
+  .weak USART3_interrupt
+  .weak EXTI15_10_interrupt
+  .weak RTC_Alarm_interrupt
+  .weak SPI3_interrupt
+  .weak TIM6_DAC_interrupt
+  .weak COMP2_interrupt
+  .weak COMP4_6_interrupt
+  .weak I2C3_EV_interrupt
+  .weak I2C3_ER_interrupt
+  .weak FPU_interrupt
+  .set NonMaskableInt_interrupt, HaltProc
+  .set HardFault_interrupt, HaltProc
+  .set MemoryManagement_interrupt, HaltProc
+  .set BusFault_interrupt, HaltProc
+  .set UsageFault_interrupt, HaltProc
+  .set SVCall_interrupt, HaltProc
+  .set DebugMonitor_interrupt, HaltProc
+  .set PendSV_interrupt, HaltProc
+  .set SysTick_interrupt, HaltProc
+  .set WWDG_interrupt, HaltProc
+  .set TAMP_STAMP_interrupt, HaltProc
+  .set RTC_WKUP_interrupt, HaltProc
+  .set FLASH_interrupt, HaltProc
+  .set RCC_interrupt, HaltProc
+  .set EXTI0_interrupt, HaltProc
+  .set EXTI1_interrupt, HaltProc
+  .set EXTI2_TSC_interrupt, HaltProc
+  .set EXTI3_interrupt, HaltProc
+  .set EXTI4_interrupt, HaltProc
+  .set DMA1_Channel1_interrupt, HaltProc
+  .set DMA1_Channel2_interrupt, HaltProc
+  .set DMA1_Channel3_interrupt, HaltProc
+  .set DMA1_Channel4_interrupt, HaltProc
+  .set DMA1_Channel5_interrupt, HaltProc
+  .set DMA1_Channel6_interrupt, HaltProc
+  .set DMA1_Channel7_interrupt, HaltProc
+  .set ADC1_interrupt, HaltProc
+  .set EXTI9_5_interrupt, HaltProc
+  .set TIM1_BRK_TIM15_interrupt, HaltProc
+  .set TIM1_UP_TIM16_interrupt, HaltProc
+  .set TIM1_TRG_COM_TIM17_interrupt, HaltProc
+  .set TIM1_CC_interrupt, HaltProc
+  .set TIM2_interrupt, HaltProc
+  .set I2C1_EV_interrupt, HaltProc
+  .set I2C1_ER_interrupt, HaltProc
+  .set I2C2_EV_interrupt, HaltProc
+  .set I2C2_ER_interrupt, HaltProc
+  .set SPI2_interrupt, HaltProc
+  .set USART1_interrupt, HaltProc
+  .set USART2_interrupt, HaltProc
+  .set USART3_interrupt, HaltProc
+  .set EXTI15_10_interrupt, HaltProc
+  .set RTC_Alarm_interrupt, HaltProc
+  .set SPI3_interrupt, HaltProc
+  .set TIM6_DAC_interrupt, HaltProc
+  .set COMP2_interrupt, HaltProc
+  .set COMP4_6_interrupt, HaltProc
+  .set I2C3_EV_interrupt, HaltProc
+  .set I2C3_ER_interrupt, HaltProc
+  .set FPU_interrupt, HaltProc
+  .text
+end;
+end.
diff -Naur fpc-save/rtl/embedded/arm/stm32f328xx.pp fpc/rtl/embedded/arm/stm32f328xx.pp
--- fpc-save/rtl/embedded/arm/stm32f328xx.pp	1970-01-01 01:00:00.000000000 +0100
+++ fpc/rtl/embedded/arm/stm32f328xx.pp	2018-03-02 17:07:22.000000000 +0100
@@ -0,0 +1,856 @@
+unit stm32f328xx;
+interface
+{$PACKRECORDS C}
+{$GOTO ON}
+// *
+// ******************************************************************************
+// * @file    stm32f328xx.h
+// * @author  MCD Application Team
+//   CMSIS STM32F328xx Devices Peripheral Access Layer Header File.
+// *
+// *          This file contains:
+// *           - Data structures and the address mapping for all peripherals
+// *           - Peripheral's registers declarations and bits definition
+// *           - Macros to access peripheral’s registers hardware
+// *
+// ******************************************************************************
+// * @attention
+// *
+// * <h2><center>&copy; COPYRIGHT(c) 2016 STMicroelectronics</center></h2>
+// *
+// * Redistribution and use in source and binary forms, with or without modification,
+// * are permitted provided that the following conditions are met:
+// *   1. Redistributions of source code must retain the above copyright notice,
+// *      this list of conditions and the following disclaimer.
+// *   2. Redistributions in binary form must reproduce the above copyright notice,
+// *      this list of conditions and the following disclaimer in the documentation
+// *      and/or other materials provided with the distribution.
+// *   3. Neither the name of STMicroelectronics nor the names of its contributors
+// *      may be used to endorse or promote products derived from this software
+// *      without specific prior written permission.
+// *
+// * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
+// * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
+// * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+// * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE
+// * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
+// * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
+// * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER
+// * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+// * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
+// * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
+// *
+// ******************************************************************************
+// Configuration of the Cortex-M4 Processor and Core Peripherals
+// STM32F328xx devices Interrupt Number Definition, according to the selected device
+// *        in @ref Library_configuration_section
+
+type
+  TIRQn_Enum   = (
+    NonMaskableInt_IRQn = -14,        // 2 Non Maskable Interrupt
+    HardFault_IRQn = -13,             // 3 Cortex-M4 Hard Fault Interrupt
+    MemoryManagement_IRQn = -12,      // 4 Cortex-M4 Memory Management Interrupt
+    BusFault_IRQn = -11,              // 5 Cortex-M4 Bus Fault Interrupt
+    UsageFault_IRQn = -10,            // 6 Cortex-M4 Usage Fault Interrupt
+    SVCall_IRQn = -5,                 // 11 Cortex-M4 SV Call Interrupt
+    DebugMonitor_IRQn = -4,           // 12 Cortex-M4 Debug Monitor Interrupt
+    PendSV_IRQn = -2,                 // 14 Cortex-M4 Pend SV Interrupt
+    SysTick_IRQn = -1,                // 15 Cortex-M4 System Tick Interrupt
+    WWDG_IRQn  = 0,                   // Window WatchDog Interrupt
+    TAMP_STAMP_IRQn = 2,              // Tamper and TimeStamp interrupts through the EXTI line 19
+    RTC_WKUP_IRQn = 3,                // RTC Wakeup interrupt through the EXTI line 20
+    FLASH_IRQn = 4,                   // FLASH global Interrupt
+    RCC_IRQn   = 5,                   // RCC global Interrupt
+    EXTI0_IRQn = 6,                   // EXTI Line0 Interrupt
+    EXTI1_IRQn = 7,                   // EXTI Line1 Interrupt
+    EXTI2_TSC_IRQn = 8,               // EXTI Line2 Interrupt and Touch Sense Controller Interrupt
+    EXTI3_IRQn = 9,                   // EXTI Line3 Interrupt
+    EXTI4_IRQn = 10,                  // EXTI Line4 Interrupt
+    DMA1_Channel1_IRQn = 11,          // DMA1 Channel 1 Interrupt
+    DMA1_Channel2_IRQn = 12,          // DMA1 Channel 2 Interrupt
+    DMA1_Channel3_IRQn = 13,          // DMA1 Channel 3 Interrupt
+    DMA1_Channel4_IRQn = 14,          // DMA1 Channel 4 Interrupt
+    DMA1_Channel5_IRQn = 15,          // DMA1 Channel 5 Interrupt
+    DMA1_Channel6_IRQn = 16,          // DMA1 Channel 6 Interrupt
+    DMA1_Channel7_IRQn = 17,          // DMA1 Channel 7 Interrupt
+    ADC1_2_IRQn = 18,                 // ADC1 & ADC2 Interrupts
+    CAN_TX_IRQn = 19,                 // CAN TX Interrupt
+    CAN_RX0_IRQn = 20,                // CAN RX0 Interrupt
+    CAN_RX1_IRQn = 21,                // CAN RX1 Interrupt
+    CAN_SCE_IRQn = 22,                // CAN SCE Interrupt
+    EXTI9_5_IRQn = 23,                // External Line[9:5] Interrupts
+    TIM1_BRK_TIM15_IRQn = 24,         // TIM1 Break and TIM15 Interrupts
+    TIM1_UP_TIM16_IRQn = 25,          // TIM1 Update and TIM16 Interrupts
+    TIM1_TRG_COM_TIM17_IRQn = 26,     // TIM1 Trigger and Commutation and TIM17 Interrupt
+    TIM1_CC_IRQn = 27,                // TIM1 Capture Compare Interrupt
+    TIM2_IRQn  = 28,                  // TIM2 global Interrupt
+    TIM3_IRQn  = 29,                  // TIM3 global Interrupt
+    I2C1_EV_IRQn = 31,                // I2C1 Event Interrupt & EXTI Line23 Interrupt (I2C1 wakeup)
+    I2C1_ER_IRQn = 32,                // I2C1 Error Interrupt
+    SPI1_IRQn  = 35,                  // SPI1 global Interrupt
+    USART1_IRQn = 37,                 // USART1 global Interrupt & EXTI Line25 Interrupt (USART1 wakeup)
+    USART2_IRQn = 38,                 // USART2 global Interrupt & EXTI Line26 Interrupt (USART2 wakeup)
+    USART3_IRQn = 39,                 // USART3 global Interrupt & EXTI Line28 Interrupt (USART3 wakeup)
+    EXTI15_10_IRQn = 40,              // External Line[15:10] Interrupts
+    RTC_Alarm_IRQn = 41,              // RTC Alarm (A and B) through EXTI Line 17 Interrupt
+    TIM6_DAC1_IRQn = 54,              // TIM6 global and DAC1 underrun error Interrupts
+    TIM7_DAC2_IRQn = 55,              // TIM7 global and DAC2 channel1 underrun error Interrupt
+    COMP2_IRQn = 64,                  // COMP2 global Interrupt via EXTI Line22
+    COMP4_6_IRQn = 65,                // COMP4 and COMP6 global Interrupt via EXTI Line30 and 32
+    FPU_IRQn   = 81                   // Floating point Interrupt
+  );
+
+  TADC_Registers = record
+    ISR        : longword;            // ADC Interrupt and Status Register
+    IER        : longword;            // ADC Interrupt Enable Register
+    CR         : longword;            // ADC control register
+    CFGR       : longword;            // ADC Configuration register
+    RESERVED0  : longword;            // Reserved, 0x010
+    SMPR1      : longword;            // ADC sample time register 1
+    SMPR2      : longword;            // ADC sample time register 2
+    RESERVED1  : longword;            // Reserved, 0x01C
+    TR1        : longword;            // ADC watchdog threshold register 1
+    TR2        : longword;            // ADC watchdog threshold register 2
+    TR3        : longword;            // ADC watchdog threshold register 3
+    RESERVED2  : longword;            // Reserved, 0x02C
+    SQR1       : longword;            // ADC regular sequence register 1
+    SQR2       : longword;            // ADC regular sequence register 2
+    SQR3       : longword;            // ADC regular sequence register 3
+    SQR4       : longword;            // ADC regular sequence register 4
+    DR         : longword;            // ADC regular data register
+    RESERVED3  : longword;            // Reserved, 0x044
+    RESERVED4  : longword;            // Reserved, 0x048
+    JSQR       : longword;            // ADC injected sequence register
+    RESERVED5  : array[0..3] of longword; // Reserved, 0x050 - 0x05C
+    OFR1       : longword;            // ADC offset register 1
+    OFR2       : longword;            // ADC offset register 2
+    OFR3       : longword;            // ADC offset register 3
+    OFR4       : longword;            // ADC offset register 4
+    RESERVED6  : array[0..3] of longword; // Reserved, 0x070 - 0x07C
+    JDR1       : longword;            // ADC injected data register 1
+    JDR2       : longword;            // ADC injected data register 2
+    JDR3       : longword;            // ADC injected data register 3
+    JDR4       : longword;            // ADC injected data register 4
+    RESERVED7  : array[0..3] of longword; // Reserved, 0x090 - 0x09C
+    AWD2CR     : longword;            // ADC  Analog Watchdog 2 Configuration Register
+    AWD3CR     : longword;            // ADC  Analog Watchdog 3 Configuration Register
+    RESERVED8  : longword;            // Reserved, 0x0A8
+    RESERVED9  : longword;            // Reserved, 0x0AC
+    DIFSEL     : longword;            // ADC  Differential Mode Selection Register
+    CALFACT    : longword;            // ADC  Calibration Factors
+  end;
+
+  TADC_COMMON_Registers = record
+    CSR        : longword;            // ADC Common status register
+    RESERVED   : longword;            // Reserved, ADC1/3 base address + 0x304
+    CCR        : longword;            // ADC common control register
+    CDR        : longword;            // ADC common regular data register for dual
+  end;
+
+  TCAN_TXMAILBOX_Registers = record
+    TIR        : longword;            // CAN TX mailbox identifier register
+    TDTR       : longword;            // CAN mailbox data length control and time stamp register
+    TDLR       : longword;            // CAN mailbox data low register
+    TDHR       : longword;            // CAN mailbox data high register
+  end;
+
+  TCAN_FIFOMAILBOX_Registers = record
+    RIR        : longword;            // CAN receive FIFO mailbox identifier register
+    RDTR       : longword;            // CAN receive FIFO mailbox data length control and time stamp register
+    RDLR       : longword;            // CAN receive FIFO mailbox data low register
+    RDHR       : longword;            // CAN receive FIFO mailbox data high register
+  end;
+
+  TCAN_FILTERREGISTER_Registers = record
+    FR1        : longword;            // CAN Filter bank register 1
+    FR2        : longword;            // CAN Filter bank register 1
+  end;
+
+  TCAN_Registers = record
+    MCR        : longword;            // CAN master control register
+    MSR        : longword;            // CAN master status register
+    TSR        : longword;            // CAN transmit status register
+    RF0R       : longword;            // CAN receive FIFO 0 register
+    RF1R       : longword;            // CAN receive FIFO 1 register
+    IER        : longword;            // CAN interrupt enable register
+    ESR        : longword;            // CAN error status register
+    BTR        : longword;            // CAN bit timing register
+    RESERVED0  : array[0..87] of longword; // Reserved, 0x020 - 0x17F
+    sTxMailBox : array[0..2] of TCAN_TxMailBox_Registers; // CAN Tx MailBox
+    sFIFOMailBox : array[0..1] of TCAN_FIFOMailBox_Registers; // CAN FIFO MailBox
+    RESERVED1  : array[0..11] of longword; // Reserved, 0x1D0 - 0x1FF
+    FMR        : longword;            // CAN filter master register
+    FM1R       : longword;            // CAN filter mode register
+    RESERVED2  : longword;            // Reserved, 0x208
+    FS1R       : longword;            // CAN filter scale register
+    RESERVED3  : longword;            // Reserved, 0x210
+    FFA1R      : longword;            // CAN filter FIFO assignment register
+    RESERVED4  : longword;            // Reserved, 0x218
+    FA1R       : longword;            // CAN filter activation register
+    RESERVED5  : array[0..7] of longword; // Reserved, 0x220-0x23F
+    sFilterRegister : array[0..27] of TCAN_FilterRegister_Registers; // CAN Filter Register
+  end;
+
+  TCOMP_Registers = record
+    CSR        : longword;            // COMP control and status register
+  end;
+
+  TCOMP_COMMON_Registers = record
+    CSR        : longword;            // COMP control and status register, used for bits common to several COMP instances
+  end;
+
+  TCRC_Registers = record
+    DR         : longword;            // CRC Data register
+    IDR        : byte;                // CRC Independent data register
+    RESERVED0  : byte;                // Reserved,                                                    0x05
+    RESERVED1  : word;                // Reserved,                                                    0x06
+    CR         : longword;            // CRC Control register
+    RESERVED2  : longword;            // Reserved,                                                    0x0C
+    INIT       : longword;            // Initial CRC value register
+    POL        : longword;            // CRC polynomial register
+  end;
+
+  TDAC_Registers = record
+    CR         : longword;            // DAC control register
+    SWTRIGR    : longword;            // DAC software trigger register
+    DHR12R1    : longword;            // DAC channel1 12-bit right-aligned data holding register
+    DHR12L1    : longword;            // DAC channel1 12-bit left aligned data holding register
+    DHR8R1     : longword;            // DAC channel1 8-bit right aligned data holding register
+    DHR12R2    : longword;            // DAC channel2 12-bit right aligned data holding register
+    DHR12L2    : longword;            // DAC channel2 12-bit left aligned data holding register
+    DHR8R2     : longword;            // DAC channel2 8-bit right-aligned data holding register
+    DHR12RD    : longword;            // Dual DAC 12-bit right-aligned data holding register
+    DHR12LD    : longword;            // DUAL DAC 12-bit left aligned data holding register
+    DHR8RD     : longword;            // DUAL DAC 8-bit right aligned data holding register
+    DOR1       : longword;            // DAC channel1 data output register
+    DOR2       : longword;            // DAC channel2 data output register
+    SR         : longword;            // DAC status register
+  end;
+
+  TDBGMCU_Registers = record
+    IDCODE     : longword;            // MCU device ID code
+    CR         : longword;            // Debug MCU configuration register
+    APB1FZ     : longword;            // Debug MCU APB1 freeze register
+    APB2FZ     : longword;            // Debug MCU APB2 freeze register
+  end;
+
+  TDMA_CHANNEL_Registers = record
+    CCR        : longword;            // DMA channel x configuration register
+    CNDTR      : longword;            // DMA channel x number of data register
+    CPAR       : longword;            // DMA channel x peripheral address register
+    CMAR       : longword;            // DMA channel x memory address register
+  end;
+
+  TDMA_Registers = record
+    ISR        : longword;            // DMA interrupt status register
+    IFCR       : longword;            // DMA interrupt flag clear register
+  end;
+
+  TEXTI_Registers = record
+    IMR        : longword;            // XTI Interrupt mask register
+    EMR        : longword;            // XTI Event mask register
+    RTSR       : longword;            // XTI Rising trigger selection register
+    FTSR       : longword;            // XTI Falling trigger selection register
+    SWIER      : longword;            // XTI Software interrupt event register
+    PR         : longword;            // XTI Pending register
+    RESERVED1  : longword;            // Reserved, 0x18
+    RESERVED2  : longword;            // Reserved, 0x1C
+    IMR2       : longword;            // EXTI Interrupt mask register
+    EMR2       : longword;            // EXTI Event mask register
+    RTSR2      : longword;            // EXTI Rising trigger selection register
+    FTSR2      : longword;            // EXTI Falling trigger selection register
+    SWIER2     : longword;            // EXTI Software interrupt event register
+    PR2        : longword;            // EXTI Pending register
+  end;
+
+  TFLASH_Registers = record
+    ACR        : longword;            // FLASH access control register
+    KEYR       : longword;            // FLASH key register
+    OPTKEYR    : longword;            // FLASH option key register
+    SR         : longword;            // FLASH status register
+    CR         : longword;            // FLASH control register
+    AR         : longword;            // FLASH address register
+    RESERVED   : longword;            // Reserved, 0x18
+    OBR        : longword;            // FLASH Option byte register
+    WRPR       : longword;            // FLASH Write register
+  end;
+
+  TOB_Registers = record
+    RDP        : word;                // LASH option byte Read protection
+    USER       : word;                // LASH option byte user options
+    RESERVED0  : word;                // Reserved,                                                     0x04
+    RESERVED1  : word;                // Reserved,                                                     0x06
+    WRP0       : word;                // LASH option byte write protection 0
+    WRP1       : word;                // LASH option byte write protection 1
+    WRP2       : word;                // LASH option byte write protection 2
+    WRP3       : word;                // LASH option byte write protection 3
+  end;
+
+  TGPIO_Registers = record
+    MODER      : longword;            // GPIO port mode register
+    OTYPER     : longword;            // GPIO port output type register
+    OSPEEDR    : longword;            // GPIO port output speed register
+    PUPDR      : longword;            // GPIO port pull-up/pull-down register
+    IDR        : longword;            // GPIO port input data register
+    ODR        : longword;            // GPIO port output data register
+    BSRR       : longword;            // GPIO port bit set/reset register
+    LCKR       : longword;            // GPIO port configuration lock register
+    AFR        : array[0..1] of longword; // GPIO alternate function registers
+    BRR        : longword;            // GPIO bit reset register
+  end;
+
+  TOPAMP_Registers = record
+    CSR        : longword;            // OPAMP control and status register
+  end;
+
+  TSYSCFG_Registers = record
+    CFGR1      : longword;            // SYSCFG configuration register 1
+    RCR        : longword;            // SYSCFG CCM SRAM protection register
+    EXTICR     : array[0..3] of longword; // SYSCFG external interrupt configuration registers
+    CFGR2      : longword;            // SYSCFG configuration register 2
+    RESERVED0  : longword;            // Reserved,                                                           0x1C
+    RESERVED1  : longword;            // Reserved,                                                          0x20
+    RESERVED2  : longword;            // Reserved,                                                          0x24
+    RESERVED4  : longword;            // Reserved,                                                          0x28
+    RESERVED5  : longword;            // Reserved,                                                          0x2C
+    RESERVED6  : longword;            // Reserved,                                                          0x30
+    RESERVED7  : longword;            // Reserved,                                                          0x34
+    RESERVED8  : longword;            // Reserved,                                                          0x38
+    RESERVED9  : longword;            // Reserved,                                                          0x3C
+    RESERVED10 : longword;            // Reserved,                                                          0x40
+    RESERVED11 : longword;            // Reserved,                                                          0x44
+    RESERVED12 : longword;            // Reserved,                                                          0x48
+    RESERVED13 : longword;            // Reserved,                                                          0x4C
+    CFGR3      : longword;            // SYSCFG configuration register 3
+  end;
+
+  TI2C_Registers = record
+    CR1        : longword;            // I2C Control register 1
+    CR2        : longword;            // I2C Control register 2
+    OAR1       : longword;            // I2C Own address 1 register
+    OAR2       : longword;            // I2C Own address 2 register
+    TIMINGR    : longword;            // I2C Timing register
+    TIMEOUTR   : longword;            // I2C Timeout register
+    ISR        : longword;            // I2C Interrupt and status register
+    ICR        : longword;            // I2C Interrupt clear register
+    PECR       : longword;            // I2C PEC register
+    RXDR       : longword;            // I2C Receive data register
+    TXDR       : longword;            // I2C Transmit data register
+  end;
+
+  TIWDG_Registers = record
+    KR         : longword;            // IWDG Key register
+    PR         : longword;            // IWDG Prescaler register
+    RLR        : longword;            // IWDG Reload register
+    SR         : longword;            // IWDG Status register
+    WINR       : longword;            // IWDG Window register
+  end;
+
+  TPWR_Registers = record
+    CR         : longword;            // PWR power control register
+    CSR        : longword;            // PWR power control/status register
+  end;
+
+  TRCC_Registers = record
+    CR         : longword;            // RCC clock control register
+    CFGR       : longword;            // RCC clock configuration register
+    CIR        : longword;            // RCC clock interrupt register
+    APB2RSTR   : longword;            // RCC APB2 peripheral reset register
+    APB1RSTR   : longword;            // RCC APB1 peripheral reset register
+    AHBENR     : longword;            // RCC AHB peripheral clock register
+    APB2ENR    : longword;            // RCC APB2 peripheral clock enable register
+    APB1ENR    : longword;            // RCC APB1 peripheral clock enable register
+    BDCR       : longword;            // RCC Backup domain control register
+    CSR        : longword;            // RCC clock control & status register
+    AHBRSTR    : longword;            // RCC AHB peripheral reset register
+    CFGR2      : longword;            // RCC clock configuration register 2
+    CFGR3      : longword;            // RCC clock configuration register 3
+  end;
+
+  TRTC_Registers = record
+    TR         : longword;            // RTC time register
+    DR         : longword;            // RTC date register
+    CR         : longword;            // RTC control register
+    ISR        : longword;            // RTC initialization and status register
+    PRER       : longword;            // RTC prescaler register
+    WUTR       : longword;            // RTC wakeup timer register
+    RESERVED0  : longword;            // Reserved, 0x18
+    ALRMAR     : longword;            // RTC alarm A register
+    ALRMBR     : longword;            // RTC alarm B register
+    WPR        : longword;            // RTC write protection register
+    SSR        : longword;            // RTC sub second register
+    SHIFTR     : longword;            // RTC shift control register
+    TSTR       : longword;            // RTC time stamp time register
+    TSDR       : longword;            // RTC time stamp date register
+    TSSSR      : longword;            // RTC time-stamp sub second register
+    CALR       : longword;            // RTC calibration register
+    TAFCR      : longword;            // RTC tamper and alternate function configuration register
+    ALRMASSR   : longword;            // RTC alarm A sub second register
+    ALRMBSSR   : longword;            // RTC alarm B sub second register
+    RESERVED7  : longword;            // Reserved, 0x4C
+    BKP0R      : longword;            // RTC backup register 0
+    BKP1R      : longword;            // RTC backup register 1
+    BKP2R      : longword;            // RTC backup register 2
+    BKP3R      : longword;            // RTC backup register 3
+    BKP4R      : longword;            // RTC backup register 4
+  end;
+
+  TSPI_Registers = record
+    CR1        : longword;            // SPI Control register 1
+    CR2        : longword;            // SPI Control register 2
+    SR         : longword;            // SPI Status register
+    DR         : longword;            // SPI data register
+    CRCPR      : longword;            // SPI CRC polynomial register
+    RXCRCR     : longword;            // SPI Rx CRC register
+    TXCRCR     : longword;            // SPI Tx CRC register
+  end;
+
+  TTIM_Registers = record
+    CR1        : longword;            // TIM control register 1
+    CR2        : longword;            // TIM control register 2
+    SMCR       : longword;            // TIM slave mode control register
+    DIER       : longword;            // TIM DMA/interrupt enable register
+    SR         : longword;            // TIM status register
+    EGR        : longword;            // TIM event generation register
+    CCMR1      : longword;            // TIM capture/compare mode register 1
+    CCMR2      : longword;            // TIM capture/compare mode register 2
+    CCER       : longword;            // TIM capture/compare enable register
+    CNT        : longword;            // TIM counter register
+    PSC        : longword;            // TIM prescaler
+    ARR        : longword;            // TIM auto-reload register
+    RCR        : longword;            // TIM repetition counter register
+    CCR1       : longword;            // TIM capture/compare register 1
+    CCR2       : longword;            // TIM capture/compare register 2
+    CCR3       : longword;            // TIM capture/compare register 3
+    CCR4       : longword;            // TIM capture/compare register 4
+    BDTR       : longword;            // TIM break and dead-time register
+    DCR        : longword;            // TIM DMA control register
+    DMAR       : longword;            // TIM DMA address for full transfer
+    &OR        : longword;            // TIM option register
+    CCMR3      : longword;            // TIM capture/compare mode register 3
+    CCR5       : longword;            // TIM capture/compare register5
+    CCR6       : longword;            // TIM capture/compare register 4
+  end;
+
+  TTSC_Registers = record
+    CR         : longword;            // TSC control register
+    IER        : longword;            // TSC interrupt enable register
+    ICR        : longword;            // TSC interrupt clear register
+    ISR        : longword;            // TSC interrupt status register
+    IOHCR      : longword;            // TSC I/O hysteresis control register
+    RESERVED1  : longword;            // Reserved
+    IOASCR     : longword;            // TSC I/O analog switch control register
+    RESERVED2  : longword;            // Reserved
+    IOSCR      : longword;            // TSC I/O sampling control register
+    RESERVED3  : longword;            // Reserved
+    IOCCR      : longword;            // TSC I/O channel control register
+    RESERVED4  : longword;            // Reserved
+    IOGCSR     : longword;            // TSC I/O group control status register
+    IOGXCR     : array[0..7] of longword; // TSC I/O group x counter register
+  end;
+
+  TUSART_Registers = record
+    CR1        : longword;            // USART Control register 1
+    CR2        : longword;            // USART Control register 2
+    CR3        : longword;            // USART Control register 3
+    BRR        : longword;            // USART Baud rate register
+    GTPR       : longword;            // USART Guard time and prescaler register
+    RTOR       : longword;            // USART Receiver Time Out register
+    RQR        : longword;            // USART Request register
+    ISR        : longword;            // USART Interrupt and status register
+    ICR        : longword;            // USART Interrupt flag Clear register
+    RDR        : word;                // USART Receive Data register
+    RESERVED1  : word;                // Reserved, 0x26
+    TDR        : word;                // USART Transmit Data register
+    RESERVED2  : word;                // Reserved, 0x2A
+  end;
+
+  TWWDG_Registers = record
+    CR         : longword;            // WWDG Control register
+    CFR        : longword;            // WWDG Configuration register
+    SR         : longword;            // WWDG Status register
+  end;
+
+const
+  FLASH_BASE   = $08000000;           // FLASH base address in the alias region
+  CCMDATARAM_BASE = $10000000;        // CCM(core coupled memory) data RAM base address in the alias region
+  SRAM_BASE    = $20000000;           // SRAM base address in the alias region
+  PERIPH_BASE  = $40000000;           // Peripheral base address in the alias region
+  SRAM_BB_BASE = $22000000;           // SRAM base address in the bit-band region
+  PERIPH_BB_BASE = $42000000;         // Peripheral base address in the bit-band region
+  APB1PERIPH_BASE = $40000000;
+  APB2PERIPH_BASE = PERIPH_BASE + $00010000;
+  AHB1PERIPH_BASE = PERIPH_BASE + $00020000;
+  AHB2PERIPH_BASE = PERIPH_BASE + $08000000;
+  AHB3PERIPH_BASE = PERIPH_BASE + $10000000;
+  TIM2_BASE    = APB1PERIPH_BASE + $00000000;
+  TIM3_BASE    = APB1PERIPH_BASE + $00000400;
+  TIM6_BASE    = APB1PERIPH_BASE + $00001000;
+  TIM7_BASE    = APB1PERIPH_BASE + $00001400;
+  RTC_BASE     = APB1PERIPH_BASE + $00002800;
+  WWDG_BASE    = APB1PERIPH_BASE + $00002C00;
+  IWDG_BASE    = APB1PERIPH_BASE + $00003000;
+  USART2_BASE  = APB1PERIPH_BASE + $00004400;
+  USART3_BASE  = APB1PERIPH_BASE + $00004800;
+  I2C1_BASE    = APB1PERIPH_BASE + $00005400;
+  CAN_BASE     = APB1PERIPH_BASE + $00006400;
+  PWR_BASE     = APB1PERIPH_BASE + $00007000;
+  DAC1_BASE    = APB1PERIPH_BASE + $00007400;
+  DAC2_BASE    = APB1PERIPH_BASE + $00009800;
+  DAC_BASE     = APB1PERIPH_BASE + $00007400;
+  SYSCFG_BASE  = APB2PERIPH_BASE + $00000000;
+  COMP2_BASE   = APB2PERIPH_BASE + $00000020;
+  COMP4_BASE   = APB2PERIPH_BASE + $00000028;
+  COMP6_BASE   = APB2PERIPH_BASE + $00000030;
+  COMP_BASE    = APB2PERIPH_BASE + $00000020;
+  OPAMP2_BASE  = APB2PERIPH_BASE + $0000003C;
+  OPAMP_BASE   = APB2PERIPH_BASE + $0000003C;
+  EXTI_BASE    = APB2PERIPH_BASE + $00000400;
+  TIM1_BASE    = APB2PERIPH_BASE + $00002C00;
+  SPI1_BASE    = APB2PERIPH_BASE + $00003000;
+  USART1_BASE  = APB2PERIPH_BASE + $00003800;
+  TIM15_BASE   = APB2PERIPH_BASE + $00004000;
+  TIM16_BASE   = APB2PERIPH_BASE + $00004400;
+  TIM17_BASE   = APB2PERIPH_BASE + $00004800;
+  DMA1_BASE    = AHB1PERIPH_BASE + $00000000;
+  DMA1_Channel1_BASE = AHB1PERIPH_BASE + $00000008;
+  DMA1_Channel2_BASE = AHB1PERIPH_BASE + $0000001C;
+  DMA1_Channel3_BASE = AHB1PERIPH_BASE + $00000030;
+  DMA1_Channel4_BASE = AHB1PERIPH_BASE + $00000044;
+  DMA1_Channel5_BASE = AHB1PERIPH_BASE + $00000058;
+  DMA1_Channel6_BASE = AHB1PERIPH_BASE + $0000006C;
+  DMA1_Channel7_BASE = AHB1PERIPH_BASE + $00000080;
+  RCC_BASE     = AHB1PERIPH_BASE + $00001000;
+  FLASH_R_BASE = AHB1PERIPH_BASE + $00002000; // Flash registers base address
+  OB_BASE      = $1FFFF800;           // Flash Option Bytes base address
+  FLASHSIZE_BASE = $1FFFF7CC;         // FLASH Size register base address
+  UID_BASE     = $1FFFF7AC;           // Unique device ID register base address
+  CRC_BASE     = AHB1PERIPH_BASE + $00003000;
+  TSC_BASE     = AHB1PERIPH_BASE + $00004000;
+  GPIOA_BASE   = AHB2PERIPH_BASE + $00000000;
+  GPIOB_BASE   = AHB2PERIPH_BASE + $00000400;
+  GPIOC_BASE   = AHB2PERIPH_BASE + $00000800;
+  GPIOD_BASE   = AHB2PERIPH_BASE + $00000C00;
+  GPIOF_BASE   = AHB2PERIPH_BASE + $00001400;
+  ADC1_BASE    = AHB3PERIPH_BASE + $00000000;
+  ADC2_BASE    = AHB3PERIPH_BASE + $00000100;
+  ADC1_2_COMMON_BASE = AHB3PERIPH_BASE + $00000300;
+  DBGMCU_BASE  = $E0042000;           // Debug MCU registers base address
+
+var
+  TIM2         : TTIM_Registers absolute TIM2_BASE;
+  TIM3         : TTIM_Registers absolute TIM3_BASE;
+  TIM6         : TTIM_Registers absolute TIM6_BASE;
+  TIM7         : TTIM_Registers absolute TIM7_BASE;
+  RTC          : TRTC_Registers absolute RTC_BASE;
+  WWDG         : TWWDG_Registers absolute WWDG_BASE;
+  IWDG         : TIWDG_Registers absolute IWDG_BASE;
+  USART2       : TUSART_Registers absolute USART2_BASE;
+  USART3       : TUSART_Registers absolute USART3_BASE;
+  I2C1         : TI2C_Registers absolute I2C1_BASE;
+  CAN          : TCAN_Registers absolute CAN_BASE;
+  PWR          : TPWR_Registers absolute PWR_BASE;
+  DAC          : TDAC_Registers absolute DAC_BASE;
+  DAC1         : TDAC_Registers absolute DAC1_BASE;
+  DAC2         : TDAC_Registers absolute DAC2_BASE;
+  COMP2        : TCOMP_Registers absolute COMP2_BASE;
+  COMP4        : TCOMP_Registers absolute COMP4_BASE;
+  COMP6        : TCOMP_Registers absolute COMP6_BASE;
+  COMP         : TCOMP_Registers absolute COMP_BASE;
+  OPAMP        : TOPAMP_Registers absolute OPAMP_BASE;
+  OPAMP2       : TOPAMP_Registers absolute OPAMP2_BASE;
+  SYSCFG       : TSYSCFG_Registers absolute SYSCFG_BASE;
+  EXTI         : TEXTI_Registers absolute EXTI_BASE;
+  TIM1         : TTIM_Registers absolute TIM1_BASE;
+  SPI1         : TSPI_Registers absolute SPI1_BASE;
+  USART1       : TUSART_Registers absolute USART1_BASE;
+  TIM15        : TTIM_Registers absolute TIM15_BASE;
+  TIM16        : TTIM_Registers absolute TIM16_BASE;
+  TIM17        : TTIM_Registers absolute TIM17_BASE;
+  DBGMCU       : TDBGMCU_Registers absolute DBGMCU_BASE;
+  DMA1         : TDMA_Registers absolute DMA1_BASE;
+  DMA1_Channel1 : TDMA_Channel_Registers absolute DMA1_Channel1_BASE;
+  DMA1_Channel2 : TDMA_Channel_Registers absolute DMA1_Channel2_BASE;
+  DMA1_Channel3 : TDMA_Channel_Registers absolute DMA1_Channel3_BASE;
+  DMA1_Channel4 : TDMA_Channel_Registers absolute DMA1_Channel4_BASE;
+  DMA1_Channel5 : TDMA_Channel_Registers absolute DMA1_Channel5_BASE;
+  DMA1_Channel6 : TDMA_Channel_Registers absolute DMA1_Channel6_BASE;
+  DMA1_Channel7 : TDMA_Channel_Registers absolute DMA1_Channel7_BASE;
+  RCC          : TRCC_Registers absolute RCC_BASE;
+  FLASH        : TFLASH_Registers absolute FLASH_R_BASE;
+  OB           : TOB_Registers absolute OB_BASE;
+  CRC          : TCRC_Registers absolute CRC_BASE;
+  TSC          : TTSC_Registers absolute TSC_BASE;
+  GPIOA        : TGPIO_Registers absolute GPIOA_BASE;
+  GPIOB        : TGPIO_Registers absolute GPIOB_BASE;
+  GPIOC        : TGPIO_Registers absolute GPIOC_BASE;
+  GPIOD        : TGPIO_Registers absolute GPIOD_BASE;
+  GPIOF        : TGPIO_Registers absolute GPIOF_BASE;
+  ADC1         : TADC_Registers absolute ADC1_BASE;
+  ADC2         : TADC_Registers absolute ADC2_BASE;
+  ADC12_COMMON : TADC_Common_Registers absolute ADC1_2_COMMON_BASE;
+
+implementation
+
+procedure NonMaskableInt_interrupt; external name 'NonMaskableInt_interrupt';
+procedure HardFault_interrupt; external name 'HardFault_interrupt';
+procedure MemoryManagement_interrupt; external name 'MemoryManagement_interrupt';
+procedure BusFault_interrupt; external name 'BusFault_interrupt';
+procedure UsageFault_interrupt; external name 'UsageFault_interrupt';
+procedure SVCall_interrupt; external name 'SVCall_interrupt';
+procedure DebugMonitor_interrupt; external name 'DebugMonitor_interrupt';
+procedure PendSV_interrupt; external name 'PendSV_interrupt';
+procedure SysTick_interrupt; external name 'SysTick_interrupt';
+procedure WWDG_interrupt; external name 'WWDG_interrupt';
+procedure TAMP_STAMP_interrupt; external name 'TAMP_STAMP_interrupt';
+procedure RTC_WKUP_interrupt; external name 'RTC_WKUP_interrupt';
+procedure FLASH_interrupt; external name 'FLASH_interrupt';
+procedure RCC_interrupt; external name 'RCC_interrupt';
+procedure EXTI0_interrupt; external name 'EXTI0_interrupt';
+procedure EXTI1_interrupt; external name 'EXTI1_interrupt';
+procedure EXTI2_TSC_interrupt; external name 'EXTI2_TSC_interrupt';
+procedure EXTI3_interrupt; external name 'EXTI3_interrupt';
+procedure EXTI4_interrupt; external name 'EXTI4_interrupt';
+procedure DMA1_Channel1_interrupt; external name 'DMA1_Channel1_interrupt';
+procedure DMA1_Channel2_interrupt; external name 'DMA1_Channel2_interrupt';
+procedure DMA1_Channel3_interrupt; external name 'DMA1_Channel3_interrupt';
+procedure DMA1_Channel4_interrupt; external name 'DMA1_Channel4_interrupt';
+procedure DMA1_Channel5_interrupt; external name 'DMA1_Channel5_interrupt';
+procedure DMA1_Channel6_interrupt; external name 'DMA1_Channel6_interrupt';
+procedure DMA1_Channel7_interrupt; external name 'DMA1_Channel7_interrupt';
+procedure ADC1_2_interrupt; external name 'ADC1_2_interrupt';
+procedure CAN_TX_interrupt; external name 'CAN_TX_interrupt';
+procedure CAN_RX0_interrupt; external name 'CAN_RX0_interrupt';
+procedure CAN_RX1_interrupt; external name 'CAN_RX1_interrupt';
+procedure CAN_SCE_interrupt; external name 'CAN_SCE_interrupt';
+procedure EXTI9_5_interrupt; external name 'EXTI9_5_interrupt';
+procedure TIM1_BRK_TIM15_interrupt; external name 'TIM1_BRK_TIM15_interrupt';
+procedure TIM1_UP_TIM16_interrupt; external name 'TIM1_UP_TIM16_interrupt';
+procedure TIM1_TRG_COM_TIM17_interrupt; external name 'TIM1_TRG_COM_TIM17_interrupt';
+procedure TIM1_CC_interrupt; external name 'TIM1_CC_interrupt';
+procedure TIM2_interrupt; external name 'TIM2_interrupt';
+procedure TIM3_interrupt; external name 'TIM3_interrupt';
+procedure I2C1_EV_interrupt; external name 'I2C1_EV_interrupt';
+procedure I2C1_ER_interrupt; external name 'I2C1_ER_interrupt';
+procedure SPI1_interrupt; external name 'SPI1_interrupt';
+procedure USART1_interrupt; external name 'USART1_interrupt';
+procedure USART2_interrupt; external name 'USART2_interrupt';
+procedure USART3_interrupt; external name 'USART3_interrupt';
+procedure EXTI15_10_interrupt; external name 'EXTI15_10_interrupt';
+procedure RTC_Alarm_interrupt; external name 'RTC_Alarm_interrupt';
+procedure TIM6_DAC1_interrupt; external name 'TIM6_DAC1_interrupt';
+procedure TIM7_DAC2_interrupt; external name 'TIM7_DAC2_interrupt';
+procedure COMP2_interrupt; external name 'COMP2_interrupt';
+procedure COMP4_6_interrupt; external name 'COMP4_6_interrupt';
+procedure FPU_interrupt; external name 'FPU_interrupt';
+
+{$i cortexm4f_start.inc}
+
+procedure Vectors; assembler; nostackframe;
+label interrupt_vectors;
+asm
+  .section ".init.interrupt_vectors"
+  interrupt_vectors:
+  .long _stack_top
+  .long Startup
+  .long NonMaskableInt_interrupt
+  .long HardFault_interrupt
+  .long MemoryManagement_interrupt
+  .long BusFault_interrupt
+  .long UsageFault_interrupt
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long SVCall_interrupt
+  .long DebugMonitor_interrupt
+  .long 0
+  .long PendSV_interrupt
+  .long SysTick_interrupt
+  .long WWDG_interrupt
+  .long 0
+  .long TAMP_STAMP_interrupt
+  .long RTC_WKUP_interrupt
+  .long FLASH_interrupt
+  .long RCC_interrupt
+  .long EXTI0_interrupt
+  .long EXTI1_interrupt
+  .long EXTI2_TSC_interrupt
+  .long EXTI3_interrupt
+  .long EXTI4_interrupt
+  .long DMA1_Channel1_interrupt
+  .long DMA1_Channel2_interrupt
+  .long DMA1_Channel3_interrupt
+  .long DMA1_Channel4_interrupt
+  .long DMA1_Channel5_interrupt
+  .long DMA1_Channel6_interrupt
+  .long DMA1_Channel7_interrupt
+  .long ADC1_2_interrupt
+  .long CAN_TX_interrupt
+  .long CAN_RX0_interrupt
+  .long CAN_RX1_interrupt
+  .long CAN_SCE_interrupt
+  .long EXTI9_5_interrupt
+  .long TIM1_BRK_TIM15_interrupt
+  .long TIM1_UP_TIM16_interrupt
+  .long TIM1_TRG_COM_TIM17_interrupt
+  .long TIM1_CC_interrupt
+  .long TIM2_interrupt
+  .long TIM3_interrupt
+  .long 0
+  .long I2C1_EV_interrupt
+  .long I2C1_ER_interrupt
+  .long 0
+  .long 0
+  .long SPI1_interrupt
+  .long 0
+  .long USART1_interrupt
+  .long USART2_interrupt
+  .long USART3_interrupt
+  .long EXTI15_10_interrupt
+  .long RTC_Alarm_interrupt
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long TIM6_DAC1_interrupt
+  .long TIM7_DAC2_interrupt
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long COMP2_interrupt
+  .long COMP4_6_interrupt
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long FPU_interrupt
+  .weak NonMaskableInt_interrupt
+  .weak HardFault_interrupt
+  .weak MemoryManagement_interrupt
+  .weak BusFault_interrupt
+  .weak UsageFault_interrupt
+  .weak SVCall_interrupt
+  .weak DebugMonitor_interrupt
+  .weak PendSV_interrupt
+  .weak SysTick_interrupt
+  .weak WWDG_interrupt
+  .weak TAMP_STAMP_interrupt
+  .weak RTC_WKUP_interrupt
+  .weak FLASH_interrupt
+  .weak RCC_interrupt
+  .weak EXTI0_interrupt
+  .weak EXTI1_interrupt
+  .weak EXTI2_TSC_interrupt
+  .weak EXTI3_interrupt
+  .weak EXTI4_interrupt
+  .weak DMA1_Channel1_interrupt
+  .weak DMA1_Channel2_interrupt
+  .weak DMA1_Channel3_interrupt
+  .weak DMA1_Channel4_interrupt
+  .weak DMA1_Channel5_interrupt
+  .weak DMA1_Channel6_interrupt
+  .weak DMA1_Channel7_interrupt
+  .weak ADC1_2_interrupt
+  .weak CAN_TX_interrupt
+  .weak CAN_RX0_interrupt
+  .weak CAN_RX1_interrupt
+  .weak CAN_SCE_interrupt
+  .weak EXTI9_5_interrupt
+  .weak TIM1_BRK_TIM15_interrupt
+  .weak TIM1_UP_TIM16_interrupt
+  .weak TIM1_TRG_COM_TIM17_interrupt
+  .weak TIM1_CC_interrupt
+  .weak TIM2_interrupt
+  .weak TIM3_interrupt
+  .weak I2C1_EV_interrupt
+  .weak I2C1_ER_interrupt
+  .weak SPI1_interrupt
+  .weak USART1_interrupt
+  .weak USART2_interrupt
+  .weak USART3_interrupt
+  .weak EXTI15_10_interrupt
+  .weak RTC_Alarm_interrupt
+  .weak TIM6_DAC1_interrupt
+  .weak TIM7_DAC2_interrupt
+  .weak COMP2_interrupt
+  .weak COMP4_6_interrupt
+  .weak FPU_interrupt
+  .set NonMaskableInt_interrupt, HaltProc
+  .set HardFault_interrupt, HaltProc
+  .set MemoryManagement_interrupt, HaltProc
+  .set BusFault_interrupt, HaltProc
+  .set UsageFault_interrupt, HaltProc
+  .set SVCall_interrupt, HaltProc
+  .set DebugMonitor_interrupt, HaltProc
+  .set PendSV_interrupt, HaltProc
+  .set SysTick_interrupt, HaltProc
+  .set WWDG_interrupt, HaltProc
+  .set TAMP_STAMP_interrupt, HaltProc
+  .set RTC_WKUP_interrupt, HaltProc
+  .set FLASH_interrupt, HaltProc
+  .set RCC_interrupt, HaltProc
+  .set EXTI0_interrupt, HaltProc
+  .set EXTI1_interrupt, HaltProc
+  .set EXTI2_TSC_interrupt, HaltProc
+  .set EXTI3_interrupt, HaltProc
+  .set EXTI4_interrupt, HaltProc
+  .set DMA1_Channel1_interrupt, HaltProc
+  .set DMA1_Channel2_interrupt, HaltProc
+  .set DMA1_Channel3_interrupt, HaltProc
+  .set DMA1_Channel4_interrupt, HaltProc
+  .set DMA1_Channel5_interrupt, HaltProc
+  .set DMA1_Channel6_interrupt, HaltProc
+  .set DMA1_Channel7_interrupt, HaltProc
+  .set ADC1_2_interrupt, HaltProc
+  .set CAN_TX_interrupt, HaltProc
+  .set CAN_RX0_interrupt, HaltProc
+  .set CAN_RX1_interrupt, HaltProc
+  .set CAN_SCE_interrupt, HaltProc
+  .set EXTI9_5_interrupt, HaltProc
+  .set TIM1_BRK_TIM15_interrupt, HaltProc
+  .set TIM1_UP_TIM16_interrupt, HaltProc
+  .set TIM1_TRG_COM_TIM17_interrupt, HaltProc
+  .set TIM1_CC_interrupt, HaltProc
+  .set TIM2_interrupt, HaltProc
+  .set TIM3_interrupt, HaltProc
+  .set I2C1_EV_interrupt, HaltProc
+  .set I2C1_ER_interrupt, HaltProc
+  .set SPI1_interrupt, HaltProc
+  .set USART1_interrupt, HaltProc
+  .set USART2_interrupt, HaltProc
+  .set USART3_interrupt, HaltProc
+  .set EXTI15_10_interrupt, HaltProc
+  .set RTC_Alarm_interrupt, HaltProc
+  .set TIM6_DAC1_interrupt, HaltProc
+  .set TIM7_DAC2_interrupt, HaltProc
+  .set COMP2_interrupt, HaltProc
+  .set COMP4_6_interrupt, HaltProc
+  .set FPU_interrupt, HaltProc
+  .text
+end;
+end.
diff -Naur fpc-save/rtl/embedded/arm/stm32f334x8.pp fpc/rtl/embedded/arm/stm32f334x8.pp
--- fpc-save/rtl/embedded/arm/stm32f334x8.pp	1970-01-01 01:00:00.000000000 +0100
+++ fpc/rtl/embedded/arm/stm32f334x8.pp	2018-03-02 17:07:31.000000000 +0100
@@ -0,0 +1,988 @@
+unit stm32f334x8;
+interface
+{$PACKRECORDS C}
+{$GOTO ON}
+// *
+// ******************************************************************************
+// * @file    stm32f334x8.h
+// * @author  MCD Application Team
+//   CMSIS STM32F334x8 Devices Peripheral Access Layer Header File.
+// *
+// *          This file contains:
+// *           - Data structures and the address mapping for all peripherals
+// *           - Peripheral's registers declarations and bits definition
+// *           - Macros to access peripheral’s registers hardware
+// *
+// ******************************************************************************
+// * @attention
+// *
+// * <h2><center>&copy; COPYRIGHT(c) 2016 STMicroelectronics</center></h2>
+// *
+// * Redistribution and use in source and binary forms, with or without modification,
+// * are permitted provided that the following conditions are met:
+// *   1. Redistributions of source code must retain the above copyright notice,
+// *      this list of conditions and the following disclaimer.
+// *   2. Redistributions in binary form must reproduce the above copyright notice,
+// *      this list of conditions and the following disclaimer in the documentation
+// *      and/or other materials provided with the distribution.
+// *   3. Neither the name of STMicroelectronics nor the names of its contributors
+// *      may be used to endorse or promote products derived from this software
+// *      without specific prior written permission.
+// *
+// * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
+// * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
+// * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+// * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE
+// * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
+// * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
+// * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER
+// * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+// * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
+// * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
+// *
+// ******************************************************************************
+// Configuration of the Cortex-M4 Processor and Core Peripherals
+// STM32F334x8 devices Interrupt Number Definition, according to the selected device
+// *        in @ref Library_configuration_section
+
+type
+  TIRQn_Enum   = (
+    NonMaskableInt_IRQn = -14,        // 2 Non Maskable Interrupt
+    HardFault_IRQn = -13,             // 3 Cortex-M4 Hard Fault Interrupt
+    MemoryManagement_IRQn = -12,      // 4 Cortex-M4 Memory Management Interrupt
+    BusFault_IRQn = -11,              // 5 Cortex-M4 Bus Fault Interrupt
+    UsageFault_IRQn = -10,            // 6 Cortex-M4 Usage Fault Interrupt
+    SVCall_IRQn = -5,                 // 11 Cortex-M4 SV Call Interrupt
+    DebugMonitor_IRQn = -4,           // 12 Cortex-M4 Debug Monitor Interrupt
+    PendSV_IRQn = -2,                 // 14 Cortex-M4 Pend SV Interrupt
+    SysTick_IRQn = -1,                // 15 Cortex-M4 System Tick Interrupt
+    WWDG_IRQn  = 0,                   // Window WatchDog Interrupt
+    PVD_IRQn   = 1,                   // PVD through EXTI Line detection Interrupt
+    TAMP_STAMP_IRQn = 2,              // Tamper and TimeStamp interrupts through the EXTI line 19
+    RTC_WKUP_IRQn = 3,                // RTC Wakeup interrupt through the EXTI line 20
+    FLASH_IRQn = 4,                   // FLASH global Interrupt
+    RCC_IRQn   = 5,                   // RCC global Interrupt
+    EXTI0_IRQn = 6,                   // EXTI Line0 Interrupt
+    EXTI1_IRQn = 7,                   // EXTI Line1 Interrupt
+    EXTI2_TSC_IRQn = 8,               // EXTI Line2 Interrupt and Touch Sense Controller Interrupt
+    EXTI3_IRQn = 9,                   // EXTI Line3 Interrupt
+    EXTI4_IRQn = 10,                  // EXTI Line4 Interrupt
+    DMA1_Channel1_IRQn = 11,          // DMA1 Channel 1 Interrupt
+    DMA1_Channel2_IRQn = 12,          // DMA1 Channel 2 Interrupt
+    DMA1_Channel3_IRQn = 13,          // DMA1 Channel 3 Interrupt
+    DMA1_Channel4_IRQn = 14,          // DMA1 Channel 4 Interrupt
+    DMA1_Channel5_IRQn = 15,          // DMA1 Channel 5 Interrupt
+    DMA1_Channel6_IRQn = 16,          // DMA1 Channel 6 Interrupt
+    DMA1_Channel7_IRQn = 17,          // DMA1 Channel 7 Interrupt
+    ADC1_2_IRQn = 18,                 // ADC1 & ADC2 Interrupts
+    CAN_TX_IRQn = 19,                 // CAN TX Interrupt
+    CAN_RX0_IRQn = 20,                // CAN RX0 Interrupt
+    CAN_RX1_IRQn = 21,                // CAN RX1 Interrupt
+    CAN_SCE_IRQn = 22,                // CAN SCE Interrupt
+    EXTI9_5_IRQn = 23,                // External Line[9:5] Interrupts
+    TIM1_BRK_TIM15_IRQn = 24,         // TIM1 Break and TIM15 Interrupts
+    TIM1_UP_TIM16_IRQn = 25,          // TIM1 Update and TIM16 Interrupts
+    TIM1_TRG_COM_TIM17_IRQn = 26,     // TIM1 Trigger and Commutation and TIM17 Interrupt
+    TIM1_CC_IRQn = 27,                // TIM1 Capture Compare Interrupt
+    TIM2_IRQn  = 28,                  // TIM2 global Interrupt
+    TIM3_IRQn  = 29,                  // TIM3 global Interrupt
+    I2C1_EV_IRQn = 31,                // I2C1 Event Interrupt & EXTI Line23 Interrupt (I2C1 wakeup)
+    I2C1_ER_IRQn = 32,                // I2C1 Error Interrupt
+    SPI1_IRQn  = 35,                  // SPI1 global Interrupt
+    USART1_IRQn = 37,                 // USART1 global Interrupt & EXTI Line25 Interrupt (USART1 wakeup)
+    USART2_IRQn = 38,                 // USART2 global Interrupt & EXTI Line26 Interrupt (USART2 wakeup)
+    USART3_IRQn = 39,                 // USART3 global Interrupt & EXTI Line28 Interrupt (USART3 wakeup)
+    EXTI15_10_IRQn = 40,              // External Line[15:10] Interrupts
+    RTC_Alarm_IRQn = 41,              // RTC Alarm (A and B) through EXTI Line 17 Interrupt
+    TIM6_DAC1_IRQn = 54,              // TIM6 global and DAC1 underrun error Interrupts
+    TIM7_DAC2_IRQn = 55,              // TIM7 global and DAC2 channel1 underrun error Interrupt
+    COMP2_IRQn = 64,                  // COMP2 global Interrupt via EXTI Line22
+    COMP4_6_IRQn = 65,                // COMP4 and COMP6 global Interrupt via EXTI Line30 and 32
+    HRTIM1_Master_IRQn = 67,          // HRTIM Master Timer global Interrupts
+    HRTIM1_TIMA_IRQn = 68,            // HRTIM Timer A global Interrupt
+    HRTIM1_TIMB_IRQn = 69,            // HRTIM Timer B global Interrupt
+    HRTIM1_TIMC_IRQn = 70,            // HRTIM Timer C global Interrupt
+    HRTIM1_TIMD_IRQn = 71,            // HRTIM Timer D global Interrupt
+    HRTIM1_TIME_IRQn = 72,            // HRTIM Timer E global Interrupt
+    HRTIM1_FLT_IRQn = 73,             // HRTIM Fault global Interrupt
+    FPU_IRQn   = 81                   // Floating point Interrupt
+  );
+
+  TADC_Registers = record
+    ISR        : longword;            // ADC Interrupt and Status Register
+    IER        : longword;            // ADC Interrupt Enable Register
+    CR         : longword;            // ADC control register
+    CFGR       : longword;            // ADC Configuration register
+    RESERVED0  : longword;            // Reserved, 0x010
+    SMPR1      : longword;            // ADC sample time register 1
+    SMPR2      : longword;            // ADC sample time register 2
+    RESERVED1  : longword;            // Reserved, 0x01C
+    TR1        : longword;            // ADC watchdog threshold register 1
+    TR2        : longword;            // ADC watchdog threshold register 2
+    TR3        : longword;            // ADC watchdog threshold register 3
+    RESERVED2  : longword;            // Reserved, 0x02C
+    SQR1       : longword;            // ADC regular sequence register 1
+    SQR2       : longword;            // ADC regular sequence register 2
+    SQR3       : longword;            // ADC regular sequence register 3
+    SQR4       : longword;            // ADC regular sequence register 4
+    DR         : longword;            // ADC regular data register
+    RESERVED3  : longword;            // Reserved, 0x044
+    RESERVED4  : longword;            // Reserved, 0x048
+    JSQR       : longword;            // ADC injected sequence register
+    RESERVED5  : array[0..3] of longword; // Reserved, 0x050 - 0x05C
+    OFR1       : longword;            // ADC offset register 1
+    OFR2       : longword;            // ADC offset register 2
+    OFR3       : longword;            // ADC offset register 3
+    OFR4       : longword;            // ADC offset register 4
+    RESERVED6  : array[0..3] of longword; // Reserved, 0x070 - 0x07C
+    JDR1       : longword;            // ADC injected data register 1
+    JDR2       : longword;            // ADC injected data register 2
+    JDR3       : longword;            // ADC injected data register 3
+    JDR4       : longword;            // ADC injected data register 4
+    RESERVED7  : array[0..3] of longword; // Reserved, 0x090 - 0x09C
+    AWD2CR     : longword;            // ADC  Analog Watchdog 2 Configuration Register
+    AWD3CR     : longword;            // ADC  Analog Watchdog 3 Configuration Register
+    RESERVED8  : longword;            // Reserved, 0x0A8
+    RESERVED9  : longword;            // Reserved, 0x0AC
+    DIFSEL     : longword;            // ADC  Differential Mode Selection Register
+    CALFACT    : longword;            // ADC  Calibration Factors
+  end;
+
+  TADC_COMMON_Registers = record
+    CSR        : longword;            // ADC Common status register
+    RESERVED   : longword;            // Reserved, ADC1/3 base address + 0x304
+    CCR        : longword;            // ADC common control register
+    CDR        : longword;            // ADC common regular data register for dual
+  end;
+
+  TCAN_TXMAILBOX_Registers = record
+    TIR        : longword;            // CAN TX mailbox identifier register
+    TDTR       : longword;            // CAN mailbox data length control and time stamp register
+    TDLR       : longword;            // CAN mailbox data low register
+    TDHR       : longword;            // CAN mailbox data high register
+  end;
+
+  TCAN_FIFOMAILBOX_Registers = record
+    RIR        : longword;            // CAN receive FIFO mailbox identifier register
+    RDTR       : longword;            // CAN receive FIFO mailbox data length control and time stamp register
+    RDLR       : longword;            // CAN receive FIFO mailbox data low register
+    RDHR       : longword;            // CAN receive FIFO mailbox data high register
+  end;
+
+  TCAN_FILTERREGISTER_Registers = record
+    FR1        : longword;            // CAN Filter bank register 1
+    FR2        : longword;            // CAN Filter bank register 1
+  end;
+
+  TCAN_Registers = record
+    MCR        : longword;            // CAN master control register
+    MSR        : longword;            // CAN master status register
+    TSR        : longword;            // CAN transmit status register
+    RF0R       : longword;            // CAN receive FIFO 0 register
+    RF1R       : longword;            // CAN receive FIFO 1 register
+    IER        : longword;            // CAN interrupt enable register
+    ESR        : longword;            // CAN error status register
+    BTR        : longword;            // CAN bit timing register
+    RESERVED0  : array[0..87] of longword; // Reserved, 0x020 - 0x17F
+    sTxMailBox : array[0..2] of TCAN_TxMailBox_Registers; // CAN Tx MailBox
+    sFIFOMailBox : array[0..1] of TCAN_FIFOMailBox_Registers; // CAN FIFO MailBox
+    RESERVED1  : array[0..11] of longword; // Reserved, 0x1D0 - 0x1FF
+    FMR        : longword;            // CAN filter master register
+    FM1R       : longword;            // CAN filter mode register
+    RESERVED2  : longword;            // Reserved, 0x208
+    FS1R       : longword;            // CAN filter scale register
+    RESERVED3  : longword;            // Reserved, 0x210
+    FFA1R      : longword;            // CAN filter FIFO assignment register
+    RESERVED4  : longword;            // Reserved, 0x218
+    FA1R       : longword;            // CAN filter activation register
+    RESERVED5  : array[0..7] of longword; // Reserved, 0x220-0x23F
+    sFilterRegister : array[0..27] of TCAN_FilterRegister_Registers; // CAN Filter Register
+  end;
+
+  TCOMP_Registers = record
+    CSR        : longword;            // COMP control and status register
+  end;
+
+  TCOMP_COMMON_Registers = record
+    CSR        : longword;            // COMP control and status register, used for bits common to several COMP instances
+  end;
+
+  TCRC_Registers = record
+    DR         : longword;            // CRC Data register
+    IDR        : byte;                // CRC Independent data register
+    RESERVED0  : byte;                // Reserved,                                                    0x05
+    RESERVED1  : word;                // Reserved,                                                    0x06
+    CR         : longword;            // CRC Control register
+    RESERVED2  : longword;            // Reserved,                                                    0x0C
+    INIT       : longword;            // Initial CRC value register
+    POL        : longword;            // CRC polynomial register
+  end;
+
+  TDAC_Registers = record
+    CR         : longword;            // DAC control register
+    SWTRIGR    : longword;            // DAC software trigger register
+    DHR12R1    : longword;            // DAC channel1 12-bit right-aligned data holding register
+    DHR12L1    : longword;            // DAC channel1 12-bit left aligned data holding register
+    DHR8R1     : longword;            // DAC channel1 8-bit right aligned data holding register
+    DHR12R2    : longword;            // DAC channel2 12-bit right aligned data holding register
+    DHR12L2    : longword;            // DAC channel2 12-bit left aligned data holding register
+    DHR8R2     : longword;            // DAC channel2 8-bit right-aligned data holding register
+    DHR12RD    : longword;            // Dual DAC 12-bit right-aligned data holding register
+    DHR12LD    : longword;            // DUAL DAC 12-bit left aligned data holding register
+    DHR8RD     : longword;            // DUAL DAC 8-bit right aligned data holding register
+    DOR1       : longword;            // DAC channel1 data output register
+    DOR2       : longword;            // DAC channel2 data output register
+    SR         : longword;            // DAC status register
+  end;
+
+  TDBGMCU_Registers = record
+    IDCODE     : longword;            // MCU device ID code
+    CR         : longword;            // Debug MCU configuration register
+    APB1FZ     : longword;            // Debug MCU APB1 freeze register
+    APB2FZ     : longword;            // Debug MCU APB2 freeze register
+  end;
+
+  TDMA_CHANNEL_Registers = record
+    CCR        : longword;            // DMA channel x configuration register
+    CNDTR      : longword;            // DMA channel x number of data register
+    CPAR       : longword;            // DMA channel x peripheral address register
+    CMAR       : longword;            // DMA channel x memory address register
+  end;
+
+  TDMA_Registers = record
+    ISR        : longword;            // DMA interrupt status register
+    IFCR       : longword;            // DMA interrupt flag clear register
+  end;
+
+  TEXTI_Registers = record
+    IMR        : longword;            // XTI Interrupt mask register
+    EMR        : longword;            // XTI Event mask register
+    RTSR       : longword;            // XTI Rising trigger selection register
+    FTSR       : longword;            // XTI Falling trigger selection register
+    SWIER      : longword;            // XTI Software interrupt event register
+    PR         : longword;            // XTI Pending register
+    RESERVED1  : longword;            // Reserved, 0x18
+    RESERVED2  : longword;            // Reserved, 0x1C
+    IMR2       : longword;            // EXTI Interrupt mask register
+    EMR2       : longword;            // EXTI Event mask register
+    RTSR2      : longword;            // EXTI Rising trigger selection register
+    FTSR2      : longword;            // EXTI Falling trigger selection register
+    SWIER2     : longword;            // EXTI Software interrupt event register
+    PR2        : longword;            // EXTI Pending register
+  end;
+
+  TFLASH_Registers = record
+    ACR        : longword;            // FLASH access control register
+    KEYR       : longword;            // FLASH key register
+    OPTKEYR    : longword;            // FLASH option key register
+    SR         : longword;            // FLASH status register
+    CR         : longword;            // FLASH control register
+    AR         : longword;            // FLASH address register
+    RESERVED   : longword;            // Reserved, 0x18
+    OBR        : longword;            // FLASH Option byte register
+    WRPR       : longword;            // FLASH Write register
+  end;
+
+  TOB_Registers = record
+    RDP        : word;                // LASH option byte Read protection
+    USER       : word;                // LASH option byte user options
+    RESERVED0  : word;                // Reserved,                                                     0x04
+    RESERVED1  : word;                // Reserved,                                                     0x06
+    WRP0       : word;                // LASH option byte write protection 0
+    WRP1       : word;                // LASH option byte write protection 1
+    WRP2       : word;                // LASH option byte write protection 2
+    WRP3       : word;                // LASH option byte write protection 3
+  end;
+
+  TGPIO_Registers = record
+    MODER      : longword;            // GPIO port mode register
+    OTYPER     : longword;            // GPIO port output type register
+    OSPEEDR    : longword;            // GPIO port output speed register
+    PUPDR      : longword;            // GPIO port pull-up/pull-down register
+    IDR        : longword;            // GPIO port input data register
+    ODR        : longword;            // GPIO port output data register
+    BSRR       : longword;            // GPIO port bit set/reset register
+    LCKR       : longword;            // GPIO port configuration lock register
+    AFR        : array[0..1] of longword; // GPIO alternate function registers
+    BRR        : longword;            // GPIO bit reset register
+  end;
+
+  TOPAMP_Registers = record
+    CSR        : longword;            // OPAMP control and status register
+  end;
+
+  THRTIM_MASTER_Registers = record
+    MCR        : longword;            // HRTIM Master Timer control register
+    MISR       : longword;            // HRTIM Master Timer interrupt status register
+    MICR       : longword;            // HRTIM Master Timer interupt clear register
+    MDIER      : longword;            // HRTIM Master Timer DMA/interrupt enable register
+    MCNTR      : longword;            // HRTIM Master Timer counter register
+    MPER       : longword;            // HRTIM Master Timer period register
+    MREP       : longword;            // HRTIM Master Timer repetition register
+    MCMP1R     : longword;            // HRTIM Master Timer compare 1 register
+    RESERVED0  : longword;            // Reserved,                                                                0x20
+    MCMP2R     : longword;            // HRTIM Master Timer compare 2 register
+    MCMP3R     : longword;            // HRTIM Master Timer compare 3 register
+    MCMP4R     : longword;            // HRTIM Master Timer compare 4 register
+    RESERVED1  : array[0..19] of longword; // Reserved,                                                          0x30..0x7C
+  end;
+
+  THRTIM_TIMERX_Registers = record
+    TIMxCR     : longword;            // HRTIM Timerx control register
+    TIMxISR    : longword;            // HRTIM Timerx interrupt status register
+    TIMxICR    : longword;            // HRTIM Timerx interrupt clear register
+    TIMxDIER   : longword;            // HRTIM Timerx DMA/interrupt enable register
+    CNTxR      : longword;            // HRTIM Timerx counter register
+    PERxR      : longword;            // HRTIM Timerx period register
+    REPxR      : longword;            // HRTIM Timerx repetition register
+    CMP1xR     : longword;            // HRTIM Timerx compare 1 register
+    CMP1CxR    : longword;            // HRTIM Timerx compare 1 compound register
+    CMP2xR     : longword;            // HRTIM Timerx compare 2 register
+    CMP3xR     : longword;            // HRTIM Timerx compare 3 register
+    CMP4xR     : longword;            // HRTIM Timerx compare 4 register
+    CPT1xR     : longword;            // HRTIM Timerx capture 1 register
+    CPT2xR     : longword;            // HRTIM Timerx capture 2 register
+    DTxR       : longword;            // HRTIM Timerx dead time register
+    SETx1R     : longword;            // HRTIM Timerx output 1 set register
+    RSTx1R     : longword;            // HRTIM Timerx output 1 reset register
+    SETx2R     : longword;            // HRTIM Timerx output 2 set register
+    RSTx2R     : longword;            // HRTIM Timerx output 2 reset register
+    EEFxR1     : longword;            // HRTIM Timerx external event filtering 1 register
+    EEFxR2     : longword;            // HRTIM Timerx external event filtering 2 register
+    RSTxR      : longword;            // HRTIM Timerx Reset register
+    CHPxR      : longword;            // HRTIM Timerx Chopper register
+    CPT1xCR    : longword;            // HRTIM Timerx Capture 1 register
+    CPT2xCR    : longword;            // HRTIM Timerx Capture 2 register
+    OUTxR      : longword;            // HRTIM Timerx Output register
+    FLTxR      : longword;            // HRTIM Timerx Fault register
+    RESERVED0  : array[0..4] of longword; // Reserved,                                                              0x6C..0x7C
+  end;
+
+  THRTIM_COMMON_Registers = record
+    CR1        : longword;            // HRTIM control register1
+    CR2        : longword;            // HRTIM control register2
+    ISR        : longword;            // HRTIM interrupt status register
+    ICR        : longword;            // HRTIM interrupt clear register
+    IER        : longword;            // HRTIM interrupt enable register
+    OENR       : longword;            // HRTIM Output enable register
+    ODISR      : longword;            // HRTIM Output disable register
+    ODSR       : longword;            // HRTIM Output disable status register
+    BMCR       : longword;            // HRTIM Burst mode control register
+    BMTRGR     : longword;            // HRTIM Busrt mode trigger register
+    BMCMPR     : longword;            // HRTIM Burst mode compare register
+    BMPER      : longword;            // HRTIM Burst mode period register
+    EECR1      : longword;            // HRTIM Timer external event control register1
+    EECR2      : longword;            // HRTIM Timer external event control register2
+    EECR3      : longword;            // HRTIM Timer external event control register3
+    ADC1R      : longword;            // HRTIM ADC Trigger 1 register
+    ADC2R      : longword;            // HRTIM ADC Trigger 2 register
+    ADC3R      : longword;            // HRTIM ADC Trigger 3 register
+    ADC4R      : longword;            // HRTIM ADC Trigger 4 register
+    DLLCR      : longword;            // HRTIM DLL control register
+    FLTINR1    : longword;            // HRTIM Fault input register1
+    FLTINR2    : longword;            // HRTIM Fault input register2
+    BDMUPR     : longword;            // HRTIM Burst DMA Master Timer update register
+    BDTAUPR    : longword;            // HRTIM Burst DMA Timerx update register
+    BDTBUPR    : longword;            // HRTIM Burst DMA Timerx update register
+    BDTCUPR    : longword;            // HRTIM Burst DMA Timerx update register
+    BDTDUPR    : longword;            // HRTIM Burst DMA Timerx update register
+    BDTEUPR    : longword;            // HRTIM Burst DMA Timerx update register
+    BDMADR     : longword;            // HRTIM Burst DMA Master Data register
+  end;
+
+  THRTIM_Registers = record
+    sMasterRegs : THRTIM_Master_Registers;
+    sTimerxRegs : array[0..4] of THRTIM_Timerx_Registers;
+    RESERVED0  : array[0..31] of longword;
+    sCommonRegs : THRTIM_Common_Registers;
+  end;
+
+  TSYSCFG_Registers = record
+    CFGR1      : longword;            // SYSCFG configuration register 1
+    RCR        : longword;            // SYSCFG CCM SRAM protection register
+    EXTICR     : array[0..3] of longword; // SYSCFG external interrupt configuration registers
+    CFGR2      : longword;            // SYSCFG configuration register 2
+    RESERVED0  : longword;            // Reserved,                                                           0x1C
+    RESERVED1  : longword;            // Reserved,                                                          0x20
+    RESERVED2  : longword;            // Reserved,                                                          0x24
+    RESERVED4  : longword;            // Reserved,                                                          0x28
+    RESERVED5  : longword;            // Reserved,                                                          0x2C
+    RESERVED6  : longword;            // Reserved,                                                          0x30
+    RESERVED7  : longword;            // Reserved,                                                          0x34
+    RESERVED8  : longword;            // Reserved,                                                          0x38
+    RESERVED9  : longword;            // Reserved,                                                          0x3C
+    RESERVED10 : longword;            // Reserved,                                                          0x40
+    RESERVED11 : longword;            // Reserved,                                                          0x44
+    RESERVED12 : longword;            // Reserved,                                                          0x48
+    RESERVED13 : longword;            // Reserved,                                                          0x4C
+    CFGR3      : longword;            // SYSCFG configuration register 3
+  end;
+
+  TI2C_Registers = record
+    CR1        : longword;            // I2C Control register 1
+    CR2        : longword;            // I2C Control register 2
+    OAR1       : longword;            // I2C Own address 1 register
+    OAR2       : longword;            // I2C Own address 2 register
+    TIMINGR    : longword;            // I2C Timing register
+    TIMEOUTR   : longword;            // I2C Timeout register
+    ISR        : longword;            // I2C Interrupt and status register
+    ICR        : longword;            // I2C Interrupt clear register
+    PECR       : longword;            // I2C PEC register
+    RXDR       : longword;            // I2C Receive data register
+    TXDR       : longword;            // I2C Transmit data register
+  end;
+
+  TIWDG_Registers = record
+    KR         : longword;            // IWDG Key register
+    PR         : longword;            // IWDG Prescaler register
+    RLR        : longword;            // IWDG Reload register
+    SR         : longword;            // IWDG Status register
+    WINR       : longword;            // IWDG Window register
+  end;
+
+  TPWR_Registers = record
+    CR         : longword;            // PWR power control register
+    CSR        : longword;            // PWR power control/status register
+  end;
+
+  TRCC_Registers = record
+    CR         : longword;            // RCC clock control register
+    CFGR       : longword;            // RCC clock configuration register
+    CIR        : longword;            // RCC clock interrupt register
+    APB2RSTR   : longword;            // RCC APB2 peripheral reset register
+    APB1RSTR   : longword;            // RCC APB1 peripheral reset register
+    AHBENR     : longword;            // RCC AHB peripheral clock register
+    APB2ENR    : longword;            // RCC APB2 peripheral clock enable register
+    APB1ENR    : longword;            // RCC APB1 peripheral clock enable register
+    BDCR       : longword;            // RCC Backup domain control register
+    CSR        : longword;            // RCC clock control & status register
+    AHBRSTR    : longword;            // RCC AHB peripheral reset register
+    CFGR2      : longword;            // RCC clock configuration register 2
+    CFGR3      : longword;            // RCC clock configuration register 3
+  end;
+
+  TRTC_Registers = record
+    TR         : longword;            // RTC time register
+    DR         : longword;            // RTC date register
+    CR         : longword;            // RTC control register
+    ISR        : longword;            // RTC initialization and status register
+    PRER       : longword;            // RTC prescaler register
+    WUTR       : longword;            // RTC wakeup timer register
+    RESERVED0  : longword;            // Reserved, 0x18
+    ALRMAR     : longword;            // RTC alarm A register
+    ALRMBR     : longword;            // RTC alarm B register
+    WPR        : longword;            // RTC write protection register
+    SSR        : longword;            // RTC sub second register
+    SHIFTR     : longword;            // RTC shift control register
+    TSTR       : longword;            // RTC time stamp time register
+    TSDR       : longword;            // RTC time stamp date register
+    TSSSR      : longword;            // RTC time-stamp sub second register
+    CALR       : longword;            // RTC calibration register
+    TAFCR      : longword;            // RTC tamper and alternate function configuration register
+    ALRMASSR   : longword;            // RTC alarm A sub second register
+    ALRMBSSR   : longword;            // RTC alarm B sub second register
+    RESERVED7  : longword;            // Reserved, 0x4C
+    BKP0R      : longword;            // RTC backup register 0
+    BKP1R      : longword;            // RTC backup register 1
+    BKP2R      : longword;            // RTC backup register 2
+    BKP3R      : longword;            // RTC backup register 3
+    BKP4R      : longword;            // RTC backup register 4
+  end;
+
+  TSPI_Registers = record
+    CR1        : longword;            // SPI Control register 1
+    CR2        : longword;            // SPI Control register 2
+    SR         : longword;            // SPI Status register
+    DR         : longword;            // SPI data register
+    CRCPR      : longword;            // SPI CRC polynomial register
+    RXCRCR     : longword;            // SPI Rx CRC register
+    TXCRCR     : longword;            // SPI Tx CRC register
+  end;
+
+  TTIM_Registers = record
+    CR1        : longword;            // TIM control register 1
+    CR2        : longword;            // TIM control register 2
+    SMCR       : longword;            // TIM slave mode control register
+    DIER       : longword;            // TIM DMA/interrupt enable register
+    SR         : longword;            // TIM status register
+    EGR        : longword;            // TIM event generation register
+    CCMR1      : longword;            // TIM capture/compare mode register 1
+    CCMR2      : longword;            // TIM capture/compare mode register 2
+    CCER       : longword;            // TIM capture/compare enable register
+    CNT        : longword;            // TIM counter register
+    PSC        : longword;            // TIM prescaler
+    ARR        : longword;            // TIM auto-reload register
+    RCR        : longword;            // TIM repetition counter register
+    CCR1       : longword;            // TIM capture/compare register 1
+    CCR2       : longword;            // TIM capture/compare register 2
+    CCR3       : longword;            // TIM capture/compare register 3
+    CCR4       : longword;            // TIM capture/compare register 4
+    BDTR       : longword;            // TIM break and dead-time register
+    DCR        : longword;            // TIM DMA control register
+    DMAR       : longword;            // TIM DMA address for full transfer
+    &OR        : longword;            // TIM option register
+    CCMR3      : longword;            // TIM capture/compare mode register 3
+    CCR5       : longword;            // TIM capture/compare register5
+    CCR6       : longword;            // TIM capture/compare register 4
+  end;
+
+  TTSC_Registers = record
+    CR         : longword;            // TSC control register
+    IER        : longword;            // TSC interrupt enable register
+    ICR        : longword;            // TSC interrupt clear register
+    ISR        : longword;            // TSC interrupt status register
+    IOHCR      : longword;            // TSC I/O hysteresis control register
+    RESERVED1  : longword;            // Reserved
+    IOASCR     : longword;            // TSC I/O analog switch control register
+    RESERVED2  : longword;            // Reserved
+    IOSCR      : longword;            // TSC I/O sampling control register
+    RESERVED3  : longword;            // Reserved
+    IOCCR      : longword;            // TSC I/O channel control register
+    RESERVED4  : longword;            // Reserved
+    IOGCSR     : longword;            // TSC I/O group control status register
+    IOGXCR     : array[0..7] of longword; // TSC I/O group x counter register
+  end;
+
+  TUSART_Registers = record
+    CR1        : longword;            // USART Control register 1
+    CR2        : longword;            // USART Control register 2
+    CR3        : longword;            // USART Control register 3
+    BRR        : longword;            // USART Baud rate register
+    GTPR       : longword;            // USART Guard time and prescaler register
+    RTOR       : longword;            // USART Receiver Time Out register
+    RQR        : longword;            // USART Request register
+    ISR        : longword;            // USART Interrupt and status register
+    ICR        : longword;            // USART Interrupt flag Clear register
+    RDR        : word;                // USART Receive Data register
+    RESERVED1  : word;                // Reserved, 0x26
+    TDR        : word;                // USART Transmit Data register
+    RESERVED2  : word;                // Reserved, 0x2A
+  end;
+
+  TWWDG_Registers = record
+    CR         : longword;            // WWDG Control register
+    CFR        : longword;            // WWDG Configuration register
+    SR         : longword;            // WWDG Status register
+  end;
+
+const
+  FLASH_BASE   = $08000000;           // FLASH base address in the alias region
+  CCMDATARAM_BASE = $10000000;        // CCM(core coupled memory) data RAM base address in the alias region
+  SRAM_BASE    = $20000000;           // SRAM base address in the alias region
+  PERIPH_BASE  = $40000000;           // Peripheral base address in the alias region
+  SRAM_BB_BASE = $22000000;           // SRAM base address in the bit-band region
+  PERIPH_BB_BASE = $42000000;         // Peripheral base address in the bit-band region
+  APB1PERIPH_BASE = $40000000;
+  APB2PERIPH_BASE = PERIPH_BASE + $00010000;
+  AHB1PERIPH_BASE = PERIPH_BASE + $00020000;
+  AHB2PERIPH_BASE = PERIPH_BASE + $08000000;
+  AHB3PERIPH_BASE = PERIPH_BASE + $10000000;
+  TIM2_BASE    = APB1PERIPH_BASE + $00000000;
+  TIM3_BASE    = APB1PERIPH_BASE + $00000400;
+  TIM6_BASE    = APB1PERIPH_BASE + $00001000;
+  TIM7_BASE    = APB1PERIPH_BASE + $00001400;
+  RTC_BASE     = APB1PERIPH_BASE + $00002800;
+  WWDG_BASE    = APB1PERIPH_BASE + $00002C00;
+  IWDG_BASE    = APB1PERIPH_BASE + $00003000;
+  USART2_BASE  = APB1PERIPH_BASE + $00004400;
+  USART3_BASE  = APB1PERIPH_BASE + $00004800;
+  I2C1_BASE    = APB1PERIPH_BASE + $00005400;
+  CAN_BASE     = APB1PERIPH_BASE + $00006400;
+  PWR_BASE     = APB1PERIPH_BASE + $00007000;
+  DAC1_BASE    = APB1PERIPH_BASE + $00007400;
+  DAC2_BASE    = APB1PERIPH_BASE + $00009800;
+  DAC_BASE     = APB1PERIPH_BASE + $00007400;
+  SYSCFG_BASE  = APB2PERIPH_BASE + $00000000;
+  COMP2_BASE   = APB2PERIPH_BASE + $00000020;
+  COMP4_BASE   = APB2PERIPH_BASE + $00000028;
+  COMP6_BASE   = APB2PERIPH_BASE + $00000030;
+  COMP_BASE    = APB2PERIPH_BASE + $00000020;
+  OPAMP2_BASE  = APB2PERIPH_BASE + $0000003C;
+  OPAMP_BASE   = APB2PERIPH_BASE + $0000003C;
+  EXTI_BASE    = APB2PERIPH_BASE + $00000400;
+  TIM1_BASE    = APB2PERIPH_BASE + $00002C00;
+  SPI1_BASE    = APB2PERIPH_BASE + $00003000;
+  USART1_BASE  = APB2PERIPH_BASE + $00003800;
+  TIM15_BASE   = APB2PERIPH_BASE + $00004000;
+  TIM16_BASE   = APB2PERIPH_BASE + $00004400;
+  TIM17_BASE   = APB2PERIPH_BASE + $00004800;
+  HRTIM1_BASE  = APB2PERIPH_BASE + $00007400;
+  HRTIM1_TIMA_BASE = HRTIM1_BASE + $00000080;
+  HRTIM1_TIMB_BASE = HRTIM1_BASE + $00000100;
+  HRTIM1_TIMC_BASE = HRTIM1_BASE + $00000180;
+  HRTIM1_TIMD_BASE = HRTIM1_BASE + $00000200;
+  HRTIM1_TIME_BASE = HRTIM1_BASE + $00000280;
+  HRTIM1_COMMON_BASE = HRTIM1_BASE + $00000380;
+  DMA1_BASE    = AHB1PERIPH_BASE + $00000000;
+  DMA1_Channel1_BASE = AHB1PERIPH_BASE + $00000008;
+  DMA1_Channel2_BASE = AHB1PERIPH_BASE + $0000001C;
+  DMA1_Channel3_BASE = AHB1PERIPH_BASE + $00000030;
+  DMA1_Channel4_BASE = AHB1PERIPH_BASE + $00000044;
+  DMA1_Channel5_BASE = AHB1PERIPH_BASE + $00000058;
+  DMA1_Channel6_BASE = AHB1PERIPH_BASE + $0000006C;
+  DMA1_Channel7_BASE = AHB1PERIPH_BASE + $00000080;
+  RCC_BASE     = AHB1PERIPH_BASE + $00001000;
+  FLASH_R_BASE = AHB1PERIPH_BASE + $00002000; // Flash registers base address
+  OB_BASE      = $1FFFF800;           // Flash Option Bytes base address
+  FLASHSIZE_BASE = $1FFFF7CC;         // FLASH Size register base address
+  UID_BASE     = $1FFFF7AC;           // Unique device ID register base address
+  CRC_BASE     = AHB1PERIPH_BASE + $00003000;
+  TSC_BASE     = AHB1PERIPH_BASE + $00004000;
+  GPIOA_BASE   = AHB2PERIPH_BASE + $00000000;
+  GPIOB_BASE   = AHB2PERIPH_BASE + $00000400;
+  GPIOC_BASE   = AHB2PERIPH_BASE + $00000800;
+  GPIOD_BASE   = AHB2PERIPH_BASE + $00000C00;
+  GPIOF_BASE   = AHB2PERIPH_BASE + $00001400;
+  ADC1_BASE    = AHB3PERIPH_BASE + $00000000;
+  ADC2_BASE    = AHB3PERIPH_BASE + $00000100;
+  ADC1_2_COMMON_BASE = AHB3PERIPH_BASE + $00000300;
+  DBGMCU_BASE  = $E0042000;           // Debug MCU registers base address
+
+var
+  HRTIM1       : THRTIM_Registers absolute HRTIM1_BASE;
+  HRTIM1_TIMA  : THRTIM_Registers absolute HRTIM1_TIMA_BASE;
+  HRTIM1_TIMB  : THRTIM_Registers absolute HRTIM1_TIMB_BASE;
+  HRTIM1_TIMC  : THRTIM_Registers absolute HRTIM1_TIMC_BASE;
+  HRTIM1_TIMD  : THRTIM_Registers absolute HRTIM1_TIMD_BASE;
+  HRTIM1_TIME  : THRTIM_Registers absolute HRTIM1_TIME_BASE;
+  HRTIM1_COMMON : THRTIM_Common_Registers absolute HRTIM1_COMMON_BASE;
+  TIM2         : TTIM_Registers absolute TIM2_BASE;
+  TIM3         : TTIM_Registers absolute TIM3_BASE;
+  TIM6         : TTIM_Registers absolute TIM6_BASE;
+  TIM7         : TTIM_Registers absolute TIM7_BASE;
+  RTC          : TRTC_Registers absolute RTC_BASE;
+  WWDG         : TWWDG_Registers absolute WWDG_BASE;
+  IWDG         : TIWDG_Registers absolute IWDG_BASE;
+  USART2       : TUSART_Registers absolute USART2_BASE;
+  USART3       : TUSART_Registers absolute USART3_BASE;
+  I2C1         : TI2C_Registers absolute I2C1_BASE;
+  CAN          : TCAN_Registers absolute CAN_BASE;
+  PWR          : TPWR_Registers absolute PWR_BASE;
+  DAC          : TDAC_Registers absolute DAC_BASE;
+  DAC1         : TDAC_Registers absolute DAC1_BASE;
+  DAC2         : TDAC_Registers absolute DAC2_BASE;
+  COMP2        : TCOMP_Registers absolute COMP2_BASE;
+  COMP4        : TCOMP_Registers absolute COMP4_BASE;
+  COMP6        : TCOMP_Registers absolute COMP6_BASE;
+  COMP         : TCOMP_Registers absolute COMP_BASE;
+  OPAMP        : TOPAMP_Registers absolute OPAMP_BASE;
+  OPAMP2       : TOPAMP_Registers absolute OPAMP2_BASE;
+  SYSCFG       : TSYSCFG_Registers absolute SYSCFG_BASE;
+  EXTI         : TEXTI_Registers absolute EXTI_BASE;
+  TIM1         : TTIM_Registers absolute TIM1_BASE;
+  SPI1         : TSPI_Registers absolute SPI1_BASE;
+  USART1       : TUSART_Registers absolute USART1_BASE;
+  TIM15        : TTIM_Registers absolute TIM15_BASE;
+  TIM16        : TTIM_Registers absolute TIM16_BASE;
+  TIM17        : TTIM_Registers absolute TIM17_BASE;
+  DBGMCU       : TDBGMCU_Registers absolute DBGMCU_BASE;
+  DMA1         : TDMA_Registers absolute DMA1_BASE;
+  DMA1_Channel1 : TDMA_Channel_Registers absolute DMA1_Channel1_BASE;
+  DMA1_Channel2 : TDMA_Channel_Registers absolute DMA1_Channel2_BASE;
+  DMA1_Channel3 : TDMA_Channel_Registers absolute DMA1_Channel3_BASE;
+  DMA1_Channel4 : TDMA_Channel_Registers absolute DMA1_Channel4_BASE;
+  DMA1_Channel5 : TDMA_Channel_Registers absolute DMA1_Channel5_BASE;
+  DMA1_Channel6 : TDMA_Channel_Registers absolute DMA1_Channel6_BASE;
+  DMA1_Channel7 : TDMA_Channel_Registers absolute DMA1_Channel7_BASE;
+  RCC          : TRCC_Registers absolute RCC_BASE;
+  FLASH        : TFLASH_Registers absolute FLASH_R_BASE;
+  OB           : TOB_Registers absolute OB_BASE;
+  CRC          : TCRC_Registers absolute CRC_BASE;
+  TSC          : TTSC_Registers absolute TSC_BASE;
+  GPIOA        : TGPIO_Registers absolute GPIOA_BASE;
+  GPIOB        : TGPIO_Registers absolute GPIOB_BASE;
+  GPIOC        : TGPIO_Registers absolute GPIOC_BASE;
+  GPIOD        : TGPIO_Registers absolute GPIOD_BASE;
+  GPIOF        : TGPIO_Registers absolute GPIOF_BASE;
+  ADC1         : TADC_Registers absolute ADC1_BASE;
+  ADC2         : TADC_Registers absolute ADC2_BASE;
+  ADC12_COMMON : TADC_Common_Registers absolute ADC1_2_COMMON_BASE;
+
+implementation
+
+procedure NonMaskableInt_interrupt; external name 'NonMaskableInt_interrupt';
+procedure HardFault_interrupt; external name 'HardFault_interrupt';
+procedure MemoryManagement_interrupt; external name 'MemoryManagement_interrupt';
+procedure BusFault_interrupt; external name 'BusFault_interrupt';
+procedure UsageFault_interrupt; external name 'UsageFault_interrupt';
+procedure SVCall_interrupt; external name 'SVCall_interrupt';
+procedure DebugMonitor_interrupt; external name 'DebugMonitor_interrupt';
+procedure PendSV_interrupt; external name 'PendSV_interrupt';
+procedure SysTick_interrupt; external name 'SysTick_interrupt';
+procedure WWDG_interrupt; external name 'WWDG_interrupt';
+procedure PVD_interrupt; external name 'PVD_interrupt';
+procedure TAMP_STAMP_interrupt; external name 'TAMP_STAMP_interrupt';
+procedure RTC_WKUP_interrupt; external name 'RTC_WKUP_interrupt';
+procedure FLASH_interrupt; external name 'FLASH_interrupt';
+procedure RCC_interrupt; external name 'RCC_interrupt';
+procedure EXTI0_interrupt; external name 'EXTI0_interrupt';
+procedure EXTI1_interrupt; external name 'EXTI1_interrupt';
+procedure EXTI2_TSC_interrupt; external name 'EXTI2_TSC_interrupt';
+procedure EXTI3_interrupt; external name 'EXTI3_interrupt';
+procedure EXTI4_interrupt; external name 'EXTI4_interrupt';
+procedure DMA1_Channel1_interrupt; external name 'DMA1_Channel1_interrupt';
+procedure DMA1_Channel2_interrupt; external name 'DMA1_Channel2_interrupt';
+procedure DMA1_Channel3_interrupt; external name 'DMA1_Channel3_interrupt';
+procedure DMA1_Channel4_interrupt; external name 'DMA1_Channel4_interrupt';
+procedure DMA1_Channel5_interrupt; external name 'DMA1_Channel5_interrupt';
+procedure DMA1_Channel6_interrupt; external name 'DMA1_Channel6_interrupt';
+procedure DMA1_Channel7_interrupt; external name 'DMA1_Channel7_interrupt';
+procedure ADC1_2_interrupt; external name 'ADC1_2_interrupt';
+procedure CAN_TX_interrupt; external name 'CAN_TX_interrupt';
+procedure CAN_RX0_interrupt; external name 'CAN_RX0_interrupt';
+procedure CAN_RX1_interrupt; external name 'CAN_RX1_interrupt';
+procedure CAN_SCE_interrupt; external name 'CAN_SCE_interrupt';
+procedure EXTI9_5_interrupt; external name 'EXTI9_5_interrupt';
+procedure TIM1_BRK_TIM15_interrupt; external name 'TIM1_BRK_TIM15_interrupt';
+procedure TIM1_UP_TIM16_interrupt; external name 'TIM1_UP_TIM16_interrupt';
+procedure TIM1_TRG_COM_TIM17_interrupt; external name 'TIM1_TRG_COM_TIM17_interrupt';
+procedure TIM1_CC_interrupt; external name 'TIM1_CC_interrupt';
+procedure TIM2_interrupt; external name 'TIM2_interrupt';
+procedure TIM3_interrupt; external name 'TIM3_interrupt';
+procedure I2C1_EV_interrupt; external name 'I2C1_EV_interrupt';
+procedure I2C1_ER_interrupt; external name 'I2C1_ER_interrupt';
+procedure SPI1_interrupt; external name 'SPI1_interrupt';
+procedure USART1_interrupt; external name 'USART1_interrupt';
+procedure USART2_interrupt; external name 'USART2_interrupt';
+procedure USART3_interrupt; external name 'USART3_interrupt';
+procedure EXTI15_10_interrupt; external name 'EXTI15_10_interrupt';
+procedure RTC_Alarm_interrupt; external name 'RTC_Alarm_interrupt';
+procedure TIM6_DAC1_interrupt; external name 'TIM6_DAC1_interrupt';
+procedure TIM7_DAC2_interrupt; external name 'TIM7_DAC2_interrupt';
+procedure COMP2_interrupt; external name 'COMP2_interrupt';
+procedure COMP4_6_interrupt; external name 'COMP4_6_interrupt';
+procedure HRTIM1_Master_interrupt; external name 'HRTIM1_Master_interrupt';
+procedure HRTIM1_TIMA_interrupt; external name 'HRTIM1_TIMA_interrupt';
+procedure HRTIM1_TIMB_interrupt; external name 'HRTIM1_TIMB_interrupt';
+procedure HRTIM1_TIMC_interrupt; external name 'HRTIM1_TIMC_interrupt';
+procedure HRTIM1_TIMD_interrupt; external name 'HRTIM1_TIMD_interrupt';
+procedure HRTIM1_TIME_interrupt; external name 'HRTIM1_TIME_interrupt';
+procedure HRTIM1_FLT_interrupt; external name 'HRTIM1_FLT_interrupt';
+procedure FPU_interrupt; external name 'FPU_interrupt';
+
+{$i cortexm4f_start.inc}
+
+procedure Vectors; assembler; nostackframe;
+label interrupt_vectors;
+asm
+  .section ".init.interrupt_vectors"
+  interrupt_vectors:
+  .long _stack_top
+  .long Startup
+  .long NonMaskableInt_interrupt
+  .long HardFault_interrupt
+  .long MemoryManagement_interrupt
+  .long BusFault_interrupt
+  .long UsageFault_interrupt
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long SVCall_interrupt
+  .long DebugMonitor_interrupt
+  .long 0
+  .long PendSV_interrupt
+  .long SysTick_interrupt
+  .long WWDG_interrupt
+  .long PVD_interrupt
+  .long TAMP_STAMP_interrupt
+  .long RTC_WKUP_interrupt
+  .long FLASH_interrupt
+  .long RCC_interrupt
+  .long EXTI0_interrupt
+  .long EXTI1_interrupt
+  .long EXTI2_TSC_interrupt
+  .long EXTI3_interrupt
+  .long EXTI4_interrupt
+  .long DMA1_Channel1_interrupt
+  .long DMA1_Channel2_interrupt
+  .long DMA1_Channel3_interrupt
+  .long DMA1_Channel4_interrupt
+  .long DMA1_Channel5_interrupt
+  .long DMA1_Channel6_interrupt
+  .long DMA1_Channel7_interrupt
+  .long ADC1_2_interrupt
+  .long CAN_TX_interrupt
+  .long CAN_RX0_interrupt
+  .long CAN_RX1_interrupt
+  .long CAN_SCE_interrupt
+  .long EXTI9_5_interrupt
+  .long TIM1_BRK_TIM15_interrupt
+  .long TIM1_UP_TIM16_interrupt
+  .long TIM1_TRG_COM_TIM17_interrupt
+  .long TIM1_CC_interrupt
+  .long TIM2_interrupt
+  .long TIM3_interrupt
+  .long 0
+  .long I2C1_EV_interrupt
+  .long I2C1_ER_interrupt
+  .long 0
+  .long 0
+  .long SPI1_interrupt
+  .long 0
+  .long USART1_interrupt
+  .long USART2_interrupt
+  .long USART3_interrupt
+  .long EXTI15_10_interrupt
+  .long RTC_Alarm_interrupt
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long TIM6_DAC1_interrupt
+  .long TIM7_DAC2_interrupt
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long COMP2_interrupt
+  .long COMP4_6_interrupt
+  .long 0
+  .long HRTIM1_Master_interrupt
+  .long HRTIM1_TIMA_interrupt
+  .long HRTIM1_TIMB_interrupt
+  .long HRTIM1_TIMC_interrupt
+  .long HRTIM1_TIMD_interrupt
+  .long HRTIM1_TIME_interrupt
+  .long HRTIM1_FLT_interrupt
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long FPU_interrupt
+  .weak NonMaskableInt_interrupt
+  .weak HardFault_interrupt
+  .weak MemoryManagement_interrupt
+  .weak BusFault_interrupt
+  .weak UsageFault_interrupt
+  .weak SVCall_interrupt
+  .weak DebugMonitor_interrupt
+  .weak PendSV_interrupt
+  .weak SysTick_interrupt
+  .weak WWDG_interrupt
+  .weak PVD_interrupt
+  .weak TAMP_STAMP_interrupt
+  .weak RTC_WKUP_interrupt
+  .weak FLASH_interrupt
+  .weak RCC_interrupt
+  .weak EXTI0_interrupt
+  .weak EXTI1_interrupt
+  .weak EXTI2_TSC_interrupt
+  .weak EXTI3_interrupt
+  .weak EXTI4_interrupt
+  .weak DMA1_Channel1_interrupt
+  .weak DMA1_Channel2_interrupt
+  .weak DMA1_Channel3_interrupt
+  .weak DMA1_Channel4_interrupt
+  .weak DMA1_Channel5_interrupt
+  .weak DMA1_Channel6_interrupt
+  .weak DMA1_Channel7_interrupt
+  .weak ADC1_2_interrupt
+  .weak CAN_TX_interrupt
+  .weak CAN_RX0_interrupt
+  .weak CAN_RX1_interrupt
+  .weak CAN_SCE_interrupt
+  .weak EXTI9_5_interrupt
+  .weak TIM1_BRK_TIM15_interrupt
+  .weak TIM1_UP_TIM16_interrupt
+  .weak TIM1_TRG_COM_TIM17_interrupt
+  .weak TIM1_CC_interrupt
+  .weak TIM2_interrupt
+  .weak TIM3_interrupt
+  .weak I2C1_EV_interrupt
+  .weak I2C1_ER_interrupt
+  .weak SPI1_interrupt
+  .weak USART1_interrupt
+  .weak USART2_interrupt
+  .weak USART3_interrupt
+  .weak EXTI15_10_interrupt
+  .weak RTC_Alarm_interrupt
+  .weak TIM6_DAC1_interrupt
+  .weak TIM7_DAC2_interrupt
+  .weak COMP2_interrupt
+  .weak COMP4_6_interrupt
+  .weak HRTIM1_Master_interrupt
+  .weak HRTIM1_TIMA_interrupt
+  .weak HRTIM1_TIMB_interrupt
+  .weak HRTIM1_TIMC_interrupt
+  .weak HRTIM1_TIMD_interrupt
+  .weak HRTIM1_TIME_interrupt
+  .weak HRTIM1_FLT_interrupt
+  .weak FPU_interrupt
+  .set NonMaskableInt_interrupt, HaltProc
+  .set HardFault_interrupt, HaltProc
+  .set MemoryManagement_interrupt, HaltProc
+  .set BusFault_interrupt, HaltProc
+  .set UsageFault_interrupt, HaltProc
+  .set SVCall_interrupt, HaltProc
+  .set DebugMonitor_interrupt, HaltProc
+  .set PendSV_interrupt, HaltProc
+  .set SysTick_interrupt, HaltProc
+  .set WWDG_interrupt, HaltProc
+  .set PVD_interrupt, HaltProc
+  .set TAMP_STAMP_interrupt, HaltProc
+  .set RTC_WKUP_interrupt, HaltProc
+  .set FLASH_interrupt, HaltProc
+  .set RCC_interrupt, HaltProc
+  .set EXTI0_interrupt, HaltProc
+  .set EXTI1_interrupt, HaltProc
+  .set EXTI2_TSC_interrupt, HaltProc
+  .set EXTI3_interrupt, HaltProc
+  .set EXTI4_interrupt, HaltProc
+  .set DMA1_Channel1_interrupt, HaltProc
+  .set DMA1_Channel2_interrupt, HaltProc
+  .set DMA1_Channel3_interrupt, HaltProc
+  .set DMA1_Channel4_interrupt, HaltProc
+  .set DMA1_Channel5_interrupt, HaltProc
+  .set DMA1_Channel6_interrupt, HaltProc
+  .set DMA1_Channel7_interrupt, HaltProc
+  .set ADC1_2_interrupt, HaltProc
+  .set CAN_TX_interrupt, HaltProc
+  .set CAN_RX0_interrupt, HaltProc
+  .set CAN_RX1_interrupt, HaltProc
+  .set CAN_SCE_interrupt, HaltProc
+  .set EXTI9_5_interrupt, HaltProc
+  .set TIM1_BRK_TIM15_interrupt, HaltProc
+  .set TIM1_UP_TIM16_interrupt, HaltProc
+  .set TIM1_TRG_COM_TIM17_interrupt, HaltProc
+  .set TIM1_CC_interrupt, HaltProc
+  .set TIM2_interrupt, HaltProc
+  .set TIM3_interrupt, HaltProc
+  .set I2C1_EV_interrupt, HaltProc
+  .set I2C1_ER_interrupt, HaltProc
+  .set SPI1_interrupt, HaltProc
+  .set USART1_interrupt, HaltProc
+  .set USART2_interrupt, HaltProc
+  .set USART3_interrupt, HaltProc
+  .set EXTI15_10_interrupt, HaltProc
+  .set RTC_Alarm_interrupt, HaltProc
+  .set TIM6_DAC1_interrupt, HaltProc
+  .set TIM7_DAC2_interrupt, HaltProc
+  .set COMP2_interrupt, HaltProc
+  .set COMP4_6_interrupt, HaltProc
+  .set HRTIM1_Master_interrupt, HaltProc
+  .set HRTIM1_TIMA_interrupt, HaltProc
+  .set HRTIM1_TIMB_interrupt, HaltProc
+  .set HRTIM1_TIMC_interrupt, HaltProc
+  .set HRTIM1_TIMD_interrupt, HaltProc
+  .set HRTIM1_TIME_interrupt, HaltProc
+  .set HRTIM1_FLT_interrupt, HaltProc
+  .set FPU_interrupt, HaltProc
+  .text
+end;
+end.
diff -Naur fpc-save/rtl/embedded/arm/stm32f358xx.pp fpc/rtl/embedded/arm/stm32f358xx.pp
--- fpc-save/rtl/embedded/arm/stm32f358xx.pp	1970-01-01 01:00:00.000000000 +0100
+++ fpc/rtl/embedded/arm/stm32f358xx.pp	2018-03-02 17:07:37.000000000 +0100
@@ -0,0 +1,984 @@
+unit stm32f358xx;
+interface
+{$PACKRECORDS C}
+{$GOTO ON}
+// *
+// ******************************************************************************
+// * @file    stm32f358xx.h
+// * @author  MCD Application Team
+//   CMSIS STM32F358xx Devices Peripheral Access Layer Header File.
+// *
+// *          This file contains:
+// *           - Data structures and the address mapping for all peripherals
+// *           - Peripheral's registers declarations and bits definition
+// *           - Macros to access peripheral’s registers hardware
+// *
+// ******************************************************************************
+// * @attention
+// *
+// * <h2><center>&copy; COPYRIGHT(c) 2016 STMicroelectronics</center></h2>
+// *
+// * Redistribution and use in source and binary forms, with or without modification,
+// * are permitted provided that the following conditions are met:
+// *   1. Redistributions of source code must retain the above copyright notice,
+// *      this list of conditions and the following disclaimer.
+// *   2. Redistributions in binary form must reproduce the above copyright notice,
+// *      this list of conditions and the following disclaimer in the documentation
+// *      and/or other materials provided with the distribution.
+// *   3. Neither the name of STMicroelectronics nor the names of its contributors
+// *      may be used to endorse or promote products derived from this software
+// *      without specific prior written permission.
+// *
+// * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
+// * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
+// * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+// * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE
+// * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
+// * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
+// * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER
+// * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+// * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
+// * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
+// *
+// ******************************************************************************
+// Configuration of the Cortex-M4 Processor and Core Peripherals
+// STM32F358xx devices Interrupt Number Definition, according to the selected device
+// *        in @ref Library_configuration_section
+
+type
+  TIRQn_Enum   = (
+    NonMaskableInt_IRQn = -14,        // 2 Non Maskable Interrupt
+    HardFault_IRQn = -13,             // 3 Cortex-M4 Hard Fault Interrupt
+    MemoryManagement_IRQn = -12,      // 4 Cortex-M4 Memory Management Interrupt
+    BusFault_IRQn = -11,              // 5 Cortex-M4 Bus Fault Interrupt
+    UsageFault_IRQn = -10,            // 6 Cortex-M4 Usage Fault Interrupt
+    SVCall_IRQn = -5,                 // 11 Cortex-M4 SV Call Interrupt
+    DebugMonitor_IRQn = -4,           // 12 Cortex-M4 Debug Monitor Interrupt
+    PendSV_IRQn = -2,                 // 14 Cortex-M4 Pend SV Interrupt
+    SysTick_IRQn = -1,                // 15 Cortex-M4 System Tick Interrupt
+    WWDG_IRQn  = 0,                   // Window WatchDog Interrupt
+    TAMP_STAMP_IRQn = 2,              // Tamper and TimeStamp interrupts through the EXTI line 19
+    RTC_WKUP_IRQn = 3,                // RTC Wakeup interrupt through the EXTI line 20
+    FLASH_IRQn = 4,                   // FLASH global Interrupt
+    RCC_IRQn   = 5,                   // RCC global Interrupt
+    EXTI0_IRQn = 6,                   // EXTI Line0 Interrupt
+    EXTI1_IRQn = 7,                   // EXTI Line1 Interrupt
+    EXTI2_TSC_IRQn = 8,               // EXTI Line2 Interrupt and Touch Sense Controller Interrupt
+    EXTI3_IRQn = 9,                   // EXTI Line3 Interrupt
+    EXTI4_IRQn = 10,                  // EXTI Line4 Interrupt
+    DMA1_Channel1_IRQn = 11,          // DMA1 Channel 1 Interrupt
+    DMA1_Channel2_IRQn = 12,          // DMA1 Channel 2 Interrupt
+    DMA1_Channel3_IRQn = 13,          // DMA1 Channel 3 Interrupt
+    DMA1_Channel4_IRQn = 14,          // DMA1 Channel 4 Interrupt
+    DMA1_Channel5_IRQn = 15,          // DMA1 Channel 5 Interrupt
+    DMA1_Channel6_IRQn = 16,          // DMA1 Channel 6 Interrupt
+    DMA1_Channel7_IRQn = 17,          // DMA1 Channel 7 Interrupt
+    ADC1_2_IRQn = 18,                 // ADC1 & ADC2 Interrupts
+    CAN_TX_IRQn = 19,                 // CAN TX Interrupt
+    CAN_RX0_IRQn = 20,                // CAN RX0 Interrupt
+    CAN_RX1_IRQn = 21,                // CAN RX1 Interrupt
+    CAN_SCE_IRQn = 22,                // CAN SCE Interrupt
+    EXTI9_5_IRQn = 23,                // External Line[9:5] Interrupts
+    TIM1_BRK_TIM15_IRQn = 24,         // TIM1 Break and TIM15 Interrupts
+    TIM1_UP_TIM16_IRQn = 25,          // TIM1 Update and TIM16 Interrupts
+    TIM1_TRG_COM_TIM17_IRQn = 26,     // TIM1 Trigger and Commutation and TIM17 Interrupt
+    TIM1_CC_IRQn = 27,                // TIM1 Capture Compare Interrupt
+    TIM2_IRQn  = 28,                  // TIM2 global Interrupt
+    TIM3_IRQn  = 29,                  // TIM3 global Interrupt
+    TIM4_IRQn  = 30,                  // TIM4 global Interrupt
+    I2C1_EV_IRQn = 31,                // I2C1 Event Interrupt & EXTI Line23 Interrupt (I2C1 wakeup)
+    I2C1_ER_IRQn = 32,                // I2C1 Error Interrupt
+    I2C2_EV_IRQn = 33,                // I2C2 Event Interrupt & EXTI Line24 Interrupt (I2C2 wakeup)
+    I2C2_ER_IRQn = 34,                // I2C2 Error Interrupt
+    SPI1_IRQn  = 35,                  // SPI1 global Interrupt
+    SPI2_IRQn  = 36,                  // SPI2 global Interrupt
+    USART1_IRQn = 37,                 // USART1 global Interrupt & EXTI Line25 Interrupt (USART1 wakeup)
+    USART2_IRQn = 38,                 // USART2 global Interrupt & EXTI Line26 Interrupt (USART2 wakeup)
+    USART3_IRQn = 39,                 // USART3 global Interrupt & EXTI Line28 Interrupt (USART3 wakeup)
+    EXTI15_10_IRQn = 40,              // External Line[15:10] Interrupts
+    RTC_Alarm_IRQn = 41,              // RTC Alarm (A and B) through EXTI Line 17 Interrupt
+    TIM8_BRK_IRQn = 43,               // TIM8 Break Interrupt
+    TIM8_UP_IRQn = 44,                // TIM8 Update Interrupt
+    TIM8_TRG_COM_IRQn = 45,           // TIM8 Trigger and Commutation Interrupt
+    TIM8_CC_IRQn = 46,                // TIM8 Capture Compare Interrupt
+    ADC3_IRQn  = 47,                  // ADC3 global Interrupt
+    SPI3_IRQn  = 51,                  // SPI3 global Interrupt
+    UART4_IRQn = 52,                  // UART4 global Interrupt & EXTI Line34 Interrupt (UART4 wakeup)
+    UART5_IRQn = 53,                  // UART5 global Interrupt & EXTI Line35 Interrupt (UART5 wakeup)
+    TIM6_DAC_IRQn = 54,               // TIM6 global and DAC underrun error Interrupt
+    TIM7_IRQn  = 55,                  // TIM7 global Interrupt
+    DMA2_Channel1_IRQn = 56,          // DMA2 Channel 1 global Interrupt
+    DMA2_Channel2_IRQn = 57,          // DMA2 Channel 2 global Interrupt
+    DMA2_Channel3_IRQn = 58,          // DMA2 Channel 3 global Interrupt
+    DMA2_Channel4_IRQn = 59,          // DMA2 Channel 4 global Interrupt
+    DMA2_Channel5_IRQn = 60,          // DMA2 Channel 5 global Interrupt
+    ADC4_IRQn  = 61,                  // ADC4  global Interrupt
+    COMP1_2_3_IRQn = 64,              // COMP1, COMP2 and COMP3 global Interrupt via EXTI Line21, 22 and 29
+    COMP4_5_6_IRQn = 65,              // COMP4, COMP5 and COMP6 global Interrupt via EXTI Line30, 31 and 32
+    COMP7_IRQn = 66,                  // COMP7 global Interrupt via EXTI Line33
+    FPU_IRQn   = 81                   // Floating point Interrupt
+  );
+
+  TADC_Registers = record
+    ISR        : longword;            // ADC Interrupt and Status Register
+    IER        : longword;            // ADC Interrupt Enable Register
+    CR         : longword;            // ADC control register
+    CFGR       : longword;            // ADC Configuration register
+    RESERVED0  : longword;            // Reserved, 0x010
+    SMPR1      : longword;            // ADC sample time register 1
+    SMPR2      : longword;            // ADC sample time register 2
+    RESERVED1  : longword;            // Reserved, 0x01C
+    TR1        : longword;            // ADC watchdog threshold register 1
+    TR2        : longword;            // ADC watchdog threshold register 2
+    TR3        : longword;            // ADC watchdog threshold register 3
+    RESERVED2  : longword;            // Reserved, 0x02C
+    SQR1       : longword;            // ADC regular sequence register 1
+    SQR2       : longword;            // ADC regular sequence register 2
+    SQR3       : longword;            // ADC regular sequence register 3
+    SQR4       : longword;            // ADC regular sequence register 4
+    DR         : longword;            // ADC regular data register
+    RESERVED3  : longword;            // Reserved, 0x044
+    RESERVED4  : longword;            // Reserved, 0x048
+    JSQR       : longword;            // ADC injected sequence register
+    RESERVED5  : array[0..3] of longword; // Reserved, 0x050 - 0x05C
+    OFR1       : longword;            // ADC offset register 1
+    OFR2       : longword;            // ADC offset register 2
+    OFR3       : longword;            // ADC offset register 3
+    OFR4       : longword;            // ADC offset register 4
+    RESERVED6  : array[0..3] of longword; // Reserved, 0x070 - 0x07C
+    JDR1       : longword;            // ADC injected data register 1
+    JDR2       : longword;            // ADC injected data register 2
+    JDR3       : longword;            // ADC injected data register 3
+    JDR4       : longword;            // ADC injected data register 4
+    RESERVED7  : array[0..3] of longword; // Reserved, 0x090 - 0x09C
+    AWD2CR     : longword;            // ADC  Analog Watchdog 2 Configuration Register
+    AWD3CR     : longword;            // ADC  Analog Watchdog 3 Configuration Register
+    RESERVED8  : longword;            // Reserved, 0x0A8
+    RESERVED9  : longword;            // Reserved, 0x0AC
+    DIFSEL     : longword;            // ADC  Differential Mode Selection Register
+    CALFACT    : longword;            // ADC  Calibration Factors
+  end;
+
+  TADC_COMMON_Registers = record
+    CSR        : longword;            // ADC Common status register
+    RESERVED   : longword;            // Reserved, ADC1/3 base address + 0x304
+    CCR        : longword;            // ADC common control register
+    CDR        : longword;            // ADC common regular data register for dual
+  end;
+
+  TCAN_TXMAILBOX_Registers = record
+    TIR        : longword;            // CAN TX mailbox identifier register
+    TDTR       : longword;            // CAN mailbox data length control and time stamp register
+    TDLR       : longword;            // CAN mailbox data low register
+    TDHR       : longword;            // CAN mailbox data high register
+  end;
+
+  TCAN_FIFOMAILBOX_Registers = record
+    RIR        : longword;            // CAN receive FIFO mailbox identifier register
+    RDTR       : longword;            // CAN receive FIFO mailbox data length control and time stamp register
+    RDLR       : longword;            // CAN receive FIFO mailbox data low register
+    RDHR       : longword;            // CAN receive FIFO mailbox data high register
+  end;
+
+  TCAN_FILTERREGISTER_Registers = record
+    FR1        : longword;            // CAN Filter bank register 1
+    FR2        : longword;            // CAN Filter bank register 1
+  end;
+
+  TCAN_Registers = record
+    MCR        : longword;            // CAN master control register
+    MSR        : longword;            // CAN master status register
+    TSR        : longword;            // CAN transmit status register
+    RF0R       : longword;            // CAN receive FIFO 0 register
+    RF1R       : longword;            // CAN receive FIFO 1 register
+    IER        : longword;            // CAN interrupt enable register
+    ESR        : longword;            // CAN error status register
+    BTR        : longword;            // CAN bit timing register
+    RESERVED0  : array[0..87] of longword; // Reserved, 0x020 - 0x17F
+    sTxMailBox : array[0..2] of TCAN_TxMailBox_Registers; // CAN Tx MailBox
+    sFIFOMailBox : array[0..1] of TCAN_FIFOMailBox_Registers; // CAN FIFO MailBox
+    RESERVED1  : array[0..11] of longword; // Reserved, 0x1D0 - 0x1FF
+    FMR        : longword;            // CAN filter master register
+    FM1R       : longword;            // CAN filter mode register
+    RESERVED2  : longword;            // Reserved, 0x208
+    FS1R       : longword;            // CAN filter scale register
+    RESERVED3  : longword;            // Reserved, 0x210
+    FFA1R      : longword;            // CAN filter FIFO assignment register
+    RESERVED4  : longword;            // Reserved, 0x218
+    FA1R       : longword;            // CAN filter activation register
+    RESERVED5  : array[0..7] of longword; // Reserved, 0x220-0x23F
+    sFilterRegister : array[0..27] of TCAN_FilterRegister_Registers; // CAN Filter Register
+  end;
+
+  TCOMP_Registers = record
+    CSR        : longword;            // COMP control and status register
+  end;
+
+  TCOMP_COMMON_Registers = record
+    CSR        : longword;            // COMP control and status register, used for bits common to several COMP instances
+  end;
+
+  TCRC_Registers = record
+    DR         : longword;            // CRC Data register
+    IDR        : byte;                // CRC Independent data register
+    RESERVED0  : byte;                // Reserved,                                                    0x05
+    RESERVED1  : word;                // Reserved,                                                    0x06
+    CR         : longword;            // CRC Control register
+    RESERVED2  : longword;            // Reserved,                                                    0x0C
+    INIT       : longword;            // Initial CRC value register
+    POL        : longword;            // CRC polynomial register
+  end;
+
+  TDAC_Registers = record
+    CR         : longword;            // DAC control register
+    SWTRIGR    : longword;            // DAC software trigger register
+    DHR12R1    : longword;            // DAC channel1 12-bit right-aligned data holding register
+    DHR12L1    : longword;            // DAC channel1 12-bit left aligned data holding register
+    DHR8R1     : longword;            // DAC channel1 8-bit right aligned data holding register
+    DHR12R2    : longword;            // DAC channel2 12-bit right aligned data holding register
+    DHR12L2    : longword;            // DAC channel2 12-bit left aligned data holding register
+    DHR8R2     : longword;            // DAC channel2 8-bit right-aligned data holding register
+    DHR12RD    : longword;            // Dual DAC 12-bit right-aligned data holding register
+    DHR12LD    : longword;            // DUAL DAC 12-bit left aligned data holding register
+    DHR8RD     : longword;            // DUAL DAC 8-bit right aligned data holding register
+    DOR1       : longword;            // DAC channel1 data output register
+    DOR2       : longword;            // DAC channel2 data output register
+    SR         : longword;            // DAC status register
+  end;
+
+  TDBGMCU_Registers = record
+    IDCODE     : longword;            // MCU device ID code
+    CR         : longword;            // Debug MCU configuration register
+    APB1FZ     : longword;            // Debug MCU APB1 freeze register
+    APB2FZ     : longword;            // Debug MCU APB2 freeze register
+  end;
+
+  TDMA_CHANNEL_Registers = record
+    CCR        : longword;            // DMA channel x configuration register
+    CNDTR      : longword;            // DMA channel x number of data register
+    CPAR       : longword;            // DMA channel x peripheral address register
+    CMAR       : longword;            // DMA channel x memory address register
+  end;
+
+  TDMA_Registers = record
+    ISR        : longword;            // DMA interrupt status register
+    IFCR       : longword;            // DMA interrupt flag clear register
+  end;
+
+  TEXTI_Registers = record
+    IMR        : longword;            // XTI Interrupt mask register
+    EMR        : longword;            // XTI Event mask register
+    RTSR       : longword;            // XTI Rising trigger selection register
+    FTSR       : longword;            // XTI Falling trigger selection register
+    SWIER      : longword;            // XTI Software interrupt event register
+    PR         : longword;            // XTI Pending register
+    RESERVED1  : longword;            // Reserved, 0x18
+    RESERVED2  : longword;            // Reserved, 0x1C
+    IMR2       : longword;            // EXTI Interrupt mask register
+    EMR2       : longword;            // EXTI Event mask register
+    RTSR2      : longword;            // EXTI Rising trigger selection register
+    FTSR2      : longword;            // EXTI Falling trigger selection register
+    SWIER2     : longword;            // EXTI Software interrupt event register
+    PR2        : longword;            // EXTI Pending register
+  end;
+
+  TFLASH_Registers = record
+    ACR        : longword;            // FLASH access control register
+    KEYR       : longword;            // FLASH key register
+    OPTKEYR    : longword;            // FLASH option key register
+    SR         : longword;            // FLASH status register
+    CR         : longword;            // FLASH control register
+    AR         : longword;            // FLASH address register
+    RESERVED   : longword;            // Reserved, 0x18
+    OBR        : longword;            // FLASH Option byte register
+    WRPR       : longword;            // FLASH Write register
+  end;
+
+  TOB_Registers = record
+    RDP        : word;                // LASH option byte Read protection
+    USER       : word;                // LASH option byte user options
+    RESERVED0  : word;                // Reserved,                                                     0x04
+    RESERVED1  : word;                // Reserved,                                                     0x06
+    WRP0       : word;                // LASH option byte write protection 0
+    WRP1       : word;                // LASH option byte write protection 1
+    WRP2       : word;                // LASH option byte write protection 2
+    WRP3       : word;                // LASH option byte write protection 3
+  end;
+
+  TGPIO_Registers = record
+    MODER      : longword;            // GPIO port mode register
+    OTYPER     : longword;            // GPIO port output type register
+    OSPEEDR    : longword;            // GPIO port output speed register
+    PUPDR      : longword;            // GPIO port pull-up/pull-down register
+    IDR        : longword;            // GPIO port input data register
+    ODR        : longword;            // GPIO port output data register
+    BSRR       : longword;            // GPIO port bit set/reset register
+    LCKR       : longword;            // GPIO port configuration lock register
+    AFR        : array[0..1] of longword; // GPIO alternate function registers
+    BRR        : longword;            // GPIO bit reset register
+  end;
+
+  TOPAMP_Registers = record
+    CSR        : longword;            // OPAMP control and status register
+  end;
+
+  TSYSCFG_Registers = record
+    CFGR1      : longword;            // SYSCFG configuration register 1
+    RCR        : longword;            // SYSCFG CCM SRAM protection register
+    EXTICR     : array[0..3] of longword; // SYSCFG external interrupt configuration registers
+    CFGR2      : longword;            // SYSCFG configuration register 2
+  end;
+
+  TI2C_Registers = record
+    CR1        : longword;            // I2C Control register 1
+    CR2        : longword;            // I2C Control register 2
+    OAR1       : longword;            // I2C Own address 1 register
+    OAR2       : longword;            // I2C Own address 2 register
+    TIMINGR    : longword;            // I2C Timing register
+    TIMEOUTR   : longword;            // I2C Timeout register
+    ISR        : longword;            // I2C Interrupt and status register
+    ICR        : longword;            // I2C Interrupt clear register
+    PECR       : longword;            // I2C PEC register
+    RXDR       : longword;            // I2C Receive data register
+    TXDR       : longword;            // I2C Transmit data register
+  end;
+
+  TIWDG_Registers = record
+    KR         : longword;            // IWDG Key register
+    PR         : longword;            // IWDG Prescaler register
+    RLR        : longword;            // IWDG Reload register
+    SR         : longword;            // IWDG Status register
+    WINR       : longword;            // IWDG Window register
+  end;
+
+  TPWR_Registers = record
+    CR         : longword;            // PWR power control register
+    CSR        : longword;            // PWR power control/status register
+  end;
+
+  TRCC_Registers = record
+    CR         : longword;            // RCC clock control register
+    CFGR       : longword;            // RCC clock configuration register
+    CIR        : longword;            // RCC clock interrupt register
+    APB2RSTR   : longword;            // RCC APB2 peripheral reset register
+    APB1RSTR   : longword;            // RCC APB1 peripheral reset register
+    AHBENR     : longword;            // RCC AHB peripheral clock register
+    APB2ENR    : longword;            // RCC APB2 peripheral clock enable register
+    APB1ENR    : longword;            // RCC APB1 peripheral clock enable register
+    BDCR       : longword;            // RCC Backup domain control register
+    CSR        : longword;            // RCC clock control & status register
+    AHBRSTR    : longword;            // RCC AHB peripheral reset register
+    CFGR2      : longword;            // RCC clock configuration register 2
+    CFGR3      : longword;            // RCC clock configuration register 3
+  end;
+
+  TRTC_Registers = record
+    TR         : longword;            // RTC time register
+    DR         : longword;            // RTC date register
+    CR         : longword;            // RTC control register
+    ISR        : longword;            // RTC initialization and status register
+    PRER       : longword;            // RTC prescaler register
+    WUTR       : longword;            // RTC wakeup timer register
+    RESERVED0  : longword;            // Reserved, 0x18
+    ALRMAR     : longword;            // RTC alarm A register
+    ALRMBR     : longword;            // RTC alarm B register
+    WPR        : longword;            // RTC write protection register
+    SSR        : longword;            // RTC sub second register
+    SHIFTR     : longword;            // RTC shift control register
+    TSTR       : longword;            // RTC time stamp time register
+    TSDR       : longword;            // RTC time stamp date register
+    TSSSR      : longword;            // RTC time-stamp sub second register
+    CALR       : longword;            // RTC calibration register
+    TAFCR      : longword;            // RTC tamper and alternate function configuration register
+    ALRMASSR   : longword;            // RTC alarm A sub second register
+    ALRMBSSR   : longword;            // RTC alarm B sub second register
+    RESERVED7  : longword;            // Reserved, 0x4C
+    BKP0R      : longword;            // RTC backup register 0
+    BKP1R      : longword;            // RTC backup register 1
+    BKP2R      : longword;            // RTC backup register 2
+    BKP3R      : longword;            // RTC backup register 3
+    BKP4R      : longword;            // RTC backup register 4
+    BKP5R      : longword;            // RTC backup register 5
+    BKP6R      : longword;            // RTC backup register 6
+    BKP7R      : longword;            // RTC backup register 7
+    BKP8R      : longword;            // RTC backup register 8
+    BKP9R      : longword;            // RTC backup register 9
+    BKP10R     : longword;            // RTC backup register 10
+    BKP11R     : longword;            // RTC backup register 11
+    BKP12R     : longword;            // RTC backup register 12
+    BKP13R     : longword;            // RTC backup register 13
+    BKP14R     : longword;            // RTC backup register 14
+    BKP15R     : longword;            // RTC backup register 15
+  end;
+
+  TSPI_Registers = record
+    CR1        : longword;            // SPI Control register 1
+    CR2        : longword;            // SPI Control register 2
+    SR         : longword;            // SPI Status register
+    DR         : longword;            // SPI data register
+    CRCPR      : longword;            // SPI CRC polynomial register
+    RXCRCR     : longword;            // SPI Rx CRC register
+    TXCRCR     : longword;            // SPI Tx CRC register
+    I2SCFGR    : longword;            // SPI_I2S configuration register
+    I2SPR      : longword;            // SPI_I2S prescaler register
+  end;
+
+  TTIM_Registers = record
+    CR1        : longword;            // TIM control register 1
+    CR2        : longword;            // TIM control register 2
+    SMCR       : longword;            // TIM slave mode control register
+    DIER       : longword;            // TIM DMA/interrupt enable register
+    SR         : longword;            // TIM status register
+    EGR        : longword;            // TIM event generation register
+    CCMR1      : longword;            // TIM capture/compare mode register 1
+    CCMR2      : longword;            // TIM capture/compare mode register 2
+    CCER       : longword;            // TIM capture/compare enable register
+    CNT        : longword;            // TIM counter register
+    PSC        : longword;            // TIM prescaler
+    ARR        : longword;            // TIM auto-reload register
+    RCR        : longword;            // TIM repetition counter register
+    CCR1       : longword;            // TIM capture/compare register 1
+    CCR2       : longword;            // TIM capture/compare register 2
+    CCR3       : longword;            // TIM capture/compare register 3
+    CCR4       : longword;            // TIM capture/compare register 4
+    BDTR       : longword;            // TIM break and dead-time register
+    DCR        : longword;            // TIM DMA control register
+    DMAR       : longword;            // TIM DMA address for full transfer
+    &OR        : longword;            // TIM option register
+    CCMR3      : longword;            // TIM capture/compare mode register 3
+    CCR5       : longword;            // TIM capture/compare register5
+    CCR6       : longword;            // TIM capture/compare register 4
+  end;
+
+  TTSC_Registers = record
+    CR         : longword;            // TSC control register
+    IER        : longword;            // TSC interrupt enable register
+    ICR        : longword;            // TSC interrupt clear register
+    ISR        : longword;            // TSC interrupt status register
+    IOHCR      : longword;            // TSC I/O hysteresis control register
+    RESERVED1  : longword;            // Reserved
+    IOASCR     : longword;            // TSC I/O analog switch control register
+    RESERVED2  : longword;            // Reserved
+    IOSCR      : longword;            // TSC I/O sampling control register
+    RESERVED3  : longword;            // Reserved
+    IOCCR      : longword;            // TSC I/O channel control register
+    RESERVED4  : longword;            // Reserved
+    IOGCSR     : longword;            // TSC I/O group control status register
+    IOGXCR     : array[0..7] of longword; // TSC I/O group x counter register
+  end;
+
+  TUSART_Registers = record
+    CR1        : longword;            // USART Control register 1
+    CR2        : longword;            // USART Control register 2
+    CR3        : longword;            // USART Control register 3
+    BRR        : longword;            // USART Baud rate register
+    GTPR       : longword;            // USART Guard time and prescaler register
+    RTOR       : longword;            // USART Receiver Time Out register
+    RQR        : longword;            // USART Request register
+    ISR        : longword;            // USART Interrupt and status register
+    ICR        : longword;            // USART Interrupt flag Clear register
+    RDR        : word;                // USART Receive Data register
+    RESERVED1  : word;                // Reserved, 0x26
+    TDR        : word;                // USART Transmit Data register
+    RESERVED2  : word;                // Reserved, 0x2A
+  end;
+
+  TWWDG_Registers = record
+    CR         : longword;            // WWDG Control register
+    CFR        : longword;            // WWDG Configuration register
+    SR         : longword;            // WWDG Status register
+  end;
+
+const
+  FLASH_BASE   = $08000000;           // FLASH base address in the alias region
+  CCMDATARAM_BASE = $10000000;        // CCM(core coupled memory) data RAM base address in the alias region
+  SRAM_BASE    = $20000000;           // SRAM base address in the alias region
+  PERIPH_BASE  = $40000000;           // Peripheral base address in the alias region
+  SRAM_BB_BASE = $22000000;           // SRAM base address in the bit-band region
+  PERIPH_BB_BASE = $42000000;         // Peripheral base address in the bit-band region
+  APB1PERIPH_BASE = $40000000;
+  APB2PERIPH_BASE = PERIPH_BASE + $00010000;
+  AHB1PERIPH_BASE = PERIPH_BASE + $00020000;
+  AHB2PERIPH_BASE = PERIPH_BASE + $08000000;
+  AHB3PERIPH_BASE = PERIPH_BASE + $10000000;
+  TIM2_BASE    = APB1PERIPH_BASE + $00000000;
+  TIM3_BASE    = APB1PERIPH_BASE + $00000400;
+  TIM4_BASE    = APB1PERIPH_BASE + $00000800;
+  TIM6_BASE    = APB1PERIPH_BASE + $00001000;
+  TIM7_BASE    = APB1PERIPH_BASE + $00001400;
+  RTC_BASE     = APB1PERIPH_BASE + $00002800;
+  WWDG_BASE    = APB1PERIPH_BASE + $00002C00;
+  IWDG_BASE    = APB1PERIPH_BASE + $00003000;
+  I2S2ext_BASE = APB1PERIPH_BASE + $00003400;
+  SPI2_BASE    = APB1PERIPH_BASE + $00003800;
+  SPI3_BASE    = APB1PERIPH_BASE + $00003C00;
+  I2S3ext_BASE = APB1PERIPH_BASE + $00004000;
+  USART2_BASE  = APB1PERIPH_BASE + $00004400;
+  USART3_BASE  = APB1PERIPH_BASE + $00004800;
+  UART4_BASE   = APB1PERIPH_BASE + $00004C00;
+  UART5_BASE   = APB1PERIPH_BASE + $00005000;
+  I2C1_BASE    = APB1PERIPH_BASE + $00005400;
+  I2C2_BASE    = APB1PERIPH_BASE + $00005800;
+  CAN_BASE     = APB1PERIPH_BASE + $00006400;
+  PWR_BASE     = APB1PERIPH_BASE + $00007000;
+  DAC1_BASE    = APB1PERIPH_BASE + $00007400;
+  DAC_BASE     = APB1PERIPH_BASE + $00007400;
+  SYSCFG_BASE  = APB2PERIPH_BASE + $00000000;
+  COMP1_BASE   = APB2PERIPH_BASE + $0000001C;
+  COMP2_BASE   = APB2PERIPH_BASE + $00000020;
+  COMP3_BASE   = APB2PERIPH_BASE + $00000024;
+  COMP4_BASE   = APB2PERIPH_BASE + $00000028;
+  COMP5_BASE   = APB2PERIPH_BASE + $0000002C;
+  COMP6_BASE   = APB2PERIPH_BASE + $00000030;
+  COMP7_BASE   = APB2PERIPH_BASE + $00000034;
+  COMP_BASE    = APB2PERIPH_BASE + $0000001C;
+  OPAMP1_BASE  = APB2PERIPH_BASE + $00000038;
+  OPAMP2_BASE  = APB2PERIPH_BASE + $0000003C;
+  OPAMP3_BASE  = APB2PERIPH_BASE + $00000040;
+  OPAMP4_BASE  = APB2PERIPH_BASE + $00000044;
+  OPAMP_BASE   = APB2PERIPH_BASE + $00000038;
+  EXTI_BASE    = APB2PERIPH_BASE + $00000400;
+  TIM1_BASE    = APB2PERIPH_BASE + $00002C00;
+  SPI1_BASE    = APB2PERIPH_BASE + $00003000;
+  TIM8_BASE    = APB2PERIPH_BASE + $00003400;
+  USART1_BASE  = APB2PERIPH_BASE + $00003800;
+  TIM15_BASE   = APB2PERIPH_BASE + $00004000;
+  TIM16_BASE   = APB2PERIPH_BASE + $00004400;
+  TIM17_BASE   = APB2PERIPH_BASE + $00004800;
+  DMA1_BASE    = AHB1PERIPH_BASE + $00000000;
+  DMA1_Channel1_BASE = AHB1PERIPH_BASE + $00000008;
+  DMA1_Channel2_BASE = AHB1PERIPH_BASE + $0000001C;
+  DMA1_Channel3_BASE = AHB1PERIPH_BASE + $00000030;
+  DMA1_Channel4_BASE = AHB1PERIPH_BASE + $00000044;
+  DMA1_Channel5_BASE = AHB1PERIPH_BASE + $00000058;
+  DMA1_Channel6_BASE = AHB1PERIPH_BASE + $0000006C;
+  DMA1_Channel7_BASE = AHB1PERIPH_BASE + $00000080;
+  DMA2_BASE    = AHB1PERIPH_BASE + $00000400;
+  DMA2_Channel1_BASE = AHB1PERIPH_BASE + $00000408;
+  DMA2_Channel2_BASE = AHB1PERIPH_BASE + $0000041C;
+  DMA2_Channel3_BASE = AHB1PERIPH_BASE + $00000430;
+  DMA2_Channel4_BASE = AHB1PERIPH_BASE + $00000444;
+  DMA2_Channel5_BASE = AHB1PERIPH_BASE + $00000458;
+  RCC_BASE     = AHB1PERIPH_BASE + $00001000;
+  FLASH_R_BASE = AHB1PERIPH_BASE + $00002000; // Flash registers base address
+  OB_BASE      = $1FFFF800;           // Flash Option Bytes base address
+  FLASHSIZE_BASE = $1FFFF7CC;         // FLASH Size register base address
+  UID_BASE     = $1FFFF7AC;           // Unique device ID register base address
+  CRC_BASE     = AHB1PERIPH_BASE + $00003000;
+  TSC_BASE     = AHB1PERIPH_BASE + $00004000;
+  GPIOA_BASE   = AHB2PERIPH_BASE + $00000000;
+  GPIOB_BASE   = AHB2PERIPH_BASE + $00000400;
+  GPIOC_BASE   = AHB2PERIPH_BASE + $00000800;
+  GPIOD_BASE   = AHB2PERIPH_BASE + $00000C00;
+  GPIOE_BASE   = AHB2PERIPH_BASE + $00001000;
+  GPIOF_BASE   = AHB2PERIPH_BASE + $00001400;
+  ADC1_BASE    = AHB3PERIPH_BASE + $00000000;
+  ADC2_BASE    = AHB3PERIPH_BASE + $00000100;
+  ADC1_2_COMMON_BASE = AHB3PERIPH_BASE + $00000300;
+  ADC3_BASE    = AHB3PERIPH_BASE + $00000400;
+  ADC4_BASE    = AHB3PERIPH_BASE + $00000500;
+  ADC3_4_COMMON_BASE = AHB3PERIPH_BASE + $00000700;
+  DBGMCU_BASE  = $E0042000;           // Debug MCU registers base address
+
+var
+  TIM2         : TTIM_Registers absolute TIM2_BASE;
+  TIM3         : TTIM_Registers absolute TIM3_BASE;
+  TIM4         : TTIM_Registers absolute TIM4_BASE;
+  TIM6         : TTIM_Registers absolute TIM6_BASE;
+  TIM7         : TTIM_Registers absolute TIM7_BASE;
+  RTC          : TRTC_Registers absolute RTC_BASE;
+  WWDG         : TWWDG_Registers absolute WWDG_BASE;
+  IWDG         : TIWDG_Registers absolute IWDG_BASE;
+  I2S2ext      : TSPI_Registers absolute I2S2ext_BASE;
+  SPI2         : TSPI_Registers absolute SPI2_BASE;
+  SPI3         : TSPI_Registers absolute SPI3_BASE;
+  I2S3ext      : TSPI_Registers absolute I2S3ext_BASE;
+  USART2       : TUSART_Registers absolute USART2_BASE;
+  USART3       : TUSART_Registers absolute USART3_BASE;
+  UART4        : TUSART_Registers absolute UART4_BASE;
+  UART5        : TUSART_Registers absolute UART5_BASE;
+  I2C1         : TI2C_Registers absolute I2C1_BASE;
+  I2C2         : TI2C_Registers absolute I2C2_BASE;
+  CAN          : TCAN_Registers absolute CAN_BASE;
+  PWR          : TPWR_Registers absolute PWR_BASE;
+  DAC          : TDAC_Registers absolute DAC_BASE;
+  DAC1         : TDAC_Registers absolute DAC1_BASE;
+  COMP1        : TCOMP_Registers absolute COMP1_BASE;
+  COMP2        : TCOMP_Registers absolute COMP2_BASE;
+  COMP12_COMMON : TCOMP_Common_Registers absolute COMP2_BASE;
+  COMP3        : TCOMP_Registers absolute COMP3_BASE;
+  COMP4        : TCOMP_Registers absolute COMP4_BASE;
+  COMP34_COMMON : TCOMP_Common_Registers absolute COMP4_BASE;
+  COMP5        : TCOMP_Registers absolute COMP5_BASE;
+  COMP6        : TCOMP_Registers absolute COMP6_BASE;
+  COMP56_COMMON : TCOMP_Common_Registers absolute COMP6_BASE;
+  COMP7        : TCOMP_Registers absolute COMP7_BASE;
+  COMP         : TCOMP_Registers absolute COMP_BASE;
+  OPAMP1       : TOPAMP_Registers absolute OPAMP1_BASE;
+  OPAMP        : TOPAMP_Registers absolute OPAMP_BASE;
+  OPAMP2       : TOPAMP_Registers absolute OPAMP2_BASE;
+  OPAMP3       : TOPAMP_Registers absolute OPAMP3_BASE;
+  OPAMP4       : TOPAMP_Registers absolute OPAMP4_BASE;
+  SYSCFG       : TSYSCFG_Registers absolute SYSCFG_BASE;
+  EXTI         : TEXTI_Registers absolute EXTI_BASE;
+  TIM1         : TTIM_Registers absolute TIM1_BASE;
+  SPI1         : TSPI_Registers absolute SPI1_BASE;
+  TIM8         : TTIM_Registers absolute TIM8_BASE;
+  USART1       : TUSART_Registers absolute USART1_BASE;
+  TIM15        : TTIM_Registers absolute TIM15_BASE;
+  TIM16        : TTIM_Registers absolute TIM16_BASE;
+  TIM17        : TTIM_Registers absolute TIM17_BASE;
+  DBGMCU       : TDBGMCU_Registers absolute DBGMCU_BASE;
+  DMA1         : TDMA_Registers absolute DMA1_BASE;
+  DMA1_Channel1 : TDMA_Channel_Registers absolute DMA1_Channel1_BASE;
+  DMA1_Channel2 : TDMA_Channel_Registers absolute DMA1_Channel2_BASE;
+  DMA1_Channel3 : TDMA_Channel_Registers absolute DMA1_Channel3_BASE;
+  DMA1_Channel4 : TDMA_Channel_Registers absolute DMA1_Channel4_BASE;
+  DMA1_Channel5 : TDMA_Channel_Registers absolute DMA1_Channel5_BASE;
+  DMA1_Channel6 : TDMA_Channel_Registers absolute DMA1_Channel6_BASE;
+  DMA1_Channel7 : TDMA_Channel_Registers absolute DMA1_Channel7_BASE;
+  DMA2         : TDMA_Registers absolute DMA2_BASE;
+  DMA2_Channel1 : TDMA_Channel_Registers absolute DMA2_Channel1_BASE;
+  DMA2_Channel2 : TDMA_Channel_Registers absolute DMA2_Channel2_BASE;
+  DMA2_Channel3 : TDMA_Channel_Registers absolute DMA2_Channel3_BASE;
+  DMA2_Channel4 : TDMA_Channel_Registers absolute DMA2_Channel4_BASE;
+  DMA2_Channel5 : TDMA_Channel_Registers absolute DMA2_Channel5_BASE;
+  RCC          : TRCC_Registers absolute RCC_BASE;
+  FLASH        : TFLASH_Registers absolute FLASH_R_BASE;
+  OB           : TOB_Registers absolute OB_BASE;
+  CRC          : TCRC_Registers absolute CRC_BASE;
+  TSC          : TTSC_Registers absolute TSC_BASE;
+  GPIOA        : TGPIO_Registers absolute GPIOA_BASE;
+  GPIOB        : TGPIO_Registers absolute GPIOB_BASE;
+  GPIOC        : TGPIO_Registers absolute GPIOC_BASE;
+  GPIOD        : TGPIO_Registers absolute GPIOD_BASE;
+  GPIOE        : TGPIO_Registers absolute GPIOE_BASE;
+  GPIOF        : TGPIO_Registers absolute GPIOF_BASE;
+  ADC1         : TADC_Registers absolute ADC1_BASE;
+  ADC2         : TADC_Registers absolute ADC2_BASE;
+  ADC3         : TADC_Registers absolute ADC3_BASE;
+  ADC4         : TADC_Registers absolute ADC4_BASE;
+  ADC12_COMMON : TADC_Common_Registers absolute ADC1_2_COMMON_BASE;
+  ADC34_COMMON : TADC_Common_Registers absolute ADC3_4_COMMON_BASE;
+
+implementation
+
+procedure NonMaskableInt_interrupt; external name 'NonMaskableInt_interrupt';
+procedure HardFault_interrupt; external name 'HardFault_interrupt';
+procedure MemoryManagement_interrupt; external name 'MemoryManagement_interrupt';
+procedure BusFault_interrupt; external name 'BusFault_interrupt';
+procedure UsageFault_interrupt; external name 'UsageFault_interrupt';
+procedure SVCall_interrupt; external name 'SVCall_interrupt';
+procedure DebugMonitor_interrupt; external name 'DebugMonitor_interrupt';
+procedure PendSV_interrupt; external name 'PendSV_interrupt';
+procedure SysTick_interrupt; external name 'SysTick_interrupt';
+procedure WWDG_interrupt; external name 'WWDG_interrupt';
+procedure TAMP_STAMP_interrupt; external name 'TAMP_STAMP_interrupt';
+procedure RTC_WKUP_interrupt; external name 'RTC_WKUP_interrupt';
+procedure FLASH_interrupt; external name 'FLASH_interrupt';
+procedure RCC_interrupt; external name 'RCC_interrupt';
+procedure EXTI0_interrupt; external name 'EXTI0_interrupt';
+procedure EXTI1_interrupt; external name 'EXTI1_interrupt';
+procedure EXTI2_TSC_interrupt; external name 'EXTI2_TSC_interrupt';
+procedure EXTI3_interrupt; external name 'EXTI3_interrupt';
+procedure EXTI4_interrupt; external name 'EXTI4_interrupt';
+procedure DMA1_Channel1_interrupt; external name 'DMA1_Channel1_interrupt';
+procedure DMA1_Channel2_interrupt; external name 'DMA1_Channel2_interrupt';
+procedure DMA1_Channel3_interrupt; external name 'DMA1_Channel3_interrupt';
+procedure DMA1_Channel4_interrupt; external name 'DMA1_Channel4_interrupt';
+procedure DMA1_Channel5_interrupt; external name 'DMA1_Channel5_interrupt';
+procedure DMA1_Channel6_interrupt; external name 'DMA1_Channel6_interrupt';
+procedure DMA1_Channel7_interrupt; external name 'DMA1_Channel7_interrupt';
+procedure ADC1_2_interrupt; external name 'ADC1_2_interrupt';
+procedure CAN_TX_interrupt; external name 'CAN_TX_interrupt';
+procedure CAN_RX0_interrupt; external name 'CAN_RX0_interrupt';
+procedure CAN_RX1_interrupt; external name 'CAN_RX1_interrupt';
+procedure CAN_SCE_interrupt; external name 'CAN_SCE_interrupt';
+procedure EXTI9_5_interrupt; external name 'EXTI9_5_interrupt';
+procedure TIM1_BRK_TIM15_interrupt; external name 'TIM1_BRK_TIM15_interrupt';
+procedure TIM1_UP_TIM16_interrupt; external name 'TIM1_UP_TIM16_interrupt';
+procedure TIM1_TRG_COM_TIM17_interrupt; external name 'TIM1_TRG_COM_TIM17_interrupt';
+procedure TIM1_CC_interrupt; external name 'TIM1_CC_interrupt';
+procedure TIM2_interrupt; external name 'TIM2_interrupt';
+procedure TIM3_interrupt; external name 'TIM3_interrupt';
+procedure TIM4_interrupt; external name 'TIM4_interrupt';
+procedure I2C1_EV_interrupt; external name 'I2C1_EV_interrupt';
+procedure I2C1_ER_interrupt; external name 'I2C1_ER_interrupt';
+procedure I2C2_EV_interrupt; external name 'I2C2_EV_interrupt';
+procedure I2C2_ER_interrupt; external name 'I2C2_ER_interrupt';
+procedure SPI1_interrupt; external name 'SPI1_interrupt';
+procedure SPI2_interrupt; external name 'SPI2_interrupt';
+procedure USART1_interrupt; external name 'USART1_interrupt';
+procedure USART2_interrupt; external name 'USART2_interrupt';
+procedure USART3_interrupt; external name 'USART3_interrupt';
+procedure EXTI15_10_interrupt; external name 'EXTI15_10_interrupt';
+procedure RTC_Alarm_interrupt; external name 'RTC_Alarm_interrupt';
+procedure TIM8_BRK_interrupt; external name 'TIM8_BRK_interrupt';
+procedure TIM8_UP_interrupt; external name 'TIM8_UP_interrupt';
+procedure TIM8_TRG_COM_interrupt; external name 'TIM8_TRG_COM_interrupt';
+procedure TIM8_CC_interrupt; external name 'TIM8_CC_interrupt';
+procedure ADC3_interrupt; external name 'ADC3_interrupt';
+procedure SPI3_interrupt; external name 'SPI3_interrupt';
+procedure UART4_interrupt; external name 'UART4_interrupt';
+procedure UART5_interrupt; external name 'UART5_interrupt';
+procedure TIM6_DAC_interrupt; external name 'TIM6_DAC_interrupt';
+procedure TIM7_interrupt; external name 'TIM7_interrupt';
+procedure DMA2_Channel1_interrupt; external name 'DMA2_Channel1_interrupt';
+procedure DMA2_Channel2_interrupt; external name 'DMA2_Channel2_interrupt';
+procedure DMA2_Channel3_interrupt; external name 'DMA2_Channel3_interrupt';
+procedure DMA2_Channel4_interrupt; external name 'DMA2_Channel4_interrupt';
+procedure DMA2_Channel5_interrupt; external name 'DMA2_Channel5_interrupt';
+procedure ADC4_interrupt; external name 'ADC4_interrupt';
+procedure COMP1_2_3_interrupt; external name 'COMP1_2_3_interrupt';
+procedure COMP4_5_6_interrupt; external name 'COMP4_5_6_interrupt';
+procedure COMP7_interrupt; external name 'COMP7_interrupt';
+procedure FPU_interrupt; external name 'FPU_interrupt';
+
+{$i cortexm4f_start.inc}
+
+procedure Vectors; assembler; nostackframe;
+label interrupt_vectors;
+asm
+  .section ".init.interrupt_vectors"
+  interrupt_vectors:
+  .long _stack_top
+  .long Startup
+  .long NonMaskableInt_interrupt
+  .long HardFault_interrupt
+  .long MemoryManagement_interrupt
+  .long BusFault_interrupt
+  .long UsageFault_interrupt
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long SVCall_interrupt
+  .long DebugMonitor_interrupt
+  .long 0
+  .long PendSV_interrupt
+  .long SysTick_interrupt
+  .long WWDG_interrupt
+  .long 0
+  .long TAMP_STAMP_interrupt
+  .long RTC_WKUP_interrupt
+  .long FLASH_interrupt
+  .long RCC_interrupt
+  .long EXTI0_interrupt
+  .long EXTI1_interrupt
+  .long EXTI2_TSC_interrupt
+  .long EXTI3_interrupt
+  .long EXTI4_interrupt
+  .long DMA1_Channel1_interrupt
+  .long DMA1_Channel2_interrupt
+  .long DMA1_Channel3_interrupt
+  .long DMA1_Channel4_interrupt
+  .long DMA1_Channel5_interrupt
+  .long DMA1_Channel6_interrupt
+  .long DMA1_Channel7_interrupt
+  .long ADC1_2_interrupt
+  .long CAN_TX_interrupt
+  .long CAN_RX0_interrupt
+  .long CAN_RX1_interrupt
+  .long CAN_SCE_interrupt
+  .long EXTI9_5_interrupt
+  .long TIM1_BRK_TIM15_interrupt
+  .long TIM1_UP_TIM16_interrupt
+  .long TIM1_TRG_COM_TIM17_interrupt
+  .long TIM1_CC_interrupt
+  .long TIM2_interrupt
+  .long TIM3_interrupt
+  .long TIM4_interrupt
+  .long I2C1_EV_interrupt
+  .long I2C1_ER_interrupt
+  .long I2C2_EV_interrupt
+  .long I2C2_ER_interrupt
+  .long SPI1_interrupt
+  .long SPI2_interrupt
+  .long USART1_interrupt
+  .long USART2_interrupt
+  .long USART3_interrupt
+  .long EXTI15_10_interrupt
+  .long RTC_Alarm_interrupt
+  .long 0
+  .long TIM8_BRK_interrupt
+  .long TIM8_UP_interrupt
+  .long TIM8_TRG_COM_interrupt
+  .long TIM8_CC_interrupt
+  .long ADC3_interrupt
+  .long 0
+  .long 0
+  .long 0
+  .long SPI3_interrupt
+  .long UART4_interrupt
+  .long UART5_interrupt
+  .long TIM6_DAC_interrupt
+  .long TIM7_interrupt
+  .long DMA2_Channel1_interrupt
+  .long DMA2_Channel2_interrupt
+  .long DMA2_Channel3_interrupt
+  .long DMA2_Channel4_interrupt
+  .long DMA2_Channel5_interrupt
+  .long ADC4_interrupt
+  .long 0
+  .long 0
+  .long COMP1_2_3_interrupt
+  .long COMP4_5_6_interrupt
+  .long COMP7_interrupt
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long FPU_interrupt
+  .weak NonMaskableInt_interrupt
+  .weak HardFault_interrupt
+  .weak MemoryManagement_interrupt
+  .weak BusFault_interrupt
+  .weak UsageFault_interrupt
+  .weak SVCall_interrupt
+  .weak DebugMonitor_interrupt
+  .weak PendSV_interrupt
+  .weak SysTick_interrupt
+  .weak WWDG_interrupt
+  .weak TAMP_STAMP_interrupt
+  .weak RTC_WKUP_interrupt
+  .weak FLASH_interrupt
+  .weak RCC_interrupt
+  .weak EXTI0_interrupt
+  .weak EXTI1_interrupt
+  .weak EXTI2_TSC_interrupt
+  .weak EXTI3_interrupt
+  .weak EXTI4_interrupt
+  .weak DMA1_Channel1_interrupt
+  .weak DMA1_Channel2_interrupt
+  .weak DMA1_Channel3_interrupt
+  .weak DMA1_Channel4_interrupt
+  .weak DMA1_Channel5_interrupt
+  .weak DMA1_Channel6_interrupt
+  .weak DMA1_Channel7_interrupt
+  .weak ADC1_2_interrupt
+  .weak CAN_TX_interrupt
+  .weak CAN_RX0_interrupt
+  .weak CAN_RX1_interrupt
+  .weak CAN_SCE_interrupt
+  .weak EXTI9_5_interrupt
+  .weak TIM1_BRK_TIM15_interrupt
+  .weak TIM1_UP_TIM16_interrupt
+  .weak TIM1_TRG_COM_TIM17_interrupt
+  .weak TIM1_CC_interrupt
+  .weak TIM2_interrupt
+  .weak TIM3_interrupt
+  .weak TIM4_interrupt
+  .weak I2C1_EV_interrupt
+  .weak I2C1_ER_interrupt
+  .weak I2C2_EV_interrupt
+  .weak I2C2_ER_interrupt
+  .weak SPI1_interrupt
+  .weak SPI2_interrupt
+  .weak USART1_interrupt
+  .weak USART2_interrupt
+  .weak USART3_interrupt
+  .weak EXTI15_10_interrupt
+  .weak RTC_Alarm_interrupt
+  .weak TIM8_BRK_interrupt
+  .weak TIM8_UP_interrupt
+  .weak TIM8_TRG_COM_interrupt
+  .weak TIM8_CC_interrupt
+  .weak ADC3_interrupt
+  .weak SPI3_interrupt
+  .weak UART4_interrupt
+  .weak UART5_interrupt
+  .weak TIM6_DAC_interrupt
+  .weak TIM7_interrupt
+  .weak DMA2_Channel1_interrupt
+  .weak DMA2_Channel2_interrupt
+  .weak DMA2_Channel3_interrupt
+  .weak DMA2_Channel4_interrupt
+  .weak DMA2_Channel5_interrupt
+  .weak ADC4_interrupt
+  .weak COMP1_2_3_interrupt
+  .weak COMP4_5_6_interrupt
+  .weak COMP7_interrupt
+  .weak FPU_interrupt
+  .set NonMaskableInt_interrupt, HaltProc
+  .set HardFault_interrupt, HaltProc
+  .set MemoryManagement_interrupt, HaltProc
+  .set BusFault_interrupt, HaltProc
+  .set UsageFault_interrupt, HaltProc
+  .set SVCall_interrupt, HaltProc
+  .set DebugMonitor_interrupt, HaltProc
+  .set PendSV_interrupt, HaltProc
+  .set SysTick_interrupt, HaltProc
+  .set WWDG_interrupt, HaltProc
+  .set TAMP_STAMP_interrupt, HaltProc
+  .set RTC_WKUP_interrupt, HaltProc
+  .set FLASH_interrupt, HaltProc
+  .set RCC_interrupt, HaltProc
+  .set EXTI0_interrupt, HaltProc
+  .set EXTI1_interrupt, HaltProc
+  .set EXTI2_TSC_interrupt, HaltProc
+  .set EXTI3_interrupt, HaltProc
+  .set EXTI4_interrupt, HaltProc
+  .set DMA1_Channel1_interrupt, HaltProc
+  .set DMA1_Channel2_interrupt, HaltProc
+  .set DMA1_Channel3_interrupt, HaltProc
+  .set DMA1_Channel4_interrupt, HaltProc
+  .set DMA1_Channel5_interrupt, HaltProc
+  .set DMA1_Channel6_interrupt, HaltProc
+  .set DMA1_Channel7_interrupt, HaltProc
+  .set ADC1_2_interrupt, HaltProc
+  .set CAN_TX_interrupt, HaltProc
+  .set CAN_RX0_interrupt, HaltProc
+  .set CAN_RX1_interrupt, HaltProc
+  .set CAN_SCE_interrupt, HaltProc
+  .set EXTI9_5_interrupt, HaltProc
+  .set TIM1_BRK_TIM15_interrupt, HaltProc
+  .set TIM1_UP_TIM16_interrupt, HaltProc
+  .set TIM1_TRG_COM_TIM17_interrupt, HaltProc
+  .set TIM1_CC_interrupt, HaltProc
+  .set TIM2_interrupt, HaltProc
+  .set TIM3_interrupt, HaltProc
+  .set TIM4_interrupt, HaltProc
+  .set I2C1_EV_interrupt, HaltProc
+  .set I2C1_ER_interrupt, HaltProc
+  .set I2C2_EV_interrupt, HaltProc
+  .set I2C2_ER_interrupt, HaltProc
+  .set SPI1_interrupt, HaltProc
+  .set SPI2_interrupt, HaltProc
+  .set USART1_interrupt, HaltProc
+  .set USART2_interrupt, HaltProc
+  .set USART3_interrupt, HaltProc
+  .set EXTI15_10_interrupt, HaltProc
+  .set RTC_Alarm_interrupt, HaltProc
+  .set TIM8_BRK_interrupt, HaltProc
+  .set TIM8_UP_interrupt, HaltProc
+  .set TIM8_TRG_COM_interrupt, HaltProc
+  .set TIM8_CC_interrupt, HaltProc
+  .set ADC3_interrupt, HaltProc
+  .set SPI3_interrupt, HaltProc
+  .set UART4_interrupt, HaltProc
+  .set UART5_interrupt, HaltProc
+  .set TIM6_DAC_interrupt, HaltProc
+  .set TIM7_interrupt, HaltProc
+  .set DMA2_Channel1_interrupt, HaltProc
+  .set DMA2_Channel2_interrupt, HaltProc
+  .set DMA2_Channel3_interrupt, HaltProc
+  .set DMA2_Channel4_interrupt, HaltProc
+  .set DMA2_Channel5_interrupt, HaltProc
+  .set ADC4_interrupt, HaltProc
+  .set COMP1_2_3_interrupt, HaltProc
+  .set COMP4_5_6_interrupt, HaltProc
+  .set COMP7_interrupt, HaltProc
+  .set FPU_interrupt, HaltProc
+  .text
+end;
+end.
diff -Naur fpc-save/rtl/embedded/arm/stm32f373xc.pp fpc/rtl/embedded/arm/stm32f373xc.pp
--- fpc-save/rtl/embedded/arm/stm32f373xc.pp	1970-01-01 01:00:00.000000000 +0100
+++ fpc/rtl/embedded/arm/stm32f373xc.pp	2018-03-02 17:07:43.000000000 +0100
@@ -0,0 +1,1025 @@
+unit stm32f373xc;
+interface
+{$PACKRECORDS C}
+{$GOTO ON}
+// *
+// ******************************************************************************
+// * @file    stm32f373xc.h
+// * @author  MCD Application Team
+//   CMSIS STM32F373xC Devices Peripheral Access Layer Header File.
+// *
+// *          This file contains:
+// *           - Data structures and the address mapping for all peripherals
+// *           - Peripheral's registers declarations and bits definition
+// *           - Macros to access peripheral’s registers hardware
+// *
+// ******************************************************************************
+// * @attention
+// *
+// * <h2><center>&copy; COPYRIGHT(c) 2016 STMicroelectronics</center></h2>
+// *
+// * Redistribution and use in source and binary forms, with or without modification,
+// * are permitted provided that the following conditions are met:
+// *   1. Redistributions of source code must retain the above copyright notice,
+// *      this list of conditions and the following disclaimer.
+// *   2. Redistributions in binary form must reproduce the above copyright notice,
+// *      this list of conditions and the following disclaimer in the documentation
+// *      and/or other materials provided with the distribution.
+// *   3. Neither the name of STMicroelectronics nor the names of its contributors
+// *      may be used to endorse or promote products derived from this software
+// *      without specific prior written permission.
+// *
+// * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
+// * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
+// * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+// * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE
+// * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
+// * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
+// * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER
+// * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+// * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
+// * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
+// *
+// ******************************************************************************
+// Configuration of the Cortex-M4 Processor and Core Peripherals
+// STM32F373xC devices Interrupt Number Definition, according to the selected device
+// *        in @ref Library_configuration_section
+
+type
+  TIRQn_Enum   = (
+    NonMaskableInt_IRQn = -14,        // 2 Non Maskable Interrupt
+    HardFault_IRQn = -13,             // 3 Cortex-M4 Hard Fault Interrupt
+    MemoryManagement_IRQn = -12,      // 4 Cortex-M4 Memory Management Interrupt
+    BusFault_IRQn = -11,              // 5 Cortex-M4 Bus Fault Interrupt
+    UsageFault_IRQn = -10,            // 6 Cortex-M4 Usage Fault Interrupt
+    SVCall_IRQn = -5,                 // 11 Cortex-M4 SV Call Interrupt
+    DebugMonitor_IRQn = -4,           // 12 Cortex-M4 Debug Monitor Interrupt
+    PendSV_IRQn = -2,                 // 14 Cortex-M4 Pend SV Interrupt
+    SysTick_IRQn = -1,                // 15 Cortex-M4 System Tick Interrupt
+    WWDG_IRQn  = 0,                   // Window WatchDog Interrupt
+    PVD_IRQn   = 1,                   // PVD through EXTI Line detection Interrupt
+    TAMP_STAMP_IRQn = 2,              // Tamper and TimeStamp interrupts through the EXTI line 19
+    RTC_WKUP_IRQn = 3,                // RTC Wakeup interrupt through the EXTI line 20
+    FLASH_IRQn = 4,                   // FLASH global Interrupt
+    RCC_IRQn   = 5,                   // RCC global Interrupt
+    EXTI0_IRQn = 6,                   // EXTI Line0 Interrupt
+    EXTI1_IRQn = 7,                   // EXTI Line1 Interrupt
+    EXTI2_TSC_IRQn = 8,               // EXTI Line2 Interrupt and Touch Sense Controller Interrupt
+    EXTI3_IRQn = 9,                   // EXTI Line3 Interrupt
+    EXTI4_IRQn = 10,                  // EXTI Line4 Interrupt
+    DMA1_Channel1_IRQn = 11,          // DMA1 Channel 1 Interrupt
+    DMA1_Channel2_IRQn = 12,          // DMA1 Channel 2 Interrupt
+    DMA1_Channel3_IRQn = 13,          // DMA1 Channel 3 Interrupt
+    DMA1_Channel4_IRQn = 14,          // DMA1 Channel 4 Interrupt
+    DMA1_Channel5_IRQn = 15,          // DMA1 Channel 5 Interrupt
+    DMA1_Channel6_IRQn = 16,          // DMA1 Channel 6 Interrupt
+    DMA1_Channel7_IRQn = 17,          // DMA1 Channel 7 Interrupt
+    ADC1_IRQn  = 18,                  // ADC1 Interrupts
+    CAN_TX_IRQn = 19,                 // CAN TX Interrupt
+    CAN_RX0_IRQn = 20,                // CAN RX0 Interrupt
+    CAN_RX1_IRQn = 21,                // CAN RX1 Interrupt
+    CAN_SCE_IRQn = 22,                // CAN SCE Interrupt
+    EXTI9_5_IRQn = 23,                // External Line[9:5] Interrupts
+    TIM15_IRQn = 24,                  // TIM15 global Interrupt
+    TIM16_IRQn = 25,                  // TIM16 global Interrupt
+    TIM17_IRQn = 26,                  // TIM17 global Interrupt
+    TIM18_DAC2_IRQn = 27,             // TIM18 global Interrupt and DAC2 underrun Interrupt
+    TIM2_IRQn  = 28,                  // TIM2 global Interrupt
+    TIM3_IRQn  = 29,                  // TIM3 global Interrupt
+    TIM4_IRQn  = 30,                  // TIM4 global Interrupt
+    I2C1_EV_IRQn = 31,                // I2C1 Event Interrupt & EXTI Line23 Interrupt (I2C1 wakeup)
+    I2C1_ER_IRQn = 32,                // I2C1 Error Interrupt
+    I2C2_EV_IRQn = 33,                // I2C2 Event Interrupt & EXTI Line24 Interrupt (I2C2 wakeup)
+    I2C2_ER_IRQn = 34,                // I2C2 Error Interrupt
+    SPI1_IRQn  = 35,                  // SPI1 global Interrupt
+    SPI2_IRQn  = 36,                  // SPI2 global Interrupt
+    USART1_IRQn = 37,                 // USART1 global Interrupt & EXTI Line25 Interrupt (USART1 wakeup)
+    USART2_IRQn = 38,                 // USART2 global Interrupt & EXTI Line26 Interrupt (USART2 wakeup)
+    USART3_IRQn = 39,                 // USART3 global Interrupt & EXTI Line28 Interrupt (USART3 wakeup)
+    EXTI15_10_IRQn = 40,              // External Line[15:10] Interrupts
+    RTC_Alarm_IRQn = 41,              // RTC Alarm (A and B) through EXTI Line 17 Interrupt
+    CEC_IRQn   = 42,                  // CEC Interrupt & EXTI Line27 Interrupt (CEC wakeup)
+    TIM12_IRQn = 43,                  // TIM12 global interrupt
+    TIM13_IRQn = 44,                  // TIM13 global interrupt
+    TIM14_IRQn = 45,                  // TIM14 global interrupt
+    TIM5_IRQn  = 50,                  // TIM5 global Interrupt
+    SPI3_IRQn  = 51,                  // SPI3 global Interrupt
+    TIM6_DAC1_IRQn = 54,              // TIM6 global and DAC1 underrun error Interrupts
+    TIM7_IRQn  = 55,                  // TIM7 global Interrupt
+    DMA2_Channel1_IRQn = 56,          // DMA2 Channel 1 global Interrupt
+    DMA2_Channel2_IRQn = 57,          // DMA2 Channel 2 global Interrupt
+    DMA2_Channel3_IRQn = 58,          // DMA2 Channel 3 global Interrupt
+    DMA2_Channel4_IRQn = 59,          // DMA2 Channel 4 global Interrupt
+    DMA2_Channel5_IRQn = 60,          // DMA2 Channel 5 global Interrupt
+    SDADC1_IRQn = 61,                 // ADC Sigma Delta 1 global Interrupt
+    SDADC2_IRQn = 62,                 // ADC Sigma Delta 2 global Interrupt
+    SDADC3_IRQn = 63,                 // ADC Sigma Delta 1 global Interrupt
+    COMP_IRQn  = 64,                  // COMP1 and COMP2 global Interrupt
+    USB_HP_IRQn = 74,                 // USB High Priority global Interrupt
+    USB_LP_IRQn = 75,                 // USB Low Priority global Interrupt
+    USBWakeUp_IRQn = 76,              // USB Wakeup Interrupt
+    TIM19_IRQn = 78,                  // TIM19 global Interrupt
+    FPU_IRQn   = 81                   // Floating point Interrupt
+  );
+
+  TADC_Registers = record
+    SR         : longword;            // ADC status register
+    CR1        : longword;            // ADC control register 1
+    CR2        : longword;            // ADC control register 2
+    SMPR1      : longword;            // ADC sample time register 1
+    SMPR2      : longword;            // ADC sample time register 2
+    JOFR1      : longword;            // ADC injected channel data offset register 1
+    JOFR2      : longword;            // ADC injected channel data offset register 2
+    JOFR3      : longword;            // ADC injected channel data offset register 3
+    JOFR4      : longword;            // ADC injected channel data offset register 4
+    HTR        : longword;            // ADC watchdog higher threshold register
+    LTR        : longword;            // ADC watchdog lower threshold register
+    SQR1       : longword;            // ADC regular sequence register 1
+    SQR2       : longword;            // ADC regular sequence register 2
+    SQR3       : longword;            // ADC regular sequence register 3
+    JSQR       : longword;            // ADC injected sequence register
+    JDR1       : longword;            // ADC injected data register 1
+    JDR2       : longword;            // ADC injected data register 2
+    JDR3       : longword;            // ADC injected data register 3
+    JDR4       : longword;            // ADC injected data register 4
+    DR         : longword;            // ADC regular data register
+  end;
+
+  TADC_COMMON_Registers = record
+    SR         : longword;            // ADC status register,    used for ADC multimode (bits common to several ADC instances).
+    CR1        : longword;            // ADC control register 1, used for ADC multimode (bits common to several ADC instances).
+    CR2        : longword;            // ADC control register 2, used for ADC multimode (bits common to several ADC instances).
+    RESERVED   : array[0..15] of longword;
+    DR         : longword;            // ADC data register,      used for ADC multimode (bits common to several ADC instances).
+  end;
+
+  TCAN_TXMAILBOX_Registers = record
+    TIR        : longword;            // CAN TX mailbox identifier register
+    TDTR       : longword;            // CAN mailbox data length control and time stamp register
+    TDLR       : longword;            // CAN mailbox data low register
+    TDHR       : longword;            // CAN mailbox data high register
+  end;
+
+  TCAN_FIFOMAILBOX_Registers = record
+    RIR        : longword;            // CAN receive FIFO mailbox identifier register
+    RDTR       : longword;            // CAN receive FIFO mailbox data length control and time stamp register
+    RDLR       : longword;            // CAN receive FIFO mailbox data low register
+    RDHR       : longword;            // CAN receive FIFO mailbox data high register
+  end;
+
+  TCAN_FILTERREGISTER_Registers = record
+    FR1        : longword;            // CAN Filter bank register 1
+    FR2        : longword;            // CAN Filter bank register 1
+  end;
+
+  TCAN_Registers = record
+    MCR        : longword;            // CAN master control register
+    MSR        : longword;            // CAN master status register
+    TSR        : longword;            // CAN transmit status register
+    RF0R       : longword;            // CAN receive FIFO 0 register
+    RF1R       : longword;            // CAN receive FIFO 1 register
+    IER        : longword;            // CAN interrupt enable register
+    ESR        : longword;            // CAN error status register
+    BTR        : longword;            // CAN bit timing register
+    RESERVED0  : array[0..87] of longword; // Reserved, 0x020 - 0x17F
+    sTxMailBox : array[0..2] of TCAN_TxMailBox_Registers; // CAN Tx MailBox
+    sFIFOMailBox : array[0..1] of TCAN_FIFOMailBox_Registers; // CAN FIFO MailBox
+    RESERVED1  : array[0..11] of longword; // Reserved, 0x1D0 - 0x1FF
+    FMR        : longword;            // CAN filter master register
+    FM1R       : longword;            // CAN filter mode register
+    RESERVED2  : longword;            // Reserved, 0x208
+    FS1R       : longword;            // CAN filter scale register
+    RESERVED3  : longword;            // Reserved, 0x210
+    FFA1R      : longword;            // CAN filter FIFO assignment register
+    RESERVED4  : longword;            // Reserved, 0x218
+    FA1R       : longword;            // CAN filter activation register
+    RESERVED5  : array[0..7] of longword; // Reserved, 0x220-0x23F
+    sFilterRegister : array[0..27] of TCAN_FilterRegister_Registers; // CAN Filter Register
+  end;
+
+  TCEC_Registers = record
+    CR         : longword;            // CEC control register
+    CFGR       : longword;            // CEC configuration register
+    TXDR       : longword;            // CEC Tx data register
+    RXDR       : longword;            // CEC Rx Data Register
+    ISR        : longword;            // CEC Interrupt and Status Register
+    IER        : longword;            // CEC interrupt enable register
+  end;
+
+  TCOMP_Registers = record
+    CSR        : longword;            // COMP control and status register
+  end;
+
+  TCOMP_COMMON_Registers = record
+    CSR        : longword;            // COMP control and status register, used for bits common to several COMP instances
+  end;
+
+  TCOMP1_2_Registers = record
+    CSR        : longword;            // Comparator 1 & 2 control Status register
+  end;
+
+  TCRC_Registers = record
+    DR         : longword;            // CRC Data register
+    IDR        : byte;                // CRC Independent data register
+    RESERVED0  : byte;                // Reserved,                                                    0x05
+    RESERVED1  : word;                // Reserved,                                                    0x06
+    CR         : longword;            // CRC Control register
+    RESERVED2  : longword;            // Reserved,                                                    0x0C
+    INIT       : longword;            // Initial CRC value register
+    POL        : longword;            // CRC polynomial register
+  end;
+
+  TDAC_Registers = record
+    CR         : longword;            // DAC control register
+    SWTRIGR    : longword;            // DAC software trigger register
+    DHR12R1    : longword;            // DAC channel1 12-bit right-aligned data holding register
+    DHR12L1    : longword;            // DAC channel1 12-bit left aligned data holding register
+    DHR8R1     : longword;            // DAC channel1 8-bit right aligned data holding register
+    DHR12R2    : longword;            // DAC channel2 12-bit right aligned data holding register
+    DHR12L2    : longword;            // DAC channel2 12-bit left aligned data holding register
+    DHR8R2     : longword;            // DAC channel2 8-bit right-aligned data holding register
+    DHR12RD    : longword;            // Dual DAC 12-bit right-aligned data holding register
+    DHR12LD    : longword;            // DUAL DAC 12-bit left aligned data holding register
+    DHR8RD     : longword;            // DUAL DAC 8-bit right aligned data holding register
+    DOR1       : longword;            // DAC channel1 data output register
+    DOR2       : longword;            // DAC channel2 data output register
+    SR         : longword;            // DAC status register
+  end;
+
+  TDBGMCU_Registers = record
+    IDCODE     : longword;            // MCU device ID code
+    CR         : longword;            // Debug MCU configuration register
+    APB1FZ     : longword;            // Debug MCU APB1 freeze register
+    APB2FZ     : longword;            // Debug MCU APB2 freeze register
+  end;
+
+  TDMA_CHANNEL_Registers = record
+    CCR        : longword;            // DMA channel x configuration register
+    CNDTR      : longword;            // DMA channel x number of data register
+    CPAR       : longword;            // DMA channel x peripheral address register
+    CMAR       : longword;            // DMA channel x memory address register
+  end;
+
+  TDMA_Registers = record
+    ISR        : longword;            // DMA interrupt status register
+    IFCR       : longword;            // DMA interrupt flag clear register
+  end;
+
+  TEXTI_Registers = record
+    IMR        : longword;            // XTI Interrupt mask register
+    EMR        : longword;            // XTI Event mask register
+    RTSR       : longword;            // XTI Rising trigger selection register
+    FTSR       : longword;            // XTI Falling trigger selection register
+    SWIER      : longword;            // XTI Software interrupt event register
+    PR         : longword;            // XTI Pending register
+  end;
+
+  TFLASH_Registers = record
+    ACR        : longword;            // FLASH access control register
+    KEYR       : longword;            // FLASH key register
+    OPTKEYR    : longword;            // FLASH option key register
+    SR         : longword;            // FLASH status register
+    CR         : longword;            // FLASH control register
+    AR         : longword;            // FLASH address register
+    RESERVED   : longword;            // Reserved, 0x18
+    OBR        : longword;            // FLASH Option byte register
+    WRPR       : longword;            // FLASH Write register
+  end;
+
+  TOB_Registers = record
+    RDP        : word;                // LASH option byte Read protection
+    USER       : word;                // LASH option byte user options
+    RESERVED0  : word;                // Reserved,                                                     0x04
+    RESERVED1  : word;                // Reserved,                                                     0x06
+    WRP0       : word;                // LASH option byte write protection 0
+    WRP1       : word;                // LASH option byte write protection 1
+    WRP2       : word;                // LASH option byte write protection 2
+    WRP3       : word;                // LASH option byte write protection 3
+  end;
+
+  TGPIO_Registers = record
+    MODER      : longword;            // GPIO port mode register
+    OTYPER     : longword;            // GPIO port output type register
+    OSPEEDR    : longword;            // GPIO port output speed register
+    PUPDR      : longword;            // GPIO port pull-up/pull-down register
+    IDR        : longword;            // GPIO port input data register
+    ODR        : longword;            // GPIO port output data register
+    BSRR       : longword;            // GPIO port bit set/reset register
+    LCKR       : longword;            // GPIO port configuration lock register
+    AFR        : array[0..1] of longword; // GPIO alternate function registers
+    BRR        : longword;            // GPIO bit reset register
+  end;
+
+  TSYSCFG_Registers = record
+    CFGR1      : longword;            // SYSCFG configuration register 1
+    RESERVED   : longword;            // Reserved,                                                             0x04
+    EXTICR     : array[0..3] of longword; // SYSCFG external interrupt configuration registers
+    CFGR2      : longword;            // SYSCFG configuration register 2
+  end;
+
+  TI2C_Registers = record
+    CR1        : longword;            // I2C Control register 1
+    CR2        : longword;            // I2C Control register 2
+    OAR1       : longword;            // I2C Own address 1 register
+    OAR2       : longword;            // I2C Own address 2 register
+    TIMINGR    : longword;            // I2C Timing register
+    TIMEOUTR   : longword;            // I2C Timeout register
+    ISR        : longword;            // I2C Interrupt and status register
+    ICR        : longword;            // I2C Interrupt clear register
+    PECR       : longword;            // I2C PEC register
+    RXDR       : longword;            // I2C Receive data register
+    TXDR       : longword;            // I2C Transmit data register
+  end;
+
+  TIWDG_Registers = record
+    KR         : longword;            // IWDG Key register
+    PR         : longword;            // IWDG Prescaler register
+    RLR        : longword;            // IWDG Reload register
+    SR         : longword;            // IWDG Status register
+    WINR       : longword;            // IWDG Window register
+  end;
+
+  TPWR_Registers = record
+    CR         : longword;            // PWR power control register
+    CSR        : longword;            // PWR power control/status register
+  end;
+
+  TRCC_Registers = record
+    CR         : longword;            // RCC clock control register
+    CFGR       : longword;            // RCC clock configuration register
+    CIR        : longword;            // RCC clock interrupt register
+    APB2RSTR   : longword;            // RCC APB2 peripheral reset register
+    APB1RSTR   : longword;            // RCC APB1 peripheral reset register
+    AHBENR     : longword;            // RCC AHB peripheral clock register
+    APB2ENR    : longword;            // RCC APB2 peripheral clock enable register
+    APB1ENR    : longword;            // RCC APB1 peripheral clock enable register
+    BDCR       : longword;            // RCC Backup domain control register
+    CSR        : longword;            // RCC clock control & status register
+    AHBRSTR    : longword;            // RCC AHB peripheral reset register
+    CFGR2      : longword;            // RCC clock configuration register 2
+    CFGR3      : longword;            // RCC clock configuration register 3
+  end;
+
+  TRTC_Registers = record
+    TR         : longword;            // RTC time register
+    DR         : longword;            // RTC date register
+    CR         : longword;            // RTC control register
+    ISR        : longword;            // RTC initialization and status register
+    PRER       : longword;            // RTC prescaler register
+    WUTR       : longword;            // RTC wakeup timer register
+    RESERVED0  : longword;            // Reserved, 0x18
+    ALRMAR     : longword;            // RTC alarm A register
+    ALRMBR     : longword;            // RTC alarm B register
+    WPR        : longword;            // RTC write protection register
+    SSR        : longword;            // RTC sub second register
+    SHIFTR     : longword;            // RTC shift control register
+    TSTR       : longword;            // RTC time stamp time register
+    TSDR       : longword;            // RTC time stamp date register
+    TSSSR      : longword;            // RTC time-stamp sub second register
+    CALR       : longword;            // RTC calibration register
+    TAFCR      : longword;            // RTC tamper and alternate function configuration register
+    ALRMASSR   : longword;            // RTC alarm A sub second register
+    ALRMBSSR   : longword;            // RTC alarm B sub second register
+    RESERVED7  : longword;            // Reserved, 0x4C
+    BKP0R      : longword;            // RTC backup register 0
+    BKP1R      : longword;            // RTC backup register 1
+    BKP2R      : longword;            // RTC backup register 2
+    BKP3R      : longword;            // RTC backup register 3
+    BKP4R      : longword;            // RTC backup register 4
+    BKP5R      : longword;            // RTC backup register 5
+    BKP6R      : longword;            // RTC backup register 6
+    BKP7R      : longword;            // RTC backup register 7
+    BKP8R      : longword;            // RTC backup register 8
+    BKP9R      : longword;            // RTC backup register 9
+    BKP10R     : longword;            // RTC backup register 10
+    BKP11R     : longword;            // RTC backup register 11
+    BKP12R     : longword;            // RTC backup register 12
+    BKP13R     : longword;            // RTC backup register 13
+    BKP14R     : longword;            // RTC backup register 14
+    BKP15R     : longword;            // RTC backup register 15
+    BKP16R     : longword;            // RTC backup register 16
+    BKP17R     : longword;            // RTC backup register 17
+    BKP18R     : longword;            // RTC backup register 18
+    BKP19R     : longword;            // RTC backup register 19
+    BKP20R     : longword;            // RTC backup register 20
+    BKP21R     : longword;            // RTC backup register 21
+    BKP22R     : longword;            // RTC backup register 22
+    BKP23R     : longword;            // RTC backup register 23
+    BKP24R     : longword;            // RTC backup register 24
+    BKP25R     : longword;            // RTC backup register 25
+    BKP26R     : longword;            // RTC backup register 26
+    BKP27R     : longword;            // RTC backup register 27
+    BKP28R     : longword;            // RTC backup register 28
+    BKP29R     : longword;            // RTC backup register 29
+    BKP30R     : longword;            // RTC backup register 30
+    BKP31R     : longword;            // RTC backup register 31
+  end;
+
+  TSDADC_Registers = record
+    CR1        : longword;            // SDADC control register 1
+    CR2        : longword;            // SDADC control register 2
+    ISR        : longword;            // SDADC interrupt and status register
+    CLRISR     : longword;            // SDADC clear interrupt and status register
+    RESERVED0  : longword;            // Reserved, 0x10
+    JCHGR      : longword;            // SDADC injected channel group selection register
+    RESERVED1  : longword;            // Reserved, 0x18
+    RESERVED2  : longword;            // Reserved, 0x1C
+    CONF0R     : longword;            // SDADC configuration 0 register
+    CONF1R     : longword;            // SDADC configuration 1 register
+    CONF2R     : longword;            // SDADC configuration 2 register
+    RESERVED3  : array[0..4] of longword; // Reserved, 0x2C - 0x3C
+    CONFCHR1   : longword;            // SDADC channel configuration register 1
+    CONFCHR2   : longword;            // SDADC channel configuration register 2
+    RESERVED4  : array[0..5] of longword; // Reserved, 0x48 - 0x5C
+    JDATAR     : longword;            // SDADC data register for injected group
+    RDATAR     : longword;            // SDADC data register for the regular channel
+    RESERVED5  : array[0..1] of longword; // Reserved, 0x68 - 0x6C
+    JDATA12R   : longword;            // SDADC1 and SDADC2 injected data register
+    RDATA12R   : longword;            // SDADC1 and SDADC2 regular data register
+    JDATA13R   : longword;            // SDADC1 and SDADC3 injected data register
+    RDATA13R   : longword;            // SDADC1 and SDADC3 regular data register
+  end;
+
+  TSPI_Registers = record
+    CR1        : longword;            // SPI Control register 1
+    CR2        : longword;            // SPI Control register 2
+    SR         : longword;            // SPI Status register
+    DR         : longword;            // SPI data register
+    CRCPR      : longword;            // SPI CRC polynomial register
+    RXCRCR     : longword;            // SPI Rx CRC register
+    TXCRCR     : longword;            // SPI Tx CRC register
+    I2SCFGR    : longword;            // SPI_I2S configuration register
+    I2SPR      : longword;            // SPI_I2S prescaler register
+  end;
+
+  TTIM_Registers = record
+    CR1        : longword;            // TIM control register 1
+    CR2        : longword;            // TIM control register 2
+    SMCR       : longword;            // TIM slave mode control register
+    DIER       : longword;            // TIM DMA/interrupt enable register
+    SR         : longword;            // TIM status register
+    EGR        : longword;            // TIM event generation register
+    CCMR1      : longword;            // TIM capture/compare mode register 1
+    CCMR2      : longword;            // TIM capture/compare mode register 2
+    CCER       : longword;            // TIM capture/compare enable register
+    CNT        : longword;            // TIM counter register
+    PSC        : longword;            // TIM prescaler
+    ARR        : longword;            // TIM auto-reload register
+    RCR        : longword;            // TIM repetition counter register
+    CCR1       : longword;            // TIM capture/compare register 1
+    CCR2       : longword;            // TIM capture/compare register 2
+    CCR3       : longword;            // TIM capture/compare register 3
+    CCR4       : longword;            // TIM capture/compare register 4
+    BDTR       : longword;            // TIM break and dead-time register
+    DCR        : longword;            // TIM DMA control register
+    DMAR       : longword;            // TIM DMA address for full transfer
+    &OR        : longword;            // TIM option register
+  end;
+
+  TTSC_Registers = record
+    CR         : longword;            // TSC control register
+    IER        : longword;            // TSC interrupt enable register
+    ICR        : longword;            // TSC interrupt clear register
+    ISR        : longword;            // TSC interrupt status register
+    IOHCR      : longword;            // TSC I/O hysteresis control register
+    RESERVED1  : longword;            // Reserved
+    IOASCR     : longword;            // TSC I/O analog switch control register
+    RESERVED2  : longword;            // Reserved
+    IOSCR      : longword;            // TSC I/O sampling control register
+    RESERVED3  : longword;            // Reserved
+    IOCCR      : longword;            // TSC I/O channel control register
+    RESERVED4  : longword;            // Reserved
+    IOGCSR     : longword;            // TSC I/O group control status register
+    IOGXCR     : array[0..7] of longword; // TSC I/O group x counter register
+  end;
+
+  TUSART_Registers = record
+    CR1        : longword;            // USART Control register 1
+    CR2        : longword;            // USART Control register 2
+    CR3        : longword;            // USART Control register 3
+    BRR        : longword;            // USART Baud rate register
+    GTPR       : longword;            // USART Guard time and prescaler register
+    RTOR       : longword;            // USART Receiver Time Out register
+    RQR        : longword;            // USART Request register
+    ISR        : longword;            // USART Interrupt and status register
+    ICR        : longword;            // USART Interrupt flag Clear register
+    RDR        : word;                // USART Receive Data register
+    RESERVED1  : word;                // Reserved, 0x26
+    TDR        : word;                // USART Transmit Data register
+    RESERVED2  : word;                // Reserved, 0x2A
+  end;
+
+  TUSB_Registers = record
+    EP0R       : word;                // USB Endpoint 0 register
+    RESERVED0  : word;                // Reserved
+    EP1R       : word;                // USB Endpoint 1 register
+    RESERVED1  : word;                // Reserved
+    EP2R       : word;                // USB Endpoint 2 register
+    RESERVED2  : word;                // Reserved
+    EP3R       : word;                // USB Endpoint 3 register
+    RESERVED3  : word;                // Reserved
+    EP4R       : word;                // USB Endpoint 4 register
+    RESERVED4  : word;                // Reserved
+    EP5R       : word;                // USB Endpoint 5 register
+    RESERVED5  : word;                // Reserved
+    EP6R       : word;                // USB Endpoint 6 register
+    RESERVED6  : word;                // Reserved
+    EP7R       : word;                // USB Endpoint 7 register
+    RESERVED7  : array[0..16] of word; // Reserved
+    CNTR       : word;                // Control register
+    RESERVED8  : word;                // Reserved
+    ISTR       : word;                // Interrupt status register
+    RESERVED9  : word;                // Reserved
+    FNR        : word;                // Frame number register
+    RESERVEDA  : word;                // Reserved
+    DADDR      : word;                // Device address register
+    RESERVEDB  : word;                // Reserved
+    BTABLE     : word;                // Buffer Table address register
+    RESERVEDC  : word;                // Reserved
+  end;
+
+  TWWDG_Registers = record
+    CR         : longword;            // WWDG Control register
+    CFR        : longword;            // WWDG Configuration register
+    SR         : longword;            // WWDG Status register
+  end;
+
+const
+  FLASH_BASE   = $08000000;           // FLASH base address in the alias region
+  SRAM_BASE    = $20000000;           // SRAM base address in the alias region
+  PERIPH_BASE  = $40000000;           // Peripheral base address in the alias region
+  SRAM_BB_BASE = $22000000;           // SRAM base address in the bit-band region
+  PERIPH_BB_BASE = $42000000;         // Peripheral base address in the bit-band region
+  APB1PERIPH_BASE = $40000000;
+  APB2PERIPH_BASE = PERIPH_BASE + $00010000;
+  AHB1PERIPH_BASE = PERIPH_BASE + $00020000;
+  AHB2PERIPH_BASE = PERIPH_BASE + $08000000;
+  TIM2_BASE    = APB1PERIPH_BASE + $00000000;
+  TIM3_BASE    = APB1PERIPH_BASE + $00000400;
+  TIM4_BASE    = APB1PERIPH_BASE + $00000800;
+  TIM5_BASE    = APB1PERIPH_BASE + $00000C00;
+  TIM6_BASE    = APB1PERIPH_BASE + $00001000;
+  TIM7_BASE    = APB1PERIPH_BASE + $00001400;
+  TIM12_BASE   = APB1PERIPH_BASE + $00001800;
+  TIM13_BASE   = APB1PERIPH_BASE + $00001C00;
+  TIM14_BASE   = APB1PERIPH_BASE + $00002000;
+  RTC_BASE     = APB1PERIPH_BASE + $00002800;
+  WWDG_BASE    = APB1PERIPH_BASE + $00002C00;
+  IWDG_BASE    = APB1PERIPH_BASE + $00003000;
+  SPI2_BASE    = APB1PERIPH_BASE + $00003800;
+  SPI3_BASE    = APB1PERIPH_BASE + $00003C00;
+  USART2_BASE  = APB1PERIPH_BASE + $00004400;
+  USART3_BASE  = APB1PERIPH_BASE + $00004800;
+  I2C1_BASE    = APB1PERIPH_BASE + $00005400;
+  I2C2_BASE    = APB1PERIPH_BASE + $00005800;
+  USB_BASE     = APB1PERIPH_BASE + $00005C00; // USB_IP Peripheral Registers base address
+  CAN_BASE     = APB1PERIPH_BASE + $00006400;
+  PWR_BASE     = APB1PERIPH_BASE + $00007000;
+  DAC1_BASE    = APB1PERIPH_BASE + $00007400;
+  DAC2_BASE    = APB1PERIPH_BASE + $00009800;
+  DAC_BASE     = APB1PERIPH_BASE + $00007400;
+  CEC_BASE     = APB1PERIPH_BASE + $00007800;
+  TIM18_BASE   = APB1PERIPH_BASE + $00009C00;
+  SYSCFG_BASE  = APB2PERIPH_BASE + $00000000;
+  COMP_BASE    = APB2PERIPH_BASE + $0000001C;
+  EXTI_BASE    = APB2PERIPH_BASE + $00000400;
+  ADC1_BASE    = APB2PERIPH_BASE + $00002400;
+  SPI1_BASE    = APB2PERIPH_BASE + $00003000;
+  USART1_BASE  = APB2PERIPH_BASE + $00003800;
+  TIM15_BASE   = APB2PERIPH_BASE + $00004000;
+  TIM16_BASE   = APB2PERIPH_BASE + $00004400;
+  TIM17_BASE   = APB2PERIPH_BASE + $00004800;
+  TIM19_BASE   = APB2PERIPH_BASE + $00005C00;
+  SDADC1_BASE  = APB2PERIPH_BASE + $00006000;
+  SDADC2_BASE  = APB2PERIPH_BASE + $00006400;
+  SDADC3_BASE  = APB2PERIPH_BASE + $00006800;
+  DMA1_BASE    = AHB1PERIPH_BASE + $00000000;
+  DMA1_Channel1_BASE = AHB1PERIPH_BASE + $00000008;
+  DMA1_Channel2_BASE = AHB1PERIPH_BASE + $0000001C;
+  DMA1_Channel3_BASE = AHB1PERIPH_BASE + $00000030;
+  DMA1_Channel4_BASE = AHB1PERIPH_BASE + $00000044;
+  DMA1_Channel5_BASE = AHB1PERIPH_BASE + $00000058;
+  DMA1_Channel6_BASE = AHB1PERIPH_BASE + $0000006C;
+  DMA1_Channel7_BASE = AHB1PERIPH_BASE + $00000080;
+  DMA2_BASE    = AHB1PERIPH_BASE + $00000400;
+  DMA2_Channel1_BASE = AHB1PERIPH_BASE + $00000408;
+  DMA2_Channel2_BASE = AHB1PERIPH_BASE + $0000041C;
+  DMA2_Channel3_BASE = AHB1PERIPH_BASE + $00000430;
+  DMA2_Channel4_BASE = AHB1PERIPH_BASE + $00000444;
+  DMA2_Channel5_BASE = AHB1PERIPH_BASE + $00000458;
+  RCC_BASE     = AHB1PERIPH_BASE + $00001000;
+  FLASH_R_BASE = AHB1PERIPH_BASE + $00002000; // Flash registers base address
+  OB_BASE      = $1FFFF800;           // Flash Option Bytes base address
+  FLASHSIZE_BASE = $1FFFF7CC;         // FLASH Size register base address
+  UID_BASE     = $1FFFF7AC;           // Unique device ID register base address
+  CRC_BASE     = AHB1PERIPH_BASE + $00003000;
+  TSC_BASE     = AHB1PERIPH_BASE + $00004000;
+  GPIOA_BASE   = AHB2PERIPH_BASE + $00000000;
+  GPIOB_BASE   = AHB2PERIPH_BASE + $00000400;
+  GPIOC_BASE   = AHB2PERIPH_BASE + $00000800;
+  GPIOD_BASE   = AHB2PERIPH_BASE + $00000C00;
+  GPIOE_BASE   = AHB2PERIPH_BASE + $00001000;
+  GPIOF_BASE   = AHB2PERIPH_BASE + $00001400;
+  DBGMCU_BASE  = $E0042000;           // Debug MCU registers base address
+
+var
+  TIM2         : TTIM_Registers absolute TIM2_BASE;
+  TIM3         : TTIM_Registers absolute TIM3_BASE;
+  TIM4         : TTIM_Registers absolute TIM4_BASE;
+  TIM5         : TTIM_Registers absolute TIM5_BASE;
+  TIM6         : TTIM_Registers absolute TIM6_BASE;
+  TIM7         : TTIM_Registers absolute TIM7_BASE;
+  TIM12        : TTIM_Registers absolute TIM12_BASE;
+  TIM13        : TTIM_Registers absolute TIM13_BASE;
+  TIM14        : TTIM_Registers absolute TIM14_BASE;
+  RTC          : TRTC_Registers absolute RTC_BASE;
+  WWDG         : TWWDG_Registers absolute WWDG_BASE;
+  IWDG         : TIWDG_Registers absolute IWDG_BASE;
+  SPI2         : TSPI_Registers absolute SPI2_BASE;
+  SPI3         : TSPI_Registers absolute SPI3_BASE;
+  USART2       : TUSART_Registers absolute USART2_BASE;
+  USART3       : TUSART_Registers absolute USART3_BASE;
+  I2C1         : TI2C_Registers absolute I2C1_BASE;
+  I2C2         : TI2C_Registers absolute I2C2_BASE;
+  CAN          : TCAN_Registers absolute CAN_BASE;
+  PWR          : TPWR_Registers absolute PWR_BASE;
+  DAC          : TDAC_Registers absolute DAC_BASE;
+  DAC1         : TDAC_Registers absolute DAC1_BASE;
+  DAC2         : TDAC_Registers absolute DAC2_BASE;
+  CEC          : TCEC_Registers absolute CEC_BASE;
+  COMP1        : TCOMP_Registers absolute COMP_BASE;
+  COMP2        : TCOMP_Registers absolute $00000002;
+  COMP12_COMMON : TCOMP_Common_Registers absolute COMP_BASE;
+  COMP         : TCOMP1_2_Registers absolute COMP_BASE;
+  TIM18        : TTIM_Registers absolute TIM18_BASE;
+  SYSCFG       : TSYSCFG_Registers absolute SYSCFG_BASE;
+  EXTI         : TEXTI_Registers absolute EXTI_BASE;
+  SPI1         : TSPI_Registers absolute SPI1_BASE;
+  USART1       : TUSART_Registers absolute USART1_BASE;
+  TIM15        : TTIM_Registers absolute TIM15_BASE;
+  TIM16        : TTIM_Registers absolute TIM16_BASE;
+  TIM17        : TTIM_Registers absolute TIM17_BASE;
+  TIM19        : TTIM_Registers absolute TIM19_BASE;
+  DBGMCU       : TDBGMCU_Registers absolute DBGMCU_BASE;
+  SDADC1       : TSDADC_Registers absolute SDADC1_BASE;
+  SDADC2       : TSDADC_Registers absolute SDADC2_BASE;
+  SDADC3       : TSDADC_Registers absolute SDADC3_BASE;
+  DMA1         : TDMA_Registers absolute DMA1_BASE;
+  DMA1_Channel1 : TDMA_Channel_Registers absolute DMA1_Channel1_BASE;
+  DMA1_Channel2 : TDMA_Channel_Registers absolute DMA1_Channel2_BASE;
+  DMA1_Channel3 : TDMA_Channel_Registers absolute DMA1_Channel3_BASE;
+  DMA1_Channel4 : TDMA_Channel_Registers absolute DMA1_Channel4_BASE;
+  DMA1_Channel5 : TDMA_Channel_Registers absolute DMA1_Channel5_BASE;
+  DMA1_Channel6 : TDMA_Channel_Registers absolute DMA1_Channel6_BASE;
+  DMA1_Channel7 : TDMA_Channel_Registers absolute DMA1_Channel7_BASE;
+  DMA2         : TDMA_Registers absolute DMA2_BASE;
+  DMA2_Channel1 : TDMA_Channel_Registers absolute DMA2_Channel1_BASE;
+  DMA2_Channel2 : TDMA_Channel_Registers absolute DMA2_Channel2_BASE;
+  DMA2_Channel3 : TDMA_Channel_Registers absolute DMA2_Channel3_BASE;
+  DMA2_Channel4 : TDMA_Channel_Registers absolute DMA2_Channel4_BASE;
+  DMA2_Channel5 : TDMA_Channel_Registers absolute DMA2_Channel5_BASE;
+  RCC          : TRCC_Registers absolute RCC_BASE;
+  FLASH        : TFLASH_Registers absolute FLASH_R_BASE;
+  OB           : TOB_Registers absolute OB_BASE;
+  CRC          : TCRC_Registers absolute CRC_BASE;
+  TSC          : TTSC_Registers absolute TSC_BASE;
+  GPIOA        : TGPIO_Registers absolute GPIOA_BASE;
+  GPIOB        : TGPIO_Registers absolute GPIOB_BASE;
+  GPIOC        : TGPIO_Registers absolute GPIOC_BASE;
+  GPIOD        : TGPIO_Registers absolute GPIOD_BASE;
+  GPIOE        : TGPIO_Registers absolute GPIOE_BASE;
+  GPIOF        : TGPIO_Registers absolute GPIOF_BASE;
+  ADC1         : TADC_Registers absolute ADC1_BASE;
+  ADC1_COMMON  : TADC_Common_Registers absolute ADC1_BASE;
+  USB          : TUSB_Registers absolute USB_BASE;
+
+implementation
+
+procedure NonMaskableInt_interrupt; external name 'NonMaskableInt_interrupt';
+procedure HardFault_interrupt; external name 'HardFault_interrupt';
+procedure MemoryManagement_interrupt; external name 'MemoryManagement_interrupt';
+procedure BusFault_interrupt; external name 'BusFault_interrupt';
+procedure UsageFault_interrupt; external name 'UsageFault_interrupt';
+procedure SVCall_interrupt; external name 'SVCall_interrupt';
+procedure DebugMonitor_interrupt; external name 'DebugMonitor_interrupt';
+procedure PendSV_interrupt; external name 'PendSV_interrupt';
+procedure SysTick_interrupt; external name 'SysTick_interrupt';
+procedure WWDG_interrupt; external name 'WWDG_interrupt';
+procedure PVD_interrupt; external name 'PVD_interrupt';
+procedure TAMP_STAMP_interrupt; external name 'TAMP_STAMP_interrupt';
+procedure RTC_WKUP_interrupt; external name 'RTC_WKUP_interrupt';
+procedure FLASH_interrupt; external name 'FLASH_interrupt';
+procedure RCC_interrupt; external name 'RCC_interrupt';
+procedure EXTI0_interrupt; external name 'EXTI0_interrupt';
+procedure EXTI1_interrupt; external name 'EXTI1_interrupt';
+procedure EXTI2_TSC_interrupt; external name 'EXTI2_TSC_interrupt';
+procedure EXTI3_interrupt; external name 'EXTI3_interrupt';
+procedure EXTI4_interrupt; external name 'EXTI4_interrupt';
+procedure DMA1_Channel1_interrupt; external name 'DMA1_Channel1_interrupt';
+procedure DMA1_Channel2_interrupt; external name 'DMA1_Channel2_interrupt';
+procedure DMA1_Channel3_interrupt; external name 'DMA1_Channel3_interrupt';
+procedure DMA1_Channel4_interrupt; external name 'DMA1_Channel4_interrupt';
+procedure DMA1_Channel5_interrupt; external name 'DMA1_Channel5_interrupt';
+procedure DMA1_Channel6_interrupt; external name 'DMA1_Channel6_interrupt';
+procedure DMA1_Channel7_interrupt; external name 'DMA1_Channel7_interrupt';
+procedure ADC1_interrupt; external name 'ADC1_interrupt';
+procedure CAN_TX_interrupt; external name 'CAN_TX_interrupt';
+procedure CAN_RX0_interrupt; external name 'CAN_RX0_interrupt';
+procedure CAN_RX1_interrupt; external name 'CAN_RX1_interrupt';
+procedure CAN_SCE_interrupt; external name 'CAN_SCE_interrupt';
+procedure EXTI9_5_interrupt; external name 'EXTI9_5_interrupt';
+procedure TIM15_interrupt; external name 'TIM15_interrupt';
+procedure TIM16_interrupt; external name 'TIM16_interrupt';
+procedure TIM17_interrupt; external name 'TIM17_interrupt';
+procedure TIM18_DAC2_interrupt; external name 'TIM18_DAC2_interrupt';
+procedure TIM2_interrupt; external name 'TIM2_interrupt';
+procedure TIM3_interrupt; external name 'TIM3_interrupt';
+procedure TIM4_interrupt; external name 'TIM4_interrupt';
+procedure I2C1_EV_interrupt; external name 'I2C1_EV_interrupt';
+procedure I2C1_ER_interrupt; external name 'I2C1_ER_interrupt';
+procedure I2C2_EV_interrupt; external name 'I2C2_EV_interrupt';
+procedure I2C2_ER_interrupt; external name 'I2C2_ER_interrupt';
+procedure SPI1_interrupt; external name 'SPI1_interrupt';
+procedure SPI2_interrupt; external name 'SPI2_interrupt';
+procedure USART1_interrupt; external name 'USART1_interrupt';
+procedure USART2_interrupt; external name 'USART2_interrupt';
+procedure USART3_interrupt; external name 'USART3_interrupt';
+procedure EXTI15_10_interrupt; external name 'EXTI15_10_interrupt';
+procedure RTC_Alarm_interrupt; external name 'RTC_Alarm_interrupt';
+procedure CEC_interrupt; external name 'CEC_interrupt';
+procedure TIM12_interrupt; external name 'TIM12_interrupt';
+procedure TIM13_interrupt; external name 'TIM13_interrupt';
+procedure TIM14_interrupt; external name 'TIM14_interrupt';
+procedure TIM5_interrupt; external name 'TIM5_interrupt';
+procedure SPI3_interrupt; external name 'SPI3_interrupt';
+procedure TIM6_DAC1_interrupt; external name 'TIM6_DAC1_interrupt';
+procedure TIM7_interrupt; external name 'TIM7_interrupt';
+procedure DMA2_Channel1_interrupt; external name 'DMA2_Channel1_interrupt';
+procedure DMA2_Channel2_interrupt; external name 'DMA2_Channel2_interrupt';
+procedure DMA2_Channel3_interrupt; external name 'DMA2_Channel3_interrupt';
+procedure DMA2_Channel4_interrupt; external name 'DMA2_Channel4_interrupt';
+procedure DMA2_Channel5_interrupt; external name 'DMA2_Channel5_interrupt';
+procedure SDADC1_interrupt; external name 'SDADC1_interrupt';
+procedure SDADC2_interrupt; external name 'SDADC2_interrupt';
+procedure SDADC3_interrupt; external name 'SDADC3_interrupt';
+procedure COMP_interrupt; external name 'COMP_interrupt';
+procedure USB_HP_interrupt; external name 'USB_HP_interrupt';
+procedure USB_LP_interrupt; external name 'USB_LP_interrupt';
+procedure USBWakeUp_interrupt; external name 'USBWakeUp_interrupt';
+procedure TIM19_interrupt; external name 'TIM19_interrupt';
+procedure FPU_interrupt; external name 'FPU_interrupt';
+
+{$i cortexm4f_start.inc}
+
+procedure Vectors; assembler; nostackframe;
+label interrupt_vectors;
+asm
+  .section ".init.interrupt_vectors"
+  interrupt_vectors:
+  .long _stack_top
+  .long Startup
+  .long NonMaskableInt_interrupt
+  .long HardFault_interrupt
+  .long MemoryManagement_interrupt
+  .long BusFault_interrupt
+  .long UsageFault_interrupt
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long SVCall_interrupt
+  .long DebugMonitor_interrupt
+  .long 0
+  .long PendSV_interrupt
+  .long SysTick_interrupt
+  .long WWDG_interrupt
+  .long PVD_interrupt
+  .long TAMP_STAMP_interrupt
+  .long RTC_WKUP_interrupt
+  .long FLASH_interrupt
+  .long RCC_interrupt
+  .long EXTI0_interrupt
+  .long EXTI1_interrupt
+  .long EXTI2_TSC_interrupt
+  .long EXTI3_interrupt
+  .long EXTI4_interrupt
+  .long DMA1_Channel1_interrupt
+  .long DMA1_Channel2_interrupt
+  .long DMA1_Channel3_interrupt
+  .long DMA1_Channel4_interrupt
+  .long DMA1_Channel5_interrupt
+  .long DMA1_Channel6_interrupt
+  .long DMA1_Channel7_interrupt
+  .long ADC1_interrupt
+  .long CAN_TX_interrupt
+  .long CAN_RX0_interrupt
+  .long CAN_RX1_interrupt
+  .long CAN_SCE_interrupt
+  .long EXTI9_5_interrupt
+  .long TIM15_interrupt
+  .long TIM16_interrupt
+  .long TIM17_interrupt
+  .long TIM18_DAC2_interrupt
+  .long TIM2_interrupt
+  .long TIM3_interrupt
+  .long TIM4_interrupt
+  .long I2C1_EV_interrupt
+  .long I2C1_ER_interrupt
+  .long I2C2_EV_interrupt
+  .long I2C2_ER_interrupt
+  .long SPI1_interrupt
+  .long SPI2_interrupt
+  .long USART1_interrupt
+  .long USART2_interrupt
+  .long USART3_interrupt
+  .long EXTI15_10_interrupt
+  .long RTC_Alarm_interrupt
+  .long CEC_interrupt
+  .long TIM12_interrupt
+  .long TIM13_interrupt
+  .long TIM14_interrupt
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long TIM5_interrupt
+  .long SPI3_interrupt
+  .long 0
+  .long 0
+  .long TIM6_DAC1_interrupt
+  .long TIM7_interrupt
+  .long DMA2_Channel1_interrupt
+  .long DMA2_Channel2_interrupt
+  .long DMA2_Channel3_interrupt
+  .long DMA2_Channel4_interrupt
+  .long DMA2_Channel5_interrupt
+  .long SDADC1_interrupt
+  .long SDADC2_interrupt
+  .long SDADC3_interrupt
+  .long COMP_interrupt
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long USB_HP_interrupt
+  .long USB_LP_interrupt
+  .long USBWakeUp_interrupt
+  .long 0
+  .long TIM19_interrupt
+  .long 0
+  .long 0
+  .long FPU_interrupt
+  .weak NonMaskableInt_interrupt
+  .weak HardFault_interrupt
+  .weak MemoryManagement_interrupt
+  .weak BusFault_interrupt
+  .weak UsageFault_interrupt
+  .weak SVCall_interrupt
+  .weak DebugMonitor_interrupt
+  .weak PendSV_interrupt
+  .weak SysTick_interrupt
+  .weak WWDG_interrupt
+  .weak PVD_interrupt
+  .weak TAMP_STAMP_interrupt
+  .weak RTC_WKUP_interrupt
+  .weak FLASH_interrupt
+  .weak RCC_interrupt
+  .weak EXTI0_interrupt
+  .weak EXTI1_interrupt
+  .weak EXTI2_TSC_interrupt
+  .weak EXTI3_interrupt
+  .weak EXTI4_interrupt
+  .weak DMA1_Channel1_interrupt
+  .weak DMA1_Channel2_interrupt
+  .weak DMA1_Channel3_interrupt
+  .weak DMA1_Channel4_interrupt
+  .weak DMA1_Channel5_interrupt
+  .weak DMA1_Channel6_interrupt
+  .weak DMA1_Channel7_interrupt
+  .weak ADC1_interrupt
+  .weak CAN_TX_interrupt
+  .weak CAN_RX0_interrupt
+  .weak CAN_RX1_interrupt
+  .weak CAN_SCE_interrupt
+  .weak EXTI9_5_interrupt
+  .weak TIM15_interrupt
+  .weak TIM16_interrupt
+  .weak TIM17_interrupt
+  .weak TIM18_DAC2_interrupt
+  .weak TIM2_interrupt
+  .weak TIM3_interrupt
+  .weak TIM4_interrupt
+  .weak I2C1_EV_interrupt
+  .weak I2C1_ER_interrupt
+  .weak I2C2_EV_interrupt
+  .weak I2C2_ER_interrupt
+  .weak SPI1_interrupt
+  .weak SPI2_interrupt
+  .weak USART1_interrupt
+  .weak USART2_interrupt
+  .weak USART3_interrupt
+  .weak EXTI15_10_interrupt
+  .weak RTC_Alarm_interrupt
+  .weak CEC_interrupt
+  .weak TIM12_interrupt
+  .weak TIM13_interrupt
+  .weak TIM14_interrupt
+  .weak TIM5_interrupt
+  .weak SPI3_interrupt
+  .weak TIM6_DAC1_interrupt
+  .weak TIM7_interrupt
+  .weak DMA2_Channel1_interrupt
+  .weak DMA2_Channel2_interrupt
+  .weak DMA2_Channel3_interrupt
+  .weak DMA2_Channel4_interrupt
+  .weak DMA2_Channel5_interrupt
+  .weak SDADC1_interrupt
+  .weak SDADC2_interrupt
+  .weak SDADC3_interrupt
+  .weak COMP_interrupt
+  .weak USB_HP_interrupt
+  .weak USB_LP_interrupt
+  .weak USBWakeUp_interrupt
+  .weak TIM19_interrupt
+  .weak FPU_interrupt
+  .set NonMaskableInt_interrupt, HaltProc
+  .set HardFault_interrupt, HaltProc
+  .set MemoryManagement_interrupt, HaltProc
+  .set BusFault_interrupt, HaltProc
+  .set UsageFault_interrupt, HaltProc
+  .set SVCall_interrupt, HaltProc
+  .set DebugMonitor_interrupt, HaltProc
+  .set PendSV_interrupt, HaltProc
+  .set SysTick_interrupt, HaltProc
+  .set WWDG_interrupt, HaltProc
+  .set PVD_interrupt, HaltProc
+  .set TAMP_STAMP_interrupt, HaltProc
+  .set RTC_WKUP_interrupt, HaltProc
+  .set FLASH_interrupt, HaltProc
+  .set RCC_interrupt, HaltProc
+  .set EXTI0_interrupt, HaltProc
+  .set EXTI1_interrupt, HaltProc
+  .set EXTI2_TSC_interrupt, HaltProc
+  .set EXTI3_interrupt, HaltProc
+  .set EXTI4_interrupt, HaltProc
+  .set DMA1_Channel1_interrupt, HaltProc
+  .set DMA1_Channel2_interrupt, HaltProc
+  .set DMA1_Channel3_interrupt, HaltProc
+  .set DMA1_Channel4_interrupt, HaltProc
+  .set DMA1_Channel5_interrupt, HaltProc
+  .set DMA1_Channel6_interrupt, HaltProc
+  .set DMA1_Channel7_interrupt, HaltProc
+  .set ADC1_interrupt, HaltProc
+  .set CAN_TX_interrupt, HaltProc
+  .set CAN_RX0_interrupt, HaltProc
+  .set CAN_RX1_interrupt, HaltProc
+  .set CAN_SCE_interrupt, HaltProc
+  .set EXTI9_5_interrupt, HaltProc
+  .set TIM15_interrupt, HaltProc
+  .set TIM16_interrupt, HaltProc
+  .set TIM17_interrupt, HaltProc
+  .set TIM18_DAC2_interrupt, HaltProc
+  .set TIM2_interrupt, HaltProc
+  .set TIM3_interrupt, HaltProc
+  .set TIM4_interrupt, HaltProc
+  .set I2C1_EV_interrupt, HaltProc
+  .set I2C1_ER_interrupt, HaltProc
+  .set I2C2_EV_interrupt, HaltProc
+  .set I2C2_ER_interrupt, HaltProc
+  .set SPI1_interrupt, HaltProc
+  .set SPI2_interrupt, HaltProc
+  .set USART1_interrupt, HaltProc
+  .set USART2_interrupt, HaltProc
+  .set USART3_interrupt, HaltProc
+  .set EXTI15_10_interrupt, HaltProc
+  .set RTC_Alarm_interrupt, HaltProc
+  .set CEC_interrupt, HaltProc
+  .set TIM12_interrupt, HaltProc
+  .set TIM13_interrupt, HaltProc
+  .set TIM14_interrupt, HaltProc
+  .set TIM5_interrupt, HaltProc
+  .set SPI3_interrupt, HaltProc
+  .set TIM6_DAC1_interrupt, HaltProc
+  .set TIM7_interrupt, HaltProc
+  .set DMA2_Channel1_interrupt, HaltProc
+  .set DMA2_Channel2_interrupt, HaltProc
+  .set DMA2_Channel3_interrupt, HaltProc
+  .set DMA2_Channel4_interrupt, HaltProc
+  .set DMA2_Channel5_interrupt, HaltProc
+  .set SDADC1_interrupt, HaltProc
+  .set SDADC2_interrupt, HaltProc
+  .set SDADC3_interrupt, HaltProc
+  .set COMP_interrupt, HaltProc
+  .set USB_HP_interrupt, HaltProc
+  .set USB_LP_interrupt, HaltProc
+  .set USBWakeUp_interrupt, HaltProc
+  .set TIM19_interrupt, HaltProc
+  .set FPU_interrupt, HaltProc
+  .text
+end;
+end.
diff -Naur fpc-save/rtl/embedded/arm/stm32f378xx.pp fpc/rtl/embedded/arm/stm32f378xx.pp
--- fpc-save/rtl/embedded/arm/stm32f378xx.pp	1970-01-01 01:00:00.000000000 +0100
+++ fpc/rtl/embedded/arm/stm32f378xx.pp	2018-03-02 17:07:49.000000000 +0100
@@ -0,0 +1,978 @@
+unit stm32f378xx;
+interface
+{$PACKRECORDS C}
+{$GOTO ON}
+// *
+// ******************************************************************************
+// * @file    stm32f378xx.h
+// * @author  MCD Application Team
+//   CMSIS STM32F378xx Devices Peripheral Access Layer Header File.
+// *
+// *          This file contains:
+// *           - Data structures and the address mapping for all peripherals
+// *           - Peripheral's registers declarations and bits definition
+// *           - Macros to access peripheral’s registers hardware
+// *
+// ******************************************************************************
+// * @attention
+// *
+// * <h2><center>&copy; COPYRIGHT(c) 2016 STMicroelectronics</center></h2>
+// *
+// * Redistribution and use in source and binary forms, with or without modification,
+// * are permitted provided that the following conditions are met:
+// *   1. Redistributions of source code must retain the above copyright notice,
+// *      this list of conditions and the following disclaimer.
+// *   2. Redistributions in binary form must reproduce the above copyright notice,
+// *      this list of conditions and the following disclaimer in the documentation
+// *      and/or other materials provided with the distribution.
+// *   3. Neither the name of STMicroelectronics nor the names of its contributors
+// *      may be used to endorse or promote products derived from this software
+// *      without specific prior written permission.
+// *
+// * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
+// * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
+// * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+// * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE
+// * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
+// * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
+// * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER
+// * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+// * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
+// * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
+// *
+// ******************************************************************************
+// Configuration of the Cortex-M4 Processor and Core Peripherals
+// STM32F378xx devices Interrupt Number Definition, according to the selected device
+// *        in @ref Library_configuration_section
+
+type
+  TIRQn_Enum   = (
+    NonMaskableInt_IRQn = -14,        // 2 Non Maskable Interrupt
+    HardFault_IRQn = -13,             // 3 Cortex-M4 Hard Fault Interrupt
+    MemoryManagement_IRQn = -12,      // 4 Cortex-M4 Memory Management Interrupt
+    BusFault_IRQn = -11,              // 5 Cortex-M4 Bus Fault Interrupt
+    UsageFault_IRQn = -10,            // 6 Cortex-M4 Usage Fault Interrupt
+    SVCall_IRQn = -5,                 // 11 Cortex-M4 SV Call Interrupt
+    DebugMonitor_IRQn = -4,           // 12 Cortex-M4 Debug Monitor Interrupt
+    PendSV_IRQn = -2,                 // 14 Cortex-M4 Pend SV Interrupt
+    SysTick_IRQn = -1,                // 15 Cortex-M4 System Tick Interrupt
+    WWDG_IRQn  = 0,                   // Window WatchDog Interrupt
+    TAMP_STAMP_IRQn = 2,              // Tamper and TimeStamp interrupts through the EXTI line 19
+    RTC_WKUP_IRQn = 3,                // RTC Wakeup interrupt through the EXTI line 20
+    FLASH_IRQn = 4,                   // FLASH global Interrupt
+    RCC_IRQn   = 5,                   // RCC global Interrupt
+    EXTI0_IRQn = 6,                   // EXTI Line0 Interrupt
+    EXTI1_IRQn = 7,                   // EXTI Line1 Interrupt
+    EXTI2_TSC_IRQn = 8,               // EXTI Line2 Interrupt and Touch Sense Controller Interrupt
+    EXTI3_IRQn = 9,                   // EXTI Line3 Interrupt
+    EXTI4_IRQn = 10,                  // EXTI Line4 Interrupt
+    DMA1_Channel1_IRQn = 11,          // DMA1 Channel 1 Interrupt
+    DMA1_Channel2_IRQn = 12,          // DMA1 Channel 2 Interrupt
+    DMA1_Channel3_IRQn = 13,          // DMA1 Channel 3 Interrupt
+    DMA1_Channel4_IRQn = 14,          // DMA1 Channel 4 Interrupt
+    DMA1_Channel5_IRQn = 15,          // DMA1 Channel 5 Interrupt
+    DMA1_Channel6_IRQn = 16,          // DMA1 Channel 6 Interrupt
+    DMA1_Channel7_IRQn = 17,          // DMA1 Channel 7 Interrupt
+    ADC1_IRQn  = 18,                  // ADC1 Interrupts
+    CAN_TX_IRQn = 19,                 // CAN TX Interrupt
+    CAN_RX0_IRQn = 20,                // CAN RX0 Interrupt
+    CAN_RX1_IRQn = 21,                // CAN RX1 Interrupt
+    CAN_SCE_IRQn = 22,                // CAN SCE Interrupt
+    EXTI9_5_IRQn = 23,                // External Line[9:5] Interrupts
+    TIM15_IRQn = 24,                  // TIM15 global Interrupt
+    TIM16_IRQn = 25,                  // TIM16 global Interrupt
+    TIM17_IRQn = 26,                  // TIM17 global Interrupt
+    TIM18_DAC2_IRQn = 27,             // TIM18 global Interrupt and DAC2 underrun Interrupt
+    TIM2_IRQn  = 28,                  // TIM2 global Interrupt
+    TIM3_IRQn  = 29,                  // TIM3 global Interrupt
+    TIM4_IRQn  = 30,                  // TIM4 global Interrupt
+    I2C1_EV_IRQn = 31,                // I2C1 Event Interrupt & EXTI Line23 Interrupt (I2C1 wakeup)
+    I2C1_ER_IRQn = 32,                // I2C1 Error Interrupt
+    I2C2_EV_IRQn = 33,                // I2C2 Event Interrupt & EXTI Line24 Interrupt (I2C2 wakeup)
+    I2C2_ER_IRQn = 34,                // I2C2 Error Interrupt
+    SPI1_IRQn  = 35,                  // SPI1 global Interrupt
+    SPI2_IRQn  = 36,                  // SPI2 global Interrupt
+    USART1_IRQn = 37,                 // USART1 global Interrupt & EXTI Line25 Interrupt (USART1 wakeup)
+    USART2_IRQn = 38,                 // USART2 global Interrupt & EXTI Line26 Interrupt (USART2 wakeup)
+    USART3_IRQn = 39,                 // USART3 global Interrupt & EXTI Line28 Interrupt (USART3 wakeup)
+    EXTI15_10_IRQn = 40,              // External Line[15:10] Interrupts
+    RTC_Alarm_IRQn = 41,              // RTC Alarm (A and B) through EXTI Line 17 Interrupt
+    CEC_IRQn   = 42,                  // CEC Interrupt & EXTI Line27 Interrupt (CEC wakeup)
+    TIM12_IRQn = 43,                  // TIM12 global interrupt
+    TIM13_IRQn = 44,                  // TIM13 global interrupt
+    TIM14_IRQn = 45,                  // TIM14 global interrupt
+    TIM5_IRQn  = 50,                  // TIM5 global Interrupt
+    SPI3_IRQn  = 51,                  // SPI3 global Interrupt
+    TIM6_DAC1_IRQn = 54,              // TIM6 global and DAC1 underrun error Interrupts
+    TIM7_IRQn  = 55,                  // TIM7 global Interrupt
+    DMA2_Channel1_IRQn = 56,          // DMA2 Channel 1 global Interrupt
+    DMA2_Channel2_IRQn = 57,          // DMA2 Channel 2 global Interrupt
+    DMA2_Channel3_IRQn = 58,          // DMA2 Channel 3 global Interrupt
+    DMA2_Channel4_IRQn = 59,          // DMA2 Channel 4 global Interrupt
+    DMA2_Channel5_IRQn = 60,          // DMA2 Channel 5 global Interrupt
+    SDADC1_IRQn = 61,                 // ADC Sigma Delta 1 global Interrupt
+    SDADC2_IRQn = 62,                 // ADC Sigma Delta 2 global Interrupt
+    SDADC3_IRQn = 63,                 // ADC Sigma Delta 1 global Interrupt
+    COMP_IRQn  = 64,                  // COMP1 and COMP2 global Interrupt
+    TIM19_IRQn = 78,                  // TIM19 global Interrupt
+    FPU_IRQn   = 81                   // Floating point Interrupt
+  );
+
+  TADC_Registers = record
+    SR         : longword;            // ADC status register
+    CR1        : longword;            // ADC control register 1
+    CR2        : longword;            // ADC control register 2
+    SMPR1      : longword;            // ADC sample time register 1
+    SMPR2      : longword;            // ADC sample time register 2
+    JOFR1      : longword;            // ADC injected channel data offset register 1
+    JOFR2      : longword;            // ADC injected channel data offset register 2
+    JOFR3      : longword;            // ADC injected channel data offset register 3
+    JOFR4      : longword;            // ADC injected channel data offset register 4
+    HTR        : longword;            // ADC watchdog higher threshold register
+    LTR        : longword;            // ADC watchdog lower threshold register
+    SQR1       : longword;            // ADC regular sequence register 1
+    SQR2       : longword;            // ADC regular sequence register 2
+    SQR3       : longword;            // ADC regular sequence register 3
+    JSQR       : longword;            // ADC injected sequence register
+    JDR1       : longword;            // ADC injected data register 1
+    JDR2       : longword;            // ADC injected data register 2
+    JDR3       : longword;            // ADC injected data register 3
+    JDR4       : longword;            // ADC injected data register 4
+    DR         : longword;            // ADC regular data register
+  end;
+
+  TADC_COMMON_Registers = record
+    SR         : longword;            // ADC status register,    used for ADC multimode (bits common to several ADC instances).
+    CR1        : longword;            // ADC control register 1, used for ADC multimode (bits common to several ADC instances).
+    CR2        : longword;            // ADC control register 2, used for ADC multimode (bits common to several ADC instances).
+    RESERVED   : array[0..15] of longword;
+    DR         : longword;            // ADC data register,      used for ADC multimode (bits common to several ADC instances).
+  end;
+
+  TCAN_TXMAILBOX_Registers = record
+    TIR        : longword;            // CAN TX mailbox identifier register
+    TDTR       : longword;            // CAN mailbox data length control and time stamp register
+    TDLR       : longword;            // CAN mailbox data low register
+    TDHR       : longword;            // CAN mailbox data high register
+  end;
+
+  TCAN_FIFOMAILBOX_Registers = record
+    RIR        : longword;            // CAN receive FIFO mailbox identifier register
+    RDTR       : longword;            // CAN receive FIFO mailbox data length control and time stamp register
+    RDLR       : longword;            // CAN receive FIFO mailbox data low register
+    RDHR       : longword;            // CAN receive FIFO mailbox data high register
+  end;
+
+  TCAN_FILTERREGISTER_Registers = record
+    FR1        : longword;            // CAN Filter bank register 1
+    FR2        : longword;            // CAN Filter bank register 1
+  end;
+
+  TCAN_Registers = record
+    MCR        : longword;            // CAN master control register
+    MSR        : longword;            // CAN master status register
+    TSR        : longword;            // CAN transmit status register
+    RF0R       : longword;            // CAN receive FIFO 0 register
+    RF1R       : longword;            // CAN receive FIFO 1 register
+    IER        : longword;            // CAN interrupt enable register
+    ESR        : longword;            // CAN error status register
+    BTR        : longword;            // CAN bit timing register
+    RESERVED0  : array[0..87] of longword; // Reserved, 0x020 - 0x17F
+    sTxMailBox : array[0..2] of TCAN_TxMailBox_Registers; // CAN Tx MailBox
+    sFIFOMailBox : array[0..1] of TCAN_FIFOMailBox_Registers; // CAN FIFO MailBox
+    RESERVED1  : array[0..11] of longword; // Reserved, 0x1D0 - 0x1FF
+    FMR        : longword;            // CAN filter master register
+    FM1R       : longword;            // CAN filter mode register
+    RESERVED2  : longword;            // Reserved, 0x208
+    FS1R       : longword;            // CAN filter scale register
+    RESERVED3  : longword;            // Reserved, 0x210
+    FFA1R      : longword;            // CAN filter FIFO assignment register
+    RESERVED4  : longword;            // Reserved, 0x218
+    FA1R       : longword;            // CAN filter activation register
+    RESERVED5  : array[0..7] of longword; // Reserved, 0x220-0x23F
+    sFilterRegister : array[0..27] of TCAN_FilterRegister_Registers; // CAN Filter Register
+  end;
+
+  TCEC_Registers = record
+    CR         : longword;            // CEC control register
+    CFGR       : longword;            // CEC configuration register
+    TXDR       : longword;            // CEC Tx data register
+    RXDR       : longword;            // CEC Rx Data Register
+    ISR        : longword;            // CEC Interrupt and Status Register
+    IER        : longword;            // CEC interrupt enable register
+  end;
+
+  TCOMP_Registers = record
+    CSR        : longword;            // COMP control and status register
+  end;
+
+  TCOMP_COMMON_Registers = record
+    CSR        : longword;            // COMP control and status register, used for bits common to several COMP instances
+  end;
+
+  TCOMP1_2_Registers = record
+    CSR        : longword;            // Comparator 1 & 2 control Status register
+  end;
+
+  TCRC_Registers = record
+    DR         : longword;            // CRC Data register
+    IDR        : byte;                // CRC Independent data register
+    RESERVED0  : byte;                // Reserved,                                                    0x05
+    RESERVED1  : word;                // Reserved,                                                    0x06
+    CR         : longword;            // CRC Control register
+    RESERVED2  : longword;            // Reserved,                                                    0x0C
+    INIT       : longword;            // Initial CRC value register
+    POL        : longword;            // CRC polynomial register
+  end;
+
+  TDAC_Registers = record
+    CR         : longword;            // DAC control register
+    SWTRIGR    : longword;            // DAC software trigger register
+    DHR12R1    : longword;            // DAC channel1 12-bit right-aligned data holding register
+    DHR12L1    : longword;            // DAC channel1 12-bit left aligned data holding register
+    DHR8R1     : longword;            // DAC channel1 8-bit right aligned data holding register
+    DHR12R2    : longword;            // DAC channel2 12-bit right aligned data holding register
+    DHR12L2    : longword;            // DAC channel2 12-bit left aligned data holding register
+    DHR8R2     : longword;            // DAC channel2 8-bit right-aligned data holding register
+    DHR12RD    : longword;            // Dual DAC 12-bit right-aligned data holding register
+    DHR12LD    : longword;            // DUAL DAC 12-bit left aligned data holding register
+    DHR8RD     : longword;            // DUAL DAC 8-bit right aligned data holding register
+    DOR1       : longword;            // DAC channel1 data output register
+    DOR2       : longword;            // DAC channel2 data output register
+    SR         : longword;            // DAC status register
+  end;
+
+  TDBGMCU_Registers = record
+    IDCODE     : longword;            // MCU device ID code
+    CR         : longword;            // Debug MCU configuration register
+    APB1FZ     : longword;            // Debug MCU APB1 freeze register
+    APB2FZ     : longword;            // Debug MCU APB2 freeze register
+  end;
+
+  TDMA_CHANNEL_Registers = record
+    CCR        : longword;            // DMA channel x configuration register
+    CNDTR      : longword;            // DMA channel x number of data register
+    CPAR       : longword;            // DMA channel x peripheral address register
+    CMAR       : longword;            // DMA channel x memory address register
+  end;
+
+  TDMA_Registers = record
+    ISR        : longword;            // DMA interrupt status register
+    IFCR       : longword;            // DMA interrupt flag clear register
+  end;
+
+  TEXTI_Registers = record
+    IMR        : longword;            // XTI Interrupt mask register
+    EMR        : longword;            // XTI Event mask register
+    RTSR       : longword;            // XTI Rising trigger selection register
+    FTSR       : longword;            // XTI Falling trigger selection register
+    SWIER      : longword;            // XTI Software interrupt event register
+    PR         : longword;            // XTI Pending register
+  end;
+
+  TFLASH_Registers = record
+    ACR        : longword;            // FLASH access control register
+    KEYR       : longword;            // FLASH key register
+    OPTKEYR    : longword;            // FLASH option key register
+    SR         : longword;            // FLASH status register
+    CR         : longword;            // FLASH control register
+    AR         : longword;            // FLASH address register
+    RESERVED   : longword;            // Reserved, 0x18
+    OBR        : longword;            // FLASH Option byte register
+    WRPR       : longword;            // FLASH Write register
+  end;
+
+  TOB_Registers = record
+    RDP        : word;                // LASH option byte Read protection
+    USER       : word;                // LASH option byte user options
+    RESERVED0  : word;                // Reserved,                                                     0x04
+    RESERVED1  : word;                // Reserved,                                                     0x06
+    WRP0       : word;                // LASH option byte write protection 0
+    WRP1       : word;                // LASH option byte write protection 1
+    WRP2       : word;                // LASH option byte write protection 2
+    WRP3       : word;                // LASH option byte write protection 3
+  end;
+
+  TGPIO_Registers = record
+    MODER      : longword;            // GPIO port mode register
+    OTYPER     : longword;            // GPIO port output type register
+    OSPEEDR    : longword;            // GPIO port output speed register
+    PUPDR      : longword;            // GPIO port pull-up/pull-down register
+    IDR        : longword;            // GPIO port input data register
+    ODR        : longword;            // GPIO port output data register
+    BSRR       : longword;            // GPIO port bit set/reset register
+    LCKR       : longword;            // GPIO port configuration lock register
+    AFR        : array[0..1] of longword; // GPIO alternate function registers
+    BRR        : longword;            // GPIO bit reset register
+  end;
+
+  TSYSCFG_Registers = record
+    CFGR1      : longword;            // SYSCFG configuration register 1
+    RESERVED   : longword;            // Reserved,                                                             0x04
+    EXTICR     : array[0..3] of longword; // SYSCFG external interrupt configuration registers
+    CFGR2      : longword;            // SYSCFG configuration register 2
+  end;
+
+  TI2C_Registers = record
+    CR1        : longword;            // I2C Control register 1
+    CR2        : longword;            // I2C Control register 2
+    OAR1       : longword;            // I2C Own address 1 register
+    OAR2       : longword;            // I2C Own address 2 register
+    TIMINGR    : longword;            // I2C Timing register
+    TIMEOUTR   : longword;            // I2C Timeout register
+    ISR        : longword;            // I2C Interrupt and status register
+    ICR        : longword;            // I2C Interrupt clear register
+    PECR       : longword;            // I2C PEC register
+    RXDR       : longword;            // I2C Receive data register
+    TXDR       : longword;            // I2C Transmit data register
+  end;
+
+  TIWDG_Registers = record
+    KR         : longword;            // IWDG Key register
+    PR         : longword;            // IWDG Prescaler register
+    RLR        : longword;            // IWDG Reload register
+    SR         : longword;            // IWDG Status register
+    WINR       : longword;            // IWDG Window register
+  end;
+
+  TPWR_Registers = record
+    CR         : longword;            // PWR power control register
+    CSR        : longword;            // PWR power control/status register
+  end;
+
+  TRCC_Registers = record
+    CR         : longword;            // RCC clock control register
+    CFGR       : longword;            // RCC clock configuration register
+    CIR        : longword;            // RCC clock interrupt register
+    APB2RSTR   : longword;            // RCC APB2 peripheral reset register
+    APB1RSTR   : longword;            // RCC APB1 peripheral reset register
+    AHBENR     : longword;            // RCC AHB peripheral clock register
+    APB2ENR    : longword;            // RCC APB2 peripheral clock enable register
+    APB1ENR    : longword;            // RCC APB1 peripheral clock enable register
+    BDCR       : longword;            // RCC Backup domain control register
+    CSR        : longword;            // RCC clock control & status register
+    AHBRSTR    : longword;            // RCC AHB peripheral reset register
+    CFGR2      : longword;            // RCC clock configuration register 2
+    CFGR3      : longword;            // RCC clock configuration register 3
+  end;
+
+  TRTC_Registers = record
+    TR         : longword;            // RTC time register
+    DR         : longword;            // RTC date register
+    CR         : longword;            // RTC control register
+    ISR        : longword;            // RTC initialization and status register
+    PRER       : longword;            // RTC prescaler register
+    WUTR       : longword;            // RTC wakeup timer register
+    RESERVED0  : longword;            // Reserved, 0x18
+    ALRMAR     : longword;            // RTC alarm A register
+    ALRMBR     : longword;            // RTC alarm B register
+    WPR        : longword;            // RTC write protection register
+    SSR        : longword;            // RTC sub second register
+    SHIFTR     : longword;            // RTC shift control register
+    TSTR       : longword;            // RTC time stamp time register
+    TSDR       : longword;            // RTC time stamp date register
+    TSSSR      : longword;            // RTC time-stamp sub second register
+    CALR       : longword;            // RTC calibration register
+    TAFCR      : longword;            // RTC tamper and alternate function configuration register
+    ALRMASSR   : longword;            // RTC alarm A sub second register
+    ALRMBSSR   : longword;            // RTC alarm B sub second register
+    RESERVED7  : longword;            // Reserved, 0x4C
+    BKP0R      : longword;            // RTC backup register 0
+    BKP1R      : longword;            // RTC backup register 1
+    BKP2R      : longword;            // RTC backup register 2
+    BKP3R      : longword;            // RTC backup register 3
+    BKP4R      : longword;            // RTC backup register 4
+    BKP5R      : longword;            // RTC backup register 5
+    BKP6R      : longword;            // RTC backup register 6
+    BKP7R      : longword;            // RTC backup register 7
+    BKP8R      : longword;            // RTC backup register 8
+    BKP9R      : longword;            // RTC backup register 9
+    BKP10R     : longword;            // RTC backup register 10
+    BKP11R     : longword;            // RTC backup register 11
+    BKP12R     : longword;            // RTC backup register 12
+    BKP13R     : longword;            // RTC backup register 13
+    BKP14R     : longword;            // RTC backup register 14
+    BKP15R     : longword;            // RTC backup register 15
+    BKP16R     : longword;            // RTC backup register 16
+    BKP17R     : longword;            // RTC backup register 17
+    BKP18R     : longword;            // RTC backup register 18
+    BKP19R     : longword;            // RTC backup register 19
+    BKP20R     : longword;            // RTC backup register 20
+    BKP21R     : longword;            // RTC backup register 21
+    BKP22R     : longword;            // RTC backup register 22
+    BKP23R     : longword;            // RTC backup register 23
+    BKP24R     : longword;            // RTC backup register 24
+    BKP25R     : longword;            // RTC backup register 25
+    BKP26R     : longword;            // RTC backup register 26
+    BKP27R     : longword;            // RTC backup register 27
+    BKP28R     : longword;            // RTC backup register 28
+    BKP29R     : longword;            // RTC backup register 29
+    BKP30R     : longword;            // RTC backup register 30
+    BKP31R     : longword;            // RTC backup register 31
+  end;
+
+  TSDADC_Registers = record
+    CR1        : longword;            // SDADC control register 1
+    CR2        : longword;            // SDADC control register 2
+    ISR        : longword;            // SDADC interrupt and status register
+    CLRISR     : longword;            // SDADC clear interrupt and status register
+    RESERVED0  : longword;            // Reserved, 0x10
+    JCHGR      : longword;            // SDADC injected channel group selection register
+    RESERVED1  : longword;            // Reserved, 0x18
+    RESERVED2  : longword;            // Reserved, 0x1C
+    CONF0R     : longword;            // SDADC configuration 0 register
+    CONF1R     : longword;            // SDADC configuration 1 register
+    CONF2R     : longword;            // SDADC configuration 2 register
+    RESERVED3  : array[0..4] of longword; // Reserved, 0x2C - 0x3C
+    CONFCHR1   : longword;            // SDADC channel configuration register 1
+    CONFCHR2   : longword;            // SDADC channel configuration register 2
+    RESERVED4  : array[0..5] of longword; // Reserved, 0x48 - 0x5C
+    JDATAR     : longword;            // SDADC data register for injected group
+    RDATAR     : longword;            // SDADC data register for the regular channel
+    RESERVED5  : array[0..1] of longword; // Reserved, 0x68 - 0x6C
+    JDATA12R   : longword;            // SDADC1 and SDADC2 injected data register
+    RDATA12R   : longword;            // SDADC1 and SDADC2 regular data register
+    JDATA13R   : longword;            // SDADC1 and SDADC3 injected data register
+    RDATA13R   : longword;            // SDADC1 and SDADC3 regular data register
+  end;
+
+  TSPI_Registers = record
+    CR1        : longword;            // SPI Control register 1
+    CR2        : longword;            // SPI Control register 2
+    SR         : longword;            // SPI Status register
+    DR         : longword;            // SPI data register
+    CRCPR      : longword;            // SPI CRC polynomial register
+    RXCRCR     : longword;            // SPI Rx CRC register
+    TXCRCR     : longword;            // SPI Tx CRC register
+    I2SCFGR    : longword;            // SPI_I2S configuration register
+    I2SPR      : longword;            // SPI_I2S prescaler register
+  end;
+
+  TTIM_Registers = record
+    CR1        : longword;            // TIM control register 1
+    CR2        : longword;            // TIM control register 2
+    SMCR       : longword;            // TIM slave mode control register
+    DIER       : longword;            // TIM DMA/interrupt enable register
+    SR         : longword;            // TIM status register
+    EGR        : longword;            // TIM event generation register
+    CCMR1      : longword;            // TIM capture/compare mode register 1
+    CCMR2      : longword;            // TIM capture/compare mode register 2
+    CCER       : longword;            // TIM capture/compare enable register
+    CNT        : longword;            // TIM counter register
+    PSC        : longword;            // TIM prescaler
+    ARR        : longword;            // TIM auto-reload register
+    RCR        : longword;            // TIM repetition counter register
+    CCR1       : longword;            // TIM capture/compare register 1
+    CCR2       : longword;            // TIM capture/compare register 2
+    CCR3       : longword;            // TIM capture/compare register 3
+    CCR4       : longword;            // TIM capture/compare register 4
+    BDTR       : longword;            // TIM break and dead-time register
+    DCR        : longword;            // TIM DMA control register
+    DMAR       : longword;            // TIM DMA address for full transfer
+    &OR        : longword;            // TIM option register
+  end;
+
+  TTSC_Registers = record
+    CR         : longword;            // TSC control register
+    IER        : longword;            // TSC interrupt enable register
+    ICR        : longword;            // TSC interrupt clear register
+    ISR        : longword;            // TSC interrupt status register
+    IOHCR      : longword;            // TSC I/O hysteresis control register
+    RESERVED1  : longword;            // Reserved
+    IOASCR     : longword;            // TSC I/O analog switch control register
+    RESERVED2  : longword;            // Reserved
+    IOSCR      : longword;            // TSC I/O sampling control register
+    RESERVED3  : longword;            // Reserved
+    IOCCR      : longword;            // TSC I/O channel control register
+    RESERVED4  : longword;            // Reserved
+    IOGCSR     : longword;            // TSC I/O group control status register
+    IOGXCR     : array[0..7] of longword; // TSC I/O group x counter register
+  end;
+
+  TUSART_Registers = record
+    CR1        : longword;            // USART Control register 1
+    CR2        : longword;            // USART Control register 2
+    CR3        : longword;            // USART Control register 3
+    BRR        : longword;            // USART Baud rate register
+    GTPR       : longword;            // USART Guard time and prescaler register
+    RTOR       : longword;            // USART Receiver Time Out register
+    RQR        : longword;            // USART Request register
+    ISR        : longword;            // USART Interrupt and status register
+    ICR        : longword;            // USART Interrupt flag Clear register
+    RDR        : word;                // USART Receive Data register
+    RESERVED1  : word;                // Reserved, 0x26
+    TDR        : word;                // USART Transmit Data register
+    RESERVED2  : word;                // Reserved, 0x2A
+  end;
+
+  TWWDG_Registers = record
+    CR         : longword;            // WWDG Control register
+    CFR        : longword;            // WWDG Configuration register
+    SR         : longword;            // WWDG Status register
+  end;
+
+const
+  FLASH_BASE   = $08000000;           // FLASH base address in the alias region
+  SRAM_BASE    = $20000000;           // SRAM base address in the alias region
+  PERIPH_BASE  = $40000000;           // Peripheral base address in the alias region
+  SRAM_BB_BASE = $22000000;           // SRAM base address in the bit-band region
+  PERIPH_BB_BASE = $42000000;         // Peripheral base address in the bit-band region
+  APB1PERIPH_BASE = $40000000;
+  APB2PERIPH_BASE = PERIPH_BASE + $00010000;
+  AHB1PERIPH_BASE = PERIPH_BASE + $00020000;
+  AHB2PERIPH_BASE = PERIPH_BASE + $08000000;
+  TIM2_BASE    = APB1PERIPH_BASE + $00000000;
+  TIM3_BASE    = APB1PERIPH_BASE + $00000400;
+  TIM4_BASE    = APB1PERIPH_BASE + $00000800;
+  TIM5_BASE    = APB1PERIPH_BASE + $00000C00;
+  TIM6_BASE    = APB1PERIPH_BASE + $00001000;
+  TIM7_BASE    = APB1PERIPH_BASE + $00001400;
+  TIM12_BASE   = APB1PERIPH_BASE + $00001800;
+  TIM13_BASE   = APB1PERIPH_BASE + $00001C00;
+  TIM14_BASE   = APB1PERIPH_BASE + $00002000;
+  RTC_BASE     = APB1PERIPH_BASE + $00002800;
+  WWDG_BASE    = APB1PERIPH_BASE + $00002C00;
+  IWDG_BASE    = APB1PERIPH_BASE + $00003000;
+  SPI2_BASE    = APB1PERIPH_BASE + $00003800;
+  SPI3_BASE    = APB1PERIPH_BASE + $00003C00;
+  USART2_BASE  = APB1PERIPH_BASE + $00004400;
+  USART3_BASE  = APB1PERIPH_BASE + $00004800;
+  I2C1_BASE    = APB1PERIPH_BASE + $00005400;
+  I2C2_BASE    = APB1PERIPH_BASE + $00005800;
+  CAN_BASE     = APB1PERIPH_BASE + $00006400;
+  PWR_BASE     = APB1PERIPH_BASE + $00007000;
+  DAC1_BASE    = APB1PERIPH_BASE + $00007400;
+  DAC2_BASE    = APB1PERIPH_BASE + $00009800;
+  DAC_BASE     = APB1PERIPH_BASE + $00007400;
+  CEC_BASE     = APB1PERIPH_BASE + $00007800;
+  TIM18_BASE   = APB1PERIPH_BASE + $00009C00;
+  SYSCFG_BASE  = APB2PERIPH_BASE + $00000000;
+  COMP_BASE    = APB2PERIPH_BASE + $0000001C;
+  EXTI_BASE    = APB2PERIPH_BASE + $00000400;
+  ADC1_BASE    = APB2PERIPH_BASE + $00002400;
+  SPI1_BASE    = APB2PERIPH_BASE + $00003000;
+  USART1_BASE  = APB2PERIPH_BASE + $00003800;
+  TIM15_BASE   = APB2PERIPH_BASE + $00004000;
+  TIM16_BASE   = APB2PERIPH_BASE + $00004400;
+  TIM17_BASE   = APB2PERIPH_BASE + $00004800;
+  TIM19_BASE   = APB2PERIPH_BASE + $00005C00;
+  SDADC1_BASE  = APB2PERIPH_BASE + $00006000;
+  SDADC2_BASE  = APB2PERIPH_BASE + $00006400;
+  SDADC3_BASE  = APB2PERIPH_BASE + $00006800;
+  DMA1_BASE    = AHB1PERIPH_BASE + $00000000;
+  DMA1_Channel1_BASE = AHB1PERIPH_BASE + $00000008;
+  DMA1_Channel2_BASE = AHB1PERIPH_BASE + $0000001C;
+  DMA1_Channel3_BASE = AHB1PERIPH_BASE + $00000030;
+  DMA1_Channel4_BASE = AHB1PERIPH_BASE + $00000044;
+  DMA1_Channel5_BASE = AHB1PERIPH_BASE + $00000058;
+  DMA1_Channel6_BASE = AHB1PERIPH_BASE + $0000006C;
+  DMA1_Channel7_BASE = AHB1PERIPH_BASE + $00000080;
+  DMA2_BASE    = AHB1PERIPH_BASE + $00000400;
+  DMA2_Channel1_BASE = AHB1PERIPH_BASE + $00000408;
+  DMA2_Channel2_BASE = AHB1PERIPH_BASE + $0000041C;
+  DMA2_Channel3_BASE = AHB1PERIPH_BASE + $00000430;
+  DMA2_Channel4_BASE = AHB1PERIPH_BASE + $00000444;
+  DMA2_Channel5_BASE = AHB1PERIPH_BASE + $00000458;
+  RCC_BASE     = AHB1PERIPH_BASE + $00001000;
+  FLASH_R_BASE = AHB1PERIPH_BASE + $00002000; // Flash registers base address
+  OB_BASE      = $1FFFF800;           // Flash Option Bytes base address
+  FLASHSIZE_BASE = $1FFFF7CC;         // FLASH Size register base address
+  UID_BASE     = $1FFFF7AC;           // Unique device ID register base address
+  CRC_BASE     = AHB1PERIPH_BASE + $00003000;
+  TSC_BASE     = AHB1PERIPH_BASE + $00004000;
+  GPIOA_BASE   = AHB2PERIPH_BASE + $00000000;
+  GPIOB_BASE   = AHB2PERIPH_BASE + $00000400;
+  GPIOC_BASE   = AHB2PERIPH_BASE + $00000800;
+  GPIOD_BASE   = AHB2PERIPH_BASE + $00000C00;
+  GPIOE_BASE   = AHB2PERIPH_BASE + $00001000;
+  GPIOF_BASE   = AHB2PERIPH_BASE + $00001400;
+  DBGMCU_BASE  = $E0042000;           // Debug MCU registers base address
+
+var
+  TIM2         : TTIM_Registers absolute TIM2_BASE;
+  TIM3         : TTIM_Registers absolute TIM3_BASE;
+  TIM4         : TTIM_Registers absolute TIM4_BASE;
+  TIM5         : TTIM_Registers absolute TIM5_BASE;
+  TIM6         : TTIM_Registers absolute TIM6_BASE;
+  TIM7         : TTIM_Registers absolute TIM7_BASE;
+  TIM12        : TTIM_Registers absolute TIM12_BASE;
+  TIM13        : TTIM_Registers absolute TIM13_BASE;
+  TIM14        : TTIM_Registers absolute TIM14_BASE;
+  RTC          : TRTC_Registers absolute RTC_BASE;
+  WWDG         : TWWDG_Registers absolute WWDG_BASE;
+  IWDG         : TIWDG_Registers absolute IWDG_BASE;
+  SPI2         : TSPI_Registers absolute SPI2_BASE;
+  SPI3         : TSPI_Registers absolute SPI3_BASE;
+  USART2       : TUSART_Registers absolute USART2_BASE;
+  USART3       : TUSART_Registers absolute USART3_BASE;
+  I2C1         : TI2C_Registers absolute I2C1_BASE;
+  I2C2         : TI2C_Registers absolute I2C2_BASE;
+  CAN          : TCAN_Registers absolute CAN_BASE;
+  PWR          : TPWR_Registers absolute PWR_BASE;
+  DAC          : TDAC_Registers absolute DAC_BASE;
+  DAC1         : TDAC_Registers absolute DAC1_BASE;
+  DAC2         : TDAC_Registers absolute DAC2_BASE;
+  CEC          : TCEC_Registers absolute CEC_BASE;
+  COMP1        : TCOMP_Registers absolute COMP_BASE;
+  COMP2        : TCOMP_Registers absolute $00000002;
+  COMP12_COMMON : TCOMP_Common_Registers absolute COMP_BASE;
+  COMP         : TCOMP1_2_Registers absolute COMP_BASE;
+  TIM18        : TTIM_Registers absolute TIM18_BASE;
+  SYSCFG       : TSYSCFG_Registers absolute SYSCFG_BASE;
+  EXTI         : TEXTI_Registers absolute EXTI_BASE;
+  SPI1         : TSPI_Registers absolute SPI1_BASE;
+  USART1       : TUSART_Registers absolute USART1_BASE;
+  TIM15        : TTIM_Registers absolute TIM15_BASE;
+  TIM16        : TTIM_Registers absolute TIM16_BASE;
+  TIM17        : TTIM_Registers absolute TIM17_BASE;
+  TIM19        : TTIM_Registers absolute TIM19_BASE;
+  DBGMCU       : TDBGMCU_Registers absolute DBGMCU_BASE;
+  SDADC1       : TSDADC_Registers absolute SDADC1_BASE;
+  SDADC2       : TSDADC_Registers absolute SDADC2_BASE;
+  SDADC3       : TSDADC_Registers absolute SDADC3_BASE;
+  DMA1         : TDMA_Registers absolute DMA1_BASE;
+  DMA1_Channel1 : TDMA_Channel_Registers absolute DMA1_Channel1_BASE;
+  DMA1_Channel2 : TDMA_Channel_Registers absolute DMA1_Channel2_BASE;
+  DMA1_Channel3 : TDMA_Channel_Registers absolute DMA1_Channel3_BASE;
+  DMA1_Channel4 : TDMA_Channel_Registers absolute DMA1_Channel4_BASE;
+  DMA1_Channel5 : TDMA_Channel_Registers absolute DMA1_Channel5_BASE;
+  DMA1_Channel6 : TDMA_Channel_Registers absolute DMA1_Channel6_BASE;
+  DMA1_Channel7 : TDMA_Channel_Registers absolute DMA1_Channel7_BASE;
+  DMA2         : TDMA_Registers absolute DMA2_BASE;
+  DMA2_Channel1 : TDMA_Channel_Registers absolute DMA2_Channel1_BASE;
+  DMA2_Channel2 : TDMA_Channel_Registers absolute DMA2_Channel2_BASE;
+  DMA2_Channel3 : TDMA_Channel_Registers absolute DMA2_Channel3_BASE;
+  DMA2_Channel4 : TDMA_Channel_Registers absolute DMA2_Channel4_BASE;
+  DMA2_Channel5 : TDMA_Channel_Registers absolute DMA2_Channel5_BASE;
+  RCC          : TRCC_Registers absolute RCC_BASE;
+  FLASH        : TFLASH_Registers absolute FLASH_R_BASE;
+  OB           : TOB_Registers absolute OB_BASE;
+  CRC          : TCRC_Registers absolute CRC_BASE;
+  TSC          : TTSC_Registers absolute TSC_BASE;
+  GPIOA        : TGPIO_Registers absolute GPIOA_BASE;
+  GPIOB        : TGPIO_Registers absolute GPIOB_BASE;
+  GPIOC        : TGPIO_Registers absolute GPIOC_BASE;
+  GPIOD        : TGPIO_Registers absolute GPIOD_BASE;
+  GPIOE        : TGPIO_Registers absolute GPIOE_BASE;
+  GPIOF        : TGPIO_Registers absolute GPIOF_BASE;
+  ADC1         : TADC_Registers absolute ADC1_BASE;
+  ADC1_COMMON  : TADC_Common_Registers absolute ADC1_BASE;
+
+implementation
+
+procedure NonMaskableInt_interrupt; external name 'NonMaskableInt_interrupt';
+procedure HardFault_interrupt; external name 'HardFault_interrupt';
+procedure MemoryManagement_interrupt; external name 'MemoryManagement_interrupt';
+procedure BusFault_interrupt; external name 'BusFault_interrupt';
+procedure UsageFault_interrupt; external name 'UsageFault_interrupt';
+procedure SVCall_interrupt; external name 'SVCall_interrupt';
+procedure DebugMonitor_interrupt; external name 'DebugMonitor_interrupt';
+procedure PendSV_interrupt; external name 'PendSV_interrupt';
+procedure SysTick_interrupt; external name 'SysTick_interrupt';
+procedure WWDG_interrupt; external name 'WWDG_interrupt';
+procedure TAMP_STAMP_interrupt; external name 'TAMP_STAMP_interrupt';
+procedure RTC_WKUP_interrupt; external name 'RTC_WKUP_interrupt';
+procedure FLASH_interrupt; external name 'FLASH_interrupt';
+procedure RCC_interrupt; external name 'RCC_interrupt';
+procedure EXTI0_interrupt; external name 'EXTI0_interrupt';
+procedure EXTI1_interrupt; external name 'EXTI1_interrupt';
+procedure EXTI2_TSC_interrupt; external name 'EXTI2_TSC_interrupt';
+procedure EXTI3_interrupt; external name 'EXTI3_interrupt';
+procedure EXTI4_interrupt; external name 'EXTI4_interrupt';
+procedure DMA1_Channel1_interrupt; external name 'DMA1_Channel1_interrupt';
+procedure DMA1_Channel2_interrupt; external name 'DMA1_Channel2_interrupt';
+procedure DMA1_Channel3_interrupt; external name 'DMA1_Channel3_interrupt';
+procedure DMA1_Channel4_interrupt; external name 'DMA1_Channel4_interrupt';
+procedure DMA1_Channel5_interrupt; external name 'DMA1_Channel5_interrupt';
+procedure DMA1_Channel6_interrupt; external name 'DMA1_Channel6_interrupt';
+procedure DMA1_Channel7_interrupt; external name 'DMA1_Channel7_interrupt';
+procedure ADC1_interrupt; external name 'ADC1_interrupt';
+procedure CAN_TX_interrupt; external name 'CAN_TX_interrupt';
+procedure CAN_RX0_interrupt; external name 'CAN_RX0_interrupt';
+procedure CAN_RX1_interrupt; external name 'CAN_RX1_interrupt';
+procedure CAN_SCE_interrupt; external name 'CAN_SCE_interrupt';
+procedure EXTI9_5_interrupt; external name 'EXTI9_5_interrupt';
+procedure TIM15_interrupt; external name 'TIM15_interrupt';
+procedure TIM16_interrupt; external name 'TIM16_interrupt';
+procedure TIM17_interrupt; external name 'TIM17_interrupt';
+procedure TIM18_DAC2_interrupt; external name 'TIM18_DAC2_interrupt';
+procedure TIM2_interrupt; external name 'TIM2_interrupt';
+procedure TIM3_interrupt; external name 'TIM3_interrupt';
+procedure TIM4_interrupt; external name 'TIM4_interrupt';
+procedure I2C1_EV_interrupt; external name 'I2C1_EV_interrupt';
+procedure I2C1_ER_interrupt; external name 'I2C1_ER_interrupt';
+procedure I2C2_EV_interrupt; external name 'I2C2_EV_interrupt';
+procedure I2C2_ER_interrupt; external name 'I2C2_ER_interrupt';
+procedure SPI1_interrupt; external name 'SPI1_interrupt';
+procedure SPI2_interrupt; external name 'SPI2_interrupt';
+procedure USART1_interrupt; external name 'USART1_interrupt';
+procedure USART2_interrupt; external name 'USART2_interrupt';
+procedure USART3_interrupt; external name 'USART3_interrupt';
+procedure EXTI15_10_interrupt; external name 'EXTI15_10_interrupt';
+procedure RTC_Alarm_interrupt; external name 'RTC_Alarm_interrupt';
+procedure CEC_interrupt; external name 'CEC_interrupt';
+procedure TIM12_interrupt; external name 'TIM12_interrupt';
+procedure TIM13_interrupt; external name 'TIM13_interrupt';
+procedure TIM14_interrupt; external name 'TIM14_interrupt';
+procedure TIM5_interrupt; external name 'TIM5_interrupt';
+procedure SPI3_interrupt; external name 'SPI3_interrupt';
+procedure TIM6_DAC1_interrupt; external name 'TIM6_DAC1_interrupt';
+procedure TIM7_interrupt; external name 'TIM7_interrupt';
+procedure DMA2_Channel1_interrupt; external name 'DMA2_Channel1_interrupt';
+procedure DMA2_Channel2_interrupt; external name 'DMA2_Channel2_interrupt';
+procedure DMA2_Channel3_interrupt; external name 'DMA2_Channel3_interrupt';
+procedure DMA2_Channel4_interrupt; external name 'DMA2_Channel4_interrupt';
+procedure DMA2_Channel5_interrupt; external name 'DMA2_Channel5_interrupt';
+procedure SDADC1_interrupt; external name 'SDADC1_interrupt';
+procedure SDADC2_interrupt; external name 'SDADC2_interrupt';
+procedure SDADC3_interrupt; external name 'SDADC3_interrupt';
+procedure COMP_interrupt; external name 'COMP_interrupt';
+procedure TIM19_interrupt; external name 'TIM19_interrupt';
+procedure FPU_interrupt; external name 'FPU_interrupt';
+
+{$i cortexm4f_start.inc}
+
+procedure Vectors; assembler; nostackframe;
+label interrupt_vectors;
+asm
+  .section ".init.interrupt_vectors"
+  interrupt_vectors:
+  .long _stack_top
+  .long Startup
+  .long NonMaskableInt_interrupt
+  .long HardFault_interrupt
+  .long MemoryManagement_interrupt
+  .long BusFault_interrupt
+  .long UsageFault_interrupt
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long SVCall_interrupt
+  .long DebugMonitor_interrupt
+  .long 0
+  .long PendSV_interrupt
+  .long SysTick_interrupt
+  .long WWDG_interrupt
+  .long 0
+  .long TAMP_STAMP_interrupt
+  .long RTC_WKUP_interrupt
+  .long FLASH_interrupt
+  .long RCC_interrupt
+  .long EXTI0_interrupt
+  .long EXTI1_interrupt
+  .long EXTI2_TSC_interrupt
+  .long EXTI3_interrupt
+  .long EXTI4_interrupt
+  .long DMA1_Channel1_interrupt
+  .long DMA1_Channel2_interrupt
+  .long DMA1_Channel3_interrupt
+  .long DMA1_Channel4_interrupt
+  .long DMA1_Channel5_interrupt
+  .long DMA1_Channel6_interrupt
+  .long DMA1_Channel7_interrupt
+  .long ADC1_interrupt
+  .long CAN_TX_interrupt
+  .long CAN_RX0_interrupt
+  .long CAN_RX1_interrupt
+  .long CAN_SCE_interrupt
+  .long EXTI9_5_interrupt
+  .long TIM15_interrupt
+  .long TIM16_interrupt
+  .long TIM17_interrupt
+  .long TIM18_DAC2_interrupt
+  .long TIM2_interrupt
+  .long TIM3_interrupt
+  .long TIM4_interrupt
+  .long I2C1_EV_interrupt
+  .long I2C1_ER_interrupt
+  .long I2C2_EV_interrupt
+  .long I2C2_ER_interrupt
+  .long SPI1_interrupt
+  .long SPI2_interrupt
+  .long USART1_interrupt
+  .long USART2_interrupt
+  .long USART3_interrupt
+  .long EXTI15_10_interrupt
+  .long RTC_Alarm_interrupt
+  .long CEC_interrupt
+  .long TIM12_interrupt
+  .long TIM13_interrupt
+  .long TIM14_interrupt
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long TIM5_interrupt
+  .long SPI3_interrupt
+  .long 0
+  .long 0
+  .long TIM6_DAC1_interrupt
+  .long TIM7_interrupt
+  .long DMA2_Channel1_interrupt
+  .long DMA2_Channel2_interrupt
+  .long DMA2_Channel3_interrupt
+  .long DMA2_Channel4_interrupt
+  .long DMA2_Channel5_interrupt
+  .long SDADC1_interrupt
+  .long SDADC2_interrupt
+  .long SDADC3_interrupt
+  .long COMP_interrupt
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long TIM19_interrupt
+  .long 0
+  .long 0
+  .long FPU_interrupt
+  .weak NonMaskableInt_interrupt
+  .weak HardFault_interrupt
+  .weak MemoryManagement_interrupt
+  .weak BusFault_interrupt
+  .weak UsageFault_interrupt
+  .weak SVCall_interrupt
+  .weak DebugMonitor_interrupt
+  .weak PendSV_interrupt
+  .weak SysTick_interrupt
+  .weak WWDG_interrupt
+  .weak TAMP_STAMP_interrupt
+  .weak RTC_WKUP_interrupt
+  .weak FLASH_interrupt
+  .weak RCC_interrupt
+  .weak EXTI0_interrupt
+  .weak EXTI1_interrupt
+  .weak EXTI2_TSC_interrupt
+  .weak EXTI3_interrupt
+  .weak EXTI4_interrupt
+  .weak DMA1_Channel1_interrupt
+  .weak DMA1_Channel2_interrupt
+  .weak DMA1_Channel3_interrupt
+  .weak DMA1_Channel4_interrupt
+  .weak DMA1_Channel5_interrupt
+  .weak DMA1_Channel6_interrupt
+  .weak DMA1_Channel7_interrupt
+  .weak ADC1_interrupt
+  .weak CAN_TX_interrupt
+  .weak CAN_RX0_interrupt
+  .weak CAN_RX1_interrupt
+  .weak CAN_SCE_interrupt
+  .weak EXTI9_5_interrupt
+  .weak TIM15_interrupt
+  .weak TIM16_interrupt
+  .weak TIM17_interrupt
+  .weak TIM18_DAC2_interrupt
+  .weak TIM2_interrupt
+  .weak TIM3_interrupt
+  .weak TIM4_interrupt
+  .weak I2C1_EV_interrupt
+  .weak I2C1_ER_interrupt
+  .weak I2C2_EV_interrupt
+  .weak I2C2_ER_interrupt
+  .weak SPI1_interrupt
+  .weak SPI2_interrupt
+  .weak USART1_interrupt
+  .weak USART2_interrupt
+  .weak USART3_interrupt
+  .weak EXTI15_10_interrupt
+  .weak RTC_Alarm_interrupt
+  .weak CEC_interrupt
+  .weak TIM12_interrupt
+  .weak TIM13_interrupt
+  .weak TIM14_interrupt
+  .weak TIM5_interrupt
+  .weak SPI3_interrupt
+  .weak TIM6_DAC1_interrupt
+  .weak TIM7_interrupt
+  .weak DMA2_Channel1_interrupt
+  .weak DMA2_Channel2_interrupt
+  .weak DMA2_Channel3_interrupt
+  .weak DMA2_Channel4_interrupt
+  .weak DMA2_Channel5_interrupt
+  .weak SDADC1_interrupt
+  .weak SDADC2_interrupt
+  .weak SDADC3_interrupt
+  .weak COMP_interrupt
+  .weak TIM19_interrupt
+  .weak FPU_interrupt
+  .set NonMaskableInt_interrupt, HaltProc
+  .set HardFault_interrupt, HaltProc
+  .set MemoryManagement_interrupt, HaltProc
+  .set BusFault_interrupt, HaltProc
+  .set UsageFault_interrupt, HaltProc
+  .set SVCall_interrupt, HaltProc
+  .set DebugMonitor_interrupt, HaltProc
+  .set PendSV_interrupt, HaltProc
+  .set SysTick_interrupt, HaltProc
+  .set WWDG_interrupt, HaltProc
+  .set TAMP_STAMP_interrupt, HaltProc
+  .set RTC_WKUP_interrupt, HaltProc
+  .set FLASH_interrupt, HaltProc
+  .set RCC_interrupt, HaltProc
+  .set EXTI0_interrupt, HaltProc
+  .set EXTI1_interrupt, HaltProc
+  .set EXTI2_TSC_interrupt, HaltProc
+  .set EXTI3_interrupt, HaltProc
+  .set EXTI4_interrupt, HaltProc
+  .set DMA1_Channel1_interrupt, HaltProc
+  .set DMA1_Channel2_interrupt, HaltProc
+  .set DMA1_Channel3_interrupt, HaltProc
+  .set DMA1_Channel4_interrupt, HaltProc
+  .set DMA1_Channel5_interrupt, HaltProc
+  .set DMA1_Channel6_interrupt, HaltProc
+  .set DMA1_Channel7_interrupt, HaltProc
+  .set ADC1_interrupt, HaltProc
+  .set CAN_TX_interrupt, HaltProc
+  .set CAN_RX0_interrupt, HaltProc
+  .set CAN_RX1_interrupt, HaltProc
+  .set CAN_SCE_interrupt, HaltProc
+  .set EXTI9_5_interrupt, HaltProc
+  .set TIM15_interrupt, HaltProc
+  .set TIM16_interrupt, HaltProc
+  .set TIM17_interrupt, HaltProc
+  .set TIM18_DAC2_interrupt, HaltProc
+  .set TIM2_interrupt, HaltProc
+  .set TIM3_interrupt, HaltProc
+  .set TIM4_interrupt, HaltProc
+  .set I2C1_EV_interrupt, HaltProc
+  .set I2C1_ER_interrupt, HaltProc
+  .set I2C2_EV_interrupt, HaltProc
+  .set I2C2_ER_interrupt, HaltProc
+  .set SPI1_interrupt, HaltProc
+  .set SPI2_interrupt, HaltProc
+  .set USART1_interrupt, HaltProc
+  .set USART2_interrupt, HaltProc
+  .set USART3_interrupt, HaltProc
+  .set EXTI15_10_interrupt, HaltProc
+  .set RTC_Alarm_interrupt, HaltProc
+  .set CEC_interrupt, HaltProc
+  .set TIM12_interrupt, HaltProc
+  .set TIM13_interrupt, HaltProc
+  .set TIM14_interrupt, HaltProc
+  .set TIM5_interrupt, HaltProc
+  .set SPI3_interrupt, HaltProc
+  .set TIM6_DAC1_interrupt, HaltProc
+  .set TIM7_interrupt, HaltProc
+  .set DMA2_Channel1_interrupt, HaltProc
+  .set DMA2_Channel2_interrupt, HaltProc
+  .set DMA2_Channel3_interrupt, HaltProc
+  .set DMA2_Channel4_interrupt, HaltProc
+  .set DMA2_Channel5_interrupt, HaltProc
+  .set SDADC1_interrupt, HaltProc
+  .set SDADC2_interrupt, HaltProc
+  .set SDADC3_interrupt, HaltProc
+  .set COMP_interrupt, HaltProc
+  .set TIM19_interrupt, HaltProc
+  .set FPU_interrupt, HaltProc
+  .text
+end;
+end.
diff -Naur fpc-save/rtl/embedded/arm/stm32f398xx.pp fpc/rtl/embedded/arm/stm32f398xx.pp
--- fpc-save/rtl/embedded/arm/stm32f398xx.pp	1970-01-01 01:00:00.000000000 +0100
+++ fpc/rtl/embedded/arm/stm32f398xx.pp	2018-03-02 17:07:57.000000000 +0100
@@ -0,0 +1,1086 @@
+unit stm32f398xx;
+interface
+{$PACKRECORDS C}
+{$GOTO ON}
+// *
+// ******************************************************************************
+// * @file    stm32f398xx.h
+// * @author  MCD Application Team
+//   CMSIS STM32F398xx Devices Peripheral Access Layer Header File.
+// *
+// *          This file contains:
+// *           - Data structures and the address mapping for all peripherals
+// *           - Peripheral's registers declarations and bits definition
+// *           - Macros to access peripheral’s registers hardware
+// *
+// ******************************************************************************
+// * @attention
+// *
+// * <h2><center>&copy; COPYRIGHT(c) 2016 STMicroelectronics</center></h2>
+// *
+// * Redistribution and use in source and binary forms, with or without modification,
+// * are permitted provided that the following conditions are met:
+// *   1. Redistributions of source code must retain the above copyright notice,
+// *      this list of conditions and the following disclaimer.
+// *   2. Redistributions in binary form must reproduce the above copyright notice,
+// *      this list of conditions and the following disclaimer in the documentation
+// *      and/or other materials provided with the distribution.
+// *   3. Neither the name of STMicroelectronics nor the names of its contributors
+// *      may be used to endorse or promote products derived from this software
+// *      without specific prior written permission.
+// *
+// * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
+// * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
+// * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+// * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE
+// * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
+// * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
+// * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER
+// * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+// * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
+// * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
+// *
+// ******************************************************************************
+// Configuration of the Cortex-M4 Processor and Core Peripherals
+// STM32F398xx devices Interrupt Number Definition, according to the selected device
+// *        in @ref Library_configuration_section
+
+type
+  TIRQn_Enum   = (
+    NonMaskableInt_IRQn = -14,        // 2 Non Maskable Interrupt
+    HardFault_IRQn = -13,             // 3 Cortex-M4 Hard Fault Interrupt
+    MemoryManagement_IRQn = -12,      // 4 Cortex-M4 Memory Management Interrupt
+    BusFault_IRQn = -11,              // 5 Cortex-M4 Bus Fault Interrupt
+    UsageFault_IRQn = -10,            // 6 Cortex-M4 Usage Fault Interrupt
+    SVCall_IRQn = -5,                 // 11 Cortex-M4 SV Call Interrupt
+    DebugMonitor_IRQn = -4,           // 12 Cortex-M4 Debug Monitor Interrupt
+    PendSV_IRQn = -2,                 // 14 Cortex-M4 Pend SV Interrupt
+    SysTick_IRQn = -1,                // 15 Cortex-M4 System Tick Interrupt
+    WWDG_IRQn  = 0,                   // Window WatchDog Interrupt
+    TAMP_STAMP_IRQn = 2,              // Tamper and TimeStamp interrupts through the EXTI line 19
+    RTC_WKUP_IRQn = 3,                // RTC Wakeup interrupt through the EXTI line 20
+    FLASH_IRQn = 4,                   // FLASH global Interrupt
+    RCC_IRQn   = 5,                   // RCC global Interrupt
+    EXTI0_IRQn = 6,                   // EXTI Line0 Interrupt
+    EXTI1_IRQn = 7,                   // EXTI Line1 Interrupt
+    EXTI2_TSC_IRQn = 8,               // EXTI Line2 Interrupt and Touch Sense Controller Interrupt
+    EXTI3_IRQn = 9,                   // EXTI Line3 Interrupt
+    EXTI4_IRQn = 10,                  // EXTI Line4 Interrupt
+    DMA1_Channel1_IRQn = 11,          // DMA1 Channel 1 Interrupt
+    DMA1_Channel2_IRQn = 12,          // DMA1 Channel 2 Interrupt
+    DMA1_Channel3_IRQn = 13,          // DMA1 Channel 3 Interrupt
+    DMA1_Channel4_IRQn = 14,          // DMA1 Channel 4 Interrupt
+    DMA1_Channel5_IRQn = 15,          // DMA1 Channel 5 Interrupt
+    DMA1_Channel6_IRQn = 16,          // DMA1 Channel 6 Interrupt
+    DMA1_Channel7_IRQn = 17,          // DMA1 Channel 7 Interrupt
+    ADC1_2_IRQn = 18,                 // ADC1 & ADC2 Interrupts
+    CAN_TX_IRQn = 19,                 // CAN TX Interrupt
+    CAN_RX0_IRQn = 20,                // CAN RX0 Interrupt
+    CAN_RX1_IRQn = 21,                // CAN RX1 Interrupt
+    CAN_SCE_IRQn = 22,                // CAN SCE Interrupt
+    EXTI9_5_IRQn = 23,                // External Line[9:5] Interrupts
+    TIM1_BRK_TIM15_IRQn = 24,         // TIM1 Break and TIM15 Interrupts
+    TIM1_UP_TIM16_IRQn = 25,          // TIM1 Update and TIM16 Interrupts
+    TIM1_TRG_COM_TIM17_IRQn = 26,     // TIM1 Trigger and Commutation and TIM17 Interrupt
+    TIM1_CC_IRQn = 27,                // TIM1 Capture Compare Interrupt
+    TIM2_IRQn  = 28,                  // TIM2 global Interrupt
+    TIM3_IRQn  = 29,                  // TIM3 global Interrupt
+    TIM4_IRQn  = 30,                  // TIM4 global Interrupt
+    I2C1_EV_IRQn = 31,                // I2C1 Event Interrupt & EXTI Line23 Interrupt (I2C1 wakeup)
+    I2C1_ER_IRQn = 32,                // I2C1 Error Interrupt
+    I2C2_EV_IRQn = 33,                // I2C2 Event Interrupt & EXTI Line24 Interrupt (I2C2 wakeup)
+    I2C2_ER_IRQn = 34,                // I2C2 Error Interrupt
+    SPI1_IRQn  = 35,                  // SPI1 global Interrupt
+    SPI2_IRQn  = 36,                  // SPI2 global Interrupt
+    USART1_IRQn = 37,                 // USART1 global Interrupt & EXTI Line25 Interrupt (USART1 wakeup)
+    USART2_IRQn = 38,                 // USART2 global Interrupt & EXTI Line26 Interrupt (USART2 wakeup)
+    USART3_IRQn = 39,                 // USART3 global Interrupt & EXTI Line28 Interrupt (USART3 wakeup)
+    EXTI15_10_IRQn = 40,              // External Line[15:10] Interrupts
+    RTC_Alarm_IRQn = 41,              // RTC Alarm (A and B) through EXTI Line 17 Interrupt
+    TIM8_BRK_IRQn = 43,               // TIM8 Break Interrupt
+    TIM8_UP_IRQn = 44,                // TIM8 Update Interrupt
+    TIM8_TRG_COM_IRQn = 45,           // TIM8 Trigger and Commutation Interrupt
+    TIM8_CC_IRQn = 46,                // TIM8 Capture Compare Interrupt
+    ADC3_IRQn  = 47,                  // ADC3 global Interrupt
+    FMC_IRQn   = 48,                  // FMC global Interrupt
+    SPI3_IRQn  = 51,                  // SPI3 global Interrupt
+    UART4_IRQn = 52,                  // UART4 global Interrupt & EXTI Line34 Interrupt (UART4 wakeup)
+    UART5_IRQn = 53,                  // UART5 global Interrupt & EXTI Line35 Interrupt (UART5 wakeup)
+    TIM6_DAC_IRQn = 54,               // TIM6 global and DAC underrun error Interrupt
+    TIM7_IRQn  = 55,                  // TIM7 global Interrupt
+    DMA2_Channel1_IRQn = 56,          // DMA2 Channel 1 global Interrupt
+    DMA2_Channel2_IRQn = 57,          // DMA2 Channel 2 global Interrupt
+    DMA2_Channel3_IRQn = 58,          // DMA2 Channel 3 global Interrupt
+    DMA2_Channel4_IRQn = 59,          // DMA2 Channel 4 global Interrupt
+    DMA2_Channel5_IRQn = 60,          // DMA2 Channel 5 global Interrupt
+    ADC4_IRQn  = 61,                  // ADC4  global Interrupt
+    COMP1_2_3_IRQn = 64,              // COMP1, COMP2 and COMP3 global Interrupt via EXTI Line21, 22 and 29
+    COMP4_5_6_IRQn = 65,              // COMP4, COMP5 and COMP6 global Interrupt via EXTI Line30, 31 and 32
+    COMP7_IRQn = 66,                  // COMP7 global Interrupt via EXTI Line33
+    I2C3_EV_IRQn = 72,                // I2C3 event interrupt
+    I2C3_ER_IRQn = 73,                // I2C3 Error Interrupt
+    TIM20_BRK_IRQn = 77,              // TIM20 Break Interrupt
+    TIM20_UP_IRQn = 78,               // TIM20 Update Interrupt
+    TIM20_TRG_COM_IRQn = 79,          // TIM20 Trigger and Commutation Interrupt
+    TIM20_CC_IRQn = 80,               // TIM20 Capture Compare Interrupt
+    FPU_IRQn   = 81,                  // Floating point Interrupt
+    SPI4_IRQn  = 84                   // SPI4 global Interrupt
+  );
+
+  TADC_Registers = record
+    ISR        : longword;            // ADC Interrupt and Status Register
+    IER        : longword;            // ADC Interrupt Enable Register
+    CR         : longword;            // ADC control register
+    CFGR       : longword;            // ADC Configuration register
+    RESERVED0  : longword;            // Reserved, 0x010
+    SMPR1      : longword;            // ADC sample time register 1
+    SMPR2      : longword;            // ADC sample time register 2
+    RESERVED1  : longword;            // Reserved, 0x01C
+    TR1        : longword;            // ADC watchdog threshold register 1
+    TR2        : longword;            // ADC watchdog threshold register 2
+    TR3        : longword;            // ADC watchdog threshold register 3
+    RESERVED2  : longword;            // Reserved, 0x02C
+    SQR1       : longword;            // ADC regular sequence register 1
+    SQR2       : longword;            // ADC regular sequence register 2
+    SQR3       : longword;            // ADC regular sequence register 3
+    SQR4       : longword;            // ADC regular sequence register 4
+    DR         : longword;            // ADC regular data register
+    RESERVED3  : longword;            // Reserved, 0x044
+    RESERVED4  : longword;            // Reserved, 0x048
+    JSQR       : longword;            // ADC injected sequence register
+    RESERVED5  : array[0..3] of longword; // Reserved, 0x050 - 0x05C
+    OFR1       : longword;            // ADC offset register 1
+    OFR2       : longword;            // ADC offset register 2
+    OFR3       : longword;            // ADC offset register 3
+    OFR4       : longword;            // ADC offset register 4
+    RESERVED6  : array[0..3] of longword; // Reserved, 0x070 - 0x07C
+    JDR1       : longword;            // ADC injected data register 1
+    JDR2       : longword;            // ADC injected data register 2
+    JDR3       : longword;            // ADC injected data register 3
+    JDR4       : longword;            // ADC injected data register 4
+    RESERVED7  : array[0..3] of longword; // Reserved, 0x090 - 0x09C
+    AWD2CR     : longword;            // ADC  Analog Watchdog 2 Configuration Register
+    AWD3CR     : longword;            // ADC  Analog Watchdog 3 Configuration Register
+    RESERVED8  : longword;            // Reserved, 0x0A8
+    RESERVED9  : longword;            // Reserved, 0x0AC
+    DIFSEL     : longword;            // ADC  Differential Mode Selection Register
+    CALFACT    : longword;            // ADC  Calibration Factors
+  end;
+
+  TADC_COMMON_Registers = record
+    CSR        : longword;            // ADC Common status register
+    RESERVED   : longword;            // Reserved, ADC1/3 base address + 0x304
+    CCR        : longword;            // ADC common control register
+    CDR        : longword;            // ADC common regular data register for dual
+  end;
+
+  TCAN_TXMAILBOX_Registers = record
+    TIR        : longword;            // CAN TX mailbox identifier register
+    TDTR       : longword;            // CAN mailbox data length control and time stamp register
+    TDLR       : longword;            // CAN mailbox data low register
+    TDHR       : longword;            // CAN mailbox data high register
+  end;
+
+  TCAN_FIFOMAILBOX_Registers = record
+    RIR        : longword;            // CAN receive FIFO mailbox identifier register
+    RDTR       : longword;            // CAN receive FIFO mailbox data length control and time stamp register
+    RDLR       : longword;            // CAN receive FIFO mailbox data low register
+    RDHR       : longword;            // CAN receive FIFO mailbox data high register
+  end;
+
+  TCAN_FILTERREGISTER_Registers = record
+    FR1        : longword;            // CAN Filter bank register 1
+    FR2        : longword;            // CAN Filter bank register 1
+  end;
+
+  TCAN_Registers = record
+    MCR        : longword;            // CAN master control register
+    MSR        : longword;            // CAN master status register
+    TSR        : longword;            // CAN transmit status register
+    RF0R       : longword;            // CAN receive FIFO 0 register
+    RF1R       : longword;            // CAN receive FIFO 1 register
+    IER        : longword;            // CAN interrupt enable register
+    ESR        : longword;            // CAN error status register
+    BTR        : longword;            // CAN bit timing register
+    RESERVED0  : array[0..87] of longword; // Reserved, 0x020 - 0x17F
+    sTxMailBox : array[0..2] of TCAN_TxMailBox_Registers; // CAN Tx MailBox
+    sFIFOMailBox : array[0..1] of TCAN_FIFOMailBox_Registers; // CAN FIFO MailBox
+    RESERVED1  : array[0..11] of longword; // Reserved, 0x1D0 - 0x1FF
+    FMR        : longword;            // CAN filter master register
+    FM1R       : longword;            // CAN filter mode register
+    RESERVED2  : longword;            // Reserved, 0x208
+    FS1R       : longword;            // CAN filter scale register
+    RESERVED3  : longword;            // Reserved, 0x210
+    FFA1R      : longword;            // CAN filter FIFO assignment register
+    RESERVED4  : longword;            // Reserved, 0x218
+    FA1R       : longword;            // CAN filter activation register
+    RESERVED5  : array[0..7] of longword; // Reserved, 0x220-0x23F
+    sFilterRegister : array[0..27] of TCAN_FilterRegister_Registers; // CAN Filter Register
+  end;
+
+  TCOMP_Registers = record
+    CSR        : longword;            // COMP control and status register
+  end;
+
+  TCOMP_COMMON_Registers = record
+    CSR        : longword;            // COMP control and status register, used for bits common to several COMP instances
+  end;
+
+  TCRC_Registers = record
+    DR         : longword;            // CRC Data register
+    IDR        : byte;                // CRC Independent data register
+    RESERVED0  : byte;                // Reserved,                                                    0x05
+    RESERVED1  : word;                // Reserved,                                                    0x06
+    CR         : longword;            // CRC Control register
+    RESERVED2  : longword;            // Reserved,                                                    0x0C
+    INIT       : longword;            // Initial CRC value register
+    POL        : longword;            // CRC polynomial register
+  end;
+
+  TDAC_Registers = record
+    CR         : longword;            // DAC control register
+    SWTRIGR    : longword;            // DAC software trigger register
+    DHR12R1    : longword;            // DAC channel1 12-bit right-aligned data holding register
+    DHR12L1    : longword;            // DAC channel1 12-bit left aligned data holding register
+    DHR8R1     : longword;            // DAC channel1 8-bit right aligned data holding register
+    DHR12R2    : longword;            // DAC channel2 12-bit right aligned data holding register
+    DHR12L2    : longword;            // DAC channel2 12-bit left aligned data holding register
+    DHR8R2     : longword;            // DAC channel2 8-bit right-aligned data holding register
+    DHR12RD    : longword;            // Dual DAC 12-bit right-aligned data holding register
+    DHR12LD    : longword;            // DUAL DAC 12-bit left aligned data holding register
+    DHR8RD     : longword;            // DUAL DAC 8-bit right aligned data holding register
+    DOR1       : longword;            // DAC channel1 data output register
+    DOR2       : longword;            // DAC channel2 data output register
+    SR         : longword;            // DAC status register
+  end;
+
+  TDBGMCU_Registers = record
+    IDCODE     : longword;            // MCU device ID code
+    CR         : longword;            // Debug MCU configuration register
+    APB1FZ     : longword;            // Debug MCU APB1 freeze register
+    APB2FZ     : longword;            // Debug MCU APB2 freeze register
+  end;
+
+  TDMA_CHANNEL_Registers = record
+    CCR        : longword;            // DMA channel x configuration register
+    CNDTR      : longword;            // DMA channel x number of data register
+    CPAR       : longword;            // DMA channel x peripheral address register
+    CMAR       : longword;            // DMA channel x memory address register
+  end;
+
+  TDMA_Registers = record
+    ISR        : longword;            // DMA interrupt status register
+    IFCR       : longword;            // DMA interrupt flag clear register
+  end;
+
+  TEXTI_Registers = record
+    IMR        : longword;            // XTI Interrupt mask register
+    EMR        : longword;            // XTI Event mask register
+    RTSR       : longword;            // XTI Rising trigger selection register
+    FTSR       : longword;            // XTI Falling trigger selection register
+    SWIER      : longword;            // XTI Software interrupt event register
+    PR         : longword;            // XTI Pending register
+    RESERVED1  : longword;            // Reserved, 0x18
+    RESERVED2  : longword;            // Reserved, 0x1C
+    IMR2       : longword;            // EXTI Interrupt mask register
+    EMR2       : longword;            // EXTI Event mask register
+    RTSR2      : longword;            // EXTI Rising trigger selection register
+    FTSR2      : longword;            // EXTI Falling trigger selection register
+    SWIER2     : longword;            // EXTI Software interrupt event register
+    PR2        : longword;            // EXTI Pending register
+  end;
+
+  TFLASH_Registers = record
+    ACR        : longword;            // FLASH access control register
+    KEYR       : longword;            // FLASH key register
+    OPTKEYR    : longword;            // FLASH option key register
+    SR         : longword;            // FLASH status register
+    CR         : longword;            // FLASH control register
+    AR         : longword;            // FLASH address register
+    RESERVED   : longword;            // Reserved, 0x18
+    OBR        : longword;            // FLASH Option byte register
+    WRPR       : longword;            // FLASH Write register
+  end;
+
+  TFMC_BANK1_Registers = record
+    BTCR       : array[0..7] of longword; // NOR/PSRAM chip-select control register(BCR) and chip-select timing register(BTR)
+  end;
+
+  TFMC_BANK1E_Registers = record
+    BWTR       : array[0..6] of longword; // NOR/PSRAM write timing registers
+  end;
+
+  TFMC_BANK2_3_Registers = record
+    PCR2       : longword;            // NAND Flash control register 2
+    SR2        : longword;            // NAND Flash FIFO status and interrupt register 2
+    PMEM2      : longword;            // NAND Flash Common memory space timing register 2
+    PATT2      : longword;            // NAND Flash Attribute memory space timing register 2
+    RESERVED0  : longword;            // Reserved, 0x70
+    ECCR2      : longword;            // NAND Flash ECC result registers 2
+    RESERVED1  : longword;            // Reserved, 0x78
+    RESERVED2  : longword;            // Reserved, 0x7C
+    PCR3       : longword;            // NAND Flash control register 3
+    SR3        : longword;            // NAND Flash FIFO status and interrupt register 3
+    PMEM3      : longword;            // NAND Flash Common memory space timing register 3
+    PATT3      : longword;            // NAND Flash Attribute memory space timing register 3
+    RESERVED3  : longword;            // Reserved, 0x90
+    ECCR3      : longword;            // NAND Flash ECC result registers 3
+  end;
+
+  TFMC_BANK4_Registers = record
+    PCR4       : longword;            // PC Card  control register 4
+    SR4        : longword;            // PC Card  FIFO status and interrupt register 4
+    PMEM4      : longword;            // PC Card  Common memory space timing register 4
+    PATT4      : longword;            // PC Card  Attribute memory space timing register 4
+    PIO4       : longword;            // PC Card  I/O space timing register 4
+  end;
+
+  TOB_Registers = record
+    RDP        : word;                // LASH option byte Read protection
+    USER       : word;                // LASH option byte user options
+    RESERVED0  : word;                // Reserved,                                                     0x04
+    RESERVED1  : word;                // Reserved,                                                     0x06
+    WRP0       : word;                // LASH option byte write protection 0
+    WRP1       : word;                // LASH option byte write protection 1
+    WRP2       : word;                // LASH option byte write protection 2
+    WRP3       : word;                // LASH option byte write protection 3
+  end;
+
+  TGPIO_Registers = record
+    MODER      : longword;            // GPIO port mode register
+    OTYPER     : longword;            // GPIO port output type register
+    OSPEEDR    : longword;            // GPIO port output speed register
+    PUPDR      : longword;            // GPIO port pull-up/pull-down register
+    IDR        : longword;            // GPIO port input data register
+    ODR        : longword;            // GPIO port output data register
+    BSRR       : longword;            // GPIO port bit set/reset register
+    LCKR       : longword;            // GPIO port configuration lock register
+    AFR        : array[0..1] of longword; // GPIO alternate function registers
+    BRR        : longword;            // GPIO bit reset register
+  end;
+
+  TOPAMP_Registers = record
+    CSR        : longword;            // OPAMP control and status register
+  end;
+
+  TSYSCFG_Registers = record
+    CFGR1      : longword;            // SYSCFG configuration register 1
+    RCR        : longword;            // SYSCFG CCM SRAM protection register
+    EXTICR     : array[0..3] of longword; // SYSCFG external interrupt configuration registers
+    CFGR2      : longword;            // SYSCFG configuration register 2
+    RESERVED0  : longword;            // Reserved,                                                          0x1C
+    RESERVED1  : longword;            // Reserved,                                                          0x20
+    RESERVED2  : longword;            // Reserved,                                                          0x24
+    RESERVED4  : longword;            // Reserved,                                                          0x28
+    RESERVED5  : longword;            // Reserved,                                                          0x2C
+    RESERVED6  : longword;            // Reserved,                                                          0x30
+    RESERVED7  : longword;            // Reserved,                                                          0x34
+    RESERVED8  : longword;            // Reserved,                                                          0x38
+    RESERVED9  : longword;            // Reserved,                                                          0x3C
+    RESERVED10 : longword;            // Reserved,                                                          0x40
+    RESERVED11 : longword;            // Reserved,                                                          0x44
+    CFGR4      : longword;            // SYSCFG configuration register 4
+    RESERVED12 : longword;            // Reserved,                                                          0x4C
+    RESERVED13 : longword;            // Reserved,                                                          0x50
+  end;
+
+  TI2C_Registers = record
+    CR1        : longword;            // I2C Control register 1
+    CR2        : longword;            // I2C Control register 2
+    OAR1       : longword;            // I2C Own address 1 register
+    OAR2       : longword;            // I2C Own address 2 register
+    TIMINGR    : longword;            // I2C Timing register
+    TIMEOUTR   : longword;            // I2C Timeout register
+    ISR        : longword;            // I2C Interrupt and status register
+    ICR        : longword;            // I2C Interrupt clear register
+    PECR       : longword;            // I2C PEC register
+    RXDR       : longword;            // I2C Receive data register
+    TXDR       : longword;            // I2C Transmit data register
+  end;
+
+  TIWDG_Registers = record
+    KR         : longword;            // IWDG Key register
+    PR         : longword;            // IWDG Prescaler register
+    RLR        : longword;            // IWDG Reload register
+    SR         : longword;            // IWDG Status register
+    WINR       : longword;            // IWDG Window register
+  end;
+
+  TPWR_Registers = record
+    CR         : longword;            // PWR power control register
+    CSR        : longword;            // PWR power control/status register
+  end;
+
+  TRCC_Registers = record
+    CR         : longword;            // RCC clock control register
+    CFGR       : longword;            // RCC clock configuration register
+    CIR        : longword;            // RCC clock interrupt register
+    APB2RSTR   : longword;            // RCC APB2 peripheral reset register
+    APB1RSTR   : longword;            // RCC APB1 peripheral reset register
+    AHBENR     : longword;            // RCC AHB peripheral clock register
+    APB2ENR    : longword;            // RCC APB2 peripheral clock enable register
+    APB1ENR    : longword;            // RCC APB1 peripheral clock enable register
+    BDCR       : longword;            // RCC Backup domain control register
+    CSR        : longword;            // RCC clock control & status register
+    AHBRSTR    : longword;            // RCC AHB peripheral reset register
+    CFGR2      : longword;            // RCC clock configuration register 2
+    CFGR3      : longword;            // RCC clock configuration register 3
+  end;
+
+  TRTC_Registers = record
+    TR         : longword;            // RTC time register
+    DR         : longword;            // RTC date register
+    CR         : longword;            // RTC control register
+    ISR        : longword;            // RTC initialization and status register
+    PRER       : longword;            // RTC prescaler register
+    WUTR       : longword;            // RTC wakeup timer register
+    RESERVED0  : longword;            // Reserved, 0x18
+    ALRMAR     : longword;            // RTC alarm A register
+    ALRMBR     : longword;            // RTC alarm B register
+    WPR        : longword;            // RTC write protection register
+    SSR        : longword;            // RTC sub second register
+    SHIFTR     : longword;            // RTC shift control register
+    TSTR       : longword;            // RTC time stamp time register
+    TSDR       : longword;            // RTC time stamp date register
+    TSSSR      : longword;            // RTC time-stamp sub second register
+    CALR       : longword;            // RTC calibration register
+    TAFCR      : longword;            // RTC tamper and alternate function configuration register
+    ALRMASSR   : longword;            // RTC alarm A sub second register
+    ALRMBSSR   : longword;            // RTC alarm B sub second register
+    RESERVED7  : longword;            // Reserved, 0x4C
+    BKP0R      : longword;            // RTC backup register 0
+    BKP1R      : longword;            // RTC backup register 1
+    BKP2R      : longword;            // RTC backup register 2
+    BKP3R      : longword;            // RTC backup register 3
+    BKP4R      : longword;            // RTC backup register 4
+    BKP5R      : longword;            // RTC backup register 5
+    BKP6R      : longword;            // RTC backup register 6
+    BKP7R      : longword;            // RTC backup register 7
+    BKP8R      : longword;            // RTC backup register 8
+    BKP9R      : longword;            // RTC backup register 9
+    BKP10R     : longword;            // RTC backup register 10
+    BKP11R     : longword;            // RTC backup register 11
+    BKP12R     : longword;            // RTC backup register 12
+    BKP13R     : longword;            // RTC backup register 13
+    BKP14R     : longword;            // RTC backup register 14
+    BKP15R     : longword;            // RTC backup register 15
+  end;
+
+  TSPI_Registers = record
+    CR1        : longword;            // SPI Control register 1
+    CR2        : longword;            // SPI Control register 2
+    SR         : longword;            // SPI Status register
+    DR         : longword;            // SPI data register
+    CRCPR      : longword;            // SPI CRC polynomial register
+    RXCRCR     : longword;            // SPI Rx CRC register
+    TXCRCR     : longword;            // SPI Tx CRC register
+    I2SCFGR    : longword;            // SPI_I2S configuration register
+    I2SPR      : longword;            // SPI_I2S prescaler register
+  end;
+
+  TTIM_Registers = record
+    CR1        : longword;            // TIM control register 1
+    CR2        : longword;            // TIM control register 2
+    SMCR       : longword;            // TIM slave mode control register
+    DIER       : longword;            // TIM DMA/interrupt enable register
+    SR         : longword;            // TIM status register
+    EGR        : longword;            // TIM event generation register
+    CCMR1      : longword;            // TIM capture/compare mode register 1
+    CCMR2      : longword;            // TIM capture/compare mode register 2
+    CCER       : longword;            // TIM capture/compare enable register
+    CNT        : longword;            // TIM counter register
+    PSC        : longword;            // TIM prescaler
+    ARR        : longword;            // TIM auto-reload register
+    RCR        : longword;            // TIM repetition counter register
+    CCR1       : longword;            // TIM capture/compare register 1
+    CCR2       : longword;            // TIM capture/compare register 2
+    CCR3       : longword;            // TIM capture/compare register 3
+    CCR4       : longword;            // TIM capture/compare register 4
+    BDTR       : longword;            // TIM break and dead-time register
+    DCR        : longword;            // TIM DMA control register
+    DMAR       : longword;            // TIM DMA address for full transfer
+    &OR        : longword;            // TIM option register
+    CCMR3      : longword;            // TIM capture/compare mode register 3
+    CCR5       : longword;            // TIM capture/compare register5
+    CCR6       : longword;            // TIM capture/compare register 4
+  end;
+
+  TTSC_Registers = record
+    CR         : longword;            // TSC control register
+    IER        : longword;            // TSC interrupt enable register
+    ICR        : longword;            // TSC interrupt clear register
+    ISR        : longword;            // TSC interrupt status register
+    IOHCR      : longword;            // TSC I/O hysteresis control register
+    RESERVED1  : longword;            // Reserved
+    IOASCR     : longword;            // TSC I/O analog switch control register
+    RESERVED2  : longword;            // Reserved
+    IOSCR      : longword;            // TSC I/O sampling control register
+    RESERVED3  : longword;            // Reserved
+    IOCCR      : longword;            // TSC I/O channel control register
+    RESERVED4  : longword;            // Reserved
+    IOGCSR     : longword;            // TSC I/O group control status register
+    IOGXCR     : array[0..7] of longword; // TSC I/O group x counter register
+  end;
+
+  TUSART_Registers = record
+    CR1        : longword;            // USART Control register 1
+    CR2        : longword;            // USART Control register 2
+    CR3        : longword;            // USART Control register 3
+    BRR        : longword;            // USART Baud rate register
+    GTPR       : longword;            // USART Guard time and prescaler register
+    RTOR       : longword;            // USART Receiver Time Out register
+    RQR        : longword;            // USART Request register
+    ISR        : longword;            // USART Interrupt and status register
+    ICR        : longword;            // USART Interrupt flag Clear register
+    RDR        : word;                // USART Receive Data register
+    RESERVED1  : word;                // Reserved, 0x26
+    TDR        : word;                // USART Transmit Data register
+    RESERVED2  : word;                // Reserved, 0x2A
+  end;
+
+  TWWDG_Registers = record
+    CR         : longword;            // WWDG Control register
+    CFR        : longword;            // WWDG Configuration register
+    SR         : longword;            // WWDG Status register
+  end;
+
+const
+  FLASH_BASE   = $08000000;           // FLASH base address in the alias region
+  CCMDATARAM_BASE = $10000000;        // CCM(core coupled memory) data RAM base address in the alias region
+  SRAM_BASE    = $20000000;           // SRAM base address in the alias region
+  PERIPH_BASE  = $40000000;           // Peripheral base address in the alias region
+  FMC_BASE     = $60000000;           // FMC base address
+  FMC_R_BASE   = $A0000000;           // FMC registers base address
+  SRAM_BB_BASE = $22000000;           // SRAM base address in the bit-band region
+  PERIPH_BB_BASE = $42000000;         // Peripheral base address in the bit-band region
+  APB1PERIPH_BASE = $40000000;
+  APB2PERIPH_BASE = PERIPH_BASE + $00010000;
+  AHB1PERIPH_BASE = PERIPH_BASE + $00020000;
+  AHB2PERIPH_BASE = PERIPH_BASE + $08000000;
+  AHB3PERIPH_BASE = PERIPH_BASE + $10000000;
+  TIM2_BASE    = APB1PERIPH_BASE + $00000000;
+  TIM3_BASE    = APB1PERIPH_BASE + $00000400;
+  TIM4_BASE    = APB1PERIPH_BASE + $00000800;
+  TIM6_BASE    = APB1PERIPH_BASE + $00001000;
+  TIM7_BASE    = APB1PERIPH_BASE + $00001400;
+  RTC_BASE     = APB1PERIPH_BASE + $00002800;
+  WWDG_BASE    = APB1PERIPH_BASE + $00002C00;
+  IWDG_BASE    = APB1PERIPH_BASE + $00003000;
+  I2S2ext_BASE = APB1PERIPH_BASE + $00003400;
+  SPI2_BASE    = APB1PERIPH_BASE + $00003800;
+  SPI3_BASE    = APB1PERIPH_BASE + $00003C00;
+  I2S3ext_BASE = APB1PERIPH_BASE + $00004000;
+  USART2_BASE  = APB1PERIPH_BASE + $00004400;
+  USART3_BASE  = APB1PERIPH_BASE + $00004800;
+  UART4_BASE   = APB1PERIPH_BASE + $00004C00;
+  UART5_BASE   = APB1PERIPH_BASE + $00005000;
+  I2C1_BASE    = APB1PERIPH_BASE + $00005400;
+  I2C2_BASE    = APB1PERIPH_BASE + $00005800;
+  CAN_BASE     = APB1PERIPH_BASE + $00006400;
+  PWR_BASE     = APB1PERIPH_BASE + $00007000;
+  DAC1_BASE    = APB1PERIPH_BASE + $00007400;
+  DAC_BASE     = APB1PERIPH_BASE + $00007400;
+  I2C3_BASE    = APB1PERIPH_BASE + $00007800;
+  SYSCFG_BASE  = APB2PERIPH_BASE + $00000000;
+  COMP1_BASE   = APB2PERIPH_BASE + $0000001C;
+  COMP2_BASE   = APB2PERIPH_BASE + $00000020;
+  COMP3_BASE   = APB2PERIPH_BASE + $00000024;
+  COMP4_BASE   = APB2PERIPH_BASE + $00000028;
+  COMP5_BASE   = APB2PERIPH_BASE + $0000002C;
+  COMP6_BASE   = APB2PERIPH_BASE + $00000030;
+  COMP7_BASE   = APB2PERIPH_BASE + $00000034;
+  COMP_BASE    = APB2PERIPH_BASE + $0000001C;
+  OPAMP1_BASE  = APB2PERIPH_BASE + $00000038;
+  OPAMP2_BASE  = APB2PERIPH_BASE + $0000003C;
+  OPAMP3_BASE  = APB2PERIPH_BASE + $00000040;
+  OPAMP4_BASE  = APB2PERIPH_BASE + $00000044;
+  OPAMP_BASE   = APB2PERIPH_BASE + $00000038;
+  EXTI_BASE    = APB2PERIPH_BASE + $00000400;
+  TIM1_BASE    = APB2PERIPH_BASE + $00002C00;
+  SPI1_BASE    = APB2PERIPH_BASE + $00003000;
+  TIM8_BASE    = APB2PERIPH_BASE + $00003400;
+  USART1_BASE  = APB2PERIPH_BASE + $00003800;
+  SPI4_BASE    = APB2PERIPH_BASE + $00003C00;
+  TIM15_BASE   = APB2PERIPH_BASE + $00004000;
+  TIM16_BASE   = APB2PERIPH_BASE + $00004400;
+  TIM17_BASE   = APB2PERIPH_BASE + $00004800;
+  TIM20_BASE   = APB2PERIPH_BASE + $00005000;
+  DMA1_BASE    = AHB1PERIPH_BASE + $00000000;
+  DMA1_Channel1_BASE = AHB1PERIPH_BASE + $00000008;
+  DMA1_Channel2_BASE = AHB1PERIPH_BASE + $0000001C;
+  DMA1_Channel3_BASE = AHB1PERIPH_BASE + $00000030;
+  DMA1_Channel4_BASE = AHB1PERIPH_BASE + $00000044;
+  DMA1_Channel5_BASE = AHB1PERIPH_BASE + $00000058;
+  DMA1_Channel6_BASE = AHB1PERIPH_BASE + $0000006C;
+  DMA1_Channel7_BASE = AHB1PERIPH_BASE + $00000080;
+  DMA2_BASE    = AHB1PERIPH_BASE + $00000400;
+  DMA2_Channel1_BASE = AHB1PERIPH_BASE + $00000408;
+  DMA2_Channel2_BASE = AHB1PERIPH_BASE + $0000041C;
+  DMA2_Channel3_BASE = AHB1PERIPH_BASE + $00000430;
+  DMA2_Channel4_BASE = AHB1PERIPH_BASE + $00000444;
+  DMA2_Channel5_BASE = AHB1PERIPH_BASE + $00000458;
+  RCC_BASE     = AHB1PERIPH_BASE + $00001000;
+  FLASH_R_BASE = AHB1PERIPH_BASE + $00002000; // Flash registers base address
+  OB_BASE      = $1FFFF800;           // Flash Option Bytes base address
+  FLASHSIZE_BASE = $1FFFF7CC;         // FLASH Size register base address
+  UID_BASE     = $1FFFF7AC;           // Unique device ID register base address
+  CRC_BASE     = AHB1PERIPH_BASE + $00003000;
+  TSC_BASE     = AHB1PERIPH_BASE + $00004000;
+  GPIOA_BASE   = AHB2PERIPH_BASE + $00000000;
+  GPIOB_BASE   = AHB2PERIPH_BASE + $00000400;
+  GPIOC_BASE   = AHB2PERIPH_BASE + $00000800;
+  GPIOD_BASE   = AHB2PERIPH_BASE + $00000C00;
+  GPIOE_BASE   = AHB2PERIPH_BASE + $00001000;
+  GPIOF_BASE   = AHB2PERIPH_BASE + $00001400;
+  GPIOG_BASE   = AHB2PERIPH_BASE + $00001800;
+  GPIOH_BASE   = AHB2PERIPH_BASE + $00001C00;
+  ADC1_BASE    = AHB3PERIPH_BASE + $00000000;
+  ADC2_BASE    = AHB3PERIPH_BASE + $00000100;
+  ADC1_2_COMMON_BASE = AHB3PERIPH_BASE + $00000300;
+  ADC3_BASE    = AHB3PERIPH_BASE + $00000400;
+  ADC4_BASE    = AHB3PERIPH_BASE + $00000500;
+  ADC3_4_COMMON_BASE = AHB3PERIPH_BASE + $00000700;
+  FMC_Bank1_R_BASE = FMC_R_BASE + $0000;
+  FMC_Bank1E_R_BASE = FMC_R_BASE + $0104;
+  FMC_Bank2_3_R_BASE = FMC_R_BASE + $0060;
+  FMC_Bank4_R_BASE = FMC_R_BASE + $00A0;
+  DBGMCU_BASE  = $E0042000;           // Debug MCU registers base address
+
+var
+  TIM2         : TTIM_Registers absolute TIM2_BASE;
+  TIM3         : TTIM_Registers absolute TIM3_BASE;
+  TIM4         : TTIM_Registers absolute TIM4_BASE;
+  TIM6         : TTIM_Registers absolute TIM6_BASE;
+  TIM7         : TTIM_Registers absolute TIM7_BASE;
+  RTC          : TRTC_Registers absolute RTC_BASE;
+  WWDG         : TWWDG_Registers absolute WWDG_BASE;
+  IWDG         : TIWDG_Registers absolute IWDG_BASE;
+  I2S2ext      : TSPI_Registers absolute I2S2ext_BASE;
+  SPI2         : TSPI_Registers absolute SPI2_BASE;
+  SPI3         : TSPI_Registers absolute SPI3_BASE;
+  I2S3ext      : TSPI_Registers absolute I2S3ext_BASE;
+  USART2       : TUSART_Registers absolute USART2_BASE;
+  USART3       : TUSART_Registers absolute USART3_BASE;
+  UART4        : TUSART_Registers absolute UART4_BASE;
+  UART5        : TUSART_Registers absolute UART5_BASE;
+  I2C1         : TI2C_Registers absolute I2C1_BASE;
+  I2C2         : TI2C_Registers absolute I2C2_BASE;
+  I2C3         : TI2C_Registers absolute I2C3_BASE;
+  CAN          : TCAN_Registers absolute CAN_BASE;
+  PWR          : TPWR_Registers absolute PWR_BASE;
+  DAC          : TDAC_Registers absolute DAC_BASE;
+  DAC1         : TDAC_Registers absolute DAC1_BASE;
+  COMP1        : TCOMP_Registers absolute COMP1_BASE;
+  COMP2        : TCOMP_Registers absolute COMP2_BASE;
+  COMP12_COMMON : TCOMP_Common_Registers absolute COMP2_BASE;
+  COMP3        : TCOMP_Registers absolute COMP3_BASE;
+  COMP4        : TCOMP_Registers absolute COMP4_BASE;
+  COMP34_COMMON : TCOMP_Common_Registers absolute COMP4_BASE;
+  COMP5        : TCOMP_Registers absolute COMP5_BASE;
+  COMP6        : TCOMP_Registers absolute COMP6_BASE;
+  COMP56_COMMON : TCOMP_Common_Registers absolute COMP6_BASE;
+  COMP7        : TCOMP_Registers absolute COMP7_BASE;
+  COMP         : TCOMP_Registers absolute COMP_BASE;
+  OPAMP1       : TOPAMP_Registers absolute OPAMP1_BASE;
+  OPAMP        : TOPAMP_Registers absolute OPAMP_BASE;
+  OPAMP2       : TOPAMP_Registers absolute OPAMP2_BASE;
+  OPAMP3       : TOPAMP_Registers absolute OPAMP3_BASE;
+  OPAMP4       : TOPAMP_Registers absolute OPAMP4_BASE;
+  SYSCFG       : TSYSCFG_Registers absolute SYSCFG_BASE;
+  EXTI         : TEXTI_Registers absolute EXTI_BASE;
+  TIM1         : TTIM_Registers absolute TIM1_BASE;
+  SPI1         : TSPI_Registers absolute SPI1_BASE;
+  TIM8         : TTIM_Registers absolute TIM8_BASE;
+  USART1       : TUSART_Registers absolute USART1_BASE;
+  SPI4         : TSPI_Registers absolute SPI4_BASE;
+  TIM15        : TTIM_Registers absolute TIM15_BASE;
+  TIM16        : TTIM_Registers absolute TIM16_BASE;
+  TIM17        : TTIM_Registers absolute TIM17_BASE;
+  TIM20        : TTIM_Registers absolute TIM20_BASE;
+  DBGMCU       : TDBGMCU_Registers absolute DBGMCU_BASE;
+  DMA1         : TDMA_Registers absolute DMA1_BASE;
+  DMA1_Channel1 : TDMA_Channel_Registers absolute DMA1_Channel1_BASE;
+  DMA1_Channel2 : TDMA_Channel_Registers absolute DMA1_Channel2_BASE;
+  DMA1_Channel3 : TDMA_Channel_Registers absolute DMA1_Channel3_BASE;
+  DMA1_Channel4 : TDMA_Channel_Registers absolute DMA1_Channel4_BASE;
+  DMA1_Channel5 : TDMA_Channel_Registers absolute DMA1_Channel5_BASE;
+  DMA1_Channel6 : TDMA_Channel_Registers absolute DMA1_Channel6_BASE;
+  DMA1_Channel7 : TDMA_Channel_Registers absolute DMA1_Channel7_BASE;
+  DMA2         : TDMA_Registers absolute DMA2_BASE;
+  DMA2_Channel1 : TDMA_Channel_Registers absolute DMA2_Channel1_BASE;
+  DMA2_Channel2 : TDMA_Channel_Registers absolute DMA2_Channel2_BASE;
+  DMA2_Channel3 : TDMA_Channel_Registers absolute DMA2_Channel3_BASE;
+  DMA2_Channel4 : TDMA_Channel_Registers absolute DMA2_Channel4_BASE;
+  DMA2_Channel5 : TDMA_Channel_Registers absolute DMA2_Channel5_BASE;
+  RCC          : TRCC_Registers absolute RCC_BASE;
+  FLASH        : TFLASH_Registers absolute FLASH_R_BASE;
+  OB           : TOB_Registers absolute OB_BASE;
+  CRC          : TCRC_Registers absolute CRC_BASE;
+  TSC          : TTSC_Registers absolute TSC_BASE;
+  GPIOA        : TGPIO_Registers absolute GPIOA_BASE;
+  GPIOB        : TGPIO_Registers absolute GPIOB_BASE;
+  GPIOC        : TGPIO_Registers absolute GPIOC_BASE;
+  GPIOD        : TGPIO_Registers absolute GPIOD_BASE;
+  GPIOE        : TGPIO_Registers absolute GPIOE_BASE;
+  GPIOF        : TGPIO_Registers absolute GPIOF_BASE;
+  GPIOG        : TGPIO_Registers absolute GPIOG_BASE;
+  GPIOH        : TGPIO_Registers absolute GPIOH_BASE;
+  ADC1         : TADC_Registers absolute ADC1_BASE;
+  ADC2         : TADC_Registers absolute ADC2_BASE;
+  ADC3         : TADC_Registers absolute ADC3_BASE;
+  ADC4         : TADC_Registers absolute ADC4_BASE;
+  ADC12_COMMON : TADC_Common_Registers absolute ADC1_2_COMMON_BASE;
+  ADC34_COMMON : TADC_Common_Registers absolute ADC3_4_COMMON_BASE;
+  FMC_Bank1    : TFMC_Bank1_Registers absolute FMC_Bank1_R_BASE;
+  FMC_Bank1E   : TFMC_Bank1E_Registers absolute FMC_Bank1E_R_BASE;
+  FMC_Bank2_3  : TFMC_Bank2_3_Registers absolute FMC_Bank2_3_R_BASE;
+  FMC_Bank4    : TFMC_Bank4_Registers absolute FMC_Bank4_R_BASE;
+
+implementation
+
+procedure NonMaskableInt_interrupt; external name 'NonMaskableInt_interrupt';
+procedure HardFault_interrupt; external name 'HardFault_interrupt';
+procedure MemoryManagement_interrupt; external name 'MemoryManagement_interrupt';
+procedure BusFault_interrupt; external name 'BusFault_interrupt';
+procedure UsageFault_interrupt; external name 'UsageFault_interrupt';
+procedure SVCall_interrupt; external name 'SVCall_interrupt';
+procedure DebugMonitor_interrupt; external name 'DebugMonitor_interrupt';
+procedure PendSV_interrupt; external name 'PendSV_interrupt';
+procedure SysTick_interrupt; external name 'SysTick_interrupt';
+procedure WWDG_interrupt; external name 'WWDG_interrupt';
+procedure TAMP_STAMP_interrupt; external name 'TAMP_STAMP_interrupt';
+procedure RTC_WKUP_interrupt; external name 'RTC_WKUP_interrupt';
+procedure FLASH_interrupt; external name 'FLASH_interrupt';
+procedure RCC_interrupt; external name 'RCC_interrupt';
+procedure EXTI0_interrupt; external name 'EXTI0_interrupt';
+procedure EXTI1_interrupt; external name 'EXTI1_interrupt';
+procedure EXTI2_TSC_interrupt; external name 'EXTI2_TSC_interrupt';
+procedure EXTI3_interrupt; external name 'EXTI3_interrupt';
+procedure EXTI4_interrupt; external name 'EXTI4_interrupt';
+procedure DMA1_Channel1_interrupt; external name 'DMA1_Channel1_interrupt';
+procedure DMA1_Channel2_interrupt; external name 'DMA1_Channel2_interrupt';
+procedure DMA1_Channel3_interrupt; external name 'DMA1_Channel3_interrupt';
+procedure DMA1_Channel4_interrupt; external name 'DMA1_Channel4_interrupt';
+procedure DMA1_Channel5_interrupt; external name 'DMA1_Channel5_interrupt';
+procedure DMA1_Channel6_interrupt; external name 'DMA1_Channel6_interrupt';
+procedure DMA1_Channel7_interrupt; external name 'DMA1_Channel7_interrupt';
+procedure ADC1_2_interrupt; external name 'ADC1_2_interrupt';
+procedure CAN_TX_interrupt; external name 'CAN_TX_interrupt';
+procedure CAN_RX0_interrupt; external name 'CAN_RX0_interrupt';
+procedure CAN_RX1_interrupt; external name 'CAN_RX1_interrupt';
+procedure CAN_SCE_interrupt; external name 'CAN_SCE_interrupt';
+procedure EXTI9_5_interrupt; external name 'EXTI9_5_interrupt';
+procedure TIM1_BRK_TIM15_interrupt; external name 'TIM1_BRK_TIM15_interrupt';
+procedure TIM1_UP_TIM16_interrupt; external name 'TIM1_UP_TIM16_interrupt';
+procedure TIM1_TRG_COM_TIM17_interrupt; external name 'TIM1_TRG_COM_TIM17_interrupt';
+procedure TIM1_CC_interrupt; external name 'TIM1_CC_interrupt';
+procedure TIM2_interrupt; external name 'TIM2_interrupt';
+procedure TIM3_interrupt; external name 'TIM3_interrupt';
+procedure TIM4_interrupt; external name 'TIM4_interrupt';
+procedure I2C1_EV_interrupt; external name 'I2C1_EV_interrupt';
+procedure I2C1_ER_interrupt; external name 'I2C1_ER_interrupt';
+procedure I2C2_EV_interrupt; external name 'I2C2_EV_interrupt';
+procedure I2C2_ER_interrupt; external name 'I2C2_ER_interrupt';
+procedure SPI1_interrupt; external name 'SPI1_interrupt';
+procedure SPI2_interrupt; external name 'SPI2_interrupt';
+procedure USART1_interrupt; external name 'USART1_interrupt';
+procedure USART2_interrupt; external name 'USART2_interrupt';
+procedure USART3_interrupt; external name 'USART3_interrupt';
+procedure EXTI15_10_interrupt; external name 'EXTI15_10_interrupt';
+procedure RTC_Alarm_interrupt; external name 'RTC_Alarm_interrupt';
+procedure TIM8_BRK_interrupt; external name 'TIM8_BRK_interrupt';
+procedure TIM8_UP_interrupt; external name 'TIM8_UP_interrupt';
+procedure TIM8_TRG_COM_interrupt; external name 'TIM8_TRG_COM_interrupt';
+procedure TIM8_CC_interrupt; external name 'TIM8_CC_interrupt';
+procedure ADC3_interrupt; external name 'ADC3_interrupt';
+procedure FMC_interrupt; external name 'FMC_interrupt';
+procedure SPI3_interrupt; external name 'SPI3_interrupt';
+procedure UART4_interrupt; external name 'UART4_interrupt';
+procedure UART5_interrupt; external name 'UART5_interrupt';
+procedure TIM6_DAC_interrupt; external name 'TIM6_DAC_interrupt';
+procedure TIM7_interrupt; external name 'TIM7_interrupt';
+procedure DMA2_Channel1_interrupt; external name 'DMA2_Channel1_interrupt';
+procedure DMA2_Channel2_interrupt; external name 'DMA2_Channel2_interrupt';
+procedure DMA2_Channel3_interrupt; external name 'DMA2_Channel3_interrupt';
+procedure DMA2_Channel4_interrupt; external name 'DMA2_Channel4_interrupt';
+procedure DMA2_Channel5_interrupt; external name 'DMA2_Channel5_interrupt';
+procedure ADC4_interrupt; external name 'ADC4_interrupt';
+procedure COMP1_2_3_interrupt; external name 'COMP1_2_3_interrupt';
+procedure COMP4_5_6_interrupt; external name 'COMP4_5_6_interrupt';
+procedure COMP7_interrupt; external name 'COMP7_interrupt';
+procedure I2C3_EV_interrupt; external name 'I2C3_EV_interrupt';
+procedure I2C3_ER_interrupt; external name 'I2C3_ER_interrupt';
+procedure TIM20_BRK_interrupt; external name 'TIM20_BRK_interrupt';
+procedure TIM20_UP_interrupt; external name 'TIM20_UP_interrupt';
+procedure TIM20_TRG_COM_interrupt; external name 'TIM20_TRG_COM_interrupt';
+procedure TIM20_CC_interrupt; external name 'TIM20_CC_interrupt';
+procedure FPU_interrupt; external name 'FPU_interrupt';
+procedure SPI4_interrupt; external name 'SPI4_interrupt';
+
+{$i cortexm4f_start.inc}
+
+procedure Vectors; assembler; nostackframe;
+label interrupt_vectors;
+asm
+  .section ".init.interrupt_vectors"
+  interrupt_vectors:
+  .long _stack_top
+  .long Startup
+  .long NonMaskableInt_interrupt
+  .long HardFault_interrupt
+  .long MemoryManagement_interrupt
+  .long BusFault_interrupt
+  .long UsageFault_interrupt
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long SVCall_interrupt
+  .long DebugMonitor_interrupt
+  .long 0
+  .long PendSV_interrupt
+  .long SysTick_interrupt
+  .long WWDG_interrupt
+  .long 0
+  .long TAMP_STAMP_interrupt
+  .long RTC_WKUP_interrupt
+  .long FLASH_interrupt
+  .long RCC_interrupt
+  .long EXTI0_interrupt
+  .long EXTI1_interrupt
+  .long EXTI2_TSC_interrupt
+  .long EXTI3_interrupt
+  .long EXTI4_interrupt
+  .long DMA1_Channel1_interrupt
+  .long DMA1_Channel2_interrupt
+  .long DMA1_Channel3_interrupt
+  .long DMA1_Channel4_interrupt
+  .long DMA1_Channel5_interrupt
+  .long DMA1_Channel6_interrupt
+  .long DMA1_Channel7_interrupt
+  .long ADC1_2_interrupt
+  .long CAN_TX_interrupt
+  .long CAN_RX0_interrupt
+  .long CAN_RX1_interrupt
+  .long CAN_SCE_interrupt
+  .long EXTI9_5_interrupt
+  .long TIM1_BRK_TIM15_interrupt
+  .long TIM1_UP_TIM16_interrupt
+  .long TIM1_TRG_COM_TIM17_interrupt
+  .long TIM1_CC_interrupt
+  .long TIM2_interrupt
+  .long TIM3_interrupt
+  .long TIM4_interrupt
+  .long I2C1_EV_interrupt
+  .long I2C1_ER_interrupt
+  .long I2C2_EV_interrupt
+  .long I2C2_ER_interrupt
+  .long SPI1_interrupt
+  .long SPI2_interrupt
+  .long USART1_interrupt
+  .long USART2_interrupt
+  .long USART3_interrupt
+  .long EXTI15_10_interrupt
+  .long RTC_Alarm_interrupt
+  .long 0
+  .long TIM8_BRK_interrupt
+  .long TIM8_UP_interrupt
+  .long TIM8_TRG_COM_interrupt
+  .long TIM8_CC_interrupt
+  .long ADC3_interrupt
+  .long FMC_interrupt
+  .long 0
+  .long 0
+  .long SPI3_interrupt
+  .long UART4_interrupt
+  .long UART5_interrupt
+  .long TIM6_DAC_interrupt
+  .long TIM7_interrupt
+  .long DMA2_Channel1_interrupt
+  .long DMA2_Channel2_interrupt
+  .long DMA2_Channel3_interrupt
+  .long DMA2_Channel4_interrupt
+  .long DMA2_Channel5_interrupt
+  .long ADC4_interrupt
+  .long 0
+  .long 0
+  .long COMP1_2_3_interrupt
+  .long COMP4_5_6_interrupt
+  .long COMP7_interrupt
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long 0
+  .long I2C3_EV_interrupt
+  .long I2C3_ER_interrupt
+  .long 0
+  .long 0
+  .long 0
+  .long TIM20_BRK_interrupt
+  .long TIM20_UP_interrupt
+  .long TIM20_TRG_COM_interrupt
+  .long TIM20_CC_interrupt
+  .long FPU_interrupt
+  .long 0
+  .long 0
+  .long SPI4_interrupt
+  .weak NonMaskableInt_interrupt
+  .weak HardFault_interrupt
+  .weak MemoryManagement_interrupt
+  .weak BusFault_interrupt
+  .weak UsageFault_interrupt
+  .weak SVCall_interrupt
+  .weak DebugMonitor_interrupt
+  .weak PendSV_interrupt
+  .weak SysTick_interrupt
+  .weak WWDG_interrupt
+  .weak TAMP_STAMP_interrupt
+  .weak RTC_WKUP_interrupt
+  .weak FLASH_interrupt
+  .weak RCC_interrupt
+  .weak EXTI0_interrupt
+  .weak EXTI1_interrupt
+  .weak EXTI2_TSC_interrupt
+  .weak EXTI3_interrupt
+  .weak EXTI4_interrupt
+  .weak DMA1_Channel1_interrupt
+  .weak DMA1_Channel2_interrupt
+  .weak DMA1_Channel3_interrupt
+  .weak DMA1_Channel4_interrupt
+  .weak DMA1_Channel5_interrupt
+  .weak DMA1_Channel6_interrupt
+  .weak DMA1_Channel7_interrupt
+  .weak ADC1_2_interrupt
+  .weak CAN_TX_interrupt
+  .weak CAN_RX0_interrupt
+  .weak CAN_RX1_interrupt
+  .weak CAN_SCE_interrupt
+  .weak EXTI9_5_interrupt
+  .weak TIM1_BRK_TIM15_interrupt
+  .weak TIM1_UP_TIM16_interrupt
+  .weak TIM1_TRG_COM_TIM17_interrupt
+  .weak TIM1_CC_interrupt
+  .weak TIM2_interrupt
+  .weak TIM3_interrupt
+  .weak TIM4_interrupt
+  .weak I2C1_EV_interrupt
+  .weak I2C1_ER_interrupt
+  .weak I2C2_EV_interrupt
+  .weak I2C2_ER_interrupt
+  .weak SPI1_interrupt
+  .weak SPI2_interrupt
+  .weak USART1_interrupt
+  .weak USART2_interrupt
+  .weak USART3_interrupt
+  .weak EXTI15_10_interrupt
+  .weak RTC_Alarm_interrupt
+  .weak TIM8_BRK_interrupt
+  .weak TIM8_UP_interrupt
+  .weak TIM8_TRG_COM_interrupt
+  .weak TIM8_CC_interrupt
+  .weak ADC3_interrupt
+  .weak FMC_interrupt
+  .weak SPI3_interrupt
+  .weak UART4_interrupt
+  .weak UART5_interrupt
+  .weak TIM6_DAC_interrupt
+  .weak TIM7_interrupt
+  .weak DMA2_Channel1_interrupt
+  .weak DMA2_Channel2_interrupt
+  .weak DMA2_Channel3_interrupt
+  .weak DMA2_Channel4_interrupt
+  .weak DMA2_Channel5_interrupt
+  .weak ADC4_interrupt
+  .weak COMP1_2_3_interrupt
+  .weak COMP4_5_6_interrupt
+  .weak COMP7_interrupt
+  .weak I2C3_EV_interrupt
+  .weak I2C3_ER_interrupt
+  .weak TIM20_BRK_interrupt
+  .weak TIM20_UP_interrupt
+  .weak TIM20_TRG_COM_interrupt
+  .weak TIM20_CC_interrupt
+  .weak FPU_interrupt
+  .weak SPI4_interrupt
+  .set NonMaskableInt_interrupt, HaltProc
+  .set HardFault_interrupt, HaltProc
+  .set MemoryManagement_interrupt, HaltProc
+  .set BusFault_interrupt, HaltProc
+  .set UsageFault_interrupt, HaltProc
+  .set SVCall_interrupt, HaltProc
+  .set DebugMonitor_interrupt, HaltProc
+  .set PendSV_interrupt, HaltProc
+  .set SysTick_interrupt, HaltProc
+  .set WWDG_interrupt, HaltProc
+  .set TAMP_STAMP_interrupt, HaltProc
+  .set RTC_WKUP_interrupt, HaltProc
+  .set FLASH_interrupt, HaltProc
+  .set RCC_interrupt, HaltProc
+  .set EXTI0_interrupt, HaltProc
+  .set EXTI1_interrupt, HaltProc
+  .set EXTI2_TSC_interrupt, HaltProc
+  .set EXTI3_interrupt, HaltProc
+  .set EXTI4_interrupt, HaltProc
+  .set DMA1_Channel1_interrupt, HaltProc
+  .set DMA1_Channel2_interrupt, HaltProc
+  .set DMA1_Channel3_interrupt, HaltProc
+  .set DMA1_Channel4_interrupt, HaltProc
+  .set DMA1_Channel5_interrupt, HaltProc
+  .set DMA1_Channel6_interrupt, HaltProc
+  .set DMA1_Channel7_interrupt, HaltProc
+  .set ADC1_2_interrupt, HaltProc
+  .set CAN_TX_interrupt, HaltProc
+  .set CAN_RX0_interrupt, HaltProc
+  .set CAN_RX1_interrupt, HaltProc
+  .set CAN_SCE_interrupt, HaltProc
+  .set EXTI9_5_interrupt, HaltProc
+  .set TIM1_BRK_TIM15_interrupt, HaltProc
+  .set TIM1_UP_TIM16_interrupt, HaltProc
+  .set TIM1_TRG_COM_TIM17_interrupt, HaltProc
+  .set TIM1_CC_interrupt, HaltProc
+  .set TIM2_interrupt, HaltProc
+  .set TIM3_interrupt, HaltProc
+  .set TIM4_interrupt, HaltProc
+  .set I2C1_EV_interrupt, HaltProc
+  .set I2C1_ER_interrupt, HaltProc
+  .set I2C2_EV_interrupt, HaltProc
+  .set I2C2_ER_interrupt, HaltProc
+  .set SPI1_interrupt, HaltProc
+  .set SPI2_interrupt, HaltProc
+  .set USART1_interrupt, HaltProc
+  .set USART2_interrupt, HaltProc
+  .set USART3_interrupt, HaltProc
+  .set EXTI15_10_interrupt, HaltProc
+  .set RTC_Alarm_interrupt, HaltProc
+  .set TIM8_BRK_interrupt, HaltProc
+  .set TIM8_UP_interrupt, HaltProc
+  .set TIM8_TRG_COM_interrupt, HaltProc
+  .set TIM8_CC_interrupt, HaltProc
+  .set ADC3_interrupt, HaltProc
+  .set FMC_interrupt, HaltProc
+  .set SPI3_interrupt, HaltProc
+  .set UART4_interrupt, HaltProc
+  .set UART5_interrupt, HaltProc
+  .set TIM6_DAC_interrupt, HaltProc
+  .set TIM7_interrupt, HaltProc
+  .set DMA2_Channel1_interrupt, HaltProc
+  .set DMA2_Channel2_interrupt, HaltProc
+  .set DMA2_Channel3_interrupt, HaltProc
+  .set DMA2_Channel4_interrupt, HaltProc
+  .set DMA2_Channel5_interrupt, HaltProc
+  .set ADC4_interrupt, HaltProc
+  .set COMP1_2_3_interrupt, HaltProc
+  .set COMP4_5_6_interrupt, HaltProc
+  .set COMP7_interrupt, HaltProc
+  .set I2C3_EV_interrupt, HaltProc
+  .set I2C3_ER_interrupt, HaltProc
+  .set TIM20_BRK_interrupt, HaltProc
+  .set TIM20_UP_interrupt, HaltProc
+  .set TIM20_TRG_COM_interrupt, HaltProc
+  .set TIM20_CC_interrupt, HaltProc
+  .set FPU_interrupt, HaltProc
+  .set SPI4_interrupt, HaltProc
+  .text
+end;
+end.
